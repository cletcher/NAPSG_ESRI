// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("require dojo dijit dojo/_base/declare dijit/_editor/_Plugin dijit/form/DropDownButton".split(" "),function(h,f,k,l,m,n){f.experimental("dijit.editor.plugins.EditorTextColor");var g=l("dijit.editor.plugins.EditorTextColor",m,{buttonClass:n,colorPicker:"jimu/dijit/ColorPalette",useDefaultCommand:!1,_initButton:function(){this.command="editorTextColor";this.hackCommand="foreColor";this.inherited(arguments);var b="",c=!1;this.params.custom&&(this.params.custom.recordUID&&(b=this.params.custom.recordUID),
this.params.custom.forceAttr&&(c=this.params.custom.forceAttr));var a=this;this.button.set("iconClass",this.iconClassPrefix+" "+this.iconClassPrefix+"ForeColor");this.button.set("title",this.getLabel(this.hackCommand));this.button.loadDropDown=function(e){function d(d){a.button.dropDown=new d({dir:a.editor.dir,ownerDocument:a.editor.ownerDocument,value:a.value,appearance:{showTransparent:!1,showColorPalette:!0,showCoustom:!0,showColorPickerApply:!1,showCoustomRecord:!0},recordUID:b,onChange:function(b){a.editor.execCommand("useCSS",
c);a.editor.execCommand("styleWithCSS",!c);a.editor.execCommand(a.hackCommand,b)},onClose:function(){a.button.closeDropDown()}});e()}"string"===typeof a.colorPicker?h([a.colorPicker],d):d(a.colorPicker)}},updateState:function(){var b=this.editor,c=this.hackCommand;if(b&&b.isLoaded&&c.length){var a;if(this.button){var e=this.get("disabled");this.button.set("disabled",e);if(e)return;try{a=b.queryCommandValue(c)||""}catch(d){a=""}}""===a?a="#000000":"transparent"===a&&(a="rgba(0, 0, 0, 0)");this.value=
a;(b=this.button.dropDown)&&b.getColor&&a!==b.getColor()&&(b.refreshRecords(),b.setColor(a))}}});f.subscribe(k._scopeName+".Editor.getPlugin",null,function(b){if(!b.plugin)switch(b.args.name){case "editorTextColor":b.plugin=new g}});return g});