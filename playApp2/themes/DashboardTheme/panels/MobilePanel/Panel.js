// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:themes/DashboardTheme/panels/MobilePanel/Panel.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"map-area" data-dojo-attach-point\x3d"mapNode"\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"splitter" data-dojo-attach-point\x3d"splitterNode"\x3e\r\n    \x3cdiv class\x3d"splitter_handler" data-dojo-attach-point\x3d"splitterHandler"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"widget-area" data-dojo-attach-point\x3d"widgetContainerNode"\x3e\r\n    \x3cdiv class\x3d"panel-content" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"panel-header"\x3e\r\n      \x3cdiv class\x3d"previous-arrow jimu-float-leading jimu-leading-margin1" data-dojo-attach-point\x3d"previousArrow"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"next-arrow  jimu-float-trailing jimu-trailing-margin1" data-dojo-attach-point\x3d"nextArrow"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"label" data-dojo-attach-point\x3d"labelNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"panel-footer" data-dojo-attach-point\x3d"footerNode"\x3e\r\n      \x3cdiv class\x3d"count jimu-float-trailing jimu-trailing-margin2" data-dojo-attach-point\x3d"countNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on dojo/Deferred dojo/query dojo/debounce dojo/Evented dojo/dnd/move dojo/_base/fx dojo/fx dijit/_TemplatedMixin dojo/text!./Panel.html".split(" "),function(y,n,z,A,u,q,c,t,v,x,B,C,D,E,g,w,F,G){return y([A,F,D],{baseClass:"jimu-dnd-mobile-panel",templateString:G,mobileLayout:1,layoutId:"",mapId:"",widgetIds:null,panels:null,currentIndex:0,leftPos:0,
count:"",title:"",widgetMode:0,layoutManager:null,_moveStartX:0,_moveStartY:0,postCreate:function(){this.inherited(arguments);this.setMobileLayout(this.mobileLayout);u.place(this.mapId,this.mapNode);this.own(v(this.previousArrow,"click",n.hitch(this,this._switchPrevious)));this.own(v(this.nextArrow,"click",n.hitch(this,this._switchNext)));this._initSplitter();c.set(this.footerNode,"opacity","0");this.resize()},clearPanels:function(){this.widgetIds=[];this.panels=[];u.empty(this.containerNode);c.set(this.containerNode,
"left",0);this.currentIndex=0;this._updateHeader(this.currentIndex-1,this.currentIndex)},setPanels:function(a,b){this.widgetIds=a;this.panels=b||{};this.currentIndex=0;1>=this.widgetIds.length?(c.set(this.previousArrow,"display","none"),c.set(this.nextArrow,"display","none")):(c.set(this.previousArrow,"display","block"),c.set(this.nextArrow,"display","block"));c.set(this.footerNode,"opacity","0");this._openPanel();this._updateHeader(this.currentIndex-1,this.currentIndex)},_resizeActivePanel:function(){if(this.widgetIds&&
this.panels){var a=this.panels[this.widgetIds[this.currentIndex]];a&&"function"===typeof a.resize&&a.resize()}},_openPanel:function(){var a=this.widgetIds[this.currentIndex],b=this.panels[a],d;if(b&&b.domNode){if(0===B('div[data-widgetId\x3d"'+a+'"]',this.containerNode).length){var l=u.create("div",{"data-widgetId":a,"class":"dnd-mobile-container"},this.containerNode);b.placeAt(l)}this.layoutManager.panelManager.openPanel(b)}else this.layoutManager._loadDashboardWidget(this.widgetIds[this.currentIndex]).then(n.hitch(this,
function(b){if(b){var d=u.create("div",{"data-widgetId":a,"class":"dnd-mobile-container"},this.containerNode);b.placeAt(d);this.panels[a]=b;this.layoutManager.panelManager.openPanel(b);this.labelNode.innerHTML=b.config.label}}));z.forEach(this.widgetIds,n.hitch(this,function(b){b!==a&&(d=this.panels[b])&&this.layoutManager.panelManager.closePanel(d)}))},_initSplitter:function(){this.moveable&&this.moveable.destroy();this.moveable=new E.parentConstrainedMoveable(this.splitterNode,{area:"content",within:!0});
this.own(v(this.moveable,"MoveStart",n.hitch(this,this.onMoveStart)));this.own(v(this.moveable,"Moving",C(n.hitch(this,this.onMoving),50)));this.own(v(this.moveable,"MoveStop",n.hitch(this,this.onMoveStop)))},destroy:function(){this.moveable&&(this.moveable.destroy(),this.moveable=null);var a=this.panels[this.widgetIds[this.currentIndex]];a&&this.layoutManager.panelManager.closePanel(a);u.empty(this.containerNode);this.inherited(arguments)},setMobileLayout:function(a){2===a?(this.mobileLayout=2,t.remove(this.domNode,
"portrait"),t.add(this.domNode,"landscape")):(this.mobileLayout=1,t.remove(this.domNode,"landscape"),t.add(this.domNode,"portrait"))},resize:function(){(2===this.mobileLayout?this._restoreLandscapeLayout():this._restorePortraitLayout()).then(n.hitch(this,function(){if(this.domNode){var a=q.getMarginBox(this.widgetContainerNode);window.isRTL?this.emit("resized",{right:a.l,top:a.t,width:a.w,height:a.h}):this.emit("resized",{left:a.l,top:a.t,width:a.w,height:a.h})}}))},_updateHeader:function(a,b){if(this.widgetIds&&
0<this.widgetIds.length){var d=this.widgetIds[b],l=this.widgetIds[a],f=this.panels[d],e=this.panels[l];this.countNode.innerHTML=b+1+"/"+this.widgetIds.length;a&&e&&(a=e.getWidgetById(l),a.onDeActive());if(f){if(d=f.getWidgetById(d))d.onActive(),this.labelNode.innerHTML=d.label}else this.labelNode.innerHTML=""}else this.labelNode.innerHTML="",this.countNode.innerHTML="";0===b?t.add(this.previousArrow,"disabled"):t.remove(this.previousArrow,"disabled");b===this.widgetIds.length-1?t.add(this.nextArrow,
"disabled"):t.remove(this.nextArrow,"disabled")},_switchPrevious:function(){0<this.currentIndex&&(this._updateHeader(this.currentIndex,this.currentIndex-1),this.currentIndex--,this._play())},_switchNext:function(){this.currentIndex<this.widgetIds.length-1&&(this._updateHeader(this.currentIndex,this.currentIndex+1),this.currentIndex++,this._play())},_play:function(){var a=q.getMarginBox(this.containerNode);g.animateProperty({node:this.containerNode,duration:300,properties:window.isRTL?{right:-this.currentIndex*
a.w}:{left:-this.currentIndex*a.w},onEnd:n.hitch(this,function(){c.set(this.footerNode,"opacity","1");g.animateProperty({node:this.footerNode,duration:2100,properties:{opacity:0}}).play()})}).play();this._openPanel()},onMoveStart:function(a){if(window.isRTL){var b=q.getMarginBox(this.layoutId),d=parseFloat(c.get(a.node,"right"));this._moveStartX=b.w-d;c.set(this.splitterNode,{left:this._moveStartX+"px",right:"auto"})}else this._moveStartX=c.get(a.node,"left");this._moveStartY=c.get(a.node,"top")},
onMoving:function(a){if(a&&a.node){var b=c.get(a.node,"left")-this._moveStartX;a=c.get(a.node,"top")-this._moveStartY;1===this.mobileLayout?(c.set(this.widgetContainerNode,"top",this._moveStartY+a+16+"px"),c.set(this.splitterNode,"top",this._moveStartY+a+"px"),c.set(this.splitterNode,"left","0")):2===this.mobileLayout&&(c.set(this.widgetContainerNode,{left:this._moveStartX+b+16+"px",right:"auto"}),c.set(this.splitterNode,{left:this._moveStartX+b+"px",right:"auto",top:0}))}},onMoveStop:function(a){var b=
c.get(a.node,"left")-this._moveStartX;a=c.get(a.node,"top")-this._moveStartY;1===this.mobileLayout?this._resizeWidgetVertically(a):2===this.mobileLayout&&this._resizeWidgetHorizontally(b)},_resizeWidgetVertically:function(a){var b=q.getMarginBox(this.layoutId),d=q.getMarginBox(this.containerNode).h/3,l=!1,f=[],d=150<d?150:d,e,c,k,h;if(0===this.widgetMode&&a<-d)this.widgetMode=2,e=0,c=.5*-b.h,k=.5*b.h,h=b.h-16,l=!0,this.emit("resized",{left:0,top:e+16,width:b.w,height:h});else if(0===this.widgetMode&&
a>d)this.widgetMode=1,e=b.h-16,k=b.h-16,c=0,h=.5*b.h-16,l=!0,this.emit("resized",{left:0,top:e+16,width:b.w,height:h});else if(1===this.widgetMode&&a<-d||2===this.widgetMode&&a>d)this.widgetMode=0,e=.5*b.h,k=.5*b.h,c=0,h=.5*b.h-16,l=!0,this.emit("resized",{left:0,top:e+16,width:b.w,height:h});l?(f.push(g.animateProperty({node:this.widgetContainerNode,duration:300,properties:{top:e+16,height:h}})),f.push(g.animateProperty({node:this.containerNode,duration:300,properties:{left:-this.currentIndex*b.w,
width:b.w}})),f.push(g.animateProperty({node:this.splitterNode,duration:300,properties:{top:e}})),f.push(g.animateProperty({node:this.mapNode,duration:300,properties:{height:k,top:c}})),a=w.combine(f),a.onEnd=n.hitch(this,this._resizeActivePanel),a.play()):this._restorePortraitLayout()},_resizeWidgetHorizontally:function(a){var b=q.getMarginBox(this.layoutId),d=q.getMarginBox(this.containerNode).w/3,l=!1,f=[],d=150<d?150:d,e,c,k,h,p,m;if(window.isRTL){if(0===this.widgetMode&&a>d)this.widgetMode=2,
k=0,p=b.w-320-16,h=-p,m=b.w-16,l=!0,this.emit("resized",{left:k+16,right:"auto",top:0,width:m,height:b.h});else if(0===this.widgetMode&&a<-d)this.widgetMode=1,k=p=b.w-16,h=0,m=320,l=!0,this.emit("resized",{left:k+16,right:"auto",top:0,width:m,height:b.h});else if(1===this.widgetMode&&a>d||2===this.widgetMode&&a<-d)this.widgetMode=0,k=p=b.w-320-16,h=0,m=320,l=!0,this.emit("resized",{left:k+16,right:"auto",top:0,width:m,height:b.h});l?(f.push(g.animateProperty({node:this.widgetContainerNode,duration:300,
properties:{left:"auto",right:k+16,width:m}})),f.push(g.animateProperty({node:this.containerNode,duration:300,properties:{left:"auto",right:-this.currentIndex*m,width:m}})),f.push(g.animateProperty({node:this.splitterNode,duration:300,properties:{left:"auto",right:k}})),f.push(g.animateProperty({node:this.mapNode,duration:300,properties:{left:"auto",width:p,right:h}})),a=w.combine(f),a.onEnd=n.hitch(this,this._resizeActivePanel),a.play()):this._restoreLandscapeLayout()}else{if(0===this.widgetMode&&
a<-d)this.widgetMode=2,e=0,p=b.w-320-16,c=-p,m=b.w-16,l=!0,this.emit("resized",{left:e+16,top:0,width:m,height:b.h});else if(0===this.widgetMode&&a>d)this.widgetMode=1,e=p=b.w-16,c=0,m=320,l=!0,this.emit("resized",{left:e+16,top:0,width:m,height:b.h});else if(1===this.widgetMode&&a<-d||2===this.widgetMode&&a>d)this.widgetMode=0,e=p=b.w-320-16,c=0,m=320,l=!0,this.emit("resized",{left:e+16,top:0,width:m,height:b.h});l?(f.push(g.animateProperty({node:this.widgetContainerNode,duration:300,properties:{left:e+
16,width:m}})),f.push(g.animateProperty({node:this.containerNode,duration:300,properties:{left:-this.currentIndex*m,width:m}})),f.push(g.animateProperty({node:this.splitterNode,duration:300,properties:{left:e}})),f.push(g.animateProperty({node:this.mapNode,duration:300,properties:{width:p,left:c}})),a=w.combine(f),a.onEnd=n.hitch(this,this._resizeActivePanel),a.play()):this._restoreLandscapeLayout()}},_restorePortraitLayout:function(){var a=q.getMarginBox(this.layoutId),b=[],d=new x,c,f,e,r;0===this.widgetMode?
(c=.5*a.h,e=.5*a.h,f=0,r=a.h-e-16):2===this.widgetMode?(c=0,f=.5*-a.h,e=.5*a.h,r=a.h-16):1===this.widgetMode&&(c=a.h-16,e=a.h-16,f=0,r=.5*a.h-16);b.push(g.animateProperty({node:this.widgetContainerNode,duration:300,properties:{left:0,right:0,top:c+16,height:r,width:a.w}}));b.push(g.animateProperty({node:this.containerNode,duration:300,properties:window.isRTL?{right:-this.currentIndex*a.w,width:a.w}:{left:-this.currentIndex*a.w,width:a.w}}));b.push(g.animateProperty({node:this.splitterNode,duration:300,
properties:{top:c,left:0,right:0,width:a.w,height:16}}));b.push(g.animateProperty({node:this.mapNode,duration:300,properties:{height:e,width:a.w,top:f,left:0,right:0}}));a=w.combine(b);a.onEnd=n.hitch(this,function(){this._resizeActivePanel();d.resolve()});a.play();return d},_restoreLandscapeLayout:function(){var a=q.getMarginBox(this.layoutId),b=[],d=new x,c,f,e,r,k,h;window.isRTL?(0===this.widgetMode?(e=k=a.w-320-16,r=0,h=320):2===this.widgetMode?(e=0,k=a.w-320-16,r=-k,h=a.w-16):1===this.widgetMode&&
(e=k=a.w-16,r=0,h=320),b.push(g.animateProperty({node:this.widgetContainerNode,duration:300,properties:{top:0,right:e+16,width:h,height:a.h}})),b.push(g.animateProperty({node:this.containerNode,duration:300,properties:{right:-this.currentIndex*h,width:h}})),b.push(g.animateProperty({node:this.splitterNode,duration:300,properties:{right:e,top:0,height:a.h,width:16}})),b.push(g.animateProperty({node:this.mapNode,duration:300,properties:{width:k,height:a.h,right:r,top:0}}))):(0===this.widgetMode?(c=
k=a.w-320-16,f=0,h=320):2===this.widgetMode?(c=0,k=a.w-320-16,f=-k,h=a.w-16):1===this.widgetMode&&(c=k=a.w-16,f=0,h=320),b.push(g.animateProperty({node:this.widgetContainerNode,duration:300,properties:{top:0,left:c+16,width:h,height:a.h}})),b.push(g.animateProperty({node:this.containerNode,duration:300,properties:{left:-this.currentIndex*h,width:h}})),b.push(g.animateProperty({node:this.splitterNode,duration:300,properties:{left:c,top:0,height:a.h,width:16}})),b.push(g.animateProperty({node:this.mapNode,
duration:300,properties:{width:k,height:a.h,left:f,top:0}})));a=w.combine(b);a.onEnd=n.hitch(this,function(){this._resizeActivePanel();d.resolve()});a.play();return d}})});