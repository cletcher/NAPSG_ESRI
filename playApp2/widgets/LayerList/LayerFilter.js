// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/LayerList/LayerFilter.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"search-input-node invalid" data-dojo-attach-point\x3d"searchInputNode"\x3e\r\n    \x3cdiv class\x3d"clear-input-button disable" tabindex\x3d"0" role\x3d"button" aria-label\x3d\'${nls.tipClearText}\' data-dojo-attach-point\x3d"clearInputButton" data-dojo-attach-event\x3d"click:_onClearInputButton"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"search-button" data-dojo-attach-point\x3d"searchButton" role\x3d"button" tabindex\x3d"0" data-dojo-attach-event\x3d"click:_onSearchBtnClick"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"cancel-button invalid" data-dojo-attach-point\x3d"cancelButton" role\x3d"button" tabindex\x3d"0" data-dojo-attach-event\x3d"click:_onCancelBtnClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\x3c/div\x3e\r\n'}});
define("dijit/_WidgetBase dojo/_base/declare dojo/_base/lang dijit/_TemplatedMixin dojo/text!./LayerFilter.html dojo/dom dojo/on dojo/keys dojo/dom-class dijit/focus jimu/utils jimu/dijit/Search".split(" "),function(g,h,d,k,l,m,f,c,b,e,n,p){return h([g,k],{templateString:l,baseClass:"layer-filter",layerFilterInput:null,isValid:!1,layerListWidget:null,layerInfoIsValidStatus:null,layerInfoIsExpandStatus:null,postMixInProperties:function(){this.inherited(arguments);this.nls=d.mixin(d.clone(this.layerListWidget.nls),
window.jimuNls.common)},constructor:function(){this.layerInfoIsValidStatus={};this.layerInfoIsExpandStatus={}},startup:function(){this.layerFilterInput=(new p({placeholder:this.nls.typeAKeywork,onSearch:d.hitch(this,this._onFilter),searchWhenInput:!0})).placeAt(this.searchInputNode);m.setSelectable(this.cancelButton,!1);this.own(f(this.searchButton,"keydown",d.hitch(this,"_onSearchButtonKey")));this.own(f(this.layerFilterInput.inputSearch,"keydown",d.hitch(this,"_onLayerFilterInputKey")));this.own(f(this.clearInputButton,
"keydown",d.hitch(this,"_onClearInputButtonKey")));this.own(f(this.cancelButton,"keydown",d.hitch(this,"_onCancelButtonKey")))},_updateLayerInfoStatus:function(a){this.layerInfoIsValidStatus={};this.layerInfoIsExpandStatus={};this.layerListWidget.operLayerInfos.traversalAll(d.hitch(this,function(c){if(a){var b;if(0<=c.title.toLowerCase().indexOf(a.toLowerCase()))for(b=c;b;)this.layerInfoIsValidStatus[b.id]=!0,(b=b.parentLayerInfo)&&(this.layerInfoIsExpandStatus[b.id]=!0);else for(b=c.parentLayerInfo;b;){if(0<=
b.title.toLowerCase().indexOf(a.toLowerCase())){this.layerInfoIsValidStatus[c.id]=!0;break}b=b.parentLayerInfo}}else this.layerInfoIsValidStatus[c.id]=!0}))},isValidLayerInfo:function(a){return!this.isValid||this.layerInfoIsValidStatus[a.id]},isExpanded:function(a){return this.isValid&&this.layerInfoIsExpandStatus[a.id]},cancelFilter:function(){this.isValid=!1;this.layerFilterInput.inputSearch.value&&(this.layerFilterInput.inputSearch.value="",this.layerListWidget._refresh());b.remove(this.searchButton,
"invalid");b.add(this.searchInputNode,"invalid");b.add(this.cancelButton,"invalid");e.focus(this.searchButton)},_onFilter:function(a){a?b.remove(this.clearInputButton,"disable"):b.add(this.clearInputButton,"disable");this._updateLayerInfoStatus(a);this.layerListWidget._refresh()},_onSearchBtnClick:function(){this.isValid=!0;b.add(this.searchButton,"invalid");b.remove(this.searchInputNode,"invalid");b.remove(this.cancelButton,"invalid");this.layerFilterInput.inputSearch.focus()},_onCancelBtnClick:function(){this.cancelFilter()},
_onClearInputButton:function(){this.layerFilterInput.inputSearch.value&&(b.add(this.clearInputButton,"disable"),this.layerFilterInput.inputSearch.focus(),this.layerFilterInput.inputSearch.value="",this._updateLayerInfoStatus(""),this.layerListWidget._refresh())},_onSearchButtonKey:function(a){a.keyCode===c.ENTER&&this._onSearchBtnClick()},_onLayerFilterInputKey:function(a){a.keyCode===c.TAB&&a.shiftKey?(a.stopPropagation(),a.preventDefault(),this._enableNavMode(a)):a.keyCode!==c.TAB||a.shiftKey?a.keyCode===
c.ESCAPE&&(a.stopPropagation(),a.preventDefault(),this._onCancelBtnClick()):(a.stopPropagation(),a.preventDefault(),this._enableNavMode(a),b.contains(this.clearInputButton,"disable")?e.focus(this.cancelButton):e.focus(this.clearInputButton))},_onClearInputButtonKey:function(a){a.keyCode===c.TAB&&a.shiftKey?(a.stopPropagation(),a.preventDefault(),this._enableNavMode(a),e.focus(this.layerFilterInput.inputSearch)):a.keyCode!==c.TAB||a.shiftKey?a.keyCode===c.ENTER?(a.stopPropagation(),a.preventDefault(),
this._onClearInputButton()):a.keyCode===c.ESCAPE&&(a.stopPropagation(),a.preventDefault(),this._onCancelBtnClick()):(a.stopPropagation(),a.preventDefault(),e.focus(this.cancelButton))},_onCancelButtonKey:function(a){a.keyCode===c.TAB&&a.shiftKey?(a.stopPropagation(),a.preventDefault(),this._enableNavMode(a),e.focus(this.layerFilterInput.inputSearch)):a.keyCode!==c.TAB||a.shiftKey?a.keyCode===c.ENTER?(a.stopPropagation(),a.preventDefault(),this._onCancelBtnClick()):a.keyCode===c.ESCAPE&&(a.stopPropagation(),
a.preventDefault(),this._onCancelBtnClick()):(a.stopPropagation(),a.preventDefault(),this._enableNavMode(a))},_enableNavMode:function(a){a.keyCode!==c.TAB||n.isInNavMode()||b.add(document.body,"jimu-nav-mode")}})});