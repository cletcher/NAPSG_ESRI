// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/NetworkTrace/setting/projectSetting.html":'\x3cdiv data-dojo-attach-point\x3d"ProjectSettings" class\x3d"esriCTProjectSettings"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layerSelectorWrapper" class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTLabel"\x3e${nls.projectSetting.projectPolygonLayer}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSelect"\x3e\r\n            \x3cdiv class\x3d"esriCTlayerField" style\x3d"width: 100%"\x3e\r\n                \x3cselect data-dojo-attach-point\x3d"projetPolygonLayerSelect" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-event\x3d"change:projectSettingsChanged" style\x3d"width: 100%"\x3e\r\n                \x3c/select\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"polygonLayerHelp"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTLabel"\x3e${nls.projectSetting.outputParameterName}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSelect"\x3e\r\n            \x3cdiv class\x3d"esriCTlayerField" style\x3d"width: 100%"\x3e\r\n                \x3cselect data-dojo-attach-point\x3d"outputParameters" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-event\x3d"change:projectSettingsChanged" style\x3d"width: 100%"\x3e\r\n                \x3c/select\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"outputParameterHelp"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n        \x3cdiv class\x3d"esriCTLabel"\x3e${nls.projectSetting.projectPointLayer}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSelect"\x3e\r\n            \x3cdiv class\x3d"esriCTlayerField" style\x3d"width: 100%"\x3e\r\n                \x3cselect data-dojo-attach-point\x3d"projectPointLayerSelect" data-dojo-type\x3d"dijit/form/Select"\r\n                    data-dojo-attach-event\x3d"change:projectSettingsChanged" style\x3d"width: 100%"\x3e\r\n                \x3c/select\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHelpIcon" data-dojo-attach-point\x3d"pointLayerHelp"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./projectSetting.html dojo/_base/lang dojo/on dojo/_base/array jimu/dijit/Message".split(" "),function(h,k,l,m,n,p,c,d,g,q){return h([l,k,m,n],{templateString:p,baseClass:"jimu-widget-NetworkTrace-setting",projectPolygonLayerOptions:[],projectPointLayerOptions:[],outputParametersOptions:[],startup:function(){this.inherited(arguments)},postCreate:function(){this._defaultSelectOption=
{value:"",label:this.nls.projectSetting.selectLabel};this.outputParametersOptions=[c.clone(this._defaultSelectOption)];this.projectPolygonLayerOptions=[c.clone(this._defaultSelectOption)];this.projectPointLayerOptions=[c.clone(this._defaultSelectOption)];this.layers=this.map.itemInfo.itemData.operationalLayers;0<this.layers.length&&this._getLayerOptions(this.layers);this.populateLayerOptions();this.populateOutParams();this.own(d(this.polygonLayerHelp,"click",c.hitch(this,function(){this._showMessage(this.nls.projectSetting.polygonLayerHelp)})));
this.own(d(this.outputParameterHelp,"click",c.hitch(this,function(){this._showMessage(this.nls.projectSetting.outputParameterHelp)})));this.own(d(this.pointLayerHelp,"click",c.hitch(this,function(){this._showMessage(this.nls.projectSetting.pointLayerHelp)})));this.setProjectSettings(this.config)},getProjectSettings:function(){var a="",b="",f="";this.projetPolygonLayerSelect&&(a=this._getSelectedOptionValue(this.projetPolygonLayerSelect));this.projectPointLayerSelect&&(b=this._getSelectedOptionValue(this.projectPointLayerSelect));
this.outputParameters&&(f=this._getSelectedOptionValue(this.outputParameters));return{polygonLayerId:a,pointLayerId:b,outputParamName:f}},setProjectSettings:function(a){a&&(this.projetPolygonLayerSelect&&a.polygonLayerId&&this.projetPolygonLayerSelect.set("value",a.polygonLayerId),this.projectPointLayerSelect&&a.pointLayerId&&this.projectPointLayerSelect.set("value",a.pointLayerId),this.outputParameters&&a.outputParamName&&this.outputParameters.set("value",a.outputParamName))},_getSelectedOptionValue:function(a){var b=
"";a&&a.options&&1<a.options.length&&g.some(a.options,function(a){if(a.selected)return b=a.value,!0});return b},_showMessage:function(a){(new q({message:a})).message=a},_getLayerOptions:function(a){var b;g.forEach(a,c.hitch(this,function(a){a&&a.layerObject&&a.layerObject.capabilities&&((b=a.layerObject.capabilities)&&b.indexOf&&-1<b.indexOf("Create")&&b.indexOf("Delete")&&-1<b.indexOf("Update")&&"esriGeometryPolygon"===a.layerObject.geometryType&&this._isValidProjectPolygonLayer(a)&&this.projectPolygonLayerOptions.push({value:a.id,
label:a.title}),b&&b.indexOf&&-1<b.indexOf("Create")&&b.indexOf("Delete")&&-1<b.indexOf("Update")&&"esriGeometryPoint"===a.layerObject.geometryType&&this._isValidProjectPointLayer(a)&&this.projectPointLayerOptions.push({value:a.id,label:a.title}))}))},populateLayerOptions:function(){0<this.projectPolygonLayerOptions.length&&(this.projetPolygonLayerSelect.set("options",this.projectPolygonLayerOptions),this.projetPolygonLayerSelect.set("value",this.projetPolygonLayerSelect.options[0]));0<this.projectPointLayerOptions.length&&
(this.projectPointLayerSelect.set("options",this.projectPointLayerOptions),this.projectPointLayerSelect.set("value",this.projectPointLayerSelect.options[0]))},_isValidProjectPolygonLayer:function(a){var b,f,c,e;a=a.layerObject.fields;c=[];for(b in a)e=a[b].type,f=a[b].name.toLowerCase(),("name"===f&&"esriFieldTypeString"===e||"esriFieldTypeGlobalID"===e)&&c.push(f);return 2<=c.length?!0:!1},_isValidProjectPointLayer:function(a){var b,c,d,e;a=a.layerObject.fields;d=[];for(b in a)e=a[b].type,c=a[b].name.toLowerCase(),
("inputtype"===c&&"esriFieldTypeString"===e||"projectid"===c&&"esriFieldTypeGUID"===e)&&d.push(c);return 2===d.length?!0:!1},populateOutParams:function(){var a=[c.clone(this._defaultSelectOption)];g.forEach(this.outputParametersArray,c.hitch(this,function(b){"esriGeometryPolygon"===b.defaultValue.geometryType&&"esriGPParameterDirectionOutput"===b.direction&&a.push({label:b.displayName,value:b.name})}));this.outputParameters.set("options",a);this.outputParameters.set("value",this.outputParameters.options[0])},
projectSettingsChanged:function(){this.emit("settingsChanged",this.getProjectSettings())}})});