// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["jimu/loaderplugins/jquery-loader! ./libs/jquery/jquery-1-11-1.js"],function(p){var g=function(c){c.Configuration=function(a){function c(b,d){function a(d,h){for(var e in h)void 0===d[e]&&b.log("Property '"+e+"' does not exist in EasyAutocomplete options API."),"object"===typeof d[e]&&-1===p.inArray(e,r)&&a(d[e],h[e])}a(f,d)}var f={data:"list-required",url:"list-required",dataType:"json",listLocation:function(b){return b},xmlElementName:"",getValue:function(b){return b},autocompleteOff:!0,
placeholder:!1,ajaxCallback:function(){},matchResponseProperty:!1,list:{sort:{enabled:!1,method:function(b,d){b=f.getValue(b);d=f.getValue(d);return b<d?-1:b>d?1:0}},maxNumberOfElements:6,hideOnEmptyPhrase:!0,match:{enabled:!1,caseSensitive:!1,method:function(b,d){return-1<b.search(d)?!0:!1}},showAnimation:{type:"normal",time:400,callback:function(){}},hideAnimation:{type:"normal",time:400,callback:function(){}},onClickEvent:function(){},onSelectItemEvent:function(){},onLoadEvent:function(){},onChooseEvent:function(){},
onKeyEnterEvent:function(){},onMouseOverEvent:function(){},onMouseOutEvent:function(){},onShowListEvent:function(){},onHideListEvent:function(){}},highlightPhrase:!0,theme:"",cssClasses:"",minCharNumber:0,requestDelay:0,adjustWidth:!0,ajaxSettings:{},preparePostData:function(b){return b},loggerEnabled:!0,template:"",categoriesAssigned:!1,categories:[{maxNumberOfElements:4}]},r=["ajaxSettings","template"];this.get=function(b){return f[b]};this.equals=function(b,d){var a;a=void 0!==f[b]&&null!==f[b]?
!0:!1;return a&&f[b]===d?!0:!1};this.checkDataUrlProperties=function(){return"list-required"===f.url&&"list-required"===f.data?!1:!0};this.checkRequiredProperties=function(){for(var b in f)if("required"===f[b])return!1;return!0};this.printPropertiesThatDoesntExist=function(b,d){c(b,d)};(function(){"xml"===a.dataType&&(a.getValue||(a.getValue=function(b){return p(b).text()}),a.list||(a.list={}),a.list.sort||(a.list.sort={}),a.list.sort.method=function(b,d){b=a.getValue(b);d=a.getValue(d);return b<
d?-1:b>d?1:0},a.list.match||(a.list.match={}),a.list.match.method=function(b,d){return-1<b.search(d)?!0:!1});if(void 0!==a.categories&&a.categories instanceof Array){for(var b=[],d=0,h=a.categories.length;d<h;d+=1){var c=a.categories[d],n;for(n in f.categories[0])void 0===c[n]&&(c[n]=f.categories[0][n]);b.push(c)}a.categories=b}})();(function(){function b(d,a){var c=d||{},h;for(h in d)void 0!==a[h]&&null!==a[h]&&("object"!==typeof a[h]||a[h]instanceof Array?c[h]=a[h]:b(d[h],a[h]));void 0!==a.data&&
null!==a.data&&"object"===typeof a.data&&(c.data=a.data);return c}f=b(f,a)})();!0===f.loggerEnabled&&c(console,a);f.ajaxSettings=void 0!==a.ajaxSettings&&"object"===typeof a.ajaxSettings?a.ajaxSettings:{};(function(){var b;"list-required"!==f.url&&"function"!==typeof f.url&&(b=f.url,f.url=function(){return b});void 0!==f.ajaxSettings.url&&"function"!==typeof f.ajaxSettings.url&&(b=f.ajaxSettings.url,f.ajaxSettings.url=function(){return b});if("string"===typeof f.listLocation){var d=f.listLocation;
"XML"===f.dataType.toUpperCase()?f.listLocation=function(b){return p(b).find(d)}:f.listLocation=function(b){return b[d]}}if("string"===typeof f.getValue){var h=f.getValue;f.getValue=function(b){return b[h]}}void 0!==a.categories&&(f.categoriesAssigned=!0)})()};return c}(g||{}),g=function(c){c.Logger=function(){this.error=function(a){};this.warning=function(a){}};return c}(g||{}),g=function(c){c.Constans=function(){var a={CONTAINER_CLASS:"easy-autocomplete-container",CONTAINER_ID:"eac-container-",
WRAPPER_CSS_CLASS:"easy-autocomplete"};this.getValue=function(c){return a[c]}};return c}(g||{}),g=function(c){c.ListBuilderService=function(a,c){function f(b,d){function h(){var e={},c;void 0!==b.xmlElementName&&(e.xmlElementName=b.xmlElementName);void 0!==b.listLocation?c=b.listLocation:void 0!==a.get("listLocation")&&(c=a.get("listLocation"));void 0!==c?"string"===typeof c?e.data=p(d).find(c):"function"===typeof c&&(e.data=c(d)):e.data=d;return e}function c(){var a={};void 0!==b.listLocation?"string"===
typeof b.listLocation?a.data=d[b.listLocation]:"function"===typeof b.listLocation&&(a.data=b.listLocation(d)):a.data=d;return a}var f={},f="XML"===a.get("dataType").toUpperCase()?h():c();void 0!==b.header&&(f.header=b.header);void 0!==b.maxNumberOfElements&&(f.maxNumberOfElements=b.maxNumberOfElements);void 0!==a.get("list").maxNumberOfElements&&(f.maxListSize=a.get("list").maxNumberOfElements);if(void 0!==b.getValue)if("string"===typeof b.getValue){var e=b.getValue;f.getValue=function(b){return b[e]}}else"function"===
typeof b.getValue&&(f.getValue=b.getValue);else f.getValue=a.get("getValue");return f}function r(b){var d=[];void 0===b.xmlElementName&&(b.xmlElementName=a.get("xmlElementName"));p(b.data).find(b.xmlElementName).each(function(){d.push(this)});return d}this.init=function(b){var d=[],c={};c.data=a.get("listLocation")(b);c.getValue=a.get("getValue");c.maxListSize=a.get("list").maxNumberOfElements;d.push(c);return d};this.updateCategories=function(b,d){if(a.get("categoriesAssigned")){b=[];for(var c=0;c<
a.get("categories").length;c+=1){var r=f(a.get("categories")[c],d);b.push(r)}}return b};this.convertXml=function(b){if("XML"===a.get("dataType").toUpperCase())for(var d=0;d<b.length;d+=1)b[d].data=r(b[d]);return b};this.processData=function(b,d){for(var f=0,r=b.length;f<r;f+=1)b[f].data=c(a,b[f],d);return b};this.checkIfDataExists=function(b){for(var a=0,c=b.length;a<c;a+=1)if(void 0!==b[a].data&&b[a].data instanceof Array&&0<b[a].data.length)return!0;return!1}};return c}(g||{}),g=function(c){c.proccess=
function(a,l,f){function r(b,c){a.get("list").match.caseSensitive||("string"===typeof b&&(b=b.toLowerCase()),c=c.toLowerCase());return a.get("list").match.method(b,c)?!0:!1}c.proccess.match=r;var b=l.data,b=function(b,c){var d=[],f="";if(a.get("list").match.enabled)for(var e=0,h=b.length;e<h;e+=1)f=a.get("getValue")(b[e]),r(f,c)&&d.push(b[e]);else d=b;return d}(b,f),b=function(b){void 0!==l.maxNumberOfElements&&b.length>l.maxNumberOfElements&&(b=b.slice(0,l.maxNumberOfElements));return b}(b);return b=
function(b){a.get("list").sort.enabled&&b.sort(a.get("list").sort.method);return b}(b)};return c}(g||{}),g=function(c){c.Template=function(a){var c={basic:{type:"basic",method:function(a){return a},cssClass:""},description:{type:"description",fields:{description:"description"},method:function(a){return a+" - description"},cssClass:"eac-description"},iconLeft:{type:"iconLeft",fields:{icon:""},method:function(a){return a},cssClass:"eac-icon-left"},iconRight:{type:"iconRight",fields:{iconSrc:""},method:function(a){return a},
cssClass:"eac-icon-right"},links:{type:"links",fields:{link:""},method:function(a){return a},cssClass:""},custom:{type:"custom",method:function(){},cssClass:""}},f=function(a){var b=a.fields,d;return"description"===a.type?(d=c.description.method,"string"===typeof b.description?d=function(a,c){return a+" - \x3cspan\x3e"+c[b.description]+"\x3c/span\x3e"}:"function"===typeof b.description&&(d=function(a,c){return a+" - \x3cspan\x3e"+b.description(c)+"\x3c/span\x3e"}),d):"iconRight"===a.type?("string"===
typeof b.iconSrc?d=function(a,c){return a+"\x3cimg class\x3d'eac-icon' src\x3d'"+c[b.iconSrc]+"' /\x3e"}:"function"===typeof b.iconSrc&&(d=function(a,c){return a+"\x3cimg class\x3d'eac-icon' src\x3d'"+b.iconSrc(c)+"' /\x3e"}),d):"iconLeft"===a.type?("string"===typeof b.iconSrc?d=function(a,c){return"\x3cimg class\x3d'eac-icon' src\x3d'"+c[b.iconSrc]+"' /\x3e"+a}:"function"===typeof b.iconSrc&&(d=function(a,c){return"\x3cimg class\x3d'eac-icon' src\x3d'"+b.iconSrc(c)+"' /\x3e"+a}),d):"links"===a.type?
("string"===typeof b.link?d=function(a,c){return"\x3ca href\x3d'"+c[b.link]+"' \x3e"+a+"\x3c/a\x3e"}:"function"===typeof b.link&&(d=function(a,c){return"\x3ca href\x3d'"+b.link(c)+"' \x3e"+a+"\x3c/a\x3e"}),d):"custom"===a.type?a.method:c.basic.method};this.getTemplateClass=function(a){var b=function(){return""};return a&&a.type?a.type&&c[a.type]?function(){var b=c[a.type].cssClass;return function(){return b}}():b:b}(a);a=a&&a.type?a.type&&c[a.type]?f(a):c.basic.method:c.basic.method;this.build=a};
return c}(g||{}),g=function(c){c.main=function(a,g){function f(){function a(a,b){return e.get("highlightPhrase")&&""!==b?(b=b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),(a+"").replace(new RegExp("("+b+")","gi"),"\x3cb\x3e$1\x3c/b\x3e")):a}k.parent().hasClass(n.getValue("WRAPPER_CSS_CLASS"))&&(k.next("."+n.getValue("CONTAINER_CLASS")).remove(),k.unwrap());(function(){var a=p("\x3cdiv\x3e"),b=n.getValue("WRAPPER_CSS_CLASS");e.get("theme")&&""!==e.get("theme")&&(b+=" eac-"+e.get("theme"));
e.get("cssClasses")&&""!==e.get("cssClasses")&&(b+=" "+e.get("cssClasses"));""!==y.getTemplateClass()&&(b+=" "+y.getTemplateClass());a.addClass(b);k.wrap(a);!0===e.get("adjustWidth")&&k.parent().css("width","100%")})();(function(){var b=p("\x3cdiv\x3e").addClass(n.getValue("CONTAINER_CLASS"));b.attr("id",l()).prepend(p("\x3cul\x3e"));(function(){b.on("show.eac",function(){var a,c;switch(e.get("list").showAnimation.type){case "slide":a=e.get("list").showAnimation.time;c=e.get("list").showAnimation.callback;
b.find("ul").slideDown(a,c);break;case "fade":a=e.get("list").showAnimation.time;c=e.get("list").showAnimation.callback;b.find("ul").fadeIn(a,c);break;default:b.find("ul").show()}e.get("list").onShowListEvent()}).on("hide.eac",function(){var a,c;switch(e.get("list").hideAnimation.type){case "slide":a=e.get("list").hideAnimation.time;c=e.get("list").hideAnimation.callback;b.find("ul").slideUp(a,c);break;case "fade":a=e.get("list").hideAnimation.time;c=e.get("list").hideAnimation.callback;b.find("ul").fadeOut(a,
c);break;default:b.find("ul").hide()}e.get("list").onHideListEvent()}).on("selectElement.eac",function(){b.find("ul li").removeClass("selected");b.find("ul li").eq(m).addClass("selected");e.get("list").onSelectItemEvent()}).on("loadElements.eac",function(c,d,f){var h="";c=b.find("ul");c.empty().detach();q=[];for(var z=0,g=0,l=d.length;g<l;g+=1){var w=d[g].data;if(0!==w.length){void 0!==d[g].header&&0<d[g].header.length&&c.append("\x3cdiv class\x3d'eac-category' \x3e"+d[g].header+"\x3c/div\x3e");for(var n=
0,B=w.length;n<B&&z<d[g].maxListSize;n+=1)h=p("\x3cli\x3e\x3cdiv class\x3d'eac-item'\x3e\x3c/div\x3e\x3c/li\x3e"),function(){var b=n,c=z,l=d[g].getValue(w[b]);h.find(" \x3e div").on("click",function(){k.val(l).trigger("change");m=c;v(c);e.get("list").onClickEvent();e.get("list").onChooseEvent()}).mouseover(function(){m=c;v(c);e.get("list").onMouseOverEvent()}).mouseout(function(){e.get("list").onMouseOutEvent()}).html(y.build(a(l,f),w[b]))}(),c.append(h),q.push(w[n]),z+=1}}b.append(c);e.get("list").onLoadEvent()})})();
k.after(b)})();u=p("#"+l());e.get("placeholder")&&k.attr("placeholder",e.get("placeholder"))}function l(){var b=k.attr("id");return b=n.getValue("CONTAINER_ID")+b}function b(){C("autocompleteOff",!0)&&k.attr("autocomplete","off");(function(){k.focusout(function(){var b=k.val(),a;e.get("list").match.caseSensitive||(b=b.toLowerCase());for(var c=0,d=q.length;c<d;c+=1)if(a=e.get("getValue")(q[c]),e.get("list").match.caseSensitive||(a=a.toLowerCase()),a===b){m=c;v(m);break}})})();(function(){k.off("keyup").keyup(function(b){function a(b){if(!(b.length<
e.get("minCharNumber"))){if("list-required"!==e.get("data")){var a=e.get("data"),c=t.init(a),c=t.updateCategories(c,a),c=t.processData(c,b);u.trigger("loadElements.eac",[c,b]);0<k.parent().find("li").length?d():h()}a=function(){var b={},a=e.get("ajaxSettings")||{},c;for(c in a)b[c]=a[c];return b}();if(void 0===a.url||""===a.url)a.url=e.get("url");if(void 0===a.dataType||""===a.dataType)a.dataType=e.get("dataType");void 0!==a.url&&"list-required"!==a.url&&(a.url=a.url(b),a.data=e.get("preparePostData")(a.data,
b),p.ajax(a).done(function(a){var c=t.init(a),c=t.updateCategories(c,a),c=t.convertXml(c);if(!1!==e.get("matchResponseProperty")?"string"===typeof e.get("matchResponseProperty")?a[e.get("matchResponseProperty")]===b:"function"===typeof e.get("matchResponseProperty")?e.get("matchResponseProperty")(a)===b:1:1)c=t.processData(c,b),u.trigger("loadElements.eac",[c,b]);t.checkIfDataExists(c)&&0<k.parent().find("li").length?d():h();e.get("ajaxCallback")()}).fail(function(){x.warning("Fail to load response data")}).always(function(){}))}}
switch(b.keyCode){case 27:h();k.trigger("blur");break;case 38:b.preventDefault();0<q.length&&0<m&&(--m,k.val(e.get("getValue")(q[m])),v(m));break;case 40:b.preventDefault();0<q.length&&m<q.length-1&&(m+=1,k.val(e.get("getValue")(q[m])),v(m));break;default:if(40<b.keyCode||8===b.keyCode){var c=k.val();!0!==e.get("list").hideOnEmptyPhrase||8!==b.keyCode||""!==c?0<e.get("requestDelay")?(void 0!==A&&clearTimeout(A),A=setTimeout(function(){a(c)},e.get("requestDelay"))):a(c):h()}}})})();(function(){k.on("keydown",
function(a){a=a||window.event;if(38===a.keyCode)return!1}).keydown(function(a){13===a.keyCode&&-1<m&&(k.val(e.get("getValue")(q[m])),e.get("list").onKeyEnterEvent(),e.get("list").onChooseEvent(),m=-1,h(),a.preventDefault())})})();k.off("keypress");(function(){k.focus(function(){""!==k.val()&&0<q.length&&(m=-1,d())})})();(function(){k.blur(function(){setTimeout(function(){m=-1;h()},250)})})()}function d(){u.trigger("show.eac")}function h(){u.trigger("hide.eac")}function v(a){u.trigger("selectElement.eac",
a)}var n=new c.Constans,e=new c.Configuration(g),x=new c.Logger,y=new c.Template(g.template),t=new c.ListBuilderService(e,c.proccess),C=e.equals,k=a,u="",q=[],m=-1,A;c.consts=n;this.getConstants=function(){return n};this.getConfiguration=function(){return e};this.getContainer=function(){return u};this.getSelectedItemIndex=function(){return m};this.getItems=function(){return q};this.getItemData=function(a){return q.length<a||void 0===q[a]?-1:q[a]};this.getSelectedItemData=function(){return this.getItemData(m)};
this.build=function(){f()};this.init=function(){0===k.length?x.error("Input field doesn't exist."):e.checkDataUrlProperties()?e.checkRequiredProperties()?(f(),b()):x.error("Will not work without mentioned properties."):x.error("One of options variables 'data' or 'url' must be defined.")}};c.eacHandles=[];c.getHandle=function(a){return c.eacHandles[a]};c.inputHasId=function(a){return void 0!==p(a).attr("id")&&0<p(a).attr("id").length?!0:!1};c.assignRandomId=function(a){var c="";do c="eac-"+Math.floor(1E4*
Math.random());while(0!==p("#"+c).length);p(a).attr("id",c)};c.setHandle=function(a,g){c.eacHandles[g]=a};return c}(g||{});(function(c){c.fn.easyAutocomplete=function(a){return this.each(function(){var l=c(this),f=new g.main(l,a);g.inputHasId(l)||g.assignRandomId(l);f.init();g.setHandle(f,l.attr("id"))})};c.fn.getSelectedItemIndex=function(){var a=c(this).attr("id");return void 0!==a?g.getHandle(a).getSelectedItemIndex():-1};c.fn.getItems=function(){var a=c(this).attr("id");return void 0!==a?g.getHandle(a).getItems():
-1};c.fn.getItemData=function(a){var l=c(this).attr("id");return void 0!==l&&-1<a?g.getHandle(l).getItemData(a):-1};c.fn.getSelectedItemData=function(){var a=c(this).attr("id");return void 0!==a?g.getHandle(a).getSelectedItemData():-1}})(jQuery)});