// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/TimeSlider/setting/LayersConfig.html":'\x3cdiv class\x3d"layout"\x3e\r\n  \x3cdiv class\x3d"title"\x3e${nls.layerTimeExtent}\x3c/div\x3e\r\n  \x3cdiv class\x3d"layers-table-container"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"layersContainer" class\x3d"rows-container"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/Evented dojo/_base/declare dojo/_base/lang esri/lang dojo/_base/html dojo/_base/array dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/text!./LayersConfig.html jimu/LayerInfos/LayerInfos ../utils jimu/utils jimu/dijit/CheckBox".split(" "),function(g,l,c,h,f,d,m,n,p,q,r,t,u,k,v){return l([m,n,p,g],{templateString:r,layersCheckboxes:[],startup:function(){this.layersCheckboxes=[];t.getInstance(this.map,this.map.itemInfo).then(c.hitch(this,function(a){this._layerInfosObj=
a;a=this._layerInfosObj.getLayerInfoArray();d.forEach(a,c.hitch(this,function(a){h.isDefined(a.layerObject.timeInfo)&&h.isDefined(a.layerObject.timeInfo.timeExtent)&&this.addARow(a)}));this.emit("initTimeExtent",this.getFullTimeExtent());this.emit("initedLaysers",this.getFullTimeExtent());170<=50*a.length?f.setStyle(this.layersContainer,"overflow-y","auto"):f.setStyle(this.layersContainer,"overflow-y","hidden")}));this.inherited(arguments)},_creatTableRow:function(a,b,e){a=f.create("div",{"class":"row"},
a);b=f.create("div",{"class":"layer-name",innerHTML:b||""},a);e=f.create("div",{"class":"time-info",innerHTML:e||""},a);return{layerNameDom:b,timeInfoDom:e}},addARow:function(a){var b=this._creatTableRow(this.layersContainer),e=new v({label:a.id,_layerId:a.id,checked:!0},b.layerNameDom);this.own(q(e,"change",c.hitch(this,function(){this.emit("change",this.getFullTimeExtent())})));if(a.layerObject.timeInfo&&h.isDefined(a.layerObject.timeInfo.timeExtent)){var d=k.localizeDate(a.layerObject.timeInfo.timeExtent.startTime),
g=k.localizeDate(a.layerObject.timeInfo.timeExtent.endTime);f.setAttr(b.timeInfoDom,"innerHTML",d+"   "+this.nls.timeTo+"   "+g);e.timeExtent=a.layerObject.timeInfo.timeExtent}this.layersCheckboxes.push(e);return b},getFullTimeExtent:function(){if(0===this.layersCheckboxes.length)return null;var a=[];d.forEach(this.layersCheckboxes,c.hitch(this,function(b){b.timeExtent&&!0===b.getValue()&&a.push(b.timeExtent)}));var b;if(0<a.length)b=u.getFullTimeExtent(a,!0);else return null;return{timeExtent:b}},
setConfig:function(a){a&&d.forEach(this.layersCheckboxes,c.hitch(this,function(b){d.forEach(a,c.hitch(this,function(a){b._layerId===a.id&&(!0===a.isTimeEnable?b.setValue(!0):b.setValue(!1))}))}))},getConfig:function(){var a=[];d.forEach(this.layersCheckboxes,c.hitch(this,function(b){a.push({id:b._layerId,isTimeEnable:b.checked})}));return a},isValid:function(){return!0}})});