// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/_base/lang","dojo/_base/array","jimu/utils"],function(f,d,g){return{getFieldInfosFromWebmap:function(e,h){var b=null,a=h.getLayerInfoByTopLayerId(e);a&&((e=a.getPopupInfo())&&e.fieldInfos?(b=f.clone(e.fieldInfos),a.layerObject&&d.forEach(b,function(c){d.some(a.layerObject.fields,function(b){if(c.fieldName===b.name)return c.type=b.type,!0})})):(b=[],a&&a.layerObject&&d.forEach(a.layerObject.fields,function(c){var a=g.getDefaultPortalFieldInfo(c);a.type=c.type;a.visible=!0;a.isEditable=
!0;b.push(a)})));b&&d.forEach(b,function(a){a.format&&a.format.dateFormat&&a.format.dateFormat.toLowerCase()&&0<=a.format.dateFormat.toLowerCase().indexOf("time")&&(a.format.time=!0)});return b}}});