// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Bookmark/HeadBar":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on ./a11y/HeadBar dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./HeadBar.html".split(" "),function(h,q,c,a,w,e,y,u,b,A){h=q([y,u,b,h],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer",templateString:A,nls:null,map:null,bookmarksContainer:null,layout:null,editingName:!1,initMapState:null,postMixInProperties:function(){this.nls=
c.mixin(this.nls,window.jimuNls.common)},startup:function(){this.inherited(arguments);this.refreshUI();this.a11y_initEvents();this.own(w(this.filterInput,"blur",c.hitch(this,this.onFilterChange)));this.own(w(this.filterInput,"keyUp",c.hitch(this,this.onFilterChange)))},refreshUI:function(){this.editable?(a.addClass(this.domNode,"editable"),a.removeClass(this.addBtn,"hide")):(a.removeClass(this.domNode,"editable"),a.addClass(this.addBtn,"hide"));this._toggleLayoutBtnDisplay(this.layout.defaultMode);
!1!==this.editable||!0===this.layout.list&&!0===this.layout.cards?a.removeClass(this.domNode,"hide"):a.addClass(this.domNode,"hide")},_toggleLayoutBtnDisplay:function(b){a.addClass(this.listBtn,"hide");a.addClass(this.cardsBtn,"hide");"list"===b?this.listMode():this.cardsMode();!0===this.layout.list&&!0===this.layout.cards?("list"===b?a.removeClass(this.cardsBtn,"hide"):a.removeClass(this.listBtn,"hide"),a.addClass(this.displayMode,"two-modes")):a.removeClass(this.displayMode,"two-modes")},cardsMode:function(){a.removeClass(this.bookmarksContainer,
"list");a.addClass(this.bookmarksContainer,"cards");a.addClass(this.domNode,"list");a.removeClass(this.domNode,"cards");this.emit("layout-cards")},listMode:function(){a.removeClass(this.bookmarksContainer,"cards");a.addClass(this.bookmarksContainer,"list");a.addClass(this.domNode,"cards");a.removeClass(this.domNode,"list");this.emit("layout-list")},addingBookmark:function(){this.emit("add")},onFilterChange:function(){var b=this.filterInput.getValue();this.emit("filter-change",b)},onFilterBlur:function(){var b=
this.filterInput.getValue();this.emit("filter-blur",b)}});h.extend(e);return h})},"widgets/Bookmark/a11y/HeadBar":function(){define(["dojo/_base/lang","dojo/on","dijit/a11yclick"],function(h,q,c){return{a11y_initEvents:function(){this.own(q(this.addBtn,c,h.hitch(this,function(){this.addingBookmark()})));this.own(q(this.cardsBtn,c,h.hitch(this,function(a){this._toggleLayoutBtnDisplay("cards");this._isKeyEvent(a)&&this.listBtn&&this.listBtn.focus()})));this.own(q(this.listBtn,c,h.hitch(this,function(a){this._toggleLayoutBtnDisplay("list");
this._isKeyEvent(a)&&this.cardsBtn&&this.cardsBtn.focus()})))},_isKeyEvent:function(a){return a&&a._origType?!0:!1}}})},"widgets/Bookmark/WebmapBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils libs/Sortable".split(" "),function(h,q,c,a,w,e,y,u,b,A,l){return q([u,b,h],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",
nls:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=a.create("div",{"class":"drawer-handle"},this.domNode);this.bookMarkerContainer=a.create("div",{"class":"webmap"},this.domNode)},startup:function(){this.inherited(arguments);this.config.syncMode&&(!1===this.config.syncMode.webmap&&!1===this.config.syncMode.custom?a.addClass(this.domNode,"hide"):a.removeClass(this.domNode,"hide"));this.sortableBookMarkerNodes=l.create(this.bookMarkerContainer,{sort:!1,disabled:!0,animation:100})},
refresh:function(){A.empty(this.bookmarks);this.bookmarks=[];this.config.syncMode&&!0===this.config.syncMode.webmap&&(this.bookmarks=A.readBookmarksInWebmap(this.map));var b=c.clone(this.config.bookmarks2D);w.forEach(b,function(b){b&&!0===this.config.syncMode.custom&&this.bookmarks.push(b)},this);A.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks)},_onBookmarkClick:function(b){require(["esri/geometry/Extent"],c.hitch(this,function(a){if(!1!==b.isSaveExtent){var n=b.extent;n.spatialReference?
new y(n.spatialReference):new y({wkid:4326});this.map.setExtent(new a(n))}A.layerInfosRestoreState(b.isSaveLayers,b.layerOptions)}))},filter:function(b){A.filter(b,this.bookmarks)},displayBookmarks:function(b){A.empty(b,this.bookMarkerContainer);w.forEach(b,function(b){if(b){var n={editBtn:!1,changeImgBtn:!0,layerInfosIcon:A.isWithLayerInfos(b)},n=A.createBookMarkNode(b,this.nls,this.folderUrl,n,{editBtn:!1,deleteBtn:!1,renameBtn:!1,changeImgBtn:!1});b.itemNode=n;this.own(e(n,"thumbnail-click",c.hitch(this,
c.partial(this._onBookmarkClick,b))))}},this);b.forEach(c.hitch(this,function(b){b&&b.itemNode&&b.itemNode.domNode&&a.place(b.itemNode.domNode,this.bookMarkerContainer,"last")}))}})})},"widgets/Bookmark/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/html jimu/utils ./ItemNode libs/storejs/store jimu/LayerInfos/LayerInfos".split(" "),function(h,q,c,a,w,e,y){var u={_uID:0,getUID:function(){return u._uID++},findBookMark:function(b,a){var l=-1,c=null;q.some(a,function(a,n){if(parseInt(a._uID,
10)===parseInt(b._uID,10))return l=n,c=a,!0},this);return-1!==l?{bookmark:c,idx:l}:null},findBookMarkByUID:function(b,a){var l=-1,c=null;q.some(a,function(a,n){if(parseInt(a._uID,10)===parseInt(b,10))return l=n,c=a,!0},this);return-1!==l?{bookmark:c,idx:l}:null},findNextBookMarkByIdx:function(b,a){var l=null;b+1<=a.length-1&&(l=a[b+1]);return l},findBookMarkByNameAndExtent:function(b,a){var l=-1,c=null;q.some(a,function(a,n){if(a.name===b.name&&a.extent&&b.extent&&a.extent.xmax===b.extent.xmax&&a.extent.xmin===
b.extent.xmin&&a.extent.ymax===b.extent.ymax&&a.extent.ymin===b.extent.ymin)return l=n,c=a,!0},this);return-1!==l?{bookmark:c,idx:l}:null},isBookmarksDataEmpty:function(b){return Array.isArray(b)&&0===b.length?!0:!1},empty:function(b,a){var l=b;q.forEach(b,function(b){b&&b.itemNode&&b.itemNode.destroy()},this);b=[];b=l;a&&c.empty(a)},createBookMarkNode:function(b,c,l,e,h){l=b.thumbnail||"undefined"!==typeof b.thumbnail&&""!==b.thumbnail?a.processUrlInWidgetConfig(b.thumbnail,l):a.processUrlInWidgetConfig("images/thumbnail_default.png",
l);var n=u.getUID();b._uID=n;return new w({dataId:n,img:l,label:b.displayName||b.name,display:e,nls:c,a11y:h})},cloneBookmarksDataWithOutDom:function(b){var a=[];if("undefined"===typeof b)return a;b.forEach(h.hitch(this,function(b){b.itemNode&&b.itemNode.domNode&&(b=h.clone(b),delete b.itemNode,a.push(b))}));return a},readBookmarksInWebmap:function(b){var a=[];if(!b.itemInfo||!b.itemInfo.itemData||!b.itemInfo.itemData.bookmarks)return a;q.forEach(b.itemInfo.itemData.bookmarks,function(b){b=h.mixin({},
b);b.isInWebmap=!0;a.push(b)},this);return a},filterBookmarkFromTarget:function(b,a){for(var c=[],e=0,A=b.length;e<A;e++){var n=b[e];u.findBookmarkByNameOrExtent(n,a)||c.push(n)}return c},findBookmarkByNameOrExtent:function(b,a){var c=-1,e=null;q.some(a,function(a,n){if((a.displayName||a.name)===(b.displayName||b.name)||a.extent&&b.extent&&a.extent.xmax===b.extent.xmax&&a.extent.xmin===b.extent.xmin&&a.extent.ymax===b.extent.ymax&&a.extent.ymin===b.extent.ymin)return c=n,e=a,!0},this);return-1!==
c?{bookmark:e,idx:c}:null},filter:function(b,a){a.forEach(function(a){"undefined"!==typeof b&&""!==b?-1!==(a.displayName||a.name).indexOf(b)?w.show(a):w.hide(a):w.show(a)})},getKeysKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"},getAutoRenameBeforeAdd:function(b,a,c){var e=0,l=new RegExp(/\((\d+)\){1}$/g);q.forEach(a,function(a){a&&"undefined"!==typeof a.name&&-1!==a.name.indexOf(b)&&("undefined"===typeof c||!0===c&&b.length===a.name.length)&&(a=l.exec(a.displayName),
null===a&&0===e?e=1:a&&"undefined"!==typeof a[1]&&a[1]>=e&&(e=parseInt(a[1],10)+1))});return 0===e?b:b+"("+e+")"},processDuplicateName:function(b){for(var a=[],c={},e=b.length-1;0<=e;e--){var h=b[e];if(!h||"undefined"===typeof h.name)return;var n=h.name;n in c?c[n]++:c[n]=0;if(0<c[n]){var g=n+"("+c[n]+")";g in c?(c[g]++,c[n]++):c[g]=0;h.displayName=0<c[g]?n+"("+c[n]+")":g;h._autoRename=!0}else h.displayName=n;a.push(h)}b=a},toogleCheckboxChecked:function(a){a&&a.setValue&&a.setValue(!a.checked)},
setCheckboxWithoutEvent:function(a,c){a&&a.check&&a.uncheck&&(!0===c?a.check(!0):a.uncheck(!0))},layerInfosRestoreState:function(a,c){var b=y.getInstanceSync(),e={};if(c&&a){for(var h in c)if(c.hasOwnProperty(h)){a=c[h];var n=!1,n="undefined"===typeof a.visible?a.selected:a.visible;e[h]={visible:n}}b.restoreState({layerOptions:e})}},getlayerInfos:function(){var a={},c=y.getInstanceSync();c&&c.traversal&&c.traversal(h.hitch(this,function(b){a[b.id]={visible:b.isVisible()}}));return a},isWithLayerInfos:function(a){return a.layerOptions&&
!1!==a.isSaveLayers?!0:!1},stringifyBookmarks:function(a){var b=[];q.forEach(a,function(a){a=h.mixin({},a);a.itemNode&&delete a.itemNode;b.push(a)},this);return b},parseBookmarks:function(a){return h.clone(a)},getKey:function(b){return"Bookmark.2D."+encodeURIComponent(a.getAppIdFromUrl())+"."+b},isConfigBefore5_3:function(a){return"undefined"===typeof a.syncMode||!0===a.needToUpdateFlag?!0:!1},getUpdateCacheKey:function(a){return"bookmark_cache_updated_"+encodeURIComponent(u.getKey(a))},setUpdateCacheKey:function(a){e.set(u.getUpdateCacheKey(a),
!0)},isCacheKeyUpdatedy:function(a){return e.get(u.getUpdateCacheKey(a))},setDefaultConfigForUpdate:function(a){a.needToUpdateFlag=!0;a.layout={cards:!0,list:!1,defaultMode:"cards"};a.editable=!0;Array.isArray(a.bookmarks2D)&&0<a.bookmarks2D.length?a.syncMode={webmap:!1,custom:!0}:a.syncMode={webmap:!0,custom:!0}},completeUpdateConfig:function(a){a.needToUpdateFlag&&delete a.needToUpdateFlag},updateBookmarks:function(a){for(var b=0;b<a.length;b++)"undefined"===typeof a[b]&&(a.splice(b,1),b--);var c=
/\/widgets\/Bookmark\/images\/thumbnail_default.png$/;q.forEach(a,function(a){"undefined"===typeof a.isSaveExtent&&(a.isSaveExtent=!0);a.thumbnail&&c.test(a.thumbnail)&&delete a.thumbnail},this)},getLayoutRecorderKey:function(){return"bookMarkLayout_"+encodeURIComponent(a.getAppIdFromUrl())},cleanLayoutRecorder:function(a){e.remove(u.getLayoutRecorderKey(a))},setLastLayout:function(a){e.set(u.getLayoutRecorderKey(),a)},getLastLayout:function(){return e.get(u.getLayoutRecorderKey())},oldBookmarksBackup:'[{"displayName":"Greater Manchester or Greater Lincolnshire HAHAHAHA","name":"Greater Manchester or Greater Lincolnshire HAHAHAHA","extent":{"type":"extent","xmin":8997982.70263581,"ymin":2110475.6293307655,"xmax":14672667.682525788,"ymax":6024051.4775307495,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Peterborough and Cambridgeshire HEHEHEHEHEH","name":"Peterborough and Cambridgeshire HEHEHEHEHEH","extent":{"type":"extent","xmin":9055621.33977054,"ymin":445965.34674161975,"xmax":14730306.319660518,"ymax":4359541.194941604,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"mentougou biejing china","name":"mentougou biejing china","extent":{"type":"extent","xmin":9502343.119353313,"ymin":3151483.465165457,"xmax":15177028.09924329,"ymax":7065059.313365442,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","name":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u77ed\u4e2d\u6587","name":"\u77ed\u4e2d\u6587","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"short","name":"short","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587 English","name":"\u4e2d\u6587 English","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Underneath the icons","name":"Underneath the icons","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","name":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"eee RTL","name":"eee RTL","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false}]',
_testUpdateOldConfig:function(){return{bookmarks2D:[{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1"},{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1(1)"},{extent:{spatialReference:{wkid:102100},xmax:-3197863.7584074493,xmin:-1.3112899816301128E7,
ymax:1.1466459916526379E7,ymin:-4859686.568575533},name:"bm2",isInWebmap:!0,displayName:"bm2"},{extent:{spatialReference:{wkid:102100},xmax:-3767577.3201611056,xmin:-1.430429896767071E7,ymax:1.5120033300894285E7,ymin:-4622246.062418217},name:"Untitled",isInWebmap:!0,displayName:"Untitled"},{extent:{spatialReference:{wkid:102100},xmax:-4334684.982862408,xmin:-1.6556089386187213E7,ymax:1.6750523655935397E7,ymin:-5666212.383958025},name:"Untitled",isInWebmap:!0,displayName:"Untitled(1)"}],bookmarks3D:[],
flyTime:3E3}},_testSetOldCache:function(a){var b=[];q.forEach(a,function(a){var c="Bookmark.2D."+a.displayName;b.push(c);a=h.mixin({},a);a.itemNode&&delete a.itemNode;a._uID&&delete a._uID;try{e.set(c,a)}catch(m){alert("store error\x3d\x3d\x3e")}},this);e.set("Bookmark.2D",b)},_testSetOldCacheBookmark:function(){return JSON.parse('[{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8273877.24778316,"xmin":-14295892.084200885,"ymax":6466269.8495007465,"ymin":2983187.344602761},"name":"bm1","isInWebmap":true,"displayName":"bm1"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8004818.908219411,"xmin":-11015826.326428276,"ymax":5527011.645932751,"ymin":3785470.393483758},"name":"bm1","isInWebmap":true,"displayName":"bm1(1)"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-12874774.854323175,"xmin":-13627526.708875552,"ymax":4655629.523482032,"ymin":4220244.210369689},"name":"bm2","isInWebmap":true,"displayName":"bm2"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-11618761.605541585,"xmin":-14629769.023750449,"ymax":6691911.956998556,"ymin":4950370.704549563},"name":"bm3","isInWebmap":true,"displayName":"bm3"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-4317189.3003047705,"xmin":-16361218.973140221,"ymax":10449906.504800193,"ymin":3483741.495004222},"name":"bm4","isInWebmap":true,"displayName":"bm4"},{"name":"add-inRT-1","displayName":"add-inRT-1","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}},{"name":"add-inRT-2","displayName":"add-inRT-2","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}}]')}};
return u})},"widgets/Bookmark/ItemNode":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dijit/a11yclick jimu/BaseWidget dijit/_WidgetsInTemplateMixin ./a11y/ItemNode dojo/on dojo/query jimu/utils dojo/text!./ItemNode.html dojo/mouse dijit/form/ValidationTextBox".split(" "),function(h,q,c,a,w,e,y,u,b,A,l,G){var m={},m=q([e,y,h],{templateString:G,isSelected:!1,postMixInProperties:function(){this.nls=c.mixin(this.nls,window.jimuNls.common)},postCreate:function(){a.setAttr(this.domNode,
"data-id",l.sanitizeHTML(this.dataId));this.img&&a.setAttr(this.thumbnail,"src",this.img);this.nls&&(a.setAttr(this.deleteBtn,"title",this.nls.deleteBtnTip),a.setAttr(this.editBtn,"title",this.nls.editBtnTip),a.setAttr(this.changeImgBtn,"title",this.nls.changeThumbnailTip),a.setAttr(this.renameBtn,"title",this.nls.editBtnTip),a.setAttr(this.thumbnail,"title",this.nls.dragReorderTip),a.setAttr(this.layerInfosIcon,"title",this.nls.withVisibility));this.display&&(!1===this.display.selectedBtn&&a.addClass(this.selectedBtn,
"hide"),!1===this.display.editBtn&&a.addClass(this.editBtn,"hide"),!1===this.display.deleteBtn&&a.addClass(this.deleteBtn,"hide"),!1===this.display.renameBtn&&a.addClass(this.renameBtn,"hide"),!0===this.display.selectedBtn&&a.removeClass(this.selectedBtn,"hide"),!0===this.display.changeImgBtn&&a.removeClass(this.changeImgBtn,"hide"),!0===this.display.layerInfosIcon&&(a.removeClass(this.layerInfosIcon,"hide"),a.addClass(this.nodeBox,"with-layer-visibility")));this.a11y_display();this.nodeLabel.setValue(this.label);
this._updateLabelTooltips(this.label);this.own(b(this.selectedBtn,w,c.hitch(this,this.onSelected)));this.own(b(this.deleteBtn,w,c.hitch(this,this.onDelete)));this.own(b(this.editBtn,w,c.hitch(this,this.onEdit)));this.own(b(this.changeImgBtn,w,c.hitch(this,this.onChangeImg)));this.own(b(this.renameBtn,w,c.hitch(this,this.onRenameClick)));this.own(b(this.nodeBox,w,c.hitch(this,this.onNodeBoxClick)));this.own(b(this.dragMasker,"click",c.hitch(this,this.onNodeBoxClick)));!0===this.display.enableEditLabel?
(this.own(b(this.nodeLabel,w,c.hitch(this,this.onLabelClick))),this.own(b(this.nodeLabel,"change",c.hitch(this,this.onLabelChange))),this.own(b(this.nodeLabel,"blur",c.hitch(this,this.onLabelBlur)))):this.nodeLabel.setDisabled(!0);this.own(b(this.nodeLabel,"contextmenu",c.hitch(this,function(a){a.preventDefault()})));this.own(b(this.nodeBox,"contextmenu",c.hitch(this,function(a){a.preventDefault()})));this.a11y_initEvents()},onClick:function(){A(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
A(this.domNode).addClass("jimu-state-selected");this.emit("click")},onNodeBoxClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("thumbnail-click")},onLabelClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("label-click")},onLabelChange:function(a){this._updateLabelTooltips(a)},onLabelBlur:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());a=
this.nodeLabel.get("value");this._updateLabelTooltips(a);this.emit("label-blur")},onSelected:function(b){b&&b.stopPropagation&&b.preventDefault&&(b.stopPropagation(),b.preventDefault());a.hasClass(this.domNode,"selected")?(a.removeClass(this.domNode,"selected"),this.isSelected=!1,!1!==b&&this.emit("unselected")):(a.addClass(this.domNode,"selected"),this.isSelected=!0,!1!==b&&this.emit("selected"))},onDelete:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());
this.emit("delete")},onEdit:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("edit")},onChangeImg:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("change-img")},changeImg:function(b){a.setAttr(this.thumbnail,"src",b)},onRenameClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("rename")},highLight:function(){A(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
A(this.domNode).addClass("jimu-state-selected")},startup:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments);a.destroy(this.domNode)},_updateLabelTooltips:function(b){b&&(a.setAttr(this.nodeLabel,"title",b),this.dragMasker&&a.setAttr(this.dragMasker,"title",b),this.a11y_updateItemLabel(b))}});m.addFloatLeading=function(b){b.itemNode&&b.itemNode.domNode&&(A(".selected-btn",b.itemNode.domNode).forEach(function(b){a.addClass(b,"jimu-float-leading")}),A(".node-box",b.itemNode.domNode).forEach(function(b){a.addClass(b,
"jimu-float-leading")}),A(".node-label",b.itemNode.domNode).forEach(function(b){a.addClass(b,"jimu-float-leading")}),A(".close-btn",b.itemNode.domNode).forEach(function(b){a.addClass(b,"jimu-float-leading")}))};m.removeFloatLeading=function(b){b.itemNode&&b.itemNode.domNode&&(A(".selected-btn",b.itemNode.domNode).forEach(function(b){a.removeClass(b,"jimu-float-leading")}),A(".node-box",b.itemNode.domNode).forEach(function(b){a.removeClass(b,"jimu-float-leading")}),A(".node-label",b.itemNode.domNode).forEach(function(b){a.removeClass(b,
"jimu-float-leading")}),A(".close-btn",b.itemNode.domNode).forEach(function(b){a.removeClass(b,"jimu-float-leading")}))};m.toggleEditable=function(a){a.itemNode&&a.itemNode.nodeLabel&&(a.itemNode.nodeLabel.disabled?m.enableEditable(a):m.disableEditable(a))};m.disableEditable=function(){};m.enableEditable=function(){};m.focusLabel=function(b){b.itemNode&&b.itemNode.nodeLabel&&(b.itemNode.nodeLabel.focus(),b.itemNode.domNode&&a.addClass(b.itemNode.domNode,"a11y_hover"))};m.focusItem=function(a){a&&
a.itemNode&&a.itemNode.domNode&&a.itemNode.domNode.focus()};m.unSelected=function(b){b.itemNode&&b.itemNode&&(b=b.itemNode,a.removeClass(b.domNode,"selected"),b.isSelected=!1)};m.show=function(b){b&&b.itemNode&&(b=b.itemNode,a.removeClass(b.domNode,"hide"),b.isShow=!0)};m.hide=function(b){b&&b.itemNode&&(b=b.itemNode,a.addClass(b.domNode,"hide"),b.isShow=!1)};m.extend(u);return m})},"widgets/Bookmark/a11y/ItemNode":function(){define(["dojo/_base/lang","dojo/on","dojo/_base/html","dojo/keys"],function(h,
q,c,a){return{a11y_removeTabindex:function(a){c.removeAttr(a,"tabindex")},a11y_setTabindex:function(a,e){c.setAttr(a,"tabindex",e||0)},a11y_display:function(){this.a11y&&(!1===this.a11y.selectedBtn&&this.a11y_removeTabindex(this.selectedBtn),!1===this.a11y.editBtn&&this.a11y_removeTabindex(this.editBtn),!1===this.a11y.deleteBtn&&this.a11y_removeTabindex(this.deleteBtn),!1===this.a11y.renameBtn&&this.a11y_removeTabindex(this.renameBtn),!1===this.a11y.changeImgBtn&&this.a11y_removeTabindex(this.changeImgBtn))},
a11y_updateItemLabel:function(a){c.setAttr(this.domNode,"aria-label",a)},a11y_initEvents:function(){this.own(q(this.domNode,"keydown",h.hitch(this,function(h){var e=c.hasClass(h.target,"jimu-img-node");if(h.keyCode===a.ENTER&&e)this.onNodeBoxClick();this.a11y_checkFocus()})));this.own(q(this.domNode,"mouseout",h.hitch(this,function(){c.removeClass(this.domNode,"a11y_hover")})));this.own(q(this.domNode,"focus",h.hitch(this,function(){c.addClass(this.domNode,"a11y_hover")})))},a11y_focusToLabel:function(a){setTimeout(function(){a.focus()},
0)},a11y_focusToBtns:function(a){setTimeout(function(){a.focus()},0)},a11y_checkFocus:function(){setTimeout(h.hitch(this,function(){c.isDescendant(document.activeElement,this.domNode)||c.removeClass(this.domNode,"a11y_hover")}),50)}}})},"libs/Sortable":function(){!function(h){"function"==typeof define&&define.amd?define(h):"undefined"!=typeof module&&void 0!==module.exports?module.exports=h():window.Sortable=h()}(function(){function h(d,a){if(!d||!d.nodeType||1!==d.nodeType)throw"Sortable: `el` must be HTMLElement, not "+
{}.toString.call(d);this.el=d;this.options=a=fa({},a);d[N]=this;var b={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0,draggable:/[uo]l/i.test(d.nodeName)?"\x3eli":"\x3e*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ma(d,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,
easing:null,setData:function(d,a){d.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,touchStartThreshold:H(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==h.supportPointer&&("PointerEvent"in window||window.navigator&&"msPointerEnabled"in window.navigator),emptyInsertThreshold:5},k;for(k in b)k in a||(a[k]=b[k]);for(var g in Na(a),this)"_"===
g.charAt(0)&&"function"==typeof this[g]&&(this[g]=this[g].bind(this));(this.nativeDraggable=!a.forceFallback&&bb)&&(this.options.touchStartThreshold=1);a.supportPointer?c(d,"pointerdown",this._onTapStart):(c(d,"mousedown",this._onTapStart),c(d,"touchstart",this._onTapStart));this.nativeDraggable&&(c(d,"dragover",this),c(d,"dragenter",this));P.push(this.el);a.store&&a.store.get&&this.sort(a.store.get(this)||[])}function q(d,a,b,c){if(d){b=b||r;do{if(null!=a&&("\x3e"===a[0]&&d.parentNode===b&&Q(d,a.substring(1))||
Q(d,a))||c&&d===b)return d;if(d===b)break}while(d=(k=d).host&&k!==r&&k.host.nodeType?k.host:k.parentNode)}var k;return null}function c(d,a,b){d.addEventListener(a,b,Oa)}function a(d,a,b){d.removeEventListener(a,b,Oa)}function w(d,a,b){if(d&&a)if(d.classList)d.classList[b?"add":"remove"](a);else{var k=(" "+d.className+" ").replace(Pa," ").replace(" "+a+" "," ");d.className=(k+(b?" "+a:"")).replace(Pa," ")}}function e(d,a,b){var k=d&&d.style;if(k){if(void 0===b)return r.defaultView&&r.defaultView.getComputedStyle?
b=r.defaultView.getComputedStyle(d,""):d.currentStyle&&(b=d.currentStyle),void 0===a?b:b[a];a in k||-1!==a.indexOf("webkit")||(a="-webkit-"+a);k[a]=b+("string"==typeof b?"":"px")}}function y(d){var a="";do{var b=e(d,"transform");b&&"none"!==b&&(a=b+" "+a)}while(d=d.parentNode);return window.DOMMatrix?new DOMMatrix(a):window.WebKitCSSMatrix?new WebKitCSSMatrix(a):window.CSSMatrix?new CSSMatrix(a):void 0}function u(d,a,b){if(d){d=d.getElementsByTagName(a);a=0;var k=d.length;if(b)for(;a<k;a++)b(d[a],
a);return d}return[]}function b(a,b,z,c,g,e,f,v,h){var d,k=(a=a||b[N]).options,ma="on"+z.charAt(0).toUpperCase()+z.substr(1);!window.CustomEvent||U||X?(d=r.createEvent("Event")).initEvent(z,!0,!0):d=new CustomEvent(z,{bubbles:!0,cancelable:!0});d.to=g||b;d.from=e||b;d.item=c||b;d.clone=x;d.oldIndex=f;d.newIndex=v;d.originalEvent=h;d.pullMode=O?O.lastPutMode:void 0;b&&b.dispatchEvent(d);k[ma]&&k[ma].call(a,d)}function A(a,b,z,c,g,e,f,v){var d,k,ma=a[N],W=ma.options.onMove;return!window.CustomEvent||
U||X?(d=r.createEvent("Event")).initEvent("move",!0,!0):d=new CustomEvent("move",{bubbles:!0,cancelable:!0}),d.to=b,d.from=a,d.dragged=z,d.draggedRect=c,d.related=g||b,d.relatedRect=e||E(b),d.willInsertAfter=v,d.originalEvent=f,a.dispatchEvent(d),W&&(k=W.call(ma,d,f)),k}function l(d){d.draggable=!1}function G(){ya=!1}function m(d,a,b){for(var k=0,z=0,c=d.children;z<c.length;){if("none"!==c[z].style.display&&c[z]!==t&&c[z]!==f&&q(c[z],b.draggable,d,!1)){if(k===a)return c[z];k++}z++}return null}function n(d){for(d=
d.lastElementChild;d&&(d===t||"none"===d.style.display);)d=d.previousElementSibling;return d||null}function g(d){return B(f)<B(d)?1:-1}function v(d){d=d.tagName+d.className+d.src+d.href+d.textContent;for(var a=d.length,b=0;a--;)b+=d.charCodeAt(a);return b.toString(36)}function B(a,b){b=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&a!==x&&b++;return b}function Q(a,b){if(a)try{if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b);
if(a.webkitMatchesSelector)return a.webkitMatchesSelector(b)}catch(z){}return!1}function R(a,b){return function(){if(!da){var d=arguments,k=this;da=ja(function(){1===d.length?a.call(k,d[0]):a.apply(k,d);da=void 0},b)}}}function fa(a,b){if(a&&b)for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}function Qa(a){return za&&za.dom?za.dom(a).cloneNode(!0):Ra?Ra(a).clone(!0)[0]:a.cloneNode(!0)}function Y(a){return ja(a,0)}function E(a,b,z,c){if(a.getBoundingClientRect||a===J){var d,k,g,f,W,v,h;if(h=
a!==J&&a!==K()?(k=(d=a.getBoundingClientRect()).top,g=d.left,f=d.bottom,W=d.right,v=d.height,d.width):(g=k=0,f=window.innerHeight,W=window.innerWidth,v=window.innerHeight,window.innerWidth),c&&a!==J&&(z=z||a.parentNode,!U)){do if(z&&z.getBoundingClientRect&&"none"!==e(z,"transform")){f=z.getBoundingClientRect();k-=f.top+H(e(z,"border-top-width"));g-=f.left+H(e(z,"border-left-width"));f=k+d.height;W=g+d.width;break}while(z=z.parentNode)}b&&a!==J&&(b=(a=y(z||a))&&a.a,z=a&&a.d,a&&(f=(k/=z)+(v/=z),W=
(g/=b)+(h/=b)));return{top:k,left:g,bottom:f,right:W,width:h,height:v}}}function Sa(a,b){var d=L(a,!0);for(a=E(a)[b];d;){var k=E(d)[b];if(!("top"===b||"left"===b?k<=a:a<=k))return d;if(d===K())break;d=L(d,!1)}return!1}function Ta(a){var d=0,b=0,c=K();if(a){do var g=y(a),e=g.d,d=d+a.scrollLeft*g.a,b=b+a.scrollTop*e;while(a!==c&&(a=a.parentNode))}return[d,b]}if("undefined"==typeof window||!window.document)return function(){throw Error("Sortable.js requires a window with a document");};var f,M,t,x,p,
ga,Aa,Z,Ba,Ca,S,F,qa,O,aa,Da,Ea,ea,I,ra,ka,na,oa,sa,D,la,C=[],Fa=!1,ba=!1,ta=!1,P=[],pa=!1,ua=!1,Ga=[],Pa=/\s+/g,N="Sortable"+(new Date).getTime(),J=window,r=J.document,H=J.parseInt,ja=J.setTimeout,Ra=J.jQuery||J.Zepto,za=J.Polymer,Oa={capture:!1,passive:!1},U=!!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie|iemobile)/i),X=!!navigator.userAgent.match(/Edge/i),Ua=!!navigator.userAgent.match(/firefox/i),Ha=!(!navigator.userAgent.match(/safari/i)||navigator.userAgent.match(/chrome/i)||navigator.userAgent.match(/android/i)),
va=!!navigator.userAgent.match(/iP(ad|od|hone)/i),Va=X||U?"cssFloat":"float",bb="draggable"in r.createElement("div"),Ia=function(){if(U)return!1;var a=r.createElement("x");return a.style.cssText="pointer-events:auto","auto"===a.style.pointerEvents}(),ya=!1,Ja=!1,ca=Math.abs,cb=Math.min,db=Math.max,wa=[],Ma=function(a,b){var d=e(a),k=H(d.width)-H(d.paddingLeft)-H(d.paddingRight)-H(d.borderLeftWidth)-H(d.borderRightWidth),c=m(a,0,b);a=m(a,1,b);var g=c&&e(c);b=a&&e(a);var f=g&&H(g.marginLeft)+H(g.marginRight)+
E(c).width,v=b&&H(b.marginLeft)+H(b.marginRight)+E(a).width;return"flex"===d.display?"column"===d.flexDirection||"column-reverse"===d.flexDirection?"vertical":"horizontal":"grid"===d.display?1>=d.gridTemplateColumns.split(" ").length?"vertical":"horizontal":c&&"none"!==g.float?(d="left"===g.float?"left":"right",!a||"both"!==b.clear&&b.clear!==d?"horizontal":"vertical"):c&&("block"===g.display||"flex"===g.display||"table"===g.display||"grid"===g.display||k<=f&&"none"===d[Va]||a&&"none"===d[Va]&&k<
f+v)?"vertical":"horizontal"},L=function(a,b){if(!a||!a.getBoundingClientRect)return K();var d=!1;do if(a.clientWidth<a.scrollWidth||a.clientHeight<a.scrollHeight){var k=e(a);if(a.clientWidth<a.scrollWidth&&("auto"==k.overflowX||"scroll"==k.overflowX)||a.clientHeight<a.scrollHeight&&("auto"==k.overflowY||"scroll"==k.overflowY)){if(!a||!a.getBoundingClientRect||a===r.body)break;if(d||b)return a;d=!0}}while(a=a.parentNode);return K()},K=function(){return U?r.documentElement:r.scrollingElement},Wa=function(a,
b,c){a.scrollLeft+=b;a.scrollTop+=c},Ka=R(function(a,b,c,g){if(b.scroll){var d=c?c[N]:window,k=b.scrollSensitivity,z=b.scrollSpeed,f=a.clientX,v=a.clientY,W=K(),B=!1;Ba!==c&&(xa(),Z=b.scroll,Ca=b.scrollFn,!0===Z&&(Z=L(c,!0),Ba=Z));c=0;var q=Z;do{var r,l,n,p,w,t,A,m,y,u=q,x=E(u);w=x.top;var Q=x.bottom;p=x.left;var G=x.right,D=x.width,x=x.height;if(r=u.scrollWidth,l=u.scrollHeight,n=e(u),m=u.scrollLeft,y=u.scrollTop,A=u===W?(t=D<r&&("auto"===n.overflowX||"scroll"===n.overflowX||"visible"===n.overflowX),
x<l&&("auto"===n.overflowY||"scroll"===n.overflowY||"visible"===n.overflowY)):(t=D<r&&("auto"===n.overflowX||"scroll"===n.overflowX),x<l&&("auto"===n.overflowY||"scroll"===n.overflowY)),p=t&&(ca(G-f)<=k&&m+D<r)-(ca(p-f)<=k&&!!m),w=A&&(ca(Q-v)<=k&&y+x<l)-(ca(w-v)<=k&&!!y),!C[c])for(Q=0;Q<=c;Q++)C[Q]||(C[Q]={});C[c].vx==p&&C[c].vy==w&&C[c].el===u||(C[c].el=u,C[c].vx=p,C[c].vy=w,clearInterval(C[c].pid),!u||0==p&&0==w||(B=!0,C[c].pid=setInterval(function(){g&&0===this.layer&&(h.active._emulateDragOver(!0),
h.active._onTouchMove(I,!0));var b=C[this.layer].vy?C[this.layer].vy*z:0,c=C[this.layer].vx?C[this.layer].vx*z:0;"function"==typeof Ca&&"continue"!==Ca.call(d,c,b,a,I,C[this.layer].el)||Wa(C[this.layer].el,c,b)}.bind({layer:c}),24)));c++}while(b.bubbleScroll&&q!==W&&(q=L(q,!1)));Fa=B}},30),xa=function(){C.forEach(function(a){clearInterval(a.pid)});C=[]},Na=function(a){function d(a,b){return function(c,k,g,f){var e=c.options.group.name&&k.options.group.name&&c.options.group.name===k.options.group.name;
if(null==a&&(b||e))return!0;if(null==a||!1===a)return!1;if(b&&"clone"===a)return a;if("function"==typeof a)return d(a(c,k,g,f),b)(c,k,g,f);c=(b?c:k).options.group.name;return!0===a||"string"==typeof a&&a===c||a.join&&-1<a.indexOf(c)}}var b={},c=a.group;c&&"object"==typeof c||(c={name:c});b.name=c.name;b.checkPull=d(c.pull,!0);b.checkPut=d(c.put);b.revertClone=c.revertClone;a.group=b},Xa=function(a){f&&f.parentNode&&f.parentNode[N]&&f.parentNode[N]._computeIsAligned(a)},Ya=function(a,b){for(;!b[N];)b=
b.parentNode;return a===b},Za=function(a,b,c){for(a=a.parentNode;a&&!a[N];)a=a.parentNode;a&&a[N][c](fa(b,{artificialBubble:!0}))},$a=function(){!Ia&&t&&e(t,"display","none")},ab=function(){!Ia&&t&&e(t,"display","")};r.addEventListener("click",function(a){if(ta)return a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),ta=!1},!0);var da,La=function(a){if(a=a.touches?a.touches[0]:a,f){var b;a:{b=a.clientX;for(var d=a.clientY,c=0;c<P.length;c++)if(!n(P[c])){var g=
E(P[c]),e=P[c][N].options.emptyInsertThreshold,v=d>=g.top-e&&d<=g.bottom+e;if(b>=g.left-e&&b<=g.right+e&&v){b=P[c];break a}}b=void 0}b&&b[N]._onDragOver({clientX:a.clientX,clientY:a.clientY,target:b,rootEl:b})}};return c(r,"dragover",La),c(r,"mousemove",La),c(r,"touchmove",La),h.prototype={constructor:h,_computeIsAligned:function(a){var b;if(t&&!Ia?($a(),b=r.elementFromPoint(a.clientX,a.clientY),ab()):b=a.target,b=q(b,this.options.draggable,this.el,!1),!Ja&&f&&f.parentNode===this.el){for(var d,c,
g,e,v,h,B,n,l=this.el.children,p=0;p<l.length;p++)q(l[p],this.options.draggable,this.el,!1)&&l[p]!==b&&(l[p].sortableMouseAligned=(d=a.clientX,c=a.clientY,g=l[p],e=this._getDirection(a,null),this.options,void 0,v=E(g),h="vertical"===e?v.left:v.top,B="vertical"===e?v.right:v.bottom,h<(n="vertical"===e?d:c)&&n<B));q(b,this.options.draggable,this.el,!0)||(ka=null);Ja=!0;ja(function(){Ja=!1},30)}},_getDirection:function(a,b){return"function"==typeof this.options.direction?this.options.direction.call(this,
a,b,f):this.options.direction},_onTapStart:function(a){if(a.cancelable){var d,c=this,g=this.el,e=this.options,v=e.preventOnFilter,h=a.type,n=a.touches&&a.touches[0],l=(n||a).target,p=a.target.shadowRoot&&(a.path&&a.path[0]||a.composedPath&&a.composedPath()[0])||l,r=e.filter;if(function(a){wa.length=0;a=a.getElementsByTagName("input");for(var b=a.length;b--;){var d=a[b];d.checked&&wa.push(d)}}(g),!(U&&!a.artificialBubble&&!Ya(g,l)||f||/mousedown|pointerdown/.test(h)&&0!==a.button||e.disabled||p.isContentEditable))if(l=
q(l,e.draggable,g,!1)){if(Aa!==l){if(d=B(l,e.draggable),"function"==typeof r){if(r.call(this,a,l,this))return b(c,p,"filter",l,g,g,d),void(v&&a.cancelable&&a.preventDefault())}else if(r&&(r=r.split(",").some(function(a){if(a=q(p,a.trim(),g,!1))return b(c,a,"filter",l,g,g,d),!0})))return void(v&&a.cancelable&&a.preventDefault());e.handle&&!q(p,e.handle,g,!1)||this._prepareDragStart(a,n,l,d)}}else U&&Za(g,a,"_onTapStart")}},_handleAutoScroll:function(a,b){if(f&&this.options.scroll){var d=a.clientX,
c=a.clientY,g=r.elementFromPoint(d,c),k=this;if(b||X||U||Ha){Ka(a,k.options,g,b);var e=L(g,!0);!Fa||aa&&d===Da&&c===Ea||(aa&&clearInterval(aa),aa=setInterval(function(){if(f){var g=L(r.elementFromPoint(d,c),!0);g!==e&&(e=g,xa(),Ka(a,k.options,e,b))}},10),Da=d,Ea=c)}else{if(!k.options.bubbleScroll||L(g,!0)===K())return void xa();Ka(a,k.options,L(g,!1),!1)}}},_prepareDragStart:function(a,g,e,v){var d,k=this,z=k.el,h=k.options,B=z.ownerDocument;e&&!f&&e.parentNode===z&&(p=z,M=(f=e).parentNode,ga=f.nextSibling,
Aa=e,qa=h.group,S=v,ea={target:f,clientX:(g||a).clientX,clientY:(g||a).clientY},this._lastX=(g||a).clientX,this._lastY=(g||a).clientY,f.style["will-change"]="all",f.style.transition="",f.style.transform="",d=function(){k._disableDelayedDragEvents();!Ua&&k.nativeDraggable&&(f.draggable=!0);k._triggerDragStart(a,g);b(k,p,"choose",f,p,p,S);w(f,h.chosenClass,!0)},h.ignore.split(",").forEach(function(a){u(f,a.trim(),l)}),h.supportPointer?c(B,"pointerup",k._onDrop):(c(B,"mouseup",k._onDrop),c(B,"touchend",
k._onDrop),c(B,"touchcancel",k._onDrop)),Ua&&this.nativeDraggable&&(this.options.touchStartThreshold=4,f.draggable=!0),!h.delay||this.nativeDraggable&&(X||U)?d():(c(B,"mouseup",k._disableDelayedDrag),c(B,"touchend",k._disableDelayedDrag),c(B,"touchcancel",k._disableDelayedDrag),c(B,"mousemove",k._delayedDragTouchMoveHandler),c(B,"touchmove",k._delayedDragTouchMoveHandler),h.supportPointer&&c(B,"pointermove",k._delayedDragTouchMoveHandler),k._dragStartTimer=ja(d,h.delay)))},_delayedDragTouchMoveHandler:function(a){a=
a.touches?a.touches[0]:a;db(ca(a.clientX-this._lastX),ca(a.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){f&&l(f);clearTimeout(this._dragStartTimer);this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var b=this.el.ownerDocument;a(b,"mouseup",this._disableDelayedDrag);a(b,"touchend",this._disableDelayedDrag);a(b,"touchcancel",this._disableDelayedDrag);
a(b,"mousemove",this._delayedDragTouchMoveHandler);a(b,"touchmove",this._delayedDragTouchMoveHandler);a(b,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(a,b){b=b||("touch"==a.pointerType?a:null);!this.nativeDraggable||b?this.options.supportPointer?c(r,"pointermove",this._onTouchMove):c(r,b?"touchmove":"mousemove",this._onTouchMove):(c(f,"dragend",this),c(p,"dragstart",this._onDragStart));try{r.selection?Y(function(){r.selection.empty()}):window.getSelection().removeAllRanges()}catch(z){}},
_dragStarted:function(a,g){if(ba=!1,p&&f){this.nativeDraggable&&(c(r,"dragover",this._handleAutoScroll),c(r,"dragover",Xa));var d=this.options;!a&&w(f,d.dragClass,!1);w(f,d.ghostClass,!0);e(f,"transform","");h.active=this;a&&this._appendGhost();b(this,p,"start",f,p,p,S,void 0,g)}else this._nulling()},_emulateDragOver:function(a){if(I&&(this._lastX!==I.clientX||this._lastY!==I.clientY||a)){this._lastX=I.clientX;this._lastY=I.clientY;$a();for(var b=a=r.elementFromPoint(I.clientX,I.clientY);a&&a.shadowRoot;)b=
a=a.shadowRoot.elementFromPoint(I.clientX,I.clientY);if(b){do{if(b[N]&&b[N]._onDragOver({clientX:I.clientX,clientY:I.clientY,target:a,rootEl:b})&&!this.options.dragoverBubble)break;a=b}while(b=b.parentNode)}f.parentNode[N]._computeIsAligned(I);ab()}},_onTouchMove:function(a,b){if(ea){var d=this.options,c=d.fallbackTolerance,g=d.fallbackOffset,d=a.touches?a.touches[0]:a,k=t&&y(t),f=t&&k&&k.a,k=t&&k&&k.d,v=va&&D&&Ta(D),f=(d.clientX-ea.clientX+g.x)/(f||1)+(v?v[0]-Ga[0]:0)/(f||1),g=(d.clientY-ea.clientY+
g.y)/(k||1)+(v?v[1]-Ga[1]:0)/(k||1),g=a.touches?"translate3d("+f+"px,"+g+"px,0)":"translate("+f+"px,"+g+"px)";if(!h.active&&!ba){if(c&&cb(ca(d.clientX-this._lastX),ca(d.clientY-this._lastY))<c)return;this._onDragStart(a,!0)}!b&&this._handleAutoScroll(d,!0);ra=!0;I=d;e(t,"webkitTransform",g);e(t,"mozTransform",g);e(t,"msTransform",g);e(t,"transform",g);a.cancelable&&a.preventDefault()}},_appendGhost:function(){if(!t){var a=this.options.fallbackOnBody?r.body:p,b=E(f,!0,a,!va),c=(e(f),this.options);
if(va){for(D=a;"static"===e(D,"position")&&"none"===e(D,"transform")&&D!==r;)D=D.parentNode;if(D!==r){var g=E(D,!0);b.top-=g.top;b.left-=g.left}D!==r.body&&D!==r.documentElement?(D===r&&(D=K()),b.top+=D.scrollTop,b.left+=D.scrollLeft):D=K();Ga=Ta(D)}w(t=f.cloneNode(!0),c.ghostClass,!1);w(t,c.fallbackClass,!0);w(t,c.dragClass,!0);e(t,"box-sizing","border-box");e(t,"margin",0);e(t,"top",b.top);e(t,"left",b.left);e(t,"width",b.width);e(t,"height",b.height);e(t,"opacity","0.8");e(t,"position",va?"absolute":
"fixed");e(t,"zIndex","100000");e(t,"pointerEvents","none");a.appendChild(t)}},_onDragStart:function(d,g){var k=this,v=d.dataTransfer,h=k.options;(x=Qa(f)).draggable=!1;x.style["will-change"]="";this._hideClone();w(x,k.options.chosenClass,!1);k._cloneId=Y(function(){k.options.removeCloneOnHide||p.insertBefore(x,f);b(k,p,"clone",f)});!g&&w(f,h.dragClass,!0);g?(ta=!0,k._loopId=setInterval(k._emulateDragOver,50)):(a(r,"mouseup",k._onDrop),a(r,"touchend",k._onDrop),a(r,"touchcancel",k._onDrop),v&&(v.effectAllowed=
"move",h.setData&&h.setData.call(k,v,f)),c(r,"drop",k),e(f,"transform","translateZ(0)"));ba=!0;k._dragStartId=Y(k._dragStarted.bind(k,g,d));c(r,"selectstart",k);Ha&&e(r.body,"user-select","none")},_onDragOver:function(a){function d(b){return b&&(Q?y._hideClone():y._showClone(C),y&&(w(f,O?O.options.ghostClass:y.options.ghostClass,!1),w(f,u.ghostClass,!0)),O!==C&&C!==h.active?O=C:C===h.active&&(O=null),e&&C._animate(e,f),m&&v&&C._animate(v,m)),(m===f&&!f.animated||m===t&&!m.animated)&&(ka=null),u.dragoverBubble||
a.rootEl||m===r||(C._handleAutoScroll(a),f.parentNode[N]._computeIsAligned(a)),!u.dragoverBubble&&a.stopPropagation&&a.stopPropagation(),!0}function c(){b(C,p,"change",m,t,p,S,B(f,u.draggable),a)}var e,v,l,t=this.el,m=a.target,u=this.options,x=u.group,y=h.active,Q=qa===x,D=u.sort,C=this;if(!ya&&(!U||a.rootEl||a.artificialBubble||Ya(t,m))){if(void 0!==a.preventDefault&&a.cancelable&&a.preventDefault(),ra=!0,m=q(m,u.draggable,t,!0),q(a.target,null,f,!0)||m.animated)return d(!1);if(m!==f&&(ta=!1),y&&
!u.disabled&&(Q?D||(l=!p.contains(f)):O===this||(this.lastPutMode=qa.checkPull(this,y,f,a))&&x.checkPut(this,y,f,a))){x=this._getDirection(a,m);if(e=E(f),l)return this._hideClone(),M=p,ga?p.insertBefore(f,ga):p.appendChild(f),d(!0);if((l=n(t))&&(J=a,T=x,K=E(n(t)),R="vertical"===T?J.clientY:J.clientX,F="vertical"===T?J.clientX:J.clientY,H="vertical"===T?K.bottom:K.right,ba="vertical"===T?K.left:K.top,Y="vertical"===T?K.right:K.bottom,!("vertical"===T?Y+10<F||F<=Y&&H<R&&ba<=F:H<R&&ba<F||R<=H&&Y+10<
F)||l.animated)){if(m&&m!==f&&m.parentNode===t){var I,R=0,F=m.sortableMouseAligned,H=f.parentNode!==t,J="vertical"===x?"top":"left",K=(T=Sa(m,"top")||Sa(f,"top"))?T.scrollTop:void 0;if(ka!==m&&(oa=null,I=E(m)[J],pa=!1),L=m,V=x,ha=(P=f)===f&&la||E(P),ia=L===f&&la||E(L),fa="vertical"===V?ha.left:ha.top,Z="vertical"===V?ha.right:ha.bottom,aa="vertical"===V?ha.width:ha.height,X="vertical"===V?ia.left:ia.top,da="vertical"===V?ia.right:ia.bottom,ea="vertical"===V?ia.width:ia.height,oa=(fa===X||Z===da||
fa+aa/2===X+ea/2)&&F||H||T||u.invertSwap||"insert"===oa||"swap"===oa?("swap"!==oa&&(ua=u.invertSwap||H),R=function(a,b,d,c,e,k,v){var h=E(b);a="vertical"===d?a.clientY:a.clientX;var B="vertical"===d?h.height:h.width,l="vertical"===d?h.top:h.left,h="vertical"===d?h.bottom:h.right,m=E(f),n=!1;if(!k)if(v&&sa<B*c)if(!pa&&(1===na?l+B*e/2<a:a<h-B*e/2)&&(pa=!0),pa)n=!0;else{if("vertical"===d?m.top:m.left,"vertical"===d?m.bottom:m.right,1===na?a<l+sa:h-sa<a)return-1*na}else if(l+B*(1-c)/2<a&&a<h-B*(1-c)/
2)return g(b);return(n=n||k)&&(a<l+B*e/2||h-B*e/2<a)?l+B/2<a?1:-1:0}(a,m,x,u.swapThreshold,null==u.invertedSwapThreshold?u.swapThreshold:u.invertedSwapThreshold,ua,ka===m),"swap"):(R=g(m),"insert"),0===R)return d(!1);la=null;na=R;v=E(ka=m);P=m.nextElementSibling;L=!1;V=A(p,t,f,e,m,v,a,L=1===R);if(!1!==V)return 1!==V&&-1!==V||(L=1===V),ya=!0,ja(G,30),Q?y._hideClone():y._showClone(this),L&&!P?t.appendChild(f):m.parentNode.insertBefore(f,L?P:m),T&&Wa(T,0,K-T.scrollTop),M=f.parentNode,void 0===I||ua||
(sa=ca(I-E(m)[J])),c(),d(!0)}}else if(l&&t===a.target&&(m=l),m&&(v=E(m)),Q?y._hideClone():y._showClone(this),!1!==A(p,t,f,e,m,v,a,!!m))return t.appendChild(f),M=t,la=null,c(),d(!0);if(t.contains(f))return d(!1)}var P,L,V,ha,ia,fa,Z,aa,X,da,ea,J,T,K,R,F,H,ba,Y;return U&&!a.rootEl&&Za(t,a,"_onDragOver"),!1}},_animate:function(a,b){var d=this.options.animation;if(d){var c=E(b);if(b===f&&(la=c),1===a.nodeType&&(a=E(a)),a.left+a.width/2!==c.left+c.width/2||a.top+a.height/2!==c.top+c.height/2){var g=y(this.el),
k=g&&g.a,g=g&&g.d;e(b,"transition","none");e(b,"transform","translate3d("+(a.left-c.left)/(k||1)+"px,"+(a.top-c.top)/(g||1)+"px,0)");b.offsetWidth;e(b,"transition","transform "+d+"ms"+(this.options.easing?" "+this.options.easing:""));e(b,"transform","translate3d(0,0,0)")}"number"==typeof b.animated&&clearTimeout(b.animated);b.animated=ja(function(){e(b,"transition","");e(b,"transform","");b.animated=!1},d)}},_offUpEvents:function(){var b=this.el.ownerDocument;a(r,"touchmove",this._onTouchMove);a(r,
"pointermove",this._onTouchMove);a(b,"mouseup",this._onDrop);a(b,"touchend",this._onDrop);a(b,"pointerup",this._onDrop);a(b,"touchcancel",this._onDrop);a(r,"selectstart",this)},_onDrop:function(d){var c=this.el,g=this.options;pa=ua=Fa=ba=!1;clearInterval(this._loopId);clearInterval(aa);xa();clearTimeout(da);da=void 0;clearTimeout(this._dragStartTimer);clearTimeout(this._cloneId);clearTimeout(this._dragStartId);a(r,"mousemove",this._onTouchMove);this.nativeDraggable&&(a(r,"drop",this),a(c,"dragstart",
this._onDragStart),a(r,"dragover",this._handleAutoScroll),a(r,"dragover",Xa));Ha&&e(r.body,"user-select","");this._offUpEvents();d&&(ra&&(d.cancelable&&d.preventDefault(),!g.dropBubble&&d.stopPropagation()),t&&t.parentNode&&t.parentNode.removeChild(t),(p===M||O&&"clone"!==O.lastPutMode)&&x&&x.parentNode&&x.parentNode.removeChild(x),f&&(this.nativeDraggable&&a(f,"dragend",this),l(f),f.style["will-change"]="",w(f,O?O.options.ghostClass:this.options.ghostClass,!1),w(f,this.options.chosenClass,!1),b(this,
p,"unchoose",f,M,p,S,null,d),p!==M?(0<=(F=B(f,g.draggable))&&(b(null,M,"add",f,M,p,S,F,d),b(this,p,"remove",f,M,p,S,F,d),b(null,M,"sort",f,M,p,S,F,d),b(this,p,"sort",f,M,p,S,F,d)),O&&O.save()):f.nextSibling!==ga&&0<=(F=B(f,g.draggable))&&(b(this,p,"update",f,M,p,S,F,d),b(this,p,"sort",f,M,p,S,F,d)),h.active&&(null!=F&&-1!==F||(F=S),b(this,p,"end",f,M,p,S,F,d),this.save())));this._nulling()},_nulling:function(){p=f=M=t=ga=x=Aa=Z=Ba=C.length=aa=Da=Ea=ea=I=ra=F=S=ka=na=la=O=qa=h.active=null;wa.forEach(function(a){a.checked=
!0});wa.length=0},handleEvent:function(a){switch(a.type){case "drop":case "dragend":this._onDrop(a);break;case "dragenter":case "dragover":f&&(this._onDragOver(a),a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.cancelable&&a.preventDefault());break;case "selectstart":a.preventDefault()}},toArray:function(){for(var a,b=[],c=this.el.children,g=0,e=c.length,f=this.options;g<e;g++)q(a=c[g],f.draggable,this.el,!1)&&b.push(a.getAttribute(f.dataIdAttr)||v(a));return b},sort:function(a){var b={},d=this.el;
this.toArray().forEach(function(a,c){c=d.children[c];q(c,this.options.draggable,d,!1)&&(b[a]=c)},this);a.forEach(function(a){b[a]&&(d.removeChild(b[a]),d.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set&&a.set(this)},closest:function(a,b){return q(a,b||this.options.draggable,this.el,!1)},option:function(a,b){var c=this.options;if(void 0===b)return c[a];c[a]=b;"group"===a&&Na(c)},destroy:function(){var b=this.el;b[N]=null;a(b,"mousedown",this._onTapStart);a(b,"touchstart",this._onTapStart);
a(b,"pointerdown",this._onTapStart);this.nativeDraggable&&(a(b,"dragover",this),a(b,"dragenter",this));Array.prototype.forEach.call(b.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")});this._onDrop();P.splice(P.indexOf(this.el),1);this.el=b=null},_hideClone:function(){x.cloneHidden||(e(x,"display","none"),x.cloneHidden=!0,x.parentNode&&this.options.removeCloneOnHide&&x.parentNode.removeChild(x))},_showClone:function(a){"clone"===a.lastPutMode?x.cloneHidden&&(p.contains(f)&&
!this.options.group.revertClone?p.insertBefore(x,f):ga?p.insertBefore(x,ga):p.appendChild(x),this.options.group.revertClone&&this._animate(f,x),e(x,"display",""),x.cloneHidden=!1):this._hideClone()}},c(r,"touchmove",function(a){(h.active||ba)&&a.cancelable&&a.preventDefault()}),h.utils={on:c,off:a,css:e,find:u,is:function(a,b){return!!q(a,b,a,!1)},extend:fa,throttle:R,closest:q,toggleClass:w,clone:Qa,index:B,nextTick:Y,cancelNextTick:function(a){return clearTimeout(a)},detectDirection:Ma,getChild:m},
h.create=function(a,b){return new h(a,b)},h.version="1.8.4",h})},"widgets/Bookmark/CustomBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/sniff esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils ./ItemNode jimu/dijit/ImageChooser libs/Sortable".split(" "),function(h,q,c,a,w,e,y,u,b,A,l,G,m,n){return q([b,A,h],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",
nls:null,_CHANGING_IMG_BM:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=a.create("div",{"class":"drawer-handle hide",innerHTML:"\x3cdiv class\x3d'separate-line'\x3e\x3c/div\x3e"},this.domNode);this.bookMarkerContainer=a.create("div",{"class":"custom editing"},this.domNode);this.imageChooserContainer=a.create("div",{"class":"hide"},this.domNode)},startup:function(){this.inherited(arguments);var b=l.readBookmarksInWebmap(this.map);(!0===this.config.syncMode.webmap&&0<b.length||
!0===this.config.syncMode.custom&&0<this.config.bookmarks2D.length)&&a.removeClass(this.drawerHandle,"hide");this.sortableBookMarkerNodes=n.create(this.bookMarkerContainer,{handle:".drag-masker",filter:".disable-drag .hide",sort:!0,disabled:!1,animation:100,onSort:c.hitch(this,function(){this.saveBookMarkersBySortable();this.emit("sort",this.bookmarks)})});this.imageChooser=new m({cropImage:!1,showSelfImg:!0,goldenWidth:108,goldenHeight:71,maxSize:100,label:this.nls.selectFile,format:["image/gif",
"image/png","image/jpeg"]},this.imageChooserContainer);this.imageChooser.startup();this.own(e(this.imageChooser,"imageChange",c.hitch(this,"_onImageChange")))},toggleMobile:function(a){(this._IS_MOBILE=a)?this.sortableBookMarkerNodes.option("disabled",!0):this.sortableBookMarkerNodes.option("disabled",!1)},refresh:function(a){this.bookmarks=a;l.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks);this.toggleDrawer()},add:function(){var b=l.getAutoRenameBeforeAdd("bookmark",this.bookmarks),
e={name:"bookmark",displayName:b,extent:this.map.extent.toJson(),isSaveLayers:this.config.isSaveLayerVisibility,isSaveExtent:!0};!0===this.config.isSaveLayerVisibility&&(e.layerOptions=l.getlayerInfos());"bookmark"!==b&&(e._autoRename=!0);this._doAddBookmark(e);this.bookmarks.unshift(e);e.itemNode&&e.itemNode.domNode&&a.place(e.itemNode.domNode,this.bookMarkerContainer,"first");this.displayBookmarks(this.bookmarks);this.toggleDrawer();this.bookmarks.forEach(c.hitch(this,function(a,b){0===b?(G.enableEditable(a),
G.focusLabel(a)):G.disableEditable(a)}));this.emit("added",this.bookmarks)},_doAddBookmark:function(a){var b={enableEditLabel:!0,editBtn:!1,changeImgBtn:!0,layerInfosIcon:l.isWithLayerInfos(a)},b=l.createBookMarkNode(a,this.nls,this.folderUrl,b);a.itemNode=b;this.own(e(b,"thumbnail-click",c.hitch(this,c.partial(this._onNodeBoxClick,a))));this.own(e(b,"label-click",c.hitch(this,c.partial(this._onLebelClick,a))));this.own(e(b,"label-blur",c.hitch(this,c.partial(this._onLabelBlur,a))));this.own(e(b,
"delete",c.hitch(this,c.partial(this._onBookmarkDeleteImmediately,a))));this.own(e(b,"change-img",c.hitch(this,c.partial(this._onBookmarkChangeImg,a))));this.own(e(b,"rename",c.hitch(this,c.partial(this._onRename,a))));return b},filter:function(a){this._LAST_FILTER_STR=a;l.filter(a,this.bookmarks)},displayBookmarks:function(b){l.empty(b,this.bookMarkerContainer);w.forEach(b,function(a){a&&this._doAddBookmark(a)},this);b.forEach(c.hitch(this,function(b){b&&b.itemNode&&b.itemNode.domNode&&a.place(b.itemNode.domNode,
this.bookMarkerContainer,"last")}))},saveBookMarkersBySortable:function(a){for(var b=this.sortableBookMarkerNodes.toArray(),c=[],g=0,e=b.length;g<e;g++){var h=l.findBookMarkByUID(b[g],this.bookmarks);h&&c.push(h.bookmark)}this.bookmarks=c;a&&a.isRefresh&&this.displayBookmarks(this.bookmarks)},_isListMode:function(){if(this.domNode){var b=this.domNode.parentElement||this.domNode.parentNode;if(b)return a.hasClass(b,"list")}return!1},_onNodeBoxClick:function(a){require(["esri/geometry/Extent"],c.hitch(this,
function(b){if(!1!==a.isSaveExtent){var c=a.extent;c.spatialReference?new u(c.spatialReference):new u({wkid:4326});this.map.setExtent(new b(c))}l.layerInfosRestoreState(a.isSaveLayers,a.layerOptions)}))},_onLebelClick:function(a){this._isListMode()||!0===this._IS_MOBILE?this._onNodeBoxClick(a):G.focusLabel(a)},_onLabelBlur:function(a){var b=a.itemNode.nodeLabel.get("value");a.displayName=b;a.name=b;this.emit("label-blur",this.bookmarks);this.filter(this._LAST_FILTER_STR)},_onBookmarkDeleteImmediately:function(a){this.removeBookMarks([a])},
removeBookMarks:function(a){for(var b=null,c=0,g=a.length;c<g;c++){var e=l.findBookMark(a[c],this.bookmarks);e&&e.bookmark&&(e.bookmark.itemNode&&e.bookmark.itemNode.destroy(),b=l.findNextBookMarkByIdx(e.idx,this.bookmarks),this.bookmarks.splice(e.idx,1))}this.emit("delete",{bookmarks:this.bookmarks,nextBookmark:b});this.toggleDrawer()},_onBookmarkChangeImg:function(a){this._CHANGING_IMG_BM=a;a=this.imageChooser.mask;if(y("safari")){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,
!0);a.dispatchEvent(b)}else a.click()},_onImageChange:function(a){this._CHANGING_IMG_BM&&this._CHANGING_IMG_BM.itemNode&&(""!==a&&(this._CHANGING_IMG_BM.itemNode.changeImg(a),this._CHANGING_IMG_BM.thumbnail=a),this.emit("change-img",this.bookmarks))},_onRename:function(a){G.focusLabel(a)},toggleDrawer:function(){!0===l.isBookmarksDataEmpty(this.bookmarks)?a.addClass(this.domNode,"hide"):a.removeClass(this.domNode,"hide")},hideDrawer:function(){a.addClass(this.bookMarkerContainer,"hide")},showDrawer:function(){a.removeClass(this.bookMarkerContainer,
"hide")}})})},"widgets/Bookmark/a11y/Widget":function(){define(["dojo/query","dojo/_base/array","dojo/_base/html","jimu/utils","../ItemNode"],function(h,q,c,a,w){return{a11y_initFocusNodes:function(){var c=this._getFocusableNodes();c&&c.length&&(this._508_FIRST_FOCUS_NODE=c[0],a.initFirstFocusNode(this.domNode,this._508_FIRST_FOCUS_NODE),0<c.length&&a.initLastFocusNode(this.domNode,c[c.length-1]))},a11y_focusAfterDelete:function(a){a&&a.itemNode&&a.itemNode.domNode?w.focusItem(a):this._508_FIRST_FOCUS_NODE.focus()},
_getFocusableNodes:function(){var a=h('[tabindex $\x3d"0"]',this.domNode);return a=q.filter(a,function(a){return!c.hasClass(a,"dijitInputInner")&&(c.hasClass(a,"delete-btn")||"none"!==c.getStyle(a,"display"))},this)}}})},"widgets/Bookmark/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Bookmark/HeadBar.html":'\x3cdiv class\x3d"header"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editableBtns" class\x3d"editable-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"addBtn" class\x3d"add hide" title\x3d"${nls.labelBookmarkName}" tabindex\x3d"0" role\x3d"button"\x3e${nls.addBtn}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"oper-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"filter" class\x3d"filter-container hide"\x3e\r\n\t\t\t\x3cdiv class\x3d"filter-input"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"filterInput" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tplaceHolder\x3d"${nls.searchBookmark}" required\x3d"false"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"search" data-dojo-attach-point\x3d"filterBtn" title\x3d"${nls.searchBookmark}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"commonFunBtns" class\x3d"common-fun-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"syncBtn" class\x3d"head-btns sync-btn" title\x3d"${nls.syncTip}"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"backToInitBtn" class\x3d"head-btns back-to-init hide" title\x3d""\x3e\x3c/div\x3e--\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"displayMode" class\x3d"display-mode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"cardsBtn" class\x3d"head-btns cards hide" title\x3d"${nls.cardsTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"listBtn" class\x3d"head-btns list hide" title\x3d"${nls.listTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"editBtns" class\x3d"edit-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"head-btns rename" title\x3d"rename"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"head-btns delete" title\x3d"delete"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/ItemNode.html":'\x3cdiv class\x3d"jimu-img-node jimu-float-leading clearFix" data-id\x3d"" tabindex\x3d"0" aria-label\x3d""\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeBox" class\x3d"node-box verticalCenter no-user-select"\x3e\r\n\t\t\x3cimg data-dojo-attach-point\x3d"thumbnail" class\x3d"thumbnail" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox" required\x3d"true" data-dojo-props\x3d"trim:true"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"changeImgBtn" class\x3d"change-img-btn oper-btns no-user-select hide" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editBtn" class\x3d"edit-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"rename-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"delete-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"dragMasker" class\x3d"drag-masker" tabindex\x3d"-1"\x3e\x3c/div\x3e\x3c!--for different browsers drag behavior--\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerInfosIcon" class\x3d"layer-info-icon icons no-user-select hide"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"selectedBtn" class\x3d"selected-btn oper-btns no-user-select hide"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/Widget.html":'\x3cdiv class\x3d""\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"headBarContainer" class\x3d"head-bar"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookmarksContainer" class\x3d"bookmarks-container cards"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"webmapBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"customBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c!--\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookMarkerContainer" class\x3d"bookmarker-nodes cards"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editMenuContainer" class\x3d"edit-menu"\x3e\r\n\t\t\x3cdiv class\x3d"delete-btn edit-menu-btns" data-dojo-attach-point\x3d"deleteBtn" data-dojo-attach-event\x3d"onclick:_onEditMenuDelete"\x3e${nls.labelDelete}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"imageChooserContainer" class\x3d"hide"\x3e\x3c/div\x3e\r\n--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/css/style.css":'.jimu-img-node{font-size: 12px; position: relative; float: left; color: #666; overflow: hidden;}.jimu-img-node .node-box{position: relative; border-radius: 4px; overflow: hidden;}.jimu-img-node img{width: 100%; height: 100%; cursor: pointer;}.jimu-img-node .node-label{height: 30px; text-align: center; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled{opacity: 1;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #000; opacity: 0.9;}.jimu-widget-bookmark .no-user-select{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.jimu-widget-bookmark .hide {display: none !important;}.jimu-widget-bookmark .clearFix {*overflow: hidden; *zoom: 1;}.jimu-widget-bookmark .clearFix:after {display: table; content: ""; width: 0; clear: both;}.jimu-widget-bookmark .verticalCenter{display: flex; align-items: center;}.jimu-widget-bookmark .jimu-img-node .node-box{margin: 0 auto; width: 100px; height: 60px;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{width: 100px; height: 60px;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox {border: none; width: 100%; background-color: transparent;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{background-color: transparent; width: 100%; overflow: hidden;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{white-space: nowrap; text-overflow: ellipsis; text-align: center;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused{border:none !important; box-shadow: none; background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused .dijitInputInner{box-shadow: none; background: rgba(36, 181, 204, 0.2) !important;}.jimu-img-node .oper-btns{display: none; position: absolute; z-index: 10;}.jimu-img-node .icons{position: absolute; width: 20px; height: 20px; z-index: 10; background-color: #FFF;}.list .jimu-img-node .icons{display: none;}.editing .jimu-img-node .thumbnail{}.jimu-img-node .drag-masker{position: absolute; z-index: 5; top: 0; width: 100%; height: 60px; cursor: pointer;}.jimu-img-node .drag-masker:hover{background-color: transparent}.editing .jimu-img-node .oper-btns{width:20px; height:20px; cursor: pointer; background-color: rgba(0,0,0,0.5);}.editing .jimu-img-node .oper-btns:hover{background-color: rgba(0,0,0,0.7);}.editing .jimu-img-node .selected-btn{background: url("../images/btns/unselected.svg") no-repeat; left:0; top:0;}.editing .jimu-img-node.selected .selected-btn{background: url("../images/btns/selected.svg") no-repeat;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn{cursor: pointer; top:0;}.jimu-rtl .jimu-widget-bookmark:not(.mobile) .jimu-img-node .delete-btn{right: auto;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn::before{position: absolute; background-image: url("../images/btns/x.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .edit-btn{right: 0; bottom: 30px;}.jimu-rtl .jimu-img-node .edit-btn{right: auto; left: 0;}.editing .jimu-img-node .edit-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn{display: none; top: 0px; left: 0px;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .change-img-btn{right: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .change-img-btn{right: auto; left: calc((100% - 100px)/2);}.editing .jimu-img-node .change-img-btn::before{position: absolute; background-image: url("../images/btns/change.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-img-node .layer-info-icon{left: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .layer-info-icon{right: auto; right: calc((100% - 100px)/2);}.jimu-img-node .layer-info-icon::before{position: absolute; background-image: url("../images/btns/layer_infos.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark .header {display: flex; align-items: center; justify-content: space-between; height: 30px; margin: 2px; margin-bottom: 15px;}.jimu-widget-bookmark .header .editable-btns,.jimu-widget-bookmark .header .common-fun-btns,.jimu-widget-bookmark .header .edit-btns,.jimu-widget-bookmark .header .common-fun-btns .display-mode{display: flex; align-items: center;}.jimu-widget-bookmark .header .common-fun-btns .display-mode {margin: 0 5px;}.jimu-widget-bookmark .header .two-modes .list{background: url("../images/btns/list.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .list:hover{background: url("../images/btns/list_selected.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards{background: url("../images/btns/cards.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards:hover{background: url("../images/btns/cards_selected.svg") no-repeat;}.jimu-widget-bookmark .adding .header .add{background: url("../images/btns/add_selected.svg") no-repeat;}.jimu-widget-bookmark .header .edit{background: url("../images/btns/edit.svg") no-repeat;}.jimu-widget-bookmark .editing .header .edit{background: url("../images/btns/edit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn{background: url("../images/btns/sync.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn.marked{background: url("../images/btns/sync.svg") no-repeat; background-color: red;}.jimu-widget-bookmark .header .back-to-init{background: url("../images/btns/backtoinit.svg") no-repeat;}.jimu-widget-bookmark .header .back-to-init.marked{background: url("../images/btns/backtoinit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename{background: url("../images/btns/rename_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename.disable{background: url("../images/btns/rename.svg") no-repeat;}.jimu-widget-bookmark .header .delete{background: url("../images/btns/delete_selected.svg") no-repeat;}.jimu-widget-bookmark .header .delete.disable{background: url("../images/btns/delete.svg") no-repeat;}.jimu-widget-bookmark .header .edit-btns{display: none;}.jimu-widget-bookmark .editing .header .edit-btns{display: flex;}.jimu-widget-bookmark .header .common-fun-btns{display: flex;}.jimu-widget-bookmark .editing .header .common-fun-btns{display: none;}.bookmark-notice-popup{font-family: "Avenir Medium"; font-size: 12px;}.bookmark-notice-popup .tips{color: #000000; letter-spacing: 0;}.bookmark-notice-popup .check-box{position: absolute; bottom: 20px;}.bookmark-notice-popup .check-box .jimu-checkbox .label{font-size: 12px; color: #353535; letter-spacing: 0.3px;}.DartTheme .jimu-widget-bookmark .dijitTextBox{border: none !important;}.DartTheme .jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #FFF !important;}.jimu-widget-bookmark{width: 100%; height: 100%; overflow: hidden; position: relative;}.jimu-widget-bookmark .add-section{position: relative; height: 30px; margin-top: 7px; overflow: visible;}.jimu-widget-bookmark .input-bookmark-name{border-top-right-radius: 0; border-bottom-right-radius: 0; position: absolute; left: 0; top: 0; width: 100%;}.jimu-widget-bookmark .jimu-state-error{margin-top: 4px; visibility: hidden;}.jimu-widget-bookmark .bookmark-list{margin-bottom: 35px; width: 100%;}.jimu-widget-bookmark .play-section{overflow: hidden; margin-top: 20px; position: absolute; bottom: 0;}.jimu-widget-bookmark .jimu-btn{float: none; margin: auto; width: 100%;}.jimu-widget-bookmark .jimu-img-node{margin: 3px 0 8px 3px;}.jimu-rtl .jimu-widget-bookmark .jimu-img-node{margin: 3px 3px 8px 0;}.jimu-widget-bookmark .jimu-img-node .node-label{height: 2.7em; line-height: 16px; vertical-align: middle; padding: 0 5px; margin: 0 auto; width: 100px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;}.jimu-widget-bookmark .jimu-img-node .node-box{border-radius: 0; position: relative;}.jimu-widget-bookmark .jimu-img-node img{display: flex; width: 100%; height: 60px; opacity: 1; min-width: 80px;}.jimu-widget-bookmark .jimu-img-node.selected img{opacity: 0.4; transition: opacity .5s;}.jimu-widget-bookmark .cards .jimu-img-node:hover .dijitTextBox .dijitInputInner{color: #51B1FE !important;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{left: 50%; transform: translate(-50%, 0%);}.jimu-widget-bookmark .cards .jimu-img-node .delete-btn{display: none; right:calc((100% - 100px)/2); justify-content: center; align-items: center;}.jimu-rtl .jimu-widget-bookmark .cards .jimu-img-node .delete-btn{right: auto; left: calc((100% - 100px)/2);}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .delete-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .delete-btn{display: flex;}.jimu-widget-bookmark .cards .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .change-img-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .change-img-btn{display: block;}.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{max-width: 104px; width: 100%; margin: 0 auto; display: flex;}.jimu-widget-bookmark .list{}.jimu-widget-bookmark .list .jimu-img-node{width: calc(100% - 10px) !important; display: flex; height: 36px; margin-bottom: 8px;}.jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #E2E2E2;}.DartTheme .jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #444;}.jimu-widget-bookmark .list .node-box{height: 36px; width: 20px; margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{z-index: 99;}.jimu-widget-bookmark .list .node-box img{display: none;}.jimu-widget-bookmark .node-box:after{display: none;}.jimu-widget-bookmark .list .node-box:after{position: absolute; content: url(../images/btns/place.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .with-layer-visibility.node-box:after{position: absolute; content: url(../images/btns/place_with_layer_visibility.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .editing .node-box:after{top: 10px;}.jimu-rtl .jimu-widget-bookmark .list .node-box:after{left: auto; right: 3px;}.jimu-widget-bookmark .list.editing .node-box{display: none;}.jimu-widget-bookmark .list.editing .node-box:after{display: none;}.jimu-widget-bookmark .list.editing .jimu-img-node .node-box{margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox{height: 36px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputField{width: calc(100% - 70px); height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.jimu-widget-bookmark .list.editing .head-btns{}.jimu-widget-bookmark .list .jimu-img-node .oper-btns{top: 8px;}.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .oper-btns{top: 8px;}.mobile .jimu-img-node .oper-btns{display: none;}.mobile .editing .jimu-img-node .oper-btns,.mobile .editing .jimu-img-node .oper-btns:hover,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns:hover{background-color: transparent;}.mobile .editing .jimu-img-node .rename-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:before{position: absolute; display: block; background-image: url(images/pencil.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .rename-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:hover:before{background-image: url(images/pencil_hover.svg);}.mobile .editing .jimu-img-node .delete-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:before{position: absolute; display: block; background-image: url(images/clear.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .delete-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:hover:before{background-image: url(images/clear_hover.svg);}.mobile .editing .jimu-img-node .change-img-btn:before{position: absolute; display: block; background-image: url(images/change_img.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .change-img-btn:hover:before{background-image: url(images/change_img_hover.svg);}.jimu-widget-bookmark .list.editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.jimu-widget-bookmark .list.editing .jimu-img-node .close-btn{position: relative; background-color: green;}.jimu-widget-bookmark .list .jimu-img-node .delete-btn{left: auto; right: 15px; display: block;}.jimu-rtl .list .jimu-img-node .delete-btn{left: 15px; right: auto;}.jimu-widget-bookmark .list .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{display: block; left: auto; right: 50px;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{left: 50px; right: auto;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .change-img-btn{left: 85px; right: auto;}.jimu-widget-bookmark {position: relative; overflow: hidden;}.jimu-widget-bookmark .drawer-handle{width: 100%; display: flex; align-items: center; font-family: "Avenir Medium"; font-size: 14px; color: #000000; letter-spacing: 0.39px;}.jimu-widget-bookmark .drawer-handle .separate-line{margin: 10px 0 25px 0; border-top: 1px solid #eee; width: 100%;}.DartTheme .jimu-widget-bookmark .drawer-handle .separate-line{border-top: 1px solid #666;}.jimu-widget-bookmark .drop-down{display: flex; align-items: center; background: url(images/dropDown.svg) no-repeat; background-size: 6px 6px; width: 6px; height: 6px; cursor: pointer;}.jimu-widget-bookmark .drop-down.open{transform: rotate(0deg); -ms-transform: rotate(0deg); -moz-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg);}.jimu-widget-bookmark .drop-down{margin: 0 10px; transform: rotate(90deg); -ms-transform: rotate(90deg); -moz-transform: rotate(90deg); -webkit-transform: rotate(90deg); -o-transform: rotate(90deg);}.jimu-widget-bookmark .bookmarks-container{overflow-x: hidden; overflow-y: auto;}.jimu-widget-bookmark .bookmarker-nodes{overflow: inherit;}.jimu-widget-bookmark .dojoDndItemAnchor{padding: 0; border: none;}.jimu-widget-bookmark .header .oper-btns{width: 100%; height: 100%; display: flex; align-items: center; justify-content: flex-end;}.jimu-widget-bookmark .header .head-btns{width:16px; height:16px; margin: 4px; overflow: hidden; cursor: pointer;}.jimu-widget-bookmark .header .add{display: flex; align-items: center; justify-content: center; height:30px; min-width: 65px; padding: 0 10px; border: 1px solid #c7c7c7; color: #000; font-family: Avenir-Medium; font-size: 12px; cursor: pointer;}.jimu-widget-bookmark .header .add:hover{border: 1px solid #000;}.DartTheme .jimu-widget-bookmark .header .add{border: 1px solid #666; color: #FFF;}.DartTheme .jimu-widget-bookmark .header .add:hover{border: 1px solid #FFF;}.jimu-widget-bookmark .editable .header .filter-container{margin-left:20px;}.jimu-rtl .jimu-widget-bookmark .editable .header .filter-container{margin-left: auto; margin-right: 20px;}.jimu-widget-bookmark .header .filter-container{display: flex; position: relative; width: 100%; height: 100%; overflow: hidden;}.jimu-widget-bookmark .header .filter-container .filter-input{position: absolute; height: 30px; width: 100%;}.jimu-widget-bookmark .header .filter-container .dijitTextBox {width: 100%;}.jimu-widget-bookmark .header .filter-container .search{position: absolute; background: url(images/search.svg) no-repeat; background-size: contain; width: 16px; height: 16px; margin: 7px; right: 0; top: 0;}.jimu-rtl .jimu-widget-bookmark .header .filter-container .search{right: auto; left: 0;}.jimu-widget-bookmark .header .display-mode{margin: 0 10px;}.jimu-widget-bookmark:not(.mobile) .cards .header{margin-bottom: 25px;}.mobile.jimu-widget-bookmark {}.mobile.jimu-widget-bookmark .dojoDndSource:not(.editable) .header{height: 20px; margin-bottom: 5px;}.mobile.jimu-widget-bookmark .jimu-img-node{width:calc(100% - 10px) !important; display: flex; align-items: center; border-top: 1px solid rgba(230,230,230,0.5); margin-top: 0; margin-bottom: 0; padding: 4px 0;}.mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: 0px; bottom: 9px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: auto; right: 0;}.DartTheme .mobile.jimu-widget-bookmark .jimu-img-node{border-top: 1px solid #333333}.mobile.jimu-widget-bookmark .jimu-img-node .drag-masker{width: 100%;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{margin: 0; max-width: 100%;}.mobile.jimu-widget-bookmark .node-box{}.mobile.jimu-widget-bookmark .list.editing .node-box{display: flex;}.mobile.jimu-widget-bookmark .node-box img{max-height: 50px; max-width: 75px;}.mobile.jimu-widget-bookmark .editing .node-box{}.mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 0; margin-right:10px;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .node-box{min-width: 80px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 10px; margin-right:0;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{max-width: 300px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.mobile.jimu-widget-bookmark .drawer-handle .separate-line{margin-bottom: 0; border-top: 4px solid #F2F2F2;}.mobile.jimu-widget-bookmark {-webkit-touch-callout:none; -webkit-user-select:none; -khtml-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none;}.mobile.jimu-widget-bookmark .jimu-img-node .node-label{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .close-btn{position: relative;}.mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {display: block; left: auto; right: 85px; bottom: auto;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {left: 85px; right: auto;}.mobile.jimu-widget-bookmark .list .jimu-img-node .change-img-btn {display: none;}.mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {display: block; left: auto; right: 50px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {left: 50px; right: auto;}.mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {display: block; right: 15px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {left: 15px; right: auto;}',
"*now":function(h){h(['dojo/i18n!*preload*widgets/Bookmark/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html jimu/BaseWidget dojo/query dojo/on dojo/Deferred ./HeadBar ./WebmapBookmarks ./CustomBookmarks ./utils libs/storejs/store ./a11y/Widget".split(" "),function(h,q,c,a,w,e,y,u,b,A,l,G,m,n){h=h([w],{baseClass:"jimu-widget-bookmark dojoDndSource dojoDndTarget dojoDndContainer",name:"Bookmark",bookmarks:[],jimuNls:null,postMixInProperties:function(){this.jimuNls=window.jimuNls},startup:function(){this.inherited(arguments);G.isConfigBefore5_3(this.config)&&
G.setDefaultConfigForUpdate(this.config);this.headBar=new b({map:this.map,nls:this.nls,bookmarksContainer:this.bookmarksContainer,editMenuContainer:this.editMenuContainer,editable:this.config.editable,layout:this.config.layout},this.headBarContainer);this.headBar.startup();this.own(y(this.headBar,"add",q.hitch(this,function(){this.customBookmarks.add()})));this.own(y(this.headBar,"filter-change",q.hitch(this,function(a){this.webmapBookmarks.filter(a);this.customBookmarks.filter(a)})));this.webmapBookmarks=
new A({nls:this.nls,map:this.map,folderUrl:this.folderUrl,config:this.config},this.webmapBookmarksContainer);this.webmapBookmarks.startup();this.customBookmarks=new l({nls:this.nls,map:this.map,folderUrl:this.folderUrl,widgetId:this.id,config:this.config},this.customBookmarksContainer);this.customBookmarks.startup();this.own(y(this.customBookmarks,"sort",q.hitch(this,"_onSort")));this.own(y(this.customBookmarks,"change-img",q.hitch(this,"_onChangeImg")));this.own(y(this.customBookmarks,"delete",q.hitch(this,
"_onDelete")));this.own(y(this.customBookmarks,"label-blur",q.hitch(this,"_onLabelBlur")));this.own(y(this.customBookmarks,"added",q.hitch(this,"_onAdded")));this.resize()},_onLabelBlur:function(a){this.onBookmarksChange(a)},_onSort:function(a){this.onBookmarksChange(a)},_onChangeImg:function(a){this.onBookmarksChange(a)},_onDelete:function(a){var b=a.nextBookmark;this.onBookmarksChange(a.bookmarks);this.a11y_initFocusNodes();this.a11y_focusAfterDelete(b)},_onAdded:function(a){this.onBookmarksChange(a);
this.a11y_initFocusNodes()},onBookmarksChange:function(a){this._saveAllToLocalCache(a);this.resize()},onOpen:function(){this.webmapBookmarks.refresh();var a=this._getLocalCache();this.customBookmarks.refresh(a);this.resize();this.a11y_initFocusNodes()},destroy:function(){this.headBar&&(this.headBar.destroy(),this.headBar=null);this.webmapBookmarks&&(this.webmapBookmarks.destroy(),this.webmapBookmarks=null);this.customBookmarks&&(this.customBookmarks.destroy(),this.customBookmarks=null);this.inherited(arguments)},
onMinimize:function(){this.resize()},onMaximize:function(){this.resize()},resize:function(){window.appInfo.isRunInMobile?a.addClass(this.domNode,"mobile"):a.removeClass(this.domNode,"mobile");this.customBookmarks.toggleMobile(window.appInfo.isRunInMobile);var b=this.domNode.parentElement||this.domNode.parentNode;b&&(window.isRTL?a.setStyle(b,"padding-left","0"):a.setStyle(b,"padding-right","0"));this._getParentSize(b).then(q.hitch(this,function(c){var e=this.domNode;if(e){if(279<=c.w&&329>c.w)this._setNodeWidths(e,
130,100);else if(1>=Math.abs(c.w-330))this._setNodeWidths(e,100,100);else{var g=a.getMarginBox(e).w-20,h=parseInt(g/100,10);0<h&&(g=parseInt(g%100/h,10),this._setNodeWidths(e,100+g,100))}this.setContainerHeight(c,b)}}))},_setNodeWidths:function(b,c,h){h+=4;c<h&&(c=h);e(".jimu-img-node",b).forEach(function(b){a.setStyle(b,"width",c+"px")})},getItemSize:function(){var a={};a.width=this.itemSize.width;a.height=this.itemSize.height;return a},setContainerWidth:function(b,c){a.setStyle(this.domNode,{width:(c.width+
2*this.hmargin)*Math.floor(b.w/(c.width+2*this.hmargin))+20+"px",margin:"0px auto"})},setContainerHeight:function(b,c){c=this._getDomHeight(".header",c);a.setStyle(this.bookmarksContainer,{height:b.h-c+"px"})},setItemPosition:function(b,c){var e={position:"relative",margin:this.vmargin+"px "+this.hmargin+"px"};0<=c.width&&(e.width=c.width+"px");0<=c.height&&(e.height=c.height+"px");a.setStyle(b.domNode,e);a.addClass(b.domNode,"jimu-float-leading")},_getDomHeight:function(b,c){var g=0;(b=e(b,c)[0])&&
(b=a.getMarginBox(b))&&b.h&&(g=b.h);return g},_getParentSize:function(b){var c=new u;setTimeout(q.hitch(this,function(){var e=a.getMarginBox(b),g=a.getPadExtents(b);e.h-=g.h;c.resolve(e)}),10);return c},_saveAllToLocalCache:function(a){var b=[];c.forEach(m.get(G.getKey(this.id)),function(a){m.remove(a)},this);c.forEach(a,function(a){var c=G.getKey(this.id)+"."+a.displayName;b.push(c);a=q.mixin({},a);a.itemNode&&delete a.itemNode;a._uID&&delete a._uID;try{m.set(c,a)}catch(R){alert("localcache store error")}},
this);m.set(G.getKey(this.id),b)},_getLocalCache:function(){var a=this._getCacheByKeys(this._getOldKey()),b=this._getCacheByKeys(G.getKey(this.id)),c=this._getCacheUpdatedKey();0===b.length&&0<a.length&&!0!==m.get(c)&&(b=G.filterBookmarkFromTarget(a,this.config.bookmarks2D),this._saveAllToLocalCache(b),m.set(c,!0));return b},_getCacheUpdatedKey:function(){return G.getKey(this.id)+".BookmarkCacheUpdated"},_getCacheByKeys:function(a){var b=[];m.get(a)&&c.forEach(m.get(a),function(c){c.startWith(a)&&
(c=m.get(c),b.push(c))},this);return b},_getOldKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"}});h.extend(n);return h});