// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/Infographic/setting/dijitsSetting/_dijits/SeriesStyle/SeriesStyle.html":'\x3cdiv style\x3d"width: 100%;flex: 0 0 100%;"\x3e\r\n\r\n\t\x3cdiv class\x3d"top"\x3e\r\n\t\t\x3cdiv class\x3d"flex-lr-balance title"\x3e${nls.chartColor}\x3c/div\x3e\r\n      \x3cdiv class\x3d"hide" data-dojo-attach-point\x3d"headerColorDiv" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"radioPanel" class\x3d"radio-panel hide"\x3e\r\n\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"symbolRadioPanel" class\x3d"single-radio-panel first-radio hide"\x3e\r\n\t\t   \x3cinput data-dojo-attach-point\x3d"useLayerSymbolRadio" data-dojo-attach-event\x3d"change:_onRadioChanged" name\x3d"chartColor" data-dojo-type\x3d"dijit/form/RadioButton"\x3e\r\n   \t\t\x3clabel for\x3d"useLayerSymbolRadio" class\x3d"marginleft10 AgePyramid_Comparisontext-over radio-label" title\x3d"${nls.useLayerSymbology}"\x3e${nls.useLayerSymbology}\x3c/label\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n      \x3cdiv data-dojo-attach-point\x3d"seriesRadioPanel" class\x3d"single-radio-panel second-radio"\x3e\r\n\r\n         \x3cdiv class\x3d"single-radio-panel flex-lr-balance"\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"seriesRadio" name\x3d"chartColor" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"change:_onRadioChanged"\x3e\r\n            \x3clabel data-dojo-attach-point\x3d"seriesRadioLabel" class\x3d"marginleft10 text-over radio-label" title\x3d"${nls.setColor}"\x3e${nls.setColor}\x3c/label\x3e\r\n         \x3c/div\x3e\r\n\r\n         \x3cdiv data-dojo-attach-point\x3d"radioColorDiv" class\x3d"radio-single-color-div flex-lr-balance hide"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n\t\t\r\n      \x3cdiv data-dojo-attach-point\x3d"customRadioPanel" class\x3d"single-radio-panel third-radio hide"\x3e\r\n         \x3cdiv class\x3d"single-radio-panel flex-lr-balance"\x3e\r\n            \x3cinput data-dojo-attach-point\x3d"customColorRadio" name\x3d"chartColor" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"change:_onRadioChanged"\x3e\r\n            \x3clabel for\x3d"customColorRadio" class\x3d"marginleft10 text-over radio-label" title\x3d"${nls.customColorByCategory}"\x3e${nls.customColorByCategory}\x3c/label\x3e\r\n         \x3c/div\x3e\r\n\r\n         \x3cdiv data-dojo-attach-event\x3d"click:_onCustomToggleButtonClicked" data-dojo-attach-point\x3d"toggleIconDiv" class\x3d"toggle-icon-div flex-lr-balance hide"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"toggleIcon" class\x3d"toggle-icon"\x3e\x3c/div\x3e\r\n         \x3c/div\x3e\r\n      \x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n   \x3cdiv data-dojo-attach-point\x3d"fieldColors" class\x3d"field-colors hide"\x3e\x3c/div\x3e\r\n\r\n   \x3cdiv data-dojo-attach-point\x3d"customColors" class\x3d"custom-colors indentation hide"\x3e\x3c/div\x3e\r\n\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/on dojo/_base/lang dojo/_base/html dojo/text!./SeriesStyle.html ./_SeriesStyleItem ./_SeriesStyles ./CustomColor dojo/Evented dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/utils ../../../utils dijit/form/RadioButton".split(" "),function(p,f,g,b,q,m,r,t,u,v,w,x,n,h){return p([v,w,x,u],{baseClass:"infographic-series-style",templateString:q,colors:"#68D2E0 #087E92 #47BCF5 #FBE66A #F29157 #C8501D #2DB7C6 #C4EEF6".split(" "),_customIconIsOpen:!0,
chartInfo:{},postCreate:function(){this.inherited(arguments);this._initBrowserClass();this._initSelf();this._initEvent()},getConfig:function(){var a={},c;this.useLayerSymbolRadio.checked?c="layerSymbol":this.seriesRadio.checked?c="series":this.customColorRadio.checked&&(c="custom");a.type=c;a.styles=this._option.oneLine?this._option.symbolAbility||this._option.customAbility?[this.radioOneColor.getConfig()]:[this.topOneColor.getConfig()]:this.fieldColorsDijit.getConfig();"custom"===c&&(a.customColor=
this.customColorDijit.getConfig());return a},setConfig:function(a){if(a&&a.type){this._ignoreEvent();var c=a.type;this.useLayerSymbolRadio.setChecked("layerSymbol"===c);this.seriesRadio.setChecked("series"===c);this.customColorRadio.setChecked("custom"===c);!(c=a.styles)||0>=c.length||(1===c.length?(this.topOneColor.setConfig(c[0]),this.radioOneColor.setConfig(c[0])):1<=c.length&&this.fieldColorsDijit.updateConfig(c),(a=a.customColor)&&a.categories&&a.categories.length&&this.customColorDijit.setConfig(a));
this._careEvent()}},setFeatures:function(a){this.features=a},setLayerDefinition:function(a){this.definition=a},setDataSource:function(a){this.dataSource=a},render:function(a,c,d){if(a&&(c||"field"===a)){d=d||[];this._ignoreEvent();this.reset();var e=this._calcuteOption(a,c,d);if(e){this._updateNodeByOption(e);if(e.customAbility){var b=h.getCustomColorSelects(c,this.definition,this.features);if(!b)return;this.customColorDijit.setOriginalData(b.selects,b.isCodedValue,b.numberType);this.customColorDijit.renderDefault()}a=
this._getDefaultConfig(a,c,d,e);this.setConfig(a);this._careEvent()}}},reset:function(){this._ignoreEvent();this.seriesRadio.setChecked();this._hideSymbolRadio();this._hideCustomRadio();this._hideRadioPanel();this._hideOpacityPanel();this._hideAdditionalElements();this._careEvent()},_hideAdditionalElements:function(){this._hideHeaderColor();this._hideSeriesColor();this._hideCustomToggleIcon();this._hideCustomColors();this._hideFieldColors()},_onChange:function(){if(!this.ignoreChangeEvents){var a=
this.getConfig();a&&this.emit("change",a)}},_updateNodeByOption:function(a){if(a){var c=a.symbolAbility,d=a.customAbility,e=a.oneLine,l=a.colorSingleMode;a=a.showOpacity;c||d?(this._showRadioPanel(),b.addClass(this.fieldColors,"indentation"),e?this._showSeriesColor():this._showFieldColors()):(b.removeClass(this.fieldColors,"indentation"),e?this._showHeaderColor():this._showFieldColors());c&&this._showSymbolRadio();d&&this._showCustomRadio();l?this._useColorSingleMode():this._useColorMultipleMode();
a&&this._showOpacityPanel()}},_initSelf:function(){this.topOneColor=new m({textVisible:!1,opacityVisible:!1,colorSingleMode:!0});this.topOneColor.placeAt(this.headerColorDiv);this.radioOneColor=new m({textVisible:!1,opacityVisible:!1,colorSingleMode:!0});this.radioOneColor.placeAt(this.radioColorDiv);this.fieldColorsDijit=new r({nls:this.nls});this.fieldColorsDijit.placeAt(this.fieldColors);this.customColorDijit=new t({nls:this.nls});this.customColorDijit.placeAt(this.customColors)},_initEvent:function(){this.own(f(this.topOneColor,
"change",g.hitch(this,function(){this._onChange()})));this.own(f(this.radioOneColor,"change",g.hitch(this,function(){this._onChange()})));this.own(f(this.fieldColorsDijit,"change",g.hitch(this,function(){this._onChange()})));this.own(f(this.customColorDijit,"change",g.hitch(this,function(){this._onChange()})))},_initBrowserClass:function(){11===n.has("ie")?b.addClass(this.domNode,"ig-setting-ie11"):b.removeClass(this.domNode,"ig-setting-ie11");n.has("ff")?b.addClass(this.domNode,"ig-setting-ff"):
b.removeClass(this.domNode,"ig-setting-ff")},_ignoreEvent:function(){this.ignoreChangeEvents=!0},_careEvent:function(){setTimeout(function(){this.ignoreChangeEvents=!1}.bind(this),200)},_updateSeriesRadioString:function(a){"pie"===a?(this.seriesRadioLabel.innerHTML=this.nls.randomColor,this.seriesRadioLabel.title=this.nls.randomColor):(this.seriesRadioLabel.innerHTML=this.nls.setColor,this.seriesRadioLabel.title=this.nls.setColor)},_showHeaderColor:function(){b.removeClass(this.headerColorDiv,"hide")},
_hideHeaderColor:function(){b.addClass(this.headerColorDiv,"hide")},_showSeriesColor:function(){b.removeClass(this.radioColorDiv,"hide")},_hideSeriesColor:function(){b.addClass(this.radioColorDiv,"hide")},_showCustomToggleIcon:function(){b.removeClass(this.toggleIconDiv,"hide")},_hideCustomToggleIcon:function(){b.addClass(this.toggleIconDiv,"hide")},_showSymbolRadio:function(){b.removeClass(this.symbolRadioPanel,"hide")},_hideSymbolRadio:function(){b.addClass(this.symbolRadioPanel,"hide")},_showCustomRadio:function(){b.removeClass(this.customRadioPanel,
"hide")},_hideCustomRadio:function(){b.addClass(this.customRadioPanel,"hide");this._hideCustomColors()},_showCustomColors:function(){b.removeClass(this.customColors,"hide")},_hideCustomColors:function(){b.addClass(this.customColors,"hide")},_showFieldColors:function(){b.removeClass(this.fieldColors,"hide")},_hideFieldColors:function(){b.addClass(this.fieldColors,"hide")},_showRadioPanel:function(){b.removeClass(this.radioPanel,"hide")},_hideRadioPanel:function(){b.addClass(this.radioPanel,"hide");
this._hideCustomColors()},_showOpacityPanel:function(){this.topOneColor.setOpacityDisplay(!0);this.radioOneColor.setOpacityDisplay(!0);this.fieldColorsDijit.setOpacityDisplay(!0)},_hideOpacityPanel:function(){this.topOneColor.setOpacityDisplay(!1);this.radioOneColor.setOpacityDisplay(!1);this.fieldColorsDijit.setOpacityDisplay(!1)},_openCustomColorPanel:function(){b.removeClass(this.toggleIcon,"closed");this._showCustomColors()},_closeCustomColorPanel:function(){b.addClass(this.toggleIcon,"closed");
this._hideCustomColors()},_useColorSingleMode:function(){this.topOneColor.setColorMode(!0);this.radioOneColor.setColorMode(!0)},_useColorMultipleMode:function(){this.topOneColor.setColorMode(!1);this.radioOneColor.setColorMode(!1)},_onRadioChanged:function(){var a=this.seriesRadio.checked,c=this.customColorRadio.checked;this._hideAdditionalElements();var b=this._option||{},e=!b.symbolAbility&&!b.customAbility;a&&(e?b.oneLine?this._showHeaderColor():this._showFieldColors():b.oneLine?this._showSeriesColor():
this._showFieldColors());c&&(this._showCustomColors(),this._showCustomToggleIcon());this._onChange()},_onCustomToggleButtonClicked:function(a){a.stopPropagation();(this._customIconIsOpen=!this._customIconIsOpen)?this._openCustomColorPanel():this._closeCustomColorPanel()},_calcuteOption:function(a,c,b){var e=this.chartInfo.type,l=this.chartInfo.area,d=this.definition;if(e&&d){var f=this._haveUseLayerSymbolAbility(a,c,d,this.dataSource),g="pie"===e&&("category"===a||"count"===a)&&!h.isDateField(c,d),
l=!!l;b="field"===a&&"line"===e||"count"===a||1>=b.length;a=!("pie"===e&&"field"!==a);c=c?h.isNumberType(c,d,!0):!1;return this._option=f={symbolAbility:f,oneLine:b,colorSingleMode:a,showOpacity:l,customAbility:g,numberType:!!c}}},_haveUseLayerSymbolAbility:function(a,c,b,e){var d=this.chartInfo.type;if(d&&b){var k=!1;if("line"===d||"field"===a)return k;e=h.getLayerIdByDataSource(e);d=null;e&&(d=h.getLayerFromMap(e,this.map));if(!e)return k;if("feature"===a)k=!0;else if("category"===a||"count"===
a){if(!d)return k;d.renderer&&(a=d.renderer,"esri.renderer.ClassBreaksRenderer"===a.declaredClass||"esri.renderer.UniqueValueRenderer"===a.declaredClass)&&(a.attributeField!==c||h.isDateField(c,b)||(k=!0))}return k}},_getDefaultConfig:function(a,c,b,e){var d=this.chartInfo.type,k=this.definition,f=e.colorSingleMode,g=e.showOpacity;if(!c||"count"!==a&&!b)return{type:"series",styles:[]};c=null;"column"===d||"bar"===d||"line"===d?"field"===a?"line"===d&&(c=["line~field"]):"count"===a&&(c=["count~count"]):
"pie"===d&&"field"!==a&&(c=["pie~not-field"]);a=(c||b).map(function(a){return this._createSeriesStyle(a,g,!f)}.bind(this));a.forEach(function(a){b&&-1<b.indexOf(a.name)?a.label=h.getFieldAlias(a.name,k):a.label=a.name}.bind(this));return{type:"series",styles:a}},_createSeriesStyle:function(a,b,d){var c=h.getNextColor(this.colors,this._lastSeriesColor);this._lastSeriesColor=c;a={name:a,style:{color:c}};b&&(a.style.opacity=6);d&&(a.style.color="#68D2E0 #087E92 #47BCF5 #FBE66A #F29157 #C8501D".split(" "));
return a}})});