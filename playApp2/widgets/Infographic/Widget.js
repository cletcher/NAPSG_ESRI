// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dojo/dom-geometry dojo/dom-class dojo/Evented dojo/debounce".split(" "),function(n,e,k,l,d,p,h,b){return n([l,h],{baseClass:"jimu-dijit-gridlayout",declaredClass:"jimu.dijit.GridLayout",container:null,layoutDefinition:null,components:null,editable:!1,_layout:null,_coordinates:null,_isCreatingLayout:null,postCreate:function(){this.inherited(arguments);this._isCreatingLayout=
!1;this._createLayout(this.layoutDefinition)},restoreLayout:function(a){a=a||this.layoutDefinition;this._createLayout(a)},destroy:function(){k.forEach(this.components,function(a){a.dijit.destroy()});this._layout.destroy();this.inherited(arguments)},getLayoutDefinition:function(){return this._layout.toConfig().content},resize:function(){var a=d.getMarginBox(this.container);this._layout.updateSize(a.w,a.h)},getComponentSize:function(a){return(a=this._layout.root.contentItems[0].getItemsById(a))&&0<
a.length?(a=a[0].container,{w:a.width,h:a.height}):{w:0,h:0}},getSize:function(){return{w:this._layout.width,h:this._layout.height}},setVisible:function(a,b){var c=this._layout.root.contentItems[0].getItemsById(a);c&&0<c.length&&!1===b?this._hideComponent(c[0]):c&&0!==c.length||!0!==b||this._showComponent(a)},highlightItem:function(a){(a=this._layout.root.contentItems[0].getItemsById(a))&&0<a.length&&a[0].highlight()},unhighlightItem:function(a){(a=this._layout.root.contentItems[0].getItemsById(a))&&
0<a.length&&a[0].unhighlight()},_createLayout:function(a){if(!this._isCreatingLayout){this._coordinates={};this._isCreatingLayout=!0;var c={settings:{hasHeaders:!1,resizeEnabled:this.editable,reorderEnabled:this.editable,selectionEnabled:this.editable,highlightEnabled:this.editable},dimensions:{borderWidth:1,dragProxyWidth:0,dragProxyHeight:0},content:a},f=this._layout;require(["libs/goldenlayout/goldenlayout"],e.hitch(this,function(a){this._layout=new a(c,this.container);this._layout.registerComponent("jimu grid",
e.hitch(this,function(a,g){var c;a.parent.config.id=g.id;k.some(this.components,function(b){if(b.id===g.id)return c=b.dijit,a.getElement().html(b.dijit.domNode),!0},this);a.on("resize",b(e.hitch(this,function(){0<a.width&&0<a.height&&c&&"function"===typeof c.resize&&c.resize(a.width,a.height)}),200));a.on("select",e.hitch(this,function(){this.editable&&a.parent.select();this.emit("mask-click",a.parent.config.id)}))}));this._layout.on("initialised",e.hitch(this,function(){this._resetCoordinate();this.emit("initialised");
this._isCreatingLayout=!1;f&&f.destroy()}));this._layout.on("stateChanged",e.hitch(this,function(){this._resetCoordinate()}));this._layout.init();this.editable||p.add(this._layout.root.childElementContainer[0],"viewonly");p.add(this._layout.root.childElementContainer[0],"jimu-dijit-gridlayout");setTimeout(e.hitch(this,this.resize),100)}))}},_hideComponent:function(a){a.parent&&a.parent.removeChild(a,!0)},_showComponent:function(a){var b,f,g,m,q,h,d;k.some(this.components,function(g){if(g.id===a)return b=
g,!0},this);b&&(m={id:a,type:"component",componentName:"jimu grid",componentState:{id:a}},f=this._coordinates[a],q=this._layout.root,f?(f[0].type!==q.contentItems[0].type&&(h=q.contentItems[0],q.replaceChild(h,{type:f[0].type,content:[]}),q.contentItems[0].addChild(h)),g=q,k.forEach(f,function(a){d=a.index<=g.contentItems.length?a.index:g.contentItems.length;"component"===a.type?g.addChild(m,d):("stack"!==a.type&&g.contentItems[a.index].type===a.type||g.addChild({type:a.type,content:[]},d),g=g.contentItems[d])},
this)):("stack"===q.contentItems[0].type&&(h=q.contentItems[0],q.replaceChild(h,{type:"column",content:[]}),q.contentItems[0].addChild(h)),q.contentItems[0].addChild(m)))},_resetCoordinate:function(){var a=this._layout.root.getItemsByType("component"),b=function(a,g){var c=a.parent;c&&(k.some(c.contentItems,function(b,c){if(b===a)return g.push({type:b.type,index:c}),!0}),b(c,g))};k.forEach(a,function(a){var g=[];b(a,g);this._coordinates[a.config.id]=g.reverse()},this)}})})},"widgets/Infographic/DijitFactory":function(){define("dojo/aspect dojo/_base/lang ./dijits/TextDijit ./dijits/ImageDijit ./dijits/ChartDijit ./dijits/GaugeDijit ./dijits/NumberDijit".split(" "),
function(n,e,k,l,d,p,h){var b={},a={},c=null,f=null,g=null,m=null,q={};b._dijits=a;b.createDijit=function(b){var v=null;if(a[b.id])return(v=a[b.id])&&"function"===typeof v.setVisible&&v.setVisible(b.visible),v;var t;switch(b.type){case "text":t=k;break;case "image":t=l;break;case "chart":t=d;break;case "gauge":t=p;break;case "number":t=h}if(!t)return console.error("Unknow type:",b.type),null;v={nls:c,config:b.config,map:f,inSettingPage:g,appConfig:m,jsonId:b.id,visible:b.visible};e.mixin(v,q);v=new t(v);
n.after(v,"destroy",function(){delete a[b.id]});return a[b.id]=v};b.setNls=function(a){c=a};b.setMap=function(g){f=g;Object.keys(a).forEach(function(g){a[g].setMap(f)})};b.setInSettingPage=function(b){g=b;Object.keys(a).forEach(function(b){a[b].setInSettingPage(g)})};b.setAppConfig=function(g){m=g;Object.keys(a).forEach(function(g){a[g].setAppConfig(m)})};b.setContext=function(g){q=g;Object.keys(a).forEach(function(g){e.mixin(a[g],q)})};return b})},"widgets/Infographic/dijits/TextDijit":function(){define(["dojo/_base/declare",
"dojo/_base/html","./BaseDijit","./styleUtils"],function(n,e,k,l){return n([k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",baseClass:"infographic-text-dijit",type:"text",config:null,postCreate:function(){this.setConfig(this.config)},setConfig:function(d){this.config=d;e.empty(this.domNode);e.addClass(this.domNode,"table-layout-container");e.addClass(this.domNode,"no-trim");this.innerDom=e.create("div",{},this.domNode);e.place(this.innerDom,this.domNode);d={};l.background.setStyle(this.config.background,
d,this);l.font.setStyle(this.config.font,d);l.font.setText(this.config,this);e.setStyle(this.innerDom,d)}})})},"widgets/Infographic/dijits/BaseDijit":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(n,e,k){return n([e,k],{templateString:"\x3cdiv\x3ePlease create a sub class\x3c/div\x3e",type:"BaseDijit",config:null,inSettingPage:!0,appConfig:null,constructor:function(e){this.config=e.config},setInSettingPage:function(e){this.inSettingPage=e},setConfig:function(e){this.config=
e},setMap:function(e){this.map=e},setDataSource:function(e){this.dataSource=e},resize:function(){},setAppConfig:function(e){this.appConfig=e},onDataSourceDataUpdate:function(e){this.data=e},isDarkTheme:function(){var e=!1;this.appConfig&&("DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&(e=!0):e=!0);return e}})})},"widgets/Infographic/dijits/styleUtils":function(){define(["dojo/on",
"dojo/keys","dojo/_base/lang","dojo/_base/html","jimu/utils"],function(n,e,k,l,d){var p={background:{setStyle:function(h,b,a){if(!h)return{};b||(b={});p.background.setBackgroundColor(h,b);p.background.setAlignment(h,b);p.background.setLink(h,b,a)},setBackgroundColor:function(h,b){h.backgroundColor&&(b.backgroundColor=h.backgroundColor)},setAlignment:function(h,b){if(h.alignment){if(h.alignment.horizontal)switch(h.alignment.horizontal){case "left":b.textAlign="left";break;case "center":b.textAlign=
"center";break;case "right":b.textAlign="right";break;default:b.textAlign="center"}if(h.alignment.vertical)switch(b.display="table-cell",h.alignment.vertical){case "top":b.verticalAlign="top";break;case "middle":b.verticalAlign="middle";break;case "bottom":b.verticalAlign="bottom";break;default:b.verticalAlign="middle"}}},setLink:function(h,b,a){a.clickHanlder&&(a.clickHanlder[0]&&a.clickHanlder[0].remove(),a.clickHanlder=null,this.keydownHanlder&&a.keydownHanlder[0]&&a.keydownHanlder[0].remove(),
a.keydownHanlder=null,b.cursor="auto");h.link?(a.clickHanlder=a.own(n(a.domNode,"click",k.hitch(a,function(){window.open(h.link)}))),a.keydownHanlder=a.own(n(a.domNode,"keydown",k.hitch(a,function(){event.keyCode===e.ENTER&&window.open(h.link)}))),b.cursor="pointer",l.addClass(a.domNode,"has-link"),l.setAttr(a.domNode,"tabindex","0"),l.setAttr(a.domNode,"role","link"),"undefined"!==typeof h.alt&&l.setAttr(a.domNode,"aria-label",h.alt)):(l.removeClass(a.domNode,"has-link"),l.removeAttr(a.domNode,"tabindex"),
l.removeAttr(a.domNode,"role"),"undefined"===typeof h.alt&&l.removeAttr(a.domNode,"aria-label"))}},font:{setText:function(h,b){var a="";h.text&&(a=h.text);b.innerDom.innerHTML=a},setStyle:function(h,b){if(!h)return{};b||(b={});p.font.setFont(h,b);p.font.setTextColor(h,b);p.font.setFontSize(h,b)},setFont:function(h,b){b.fontWeight="normal";b.fontStyle="normal";b.textDecoration="none";h.font&&(h.font.fontFamily&&(b.fontFamily=h.font.fontFamily),h.font.bold&&(b.fontWeight="bold"),h.font.italic&&(b.fontStyle=
"italic"),h.font.underline&&(b.textDecoration="underline"))},setTextColor:function(h,b){h.textColor&&(b.color=h.textColor)},setFontSize:function(h,b){h.fontSize&&(b.fontSize=h.fontSize+"px")}},image:{setStyle:function(h,b,a){if(!h)return{};b||(b={});p.image.setBackgroundImg(h,b,a);p.image.setAlignment(h,b)},setBackgroundImg:function(h,b,a){var c="";if(c=h&&!h.image&&a&&a.folderUrl?"url("+a.folderUrl+"/images/default_image.png)":"url("+d.processUrlInWidgetConfig(h.image,a.folderUrl)+")")b.backgroundImage=
c,b.backgroundRepeat="no-repeat",b.backgroundSize="contain"},setAlignment:function(h,b){if(h&&h.background){var a="center",c="center";if(h.background.alignment){h.background.alignment.horizontal&&(a=h.background.alignment.horizontal);if(h.background.alignment.vertical)switch(h.background.alignment.vertical){case "top":c="top";break;case "middle":c="center";break;case "bottom":c="bottom";break;default:b.verticalAlign="center"}b.backgroundPosition=a+" "+c}}}},dataFormat:{getText:function(h,b){var a=
"";h.dataFormat&&(a=b?b:h.text,a=p.dataFormat.setDataFomat(h,a),h.dataFormat.prefix&&(a=h.dataFormat.prefix+" "+a),h.dataFormat.suffix&&(a=a+" "+h.dataFormat.suffix));return a},setDataFomat:function(h,b){var a=h.dataFormat.unit;"none"===h.dataFormat.unit?a="":"percentage"===h.dataFormat.unit&&(a="%");return b=b+a+"("+h.dataFormat.decimalPlaces+") "}}};return p})},"widgets/Infographic/dijits/ImageDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(n,
e,k,l){return n([k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"image",config:null,constructor:function(d){this.config=d.config},postCreate:function(){this.setConfig(this.config)},setConfig:function(d){this.config=d;this.domNode.innerHTML="";e.addClass(this.domNode,"table-layout-container");d=this.config.alt;this.config.background.alt=d;this.innerDom=e.create("div",{"class":"image-node",alt:d,role:"img"},this.domNode);e.place(this.innerDom,this.domNode);d={};l.background.setStyle(this.config.background,
d,this);l.image.setStyle(this.config,d,this);e.setStyle(this.innerDom,d)}})})},"widgets/Infographic/dijits/ChartDijit":function(){define("dojo/_base/lang dojo/_base/html dojo/_base/declare ./BaseDijit dojo/text!./ChartDijit.html moment/moment jimu/dijit/_chartDijitOption jimu/dijit/Chart jimu/DataSourceManager jimu/LayerInfos/LayerInfos ../utils libs/moment/twix".split(" "),function(n,e,k,l,d,p,h,b,a,c,f){window.makeTwix(p);return k([l],{templateString:d,type:"chart",baseClass:"infographic-chart-dijit",
layerInfosObj:null,dataSourceManager:null,featuresCountForPreview:50,dataSource:null,config:null,map:null,maxTimeIntervals:1E4,maxLabels:1E4,dsType:"",constructor:function(g){this.visible=g.visible;this.layerInfosObj=c.getInstanceSync();this.dataSourceManager=a.getInstance();this.config=g.config;this.popupInfo=this.layerObject=this.featureLayerForFrameWork=null},postCreate:function(){this.inherited(arguments);this._init();this.upgradeConfig()},setLayerInfo:function(a,b,c){this.layerObject=a;this.popupInfo=
c;this.featureLayerForFrameWork=b;this._initChartDijitOption()},getDataURL:function(){if(this.chart)return this.chart.getDataURL()},resize:function(){this.chart&&this.chart.resize()},setVisible:function(a){this.visible=a},destroy:function(){this.chart&&this.chart.destroy();this.chart=null;this.inherited(arguments)},clearChart:function(){this.chart&&this.chart.clear();this.showNodata()},setBackgroundColor:function(a){this.domNode.style.backgroundColor=a},_setyAxisName:function(){var a=this.config&&
this.config.display;(a=a&&a.yAxis)&&a.show&&"undefined"!==typeof a.name?(this._showyAxisName(),this._setyAxisNameText(a.name),(a=a.nameTextStyle)&&a.color&&this._setyAxisNameColor(a.color)):this._hideyAxisName()},_setyAxisNameText:function(a){this.yAxisName.innerHTML=a},_setyAxisNameColor:function(a){e.setStyle(this.yAxisName,"color",a)},_hideyAxisName:function(){e.setStyle(this.yAxisName,"display","none")},_showyAxisName:function(){e.setStyle(this.yAxisName,"display","flex")},resetData:function(){this.dataSource=
null;this.dsType="";this.data=null;this._hasStatisticsed=void 0;this.featureLayerForFrameWork=this.popupInfo=this.layerObject=null;this.chartDijitOption.init(null,null,null,this.map)},setDataSource:function(a){this.inherited(arguments);this.dataSource=a;this._calcDataSourceType(this.dataSource)},onUpdateDataStart:function(){this._showOverlay()},onUpdateDataDone:function(){this._hideOverlay()},_calcDataSourceType:function(a){a.layerId?this.dsType="CLIENT_FEATURES":a.frameWorkDsId&&(a=(a=f.getDsTypeInfoMeta(a.frameWorkDsId,
this.appConfig))&&a.dsMeta)&&("Features"===a.type?this.dsType="FRAMEWORK_FEATURES":"FeatureStatistics"===a.type&&(this.dsType="FRAMEWORK_STATISTICS"))},setConfig:function(a){this.config=a;this.upgradeConfig()},upgradeConfig:function(){this.config=f.upgradeChartAxisFormatConfig(this.config,this.layerObject,this.popupInfo)},onDataSourceDataUpdate:function(a){a&&"undefined"!==typeof a.features&&(this.inSettingPage&&a.features.length>this.featuresCountForPreview&&(a.features=a.features.slice(0,this.featuresCountForPreview)),
this.data=a,this._hasStatisticsed=!!a.hasStatisticsed)},startRendering:function(){this.specialChartConfig(this.config);this._shouldRenderChart()&&((this.chart||this._createJimuChart(),this._updateBackgroundColor(),this._setyAxisName(),this._splitConfig(),this._createChartSeriesOption(),this.seriesOption)?this._checkIsTooManyLabels(this.seriesOption)||(this._createChartOption(),this.chart.updateConfig(this.chartOption),this.chart.resize()):this.showNodata())},_createChartOption:function(){var a=this._isSameFeatures(),
b=f.isEqual(this.dataOption,this._oldDataOption)&&f.isEqual(this.displayOption,this._oldDisplayOption);a&&b||(this.chartOption=null,this.seriesOption&&(this.chartOption=this.chartDijitOption.updateChartOptionDisplay(n.clone(this.seriesOption),this.displayOption,this.dataOption),this._oldDisplayOption=null,this._oldDisplayOption=n.clone(this.displayOption)))},_createChartSeriesOption:function(){var a=this._isSameFeatures(),b=f.isEqual(this.dataOption,this._oldDataOption);a&&b||(this._oldDataOption=
null,this._oldDataOption=n.clone(this.dataOption),a=this.dataOption,a.features=this.features,b=this.chartDijitOption.getClientStatisticsData(a),this.seriesOption=null,b&&(this.chartDijitOption.bindChartEvent(this.chart,a,b),this.seriesOption=this.chartDijitOption.getChartOptionSeries(this.dataOption,b)))},_splitConfig:function(){if(this.config){var a=this.config.data,b=this.config.display;this.features=this._cleanFeatures(this.data.features);var c=this.dataSource.filterByExtent,f=this.dataSource.useSelection,
h=this._isStatisticsed(),c={filterByExtent:c,useSelection:f,hasStatisticsed:h};this.dataOption=null;this.dataOption=n.mixin(c,a);this.displayOption=null;this.displayOption=b}},_cleanFeatures:function(a){if(a&&a.length)return a.map(function(a){return{attributes:a.attributes}})},_isSameFeatures:function(){var a=this.features;if(!a)return!0;a=a.map(function(a){return a.attributes});if(f.isEqual(a,this._oldFeatureAttrs))return!0;this._oldFeatureAttrs=a},_isStatisticsed:function(){return this.inSettingPage?
"FRAMEWORK_STATISTICS"===this.dsType:!!this._hasStatisticsed},_shouldRenderChart:function(){if(this.visible&&this.config){var a=this.domNode&&this.data&&this.data.features&&this._hasVaildConfig(this.config.data),b;if("CLIENT_FEATURES"===this.dsType)b=!!this.layerObject;else if("FRAMEWORK_FEATURES"===this.dsType||"FRAMEWORK_STATISTICS"===this.dsType)b=!!this.featureLayerForFrameWork;if(a&&b){if(this._checkIsTooManyTimeInterval(this.data.features))return this.showNodata(this.nls.parsingperiodTip),!1}else return this.showNodata(),
!1;this.hideNodata();return!0}},_hasVaildConfig:function(a){if(!a||!a.mode)return!1;var b=a.valueFields;if("feature"===a.mode)return a.clusterField&&b&&b.length;if("category"===a.mode)return a.clusterField&&a.operation&&b&&b.length;if("count"===a.mode)return a.clusterField;if("field"===a.mode)return a.operation&&b&&b.length},_getNodataTextColor:function(){var a;a=this.config&&this.config.display;var b=this.config&&this.config.data;if(!a||!b)return"#666";(a="pie"===b.type?a.dataLabelColor:a.horizontalAxisTextColor||
a.verticalAxisTextColor)||(a="#666");return a},specialChartConfig:function(a){if(a){var b=this._getChartTheme();f.specialChartConfig(a,b);return a}},_showOverlay:function(){e.removeClass(this.overlap,"hide")},_hideOverlay:function(){e.addClass(this.overlap,"hide")},showNodata:function(a){e.addClass(this.domNode,"no-data");this._setNoDataColor();a&&(this.noDataDiv.innerHTML=a)},_setNoDataColor:function(){var a=this._getNodataTextColor();this.noDataDiv&&this.noDataDiv.style&&(this.noDataDiv.style.color=
a)},_initChartDijitOption:function(){if(this.chartDijitOption){var a=null,a="CLIENT_FEATURES"===this.dsType?this.layerObject:this.featureLayerForFrameWork;this.chartDijitOption.init(a,this.layerObject,this.popupInfo,this.map,this.layerObject)}},_checkIsTooManyLabels:function(a){return(a=a.labels)&&a.length>this.maxLabels?(this.showNodata(this.nls.manyCategoryTip),!0):!1},_checkIsTooManyTimeInterval:function(a){var b=this.config&&this.config.data,b=b&&b.dateConfig;if(!b||"automatic"===b.minPeriod)return!1;
var g=b.clusterField,c=a.map(n.hitch(this,function(a){return a.attributes[g]})),c=c.filter(function(a){return!!a});a=Math.min.apply(Math,c);c=Math.max.apply(Math,c);a=p(a).subtract(1,"seconds").local();c=p(c).add(1,"seconds").local();return Math.round(c.diff(a,b.minPeriod,!0))>=this.maxTimeIntervals},_createChartDijitOption:function(){var a={map:null};this.inSettingPage||(a.map=this.map);this.chartDijitOption=new h(a)},_init:function(){this._createChartDijitOption();this._updateBackgroundColor()},
_createJimuChart:function(){var a=this.config&&this.config.data;this.DEFAULT_CONFIG={type:a&&a.type||"column",theme:this._getChartTheme(),labels:[],series:[{data:[]}]};this.chart=new b({chartDom:this.chartDomNode,config:this.DEFAULT_CONFIG});this.chart.placeAt(this.chartDomNode);this.chart.resize()},_getChartTheme:function(){return this.isDarkTheme()?"dark":"light"},_updateBackgroundColor:function(){var a=this.config&&this.config.display;a&&a.backgroundColor&&this.setBackgroundColor(a.backgroundColor)},
hideNodata:function(){e.removeClass(this.domNode,"no-data")}})})},"jimu/dijit/_chartDijitOption":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/_base/lang","jimu/clientStatisticsUtils","jimu/_chartHelpUtils"],function(n,e,k,l,d){return n([e],{postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},constructor:function(e){this.map=e.map;this.chartHelpUtils=new d({map:this.map,clientStatisticsUtils:l})},init:function(d,h,b,a,c){this.chartHelpUtils.setLayerFeatureLayer(d);
this.chartHelpUtils.setSymbolLayer(h);this.chartHelpUtils.setPopupInfo(b);this.chartHelpUtils.setMap(a);this.chartHelpUtils.setLayerObject(c)},getClientStatisticsData:function(d){var h=l.getClietStatisticsData(d),h=l.sortClientStatisticsData(h,d),h=l.getDataForMaxLabels(h,d.maxLabels);return h=this.chartHelpUtils.keepStatisticsDataBestDecimalPlace(d,h,d.mode)},bindChartEvent:function(d,h,b){this.chartHelpUtils.bindChartEvent(d,h,b)},getChartOptionSeries:function(d,h){return this._createOptionSeries(d,
h)},updateChartOptionDisplay:function(d,h,b){this._assigneeSettingColorToSeries(d,h,b);this.chartHelpUtils.updateChartSeriesDisplayName(d,h,b);return this._mapSettingConfigToChartOption(d,h,b)},_assigneeSettingColorToSeries:function(d,h,b){if(!d||!d.series)return d;this.chartHelpUtils.assigneeSettingColor(h,d.series,b)},_createOptionSeries:function(d,h){var b=d.type,a=d.mode;d=d.valueFields;var c=[],c="count"===a?[""]:"field"===a?[""]:k.clone(d),f=null,f={type:b,labels:[],series:[]};f.series=c.map(k.hitch(this,
function(a){return{name:a,type:b,data:[]}}));h.forEach(k.hitch(this,function(b){var g=b.label;f.labels.push(g);for(var c=0;c<b.values.length;c++){var d={value:b.values[c],name:g,unit:b.unit};"feature"===a&&(d.originValue=b.originalValues[c]);f.series[c].data.push(d)}}));return f},_mapSettingConfigToChartOption:function(d,h,b){var a=b.type;this._settingColorArrayForPie(d,h,a,b.mode);this._settingAxisDisplay(d,h,a);d.type=a;d.dataZoom=["inside","slider"];d.confine=!0;d.backgroundColor=h.backgroundColor;
d.tooltip=h.tooltip?k.clone(h.tooltip):{confine:!0,trigger:"radar"===a||"pie"===a?"item":"axis",axisPointer:"pie"!==a?{type:"line"===a?"cross":"shadow",snap:!0}:{type:""}};h.marks&&h.marks.markLine&&(d.markLine=k.clone(h.marks.markLine));h.marks&&h.marks.markArea&&(d.markArea=k.clone(h.marks.markArea));h.legend&&(d.legend=k.clone(h.legend));h.xAxis&&(d.xAxis=k.clone(h.xAxis));h.yAxis&&(d.yAxis=k.clone(h.yAxis));h.dataLabel&&(d.dataLabel=k.clone(h.dataLabel));"pie"===a&&(d.innerRadius=h.innerRadius);
d.theme=h.theme||"light";return d},_settingColorArrayForPie:function(d,h,b,a){"pie"===b&&"field"!==a&&(h=h.seriesStyle)&&h.styles&&h.styles[0]&&(h=h.styles[0].style)&&Array.isArray(h.color)&&(b=k.clone(h.color),2===b.length&&(b=this.chartHelpUtils.getColors(k.clone(h.color),6)),d.color=b)},_settingAxisDisplay:function(d,h,b){if(!(0>["column","bar","line"].indexOf(b))){h.stack||(h.stack=!1);if("column"===b||"bar"===b||"line"===b&&h.area)d.stack=h.stack;"line"!==b||h.area||(h.area=!1);"line"===b&&(d.area=
h.area);d.scale=!1}}})})},"jimu/clientStatisticsUtils":function(){define(["dojo/_base/lang","moment/moment","./_chartHelpUtils","jimu/utils","libs/moment/twix"],function(n,e,k,l){window.makeTwix&&window.makeTwix(e);return{getClietStatisticsData:function(d){var e=d.mode;if("feature"===e)return this.getFeatureModeStatisticsData(d);if("category"===e)return this.getCategoryModeStatisticsData(d);if("count"===e)return this.getCountModeStatisticsData(d);if("field"===e)return this.getFieldModeStatisticsData(d)},
sortClientStatisticsData:function(d,e){return this.sortStatisticsData(d,e.mode,e.sortOrder,e.clusterField,e.valueFields)},getDataForMaxLabels:function(d,e){return d&&d.length&&"number"===typeof e&&0<e&&e<d.length?d.slice(0,e):d},getFeatureModeStatisticsData:function(d){var e=d.features,h=d.clusterField,b=d.valueFields;d=void 0!==d.showNullLabelData?d.showNullLabelData:!0;var a=this.separateFeaturesWhetherFieldValueNull(h,e),e=a.notNullLabelFeatures,a=a.nullLabelFeatures,e=d?e.concat(a):e;d=[];return d=
e.map(function(a){var c=a.attributes,g=c&&c[h],g=this.convertingNullOrUndefinedAsPlaceholders(g);a={label:g,values:[],features:[a]};a.values=b.map(function(a){return c[a]});return a}.bind(this))},getCategoryModeStatisticsData:function(d){function e(f){var m=[],q=null,d;for(d in f){q=f[d];d=this.keepFieldValueType(d,q.type,c);var e=this.calcValuesByFeaturesForCatetoryMode(b,q,h,a,g);m.push({label:d,values:e,features:q.features,unit:q.unit})}return m}var h=d.hasStatisticsed,b=d.valueFields,a=d.operation,
c=d.dateConfig,f=void 0!==d.showNullLabelData?d.showNullLabelData:!0,g=d.nullValue,m=[],m=this.getCluseringObj(d.clusterField,d.features,c);d=m.nullLabel;m=e.call(this,m.notNullLabel);d=e.call(this,d);return m=f?m.concat(d):m},getCountModeStatisticsData:function(d){function e(a){var b=[],f=null,q;for(q in a){var f=a[q],d=this.calcValuesByFeaturesForCountMode(f,c);q=this.keepFieldValueType(q,f.type,h);b.push({label:q,values:d,features:f.features,unit:f.unit})}return b}var h=d.dateConfig,b=void 0!==
d.showNullLabelData?d.showNullLabelData:!0,a=[],c=d.hasStatisticsed&&!h,a=this.getCluseringObj(d.clusterField,d.features,h);d=a.nullLabel;a=e.call(this,a.notNullLabel);d=e.call(this,d);return a=b?a.concat(d):a},calcValuesByFeaturesForCountMode:function(d,e){return e?d.features.map(function(d){var b=(d=d.attributes)&&d.STAT_COUNT;"undefined"===typeof b&&(b=d.stat_count);return b}.bind(this)):[d.count]},getFieldModeStatisticsData:function(d){var e=d.hasStatisticsed,h=d.features,b=d.operation,a=d.nullValue,
c=[];return c=d.valueFields.map(n.hitch(this,function(c){var g=this.getValuesByValueFieldForFieldMode(c,h,e,b),g=this.calcValueByOperation(g,b,a);return{label:c,values:[g]}}))},getValuesByValueFieldForFieldMode:function(d,e,h,b){b="average"===b?"avg":b;if(h)var a=l.upperCaseString(d+"_"+b),c=l.lowerCaseString(d+"_"+b);return e.map(n.hitch(this,function(b){if(b=b.attributes){var g;h?(g=b[a],"undefined"===typeof g&&(g=b[c])):g=b[d];return g}}))},sortStatisticsData:function(d,e,h,b,a){function c(g,c,
f){var m;if("category"===c)f.isLabelAxis?f.isLabelAxis&&(m=g.label):f.field||1!==g.values.length?(f=a.indexOf(f.field),m=g.values[f]):m=g.values[0];else if("count"===c)m=g.label,m=f.isLabelAxis?m:g.values[0];else if("field"===c)m=f.isLabelAxis?g.label:g.values[0];else if("feature"===c){var q=f.field;g&&g.features&&g.features[0]&&(c=g.features[0].attributes)&&(f.isLabelAxis?m=c[b]:q?m=c[q]:g.values.length&&(m=g.values[0]))}return m}if(!h)return d;var f=h.isAsc;if(!Array.isArray(d))return d;d.sort(function(a,
b){a=c(a,e,h);b=c(b,e,h);"_NULL\x26UNDEFINED_"===a&&(a=Infinity);"_NULL\x26UNDEFINED_"===b&&(b=Infinity);l.isNumberOrNumberString(a)&&(a=Number(a));l.isNumberOrNumberString(b)&&(b=Number(b));var g=a>b?f:!f;Infinity===a?g=f:Infinity===b&&(g=!f);var m=0;a!==b&&(m=g?1:-1);return m}.bind(this));return d},convertingNullOrUndefinedAsPlaceholders:function(d){return null===d||void 0===d?"_NULL\x26UNDEFINED_":d},keepFieldValueType:function(d,e,h){"number"===e&&(d=Number(d));h&&"_NULL\x26UNDEFINED_"!==d&&(d=
Number(d));return d},calcValuesByFeaturesForCatetoryMode:function(d,e,h,b,a){return d.map(function(c){c=this.getValuesByValueFieldForCategoryMode(c,e.features,h,b);return this.calcValueByOperation(c,b,a)}.bind(this))},getValuesByValueFieldForCategoryMode:function(d,e,h,b){b="average"===b?"avg":b;if(h)var a=l.upperCaseString(d+"_"+b),c=l.lowerCaseString(d+"_"+b);return e.map(n.hitch(this,function(b){if(b=b.attributes){var g;h?(g=b[a],"undefined"===typeof g&&(g=b[c])):g=b[d];return g}}))},_isNumber:function(d){return"[object number]"===
Object.prototype.toString.call(d).toLowerCase()},_getDateUnit:function(d,l){var h=l;"automatic"===l&&(l=e(d[0]).local(),d=e(d[1]).local(),d=Math.round(d.diff(l,"minute",!0)),0<=d&&1>=d?h="second":1<d&&60>=d?h="minute":60<d&&1440>=d?h="hour":1440<d&&43200>=d?h="day":43200<d&&518400>=d?h="month":518400<d&&(h="year"));return h},_getTimeRange:function(d,e){var h=d.map(n.hitch(this,function(b){return(b=b.attributes)&&b[e]})),h=h.filter(function(b){return!!b});d=Math.min.apply(Math,h);h=Math.max.apply(Math,
h);return[d,h]},_getTimeTwixs:function(d,l,h){if(0>"year month day hour minute second automatic".split(" ").indexOf(h))return console.log("Invaild data formatter: "+h),!1;d=this._getTimeRange(d,l);if(d[0]===d[1])return!1;h=this._getDateUnit(d,h);l=this.getStartTimeByUnit(d[0],h);l=e(l).local();d=e(d[1]).local();d=l.twix(d).split(1,h);l={startValue:d[d.length-1].end().valueOf(),endValue:Infinity};d.push(l);return{twixs:d,dateUnit:h}},getCluseringObj:function(d,e,h){var b={},a={};h?(d=this.getClusteringObjForDateType(d,
e,h),b=d.notNullLabel,a=d.nullLabel):(b=this.separateFeaturesWhetherFieldValueNull(d,e),e=b.nullLabelFeatures,b=this.getClusteringObjByField(b.notNullLabelFeatures,d),a=this.getClusteringObjByField(e,d));return{notNullLabel:b,nullLabel:a}},calcValueByOperation:function(d,e,h){if(d&&1===d.length){if(!h)return d[0];if(!this._isNumber(d[0]))return 0}var b;if(0!==d.length){b=0;"max"===e?b=-Infinity:"min"===e&&(b=Infinity);d=h?d.map(function(a){this._isNumber(a)||(a=0);return a}.bind(this)):d.filter(function(a){return this._isNumber(a)}.bind(this));
var a=0;d.forEach(n.hitch(this,function(c){a++;"average"===e||"sum"===e?b+=c:"max"===e?b=Math.max(b,c):"min"===e&&(b=Math.min(b,c))}));0<a?"average"===e&&(b/=a):b=null}else b=null;return b},getClusteringObjByField:function(d,e){var h={};d.forEach(n.hitch(this,function(b){var a=b.attributes,a=a&&a[e],c=typeof a,a=this.convertingNullOrUndefinedAsPlaceholders(a),f=null;h.hasOwnProperty(a)?(f=h[a],f.features.push(b),f.count++):(f={count:1,features:[b],type:c},h[a]=f)}));return h},_removeNaNDataItem:function(d){return d.filter(function(d){var h=
!1;d=d.category;"number"===typeof d&&(h=isNaN(d));return!h})},separateFeaturesWhetherFieldValueNull:function(d,e){var h=[],b=[];Array.isArray(e)&&(b=e.filter(function(a){var b=a.attributes,b=b&&b[d];if(null===b||void 0===b)h.push(a);else return!0}));return{nullLabelFeatures:h,notNullLabelFeatures:b}},getStartTimeByUnit:function(d,l){return e(d).startOf(l).utc().valueOf()},_mosaicFieldNameWithOperatorAndUpper:function(d,e){return l.upperCaseString(d+"_"+e)},_mosaicFieldNameWithOperatorAndLower:function(d,
e){return l.lowerCaseString(d+"_"+e)},getClusteringObjForDateType:function(d,e,h){function b(a,b,g){a[b]?(a=a[b],a.count+=g.count,a.features=a.features.concat(g.features)):a[b]=g}function a(a,b,g,c){b=Number(b);c=this.getStartTimeByUnit(b,c);a[c]?(a=a[c],a.count+=g.count,a.features=a.features.concat(g.features)):(g.originTime=b,a[c]=g)}function c(a,b,g){g[a[0].attributes[b]]={count:1,features:a};return g}var f=this.separateFeaturesWhetherFieldValueNull(d,e),g=f.notNullLabelFeatures;e={};e=this.getClusteringObjByField(f.nullLabelFeatures,
d);f={};if(1===g.length)f=c.call(this,g,d,f,h);else if(0!==g.length){var m=this._getTimeTwixs(g,d,h.minPeriod);if(m){var q={},v=m.dateUnit;m.twixs.forEach(function(a){var c="undefined"!==typeof a.startValue?a.startValue:a.start().valueOf(),f="undefined"!==typeof a.endValue?a.endValue:a.end().valueOf(),m={unit:v,count:0,features:[]};g.forEach(n.hitch(this,function(a){var b=a.attributes,b=b&&b[d];b>=c&&b<f&&(m.features.push(a),m.count++)}));h.isNeedFilled?b.call(this,q,c,m):0<m.count&&b.call(this,q,
c,m)}.bind(this));var m={},l,t;for(l in q)q.hasOwnProperty(l)&&(t=q[l],a.call(this,m,l,t,v));for(l in m)if(m.hasOwnProperty(l)){t=m[l];var u=t.originTime;delete t.originTime;f[u]=t}}else f=c.call(this,g,d,f,h)}return{notNullLabel:f,nullLabel:e}},_mapOptions:function(d,e){"feature"===e?(e=d.labelField,delete d.labelField,d.clusterField=e,d.showNullLabelData=!0):"category"===e?(e=d.categoryField,delete d.categoryField,d.clusterField=e,d.showNullLabelData=!0):"count"===e?(e=d.categoryField,delete d.categoryField,
d.clusterField=e):"field"===e&&(d.showNullLabelData=!0);return d},_mapDataItemForStatisticsChart:function(d,e){var h,b,a;return d.map(function(c){h=c.label;delete c.label;b=c.values;delete c.values;a=c.features;delete c.features;"feature"===e?(c.category=h,c.valueFields=b,c.dataFeatures=a):"category"===e?(c.category=h,c.valueFields=b,c.dataFeatures=a):"count"===e?(c.fieldValue=h,c.count=b[0],c.dataFeatures=a):"field"===e&&(c.label=h,c.value=b[0]);return c})},getFeatureModeStatisticsInfo:function(d){var e=
new k({featureLayer:d.layerDefinition,popupInfo:d.popupFieldInfosObj});d=this._mapOptions(d,"feature");var h=d.clusterField,b=this.getFeatureModeStatisticsData(d),b=this.sortStatisticsData(b,"feature",d.sortOrder,h),b=this.getDataForMaxLabels(b,d.maxLabels),b=e.getBestLabelDisplay(b,h,"feature"),b=e.keepStatisticsDataBestDecimalPlace(d,b,"feature");return this._mapDataItemForStatisticsChart(b,"feature")},getCategoryModeStatisticsInfo:function(d){var e=new k({featureLayer:d.layerDefinition,popupInfo:d.popupFieldInfosObj});
d=this._mapOptions(d,"category");var h=d.clusterField,b=this.getCategoryModeStatisticsData(d),b=this.sortStatisticsData(b,"category",d.sortOrder,null,d.valueFields),b=this._removeNaNDataItem(b),b=this.getDataForMaxLabels(b,d.maxLabels),b=e.getBestLabelDisplay(b,h,"category"),b=e.keepStatisticsDataBestDecimalPlace(d,b,"category");return this._mapDataItemForStatisticsChart(b,"category")},getCountModeStatisticsInfo:function(d){var e=new k({featureLayer:d.layerDefinition,popupInfo:d.popupFieldInfosObj});
d=this._mapOptions(d,"count");var h=d.clusterField,b=this.getCountModeStatisticsData(d),b=this.sortStatisticsData(b,"count",d.sortOrder),b=this.getDataForMaxLabels(b,d.maxLabels),b=e.getBestLabelDisplay(b,h,"count");return this._mapDataItemForStatisticsChart(b,"count")},getFieldModeStatisticsInfo:function(d){var e=new k({featureLayer:d.layerDefinition,popupInfo:d.popupFieldInfosObj});d=this._mapOptions(d,"category");var h=this.getFieldModeStatisticsData(d),h=this.sortStatisticsData(h,"field",d.sortOrder),
h=this.getDataForMaxLabels(h,d.maxLabels),h=e.getBestLabelDisplay(h,null,"field"),h=e.keepStatisticsDataBestDecimalPlace(d,h,"field");return this._mapDataItemForStatisticsChart(h,"field")}}})},"jimu/_chartHelpUtils":function(){define("dojo/_base/declare jimu/utils dojo/_base/lang dojo/_base/config dojo/_base/Color ./_dateFormat moment/moment esri/lang esri/graphic esri/layers/GraphicsLayer esri/symbols/jsonUtils".split(" "),function(n,e,k,l,d,p,h,b,a,c,f){return n(null,{constructor:function(a){a&&
k.mixin(this,a);this.popupInfo||(this.popupInfo={});this.featureLayer||(this.featureLayer={});this._cachePlaces={}},setLayerFeatureLayer:function(a){this.featureLayer=a;this.map&&((a=this.map.getLayer("chart_highLight_GraphicLayer"))?this.graphicLayer=a:(this.graphicLayer=new c({id:"chart_highLight_GraphicLayer"}),this.map.addLayer(this.graphicLayer)),this.graphicLayer.clear())},setLayerObject:function(a){this.layerObject=a},setSymbolLayer:function(a){this.symbolLayer=a},setPopupInfo:function(a){this.popupInfo=
a},setMap:function(a){this.map=a},getBestLabelDisplay:function(a,b,c){if("feature"===c)return this.betterDataCategoryForFeatureMode(a,b);if("category"===c||"count"===c)return this.betterDataCategoryForCategoryCountMode(a,b);if("field"===c)return this.betterDataCategoryForFieldMode(a)},betterDataCategoryForFeatureMode:function(a,b){a.forEach(k.hitch(this,function(a){a.label=this.getBestDisplayValue(b,a.label)}));return a},betterDataCategoryForFieldMode:function(a){a.forEach(k.hitch(this,function(a){a.label=
this.getFieldAlias(a.label)}));return a},betterDataCategoryForCategoryCountMode:function(a,b){a.forEach(k.hitch(this,function(a){a.label="undefined"!==typeof a.unit?this.getCategoryDisplayForDateUnit(a.label,a.unit):this.getBestDisplayValue(b,a.label)}));return a},keepStatisticsDataBestDecimalPlace:function(a,b,c){if("count"===c)return b;var g=a.valueFields,f=a.operation;this.cacheDecimalPlace(g,a.features,this.popupInfo);var m=null;"feature"===c||"category"===c?b.forEach(k.hitch(this,function(a){a.originalValues=
k.clone(a.values);g.forEach(k.hitch(this,function(b,g){var c=a.values[g];this.isIntegerNumberField(b)&&"average"===f?c=this.getBestValueForIntegerFieldAverage(c,6):(m=this._getFieldDecimalPlaceFromCache(b),c=this.formatValuePlaces(c,m));a.values[g]=c}))})):"field"===c&&g.forEach(k.hitch(this,function(a){b.some(k.hitch(this,function(b){if(b.label===a){var g=b.values[0];this.isIntegerNumberField(a)&&"average"===f?g=this.getBestValueForIntegerFieldAverage(g,6):(m=this._getFieldDecimalPlaceFromCache(a),
g=this.formatValuePlaces(g,m));b.values[0]=g;return!0}return!1}))}));return b},isIntegerNumberField:function(a){if(!this.featureLayer||!this.featureLayer.fields)return!1;var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger"];return this.featureLayer.fields.some(k.hitch(this,function(g){return g.name===a&&0<=b.indexOf(g.type)}))},formatValuePlaces:function(a,b){return"number"!==typeof b||!a&&0!==a?a:a.toFixed(b)},getBestValueForIntegerFieldAverage:function(a,b){a=Number(a);if("number"!==typeof a)return a;
var g=0,c=a.toString().split(".");1===c.length?g=0:2===c.length&&(g=c[1].length);return 0<g?(g>b&&(g=b),a=a.toFixed(g),parseFloat(a)):a},_getFieldDecimalPlaceFromCache:function(a){var b;this._cachePlaces&&(a=this._cachePlaces[a],"number"===typeof a&&(b=a));return b},cacheDecimalPlace:function(a,b,c){this._cachePlaces={};if(a&&a.length){var g=a.filter(k.hitch(this,function(a){return this.isFloatNumberField(a)})),f={};g.forEach(k.hitch(this,function(a){f[a]=[]}));b&&0<b.length&&b.forEach(k.hitch(this,
function(a){var b=a.attributes;b&&g.forEach(k.hitch(this,function(a){var g=b[a];"number"===typeof g&&f[a].push(g)}))}));g.forEach(k.hitch(this,function(a){var b=this.getFieldInfoFromPopupInfo(c,a);this._cachePlaces[a]=0;var g=f[a];if(0<g.length)try{var m=this.getBestDecimalPlaceForArrayValues(g);this._cachePlaces[a]=m}catch(x){this._cachePlaces[a]=0,console.error(x)}c&&((b=this.getPlacesFromPopupFieldInfo(b))||0===b)&&(this._cachePlaces[a]=b)}))}},getBestDecimalPlaceForArrayValues:function(a){var b=
0,g={};a.forEach(function(a){a=a.toString().split(".");var b=null;1===a.length?b=0:2===a.length&&(b=a[1].length);null!==b&&(g[b]=void 0===g[b]?1:g[b]+1)});a=null;for(var c in g){c=parseInt(c,10);var f=g[c];a?f>a.value&&(a={key:c,value:f}):a={key:c,value:f}}a&&(b=parseInt(a.key,10));return b},getFieldInfoFromPopupInfo:function(a,b){var g=null;return a&&a.fieldInfos?g=a.fieldInfos.filter(function(a){return a.fieldName===b})[0]:g},getPlacesFromPopupFieldInfo:function(a){return a&&a.format&&a.format.places},
getAliasFromPopupInfo:function(a,b){var g=b;if(!a||!a.fieldInfos)return g;(a=a.fieldInfos)&&0<a.length&&a.some(function(a){if(a.fieldName===b)return g=a.label,!0});return g},isFloatNumberField:function(a){if(!this.featureLayer||!this.featureLayer.fields)return!1;var b=["esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(k.hitch(this,function(g){return g.name===a&&0<=b.indexOf(g.type)}))},isNumberField:function(a){if(!this.featureLayer||!this.featureLayer.fields)return!1;
var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(k.hitch(this,function(g){return g.name===a&&0<=b.indexOf(g.type)}))},isDateField:function(a){return(a=this.getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},getFieldInfo:function(a){if(this.featureLayer)for(var b=this.featureLayer.fields,g=0;g<b.length;g++)if(b[g].name===a)return b[g];return null},getFieldAliasArray:function(a){return a.map(k.hitch(this,function(a){return this.getFieldAlias(a)}))},
getBestDisplayValue:function(a,b){if("_NULL\x26UNDEFINED_"===b)return"null";if(this.isDateField(a))return this.formatedDateByPopupInfoOrLocal(a,b);var g={};g[a]=b;g=e.getDisplayValueForCodedValueOrSubtype(this.layerObject||this.featureLayer,a,g);g.isCodedValueOrSubtype?b=g.displayValue:this.isNumberField(a)&&(a=this.getFieldInfoFromPopupInfo(this.popupInfo,a),b=e.localizeNumberByFieldInfo(b,a));return b},formatedDateByPopupInfoOrLocal:function(a,c,f){f||(f=this.popupInfo);a:{if(f&&b.isDefined(f.fieldInfos))for(var g=
0,m=f.fieldInfos.length;g<m;g++){var d=f.fieldInfos[g];if(d.fieldName===a){a=d.format;break a}}a=null}c=Number(c);return e.fieldFormatter.getFormattedDate(c,a)},getDisplayValForNumberCodedValueSubTypes:function(a,b){var g=this.tryLocaleNumber(b,a);if(this.featureLayer&&this.featureLayer.typeIdField===a){var c=this.featureLayer.types;if(c&&0<c.length&&(c=c.filter(k.hitch(this,function(a){return a.id===b})),0<c.length))return g=c[0].name}(a=this.getFieldInfo(a))&&a.domain&&(a=a.domain.codedValues)&&
0<a.length&&a.some(function(a){return a.code===b?(g=a.name,!0):!1});return g},tryLocaleNumber:function(a,c){var g=a;if(b.isDefined(a)&&isFinite(a))try{var f;if(c&&this.isNumberField(c)){var m=this.popupInfo[c];f=m&&k.exists("format.places",m)?e.localizeNumberByFieldInfo(a,m):e.localizeNumber(a)}else f=a;"string"===typeof f&&(g=f)}catch(t){console.error(t)}return g+""},getCategoryDisplayForDateUnit:function(a,b){if(!b)return a;a=Number(a);return this._getFormatteredDate(a,b)},_getFormatteredDate:function(a,
b){var c=this._getDateTemplate(b);0<=["year","month","day"].indexOf(b)?c=e.localizeDate(new Date(a),{selector:"date",datePattern:c.date}):(b=e.localizeDate(new Date(a),{selector:"date",datePattern:c.date}),a=h(a).format(c.time),c=b+c.connector+a);return c},_getDateTemplate:function(a){var b=p[l.locale];(b=b||{},b.date)||(b.date={"short":"short"});b&&!b.time&&(b.time={medium:"HH:mm:ss a"});b&&!b.connector&&(b.connector=" ");b&&!b.sNoDay&&(b.sNoDay="MMM, y");var c={};"year"===a?c.date="y":"month"===
a?c.date=b.date.sNoDay:"day"===a?c.date=b.date["short"]:"hour"===a?(c.date=b.date["short"],c.time="HH a",c.connector=b.connector):"minute"===a?(c.date=b.date["short"],c.time="HH:mm a",c.connector=b.connector):"second"===a&&(c.date=b.date["short"],c.time=b.time.medium,c.connector=b.connector);return c},_getSymbolLayerGraphics:function(a,b){if(!this.symbolLayer)return null;if(!this.symbolLayer.refreshInterval&&this.symbolGraphics&&!1===this.symbolGraphics.filterByExtent&&!1===this.symbolGraphics.useSelection)return this.symbolGraphics.graphics;
var c=null;this.map&&this.symbolLayer&&(c=e.getClientFeaturesFromMap(this.map,this.symbolLayer,b,!!a));this.symbolGraphics={filterByExtent:a,useSelection:b,graphics:c};return c},_isContainAttr:function(a,b){if("object"!==typeof b||"object"!==typeof b)return!1;var c=!0;Object.keys(b).some(function(g){return b[g]!==a[g]?(c=!1,!0):!1});return c},_getFeaturesByAttr:function(a,b){if(b){var c=null;b.some(function(b){return this._isContainAttr(b.attributes,a)?(c=b,!0):!1}.bind(this));return c}},_getFeaturesByClusterfield:function(a,
b,c,f){var g=this._getSymbolLayerGraphics(c);if(g)return c=null,a=this.clientStatisticsUtils.getCluseringObj(a,g,f),(b=k.mixin(a.notNullLabel,a.nullLabel)[b])&&b.features&&b.features.length&&(c=b.features),c},_getFeatureForSerieData:function(b,c,f){var g=c.clusterField,m=c.mode,d=c.filterByExtent;c=c.useSelection;var e={};e[g]=b.name;if("feature"===m)return this._getFeatureBySerieDataItem(b,g,f,d,c);if("category"===m||"count"===m)return new a(null,null,e)},_getFeatureBySerieDataItem:function(a,b,
c,f,d){var g={};g[b]=a.name;g[c]=Number("undefined"!==typeof a.originValue?a.originValue:a.value);a=this._getSymbolLayerGraphics(f,d);return this._getFeaturesByAttr(g,a)},_getFeatureBycsuDataItem:function(a,b,c,f,d,e){var g={};g[b]=a.label;a=a.originalValues||a.values;g[c]=Number(a&&a[f]);c=this._getSymbolLayerGraphics(d,e);return this._getFeaturesByAttr(g,c)},bindChartEvent:function(a,b,c){var g=b.filterByExtent,f=b.useSelection,m=b.clusterField,d=b.valueFields,e=null;"undefined"!==b.dateConfig&&
(e=b.dateConfig);this.highLightColor=b.highLightColor||"#00ffff";var q=b.mode;if(this.map&&0!==c.length){b=k.hitch(this,function(a){if("series"===a.componentType){var b=null,h=this._getSymbolLayerGraphics(g,f);if("field"===q)b=h;else if(h=c[a.dataIndex])if("feature"===q){var t=a.seriesIndex,l=d[t];if(!l)return;(h=this._getFeatureBycsuDataItem(h,m,l,t,g,f))&&(b=[h])}else h=h.label,"undefined"!==typeof h&&(b=this._getFeaturesByClusterfield(m,h,g,e));b&&"mouseover"===a.type&&this.graphicLayer&&(this._mouseoverFeatures=
b,this._mouseOverChartItem(b))}});var h=k.hitch(this,function(){this._mouseoverFeatures&&this.graphicLayer&&(this._mouseOutChartItem(this._mouseoverFeatures),this._mouseoverFeatures=null)});[{name:"mouseover",callback:b},{name:"mouseout",callback:h}].forEach(k.hitch(this,function(b){a.chart.off(b.name);a.chart.on(b.name,k.hitch(this,function(a){"mouseover"===a.type?(this._hasTriggerMouseoverEvent||(this._hasTriggerMouseoverEvent=!0,b.callback(a)),setTimeout(k.hitch(this,function(){this._hasTriggerMouseoverEvent=
!1},500))):"mouseout"===a.type&&b.callback(a)}))}))}},_createHighLightFeatures:function(b,c){b.forEach(k.hitch(this,function(b){b=new a(b.geometry,c);this.graphicLayer.add(b)}))},_mouseOverChartItem:function(b){if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var c=e.getTypeByGeometryType(this.featureLayer.geometryType);b.forEach(k.hitch(this,function(a){a._originalSymbol=a.symbol}));var g=null;if("point"===c)g=this._getHighLightMarkerSymbol(),this._createHighLightFeatures(b,
g);else if("polyline"===c)g=this._getHighLightLineSymbol(this.highLightColor),this._createHighLightFeatures(b,g);else if("polygon"===c){var f=this.featureLayer.getSelectedFeatures()||[];b.forEach(k.hitch(this,function(b){var c=0<=f.indexOf(b),c=this._getHighLightFillSymbol(this.featureLayer,b,c);b=new a(b.geometry,c);this.graphicLayer.add(b)}))}}},_mouseOutChartItem:function(){this.graphicLayer&&this.graphicLayer.clear()},_getHighLightMarkerSymbol:function(){var a=f.fromJson({color:[255,255,255,0],
size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}});a.setSize(30);a.outline.setColor(new d(this.highLightColor));return a},_getHighLightLineSymbol:function(a){var b=f.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});b.setColor(new d(a||this.highLightColor));return b},_getDefaultHighLightFillSymbol:function(){var a=f.fromJson({color:[0,255,255,128],outline:{color:[0,255,
255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});a.outline.setColor(new d(this.highLightColor));return a},_getSymbolByRenderer:function(a,b){var c=this._getDefaultHighLightFillSymbol(),g=this.getVisualVariableByType("colorInfo",a.visualVariables);if(g){if(a=a.getColor(b,{colorInfo:g}))a=k.clone(a),c.setColor(a)}else c=a.getSymbol(b);return c},getVisualVariableByType:function(a,b){return b&&(b=b.filter(function(b){return b.type===a&&!b.target}),b.length)?
b[0]:null},_getHighLightFillSymbol:function(a,b,c){var g=null,m=b.symbol,g=a.renderer;!m&&g&&(m=this._getSymbolByRenderer(g,b));m&&"function"===typeof m.setOutline?(g=f.fromJson(m.toJson()),b=1.5,m.outline&&0<m.outline.width&&(b=m.outline.width+1),c=this._getHighLightLineSymbol(c?"#ff0000":"#00ffff"),c.setWidth(b),g.setOutline(c)):g=this._getDefaultHighLightFillSymbol();return g},_isNumberField:function(a){var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];
return this.featureLayer.fields.some(k.hitch(this,function(c){return c.name===a&&0<=b.indexOf(c.type)}))},getFieldAlias:function(a){var b;this.popupInfo&&(b=this.getAliasFromPopupInfo(this.popupInfo,a));b||(b=a,(a=this.getFieldInfo(a))&&a.alias&&(b=a.alias));return b},_removeDuplicateElementForObjArray:function(a){if(!Array.isArray(a))return a;var b=[];b.push(a[0]);a.forEach(function(a){b.some(function(b){return e.isEqual(b,a)})||b.push(a)});return b},assigneeSettingColor:function(a,b,c){if(!b||!b.length)return b;
var g=a.seriesStyle;if(!g)return b;"layerSymbol"===g.type?b=this._assigneeStyleLayerSymbolColor(b,c):"series"===g.type?b=this._assigneeStyleSeriesColor(a,b):"custom"===g.type&&(b=this._assigneeStyleCustomColor(a,b));return b},_assigneeStyleCustomColor:function(a,b){a=a.seriesStyle;if(!a||!a.customColor)return b;var c=a.customColor;a=c.categories;c=c.others;if(!(a&&a.length||c&&c.length))return b;c&&c.length&&this._setCustomOthersColor(c,b);a&&a.length&&this._setCustomCategoriesColor(a,b)},_setCustomCategoriesColor:function(a,
b){b.forEach(function(b){(b=b.data)&&b.length&&b.forEach(function(b){if("undefined"!==typeof b.name){var c=this._getMatchingCustomColor(b.name,a);this.setColorToDataItem(b,c)}}.bind(this))}.bind(this))},_getMatchingCustomColor:function(a,b){var c=!1;if(!b||!b.length)return c;(b=b.filter(function(b){return b.id===a})[0])&&b.color&&(c=b.color);return c},_getMatchingCustomLabel:function(a,b){var c=!1;if(!b||!b.length)return c;(b=b.filter(function(b){return b.id===a})[0])&&b.label&&(c=b.label);return c},
_setCustomOthersColor:function(a,b){this._setOtherColorForCustomColor(a,b);this._setNullLabelColorForCustomColor(a,b)},_setOtherColorForCustomColor:function(a,b){(a=a.filter(function(a){return"others"===a.id})[0])&&a.color&&this.setColorToAllSerieDataItem(b,a.color)},_setNullLabelColorForCustomColor:function(a,b){if((a=a.filter(function(a){return"null"===a.id})[0])&&a.color){var c=a.color;b.forEach(function(a){(a=a.data)&&a.length&&a.forEach(function(a){a.name&&"_NULL\x26UNDEFINED_"===a.name&&this.setColorToDataItem(a,
c)}.bind(this))}.bind(this))}},_assigneeStyleSeriesColor:function(a,b){var c=a.seriesStyle;if(!c||!c.styles||!c.styles[0])return b;var g=a.mode,f=a.area;return b.map(function(a){var b=null,m=a.type;if("field"===g)"line"===m?(b=c.styles[0].style,a=this._setStyleToSerie(b,a,f)):(m=a.data)&&m[0]&&(a.data=m.map(function(a){b=this._getMatchingStyle(a.name,c);return this.setStyleToSerieDataItem(b,a)}.bind(this)));else if("column"===m||"bar"===m||"line"===m)"count"===g?(b=c.styles[0].style,a=this._setStyleToSerie(b,
a,f)):"undefined"!==typeof a.name&&(b=this._getMatchingStyle(a.name,c))&&(a=this._setStyleToSerie(b,a,f));return a}.bind(this))},_assigneeStyleLayerSymbolColor:function(a,b){a.forEach(function(a){var c=a.name;(a=a.data)&&a.length&&a.forEach(function(a){var g=[this._getFeatureForSerieData(a,b,c)];if(g=this._getSymbolColorForDataItem(g))a.itemStyle={color:g}}.bind(this))}.bind(this))},_setStyleToSerie:function(a,b,c){b.itemStyle||(b.itemStyle={});a&&"undefined"!==typeof a.color&&(Array.isArray(a.color)?
b.itemStyle.color=a.color[0]:b.itemStyle.color=a.color);a&&"undefined"!==typeof a.opacity&&(c?(b.areaStyle||(b.areaStyle={}),b.areaStyle.opacity=1-parseFloat(a.opacity/10)):b.itemStyle.opacity=1-parseFloat(a.opacity/10));return b},_getMatchingStyle:function(a,b){var c=null;b=b.styles;if(!b||!b[0]||""===a)return c;b.forEach(function(b){b.name===a&&(c=b.style)});return c},_getSymbolColorForDataItem:function(a){var b=!1;if(!this.symbolLayer)return b;a=a&&a[0];return a?b=this._getColorForFeature(this.symbolLayer.renderer,
a):b},_getColorForFeature:function(a,b){var c=!1,f=this.getVisualVariableByType("colorInfo",a.visualVariables);f?(a=a.getColor(b,{colorInfo:f}))&&(c=this._convertToEchartsRbga(a)):(a=a.getSymbol(b))&&"undefined"!==typeof a.color&&(c=this._convertToEchartsRbga(a.color));return c},_convertToEchartsRbga:function(a){if(!a||"undefined"===typeof a.r)return a;a=window.JSON.parse(window.JSON.stringify(a));var b;b="rgba("+(a.r+",");b+=a.g+",";b+=a.b+",";return b+=a.a+")"},getColors:function(a,b){var c=[];
if(2===a.length)c=this._createGradientColors(a[0],a[a.length-1],b);else{for(var f=Math.ceil(b/a.length),g=0;g<f;g++)c=c.concat(a);c=c.slice(0,b)}return c},_createGradientColors:function(a,b,c){var f=[];a=new d(a);var g=new d(b);b=(g.r-a.r)/c;for(var m=(g.g-a.g)/c,g=(g.b-a.b)/c,e=new d,h=0,q=0,l=0,k=0;k<c;k++)h=parseInt(a.r+b*k,10),q=parseInt(a.g+m*k,10),l=parseInt(a.b+g*k,10),e.setColor([h,q,l]),f.push(e.toHex());return f},setStyleToSerieDataItem:function(a,b){b.itemStyle||(b.itemStyle={});a&&"undefined"!==
typeof a.color&&(Array.isArray(a.color)?b.itemStyle.color=a.color[0]:b.itemStyle.color=a.color);a&&"undefined"!==typeof a.opacity&&(b.itemStyle.opacity=1-parseFloat(a.opacity/10));return b},setColorToSerie:function(a,b){if(!a||"object"!==typeof a||Array.isArray(a))return a;a.itemStyle||(a.itemStyle={});b&&(a.itemStyle.color=b)},setColorToDataItem:function(a,b){if(!a||"object"!==typeof a)return a;a.itemStyle||(a.itemStyle={});b&&(a.itemStyle.color=b)},setColorToAllSerieDataItem:function(a,b){a.forEach(function(a){(a=
a.data)&&a.length&&a.forEach(function(a){this.setColorToDataItem(a,b)}.bind(this))}.bind(this))},_updateDataItemNameForCustom:function(a,b,c){var f;"undefined"!==typeof a.name&&(f=a.name,"_NULL\x26UNDEFINED_"===a.name&&b?f=b:(b=this._getMatchingCustomLabel("undefined"!==typeof a.originName?a.originName:a.name,c))&&(f=b),a.name=f);return f},_updateSerieDataItemName:function(a,b,c){var f=a.name,g=f,g=a.unit&&f?this.getCategoryDisplayForDateUnit(f,a.unit):"field"!==b?this.getBestDisplayValue(c,f):this.getFieldAlias(f);
a.name=g;a.originName=f;return g},updateChartSeriesDisplayName:function(a,b,c){var f=c.clusterField,g=c.mode;c=a.series;var d=[];b=b.seriesStyle;var e,m,h;c.forEach(function(a,b){a.name&&(a.name=this.getFieldAlias(a.name));(a=a.data)&&a.length&&a.forEach(function(a,c){h=this._updateSerieDataItemName(a,g,f);0===b&&(d[c]=h)}.bind(this))}.bind(this));"custom"===b.type&&((b=b.customColor)&&b.categories&&b.categories.length&&(e=b.categories,b=b.others||[],(b=b.filter(function(a){return"null"===a.id})[0])&&
b.label&&(m=b.label)),c.forEach(function(a,b){(a=a.data)&&a.length&&a.forEach(function(a,c){h=this._updateDataItemNameForCustom(a,m,e);0===b&&(d[c]=h)}.bind(this))}.bind(this)));a.labels=null;a.labels=d}})})},"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",
mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",onlyDate:"d. M.",mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",
onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",
medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",sNoDay:"MM/yy"},connector:" , "},hi:{date:{"short":"d/M/yy",medium:"dd/MM/y","long":"d MMMM y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/yy"},time:{"short":"h:mm a",medium:"h:mm:ss a",sNoDay:""},connector:" , "},hr:{date:{"short":"d.M.y",medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},it:{date:{medium:"dd MMM y",
"long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",onlyDate:"d. MMM.",
mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},nl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},"pt-pt":{date:{medium:"dd/MM/y",
onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",onlyDate:"d MMM",
mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",onlyDate:"d MMM",mNoDay:"MMM, y",sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",
onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},"libs/moment/twix":function(){(function(){var n,e,k,l=[].slice;n="undefined"!==typeof module&&null!==module&&null!=module.exports&&"function"===typeof require;e=function(d){return"[object Array]"===Object.prototype.toString.call(d)};k=function(d){var k;if(null==d)throw Error("Can't find moment");k=
function(){function h(b,a,c,f){var g;null==f&&(f={});"string"!==typeof c&&(f=null!=c?c:{},c=null);"boolean"===typeof f&&(f={allDay:f});this._oStart=d(b,c,f.parseStrict);this._oEnd=d(a,c,f.parseStrict);this.allDay=null!=(g=f.allDay)?g:!1;this._mutated()}h._extend=function(){var b,a,c,f,g,d;a=arguments[0];d=2<=arguments.length?l.call(arguments,1):[];c=0;for(f=d.length;c<f;c++)for(b in g=d[c],g)"undefined"!==typeof g[b]&&(a[b]=g[b]);return a};h.prototype.start=function(){return this._start.clone()};
h.prototype.end=function(){return this._end.clone()};h.prototype.isSame=function(b){return this._start.isSame(this._end,b)};h.prototype.length=function(b,a){null==a&&(a=!1);return this._displayEnd.diff(this._start,b,a)};h.prototype.count=function(b){var a;a=this.start().startOf(b);return this.end().startOf(b).diff(a,b)+1};h.prototype.countInner=function(b){var a,c;a=this._inner(b);c=a[0];a=a[1];return c>=a?0:a.diff(c,b)};h.prototype.iterate=function(b,a,c){var f,g,d;g=this._prepIterateInputs(b,a,
c);b=g[0];a=g[1];c=g[2];d=this.start().startOf(a);f=this.end().startOf(a);this.allDay&&(f=f.add(1,"d"));g=function(a){return function(){return!a.allDay&&d<=f&&(!c||!d.isSame(f)||a._end.hours()>c)||a.allDay&&d<f}}(this);return this._iterateHelper(a,d,g,b)};h.prototype.iterateInner=function(b,a){var c,f,g;a=this._prepIterateInputs(b,a);b=a[0];a=a[1];f=this._inner(a,b);g=f[0];c=f[1];return this._iterateHelper(a,g,function(){return g<c},b)};h.prototype.humanizeLength=function(){return this.allDay?this.isSame("d")?
"all day":this._start.from(this.end().add(1,"d"),!0):this._start.from(this._end,!0)};h.prototype.asDuration=function(b){b=this._end.diff(this._start);return d.duration(b)};h.prototype.isPast=function(){return this._lastMilli<d()};h.prototype.isFuture=function(){return this._start>d()};h.prototype.isCurrent=function(){return!this.isPast()&&!this.isFuture()};h.prototype.contains=function(b){d.isMoment(b)||(b=d(b));return this._start<=b&&this._lastMilli>=b};h.prototype.isEmpty=function(){return this._start.isSame(this._displayEnd)};
h.prototype.overlaps=function(b){return this._displayEnd.isAfter(b._start)&&this._start.isBefore(b._displayEnd)};h.prototype.engulfs=function(b){return this._start<=b._start&&this._displayEnd>=b._displayEnd};h.prototype.union=function(b){var a;a=this.allDay&&b.allDay;return new h(this._start<b._start?this._start:b._start,this._lastMilli>b._lastMilli?a?this._end:this._displayEnd:a?b._end:b._displayEnd,a)};h.prototype.intersection=function(b){var a;a=this.allDay&&b.allDay;return new h(this._start>b._start?
this._start:b._start,this._lastMilli<b._lastMilli?a?this._end:this._displayEnd:a?b._end:b._displayEnd,a)};h.prototype.xor=function(){var b,a,c,f,g,d,e,k,w,t,u,r;w=1<=arguments.length?l.call(arguments,0):[];k=0;r=null;u=[];b=function(){var a,b,c;c=[];a=0;for(b=w.length;a<b;a++)e=w[a],e.allDay&&c.push(e);return c}().length===w.length;a=[];t=[this].concat(w);f=d=0;for(c=t.length;d<c;f=++d)g=t[f],a.push({time:g._start,i:f,type:0}),a.push({time:g._displayEnd,i:f,type:1});a=a.sort(function(a,b){return a.time-
b.time});f=0;for(g=a.length;f<g;f++)d=a[f],1===d.type&&--k,k===d.type&&(r=d.time),k===(d.type+1)%2&&(r&&((c=u[u.length-1])&&c._end.isSame(r)?(c._oEnd=d.time,c._mutated()):(c=b?d.time.clone().subtract(1,"d"):d.time,r=new h(r,c,b),r.isEmpty()||u.push(r))),r=null),0===d.type&&(k+=1);return u};h.prototype.difference=function(){var b,a,c,f,g;b=1<=arguments.length?l.call(arguments,0):[];c=this.xor.apply(this,b).map(function(a){return function(b){return a.intersection(b)}}(this));f=[];b=0;for(a=c.length;b<
a;b++)g=c[b],!g.isEmpty()&&g.isValid()&&f.push(g);return f};h.prototype.split=function(){var b,a,c,f,g,h,q,k,w;b=1<=arguments.length?l.call(arguments,0):[];c=h=this.start();d.isDuration(b[0])?a=b[0]:!d.isMoment(b[0])&&!e(b[0])&&"object"===typeof b[0]||"number"===typeof b[0]&&"string"===typeof b[1]?a=d.duration(b[0],b[1]):k=e(b[0])?b[0]:b;k&&(k=function(){var a,b,c;c=[];a=0;for(b=k.length;a<b;a++)q=k[a],c.push(d(q));return c}(),k=function(){var a,b,c;c=[];a=0;for(b=k.length;a<b;a++)g=k[a],g.isValid()&&
g>=h&&c.push(g);return c}().sort(function(a,b){return a.valueOf()-b.valueOf()}));if(a&&0===a.asMilliseconds()||k&&0===k.length)return[this];w=[];f=0;for(b=this._displayEnd;h<b&&(null==k||k[f]);)c=a?h.clone().add(a):k[f].clone(),c=d.min(b,c),h.isSame(c)||w.push(d.twix(h,c)),h=c,f+=1;!c.isSame(this._displayEnd)&&k&&w.push(d.twix(c,this._displayEnd));return w};h.prototype.divide=function(b){return this.split(this.length()/b,"ms").slice(0,+(b-1)+1||9E9)};h.prototype.isValid=function(){return this._start.isValid()&&
this._end.isValid()&&this._start<=this._displayEnd};h.prototype.equals=function(b){return b instanceof h&&this.allDay===b.allDay&&this._start.valueOf()===b._start.valueOf()&&this._end.valueOf()===b._end.valueOf()};h.prototype.toString=function(){return"{start: "+this._start.format()+", end: "+this._end.format()+", allDay: "+(this.allDay?"true":"false")+"}"};h.prototype.toArray=function(b,a,c){b=this.iterate(b,a,c);for(a=[];b.hasNext();)a.push(b.next());return a};h.prototype.simpleFormat=function(b,
a){var c;c={allDay:"(all day)",template:h.formatTemplate};h._extend(c,a||{});b=c.template(this._start.format(b),this._end.format(b));this.allDay&&c.allDay&&(b+=" "+c.allDay);return b};h.prototype.format=function(b){var a,c,f,g,e,q,l,k,t,u,r,p,n,y;if(this.isEmpty())return"";r={groupMeridiems:!0,spaceBeforeMeridiem:!0,showDayOfWeek:!1,hideTime:!1,hideYear:!1,implicitMinutes:!0,implicitDate:!1,implicitYear:!0,yearFormat:"YYYY",monthFormat:"MMM",weekdayFormat:"ddd",dayFormat:"D",meridiemFormat:"A",hourFormat:this._start.localeData()._longDateFormat.LT[0],
minuteFormat:"mm",allDay:"all day",explicitAllDay:!1,lastNightEndsAt:0,template:h.formatTemplate};h._extend(r,b||{});b=[];u=r.hourFormat&&"h"===r.hourFormat[0];c=this._start.localeData()._longDateFormat.L;a=c.indexOf("M")<c.indexOf("D");l=0<r.lastNightEndsAt&&!this.allDay&&this.end().startOf("d").valueOf()===this.start().add(1,"d").startOf("d").valueOf()&&12<this._start.hours()&&this._end.hours()<r.lastNightEndsAt;k=!r.hideDate&&(!r.implicitDate||this.start().startOf("d").valueOf()!==d().startOf("d").valueOf()||
!(this.isSame("d")||l));c=!(this.allDay||r.hideTime);this.allDay&&this.isSame("d")&&(r.implicitDate||r.explicitAllDay)&&b.push({name:"all day simple",fn:function(){return r.allDay},pre:" ",slot:0});!k||r.hideYear||r.implicitYear&&this._start.year()===d().year()&&this.isSame("y")||b.push({name:"year",fn:function(a){return a.format(r.yearFormat)},pre:a?", ":" ",slot:4});c&&k&&b.push({name:"month-date",fn:function(b){return b.format(a?r.monthFormat+" "+r.dayFormat:r.dayFormat+" "+r.monthFormat)},ignoreEnd:function(){return l},
pre:" ",slot:2});!c&&k&&b.push({name:"month",fn:function(a){return a.format(r.monthFormat)},pre:" ",slot:a?2:3});!c&&k&&b.push({name:"date",fn:function(a){return a.format(r.dayFormat)},pre:" ",slot:a?3:2});k&&r.showDayOfWeek&&b.push({name:"day of week",fn:function(a){return a.format(r.weekdayFormat)},pre:" ",slot:1});r.groupMeridiems&&u&&!this.allDay&&!r.hideTime&&b.push({name:"meridiem",fn:function(a){return a.format(r.meridiemFormat)},slot:6,pre:r.spaceBeforeMeridiem?" ":""});this.allDay||r.hideTime||
b.push({name:"time",fn:function(a){var b;b=0===a.minutes()&&r.implicitMinutes&&u?a.format(r.hourFormat):a.format(r.hourFormat+":"+r.minuteFormat);!r.groupMeridiems&&u&&(r.spaceBeforeMeridiem&&(b+=" "),b+=a.format(r.meridiemFormat));return b},slot:5,pre:", "});n=[];g=[];f=[];y=!0;p=function(a){return function(b){var c,d,h;h=b.fn(a._start);c=b.ignoreEnd&&b.ignoreEnd()?h:b.fn(a._end);d={format:b,value:function(){return h}};if(c===h&&y)return f.push(d);y&&(y=!1,f.push({format:{slot:b.slot,pre:""},value:function(){return r.template(e(n),
e(g,!0).trim())}}));n.push(d);return g.push({format:b,value:function(){return c}})}}(this);k=0;for(t=b.length;k<t;k++)c=b[k],p(c);q=!0;e=function(a,b){var c,f,g,d,e;f=!0;e="";g=a.sort(function(a,b){return a.format.slot-b.format.slot});a=0;for(c=g.length;a<c;a++)d=g[a],q||(e=f&&b?e+" ":e+d.format.pre),e+=d.value(),f=q=!1;return e};return e(f)};h.prototype._iterateHelper=function(b,a,c,f){return{next:function(){var g;return c()?(g=a.clone(),a.add(f,b),g):null},hasNext:c}};h.prototype._prepIterateInputs=
function(){var b,a,c,f,g,e;b=1<=arguments.length?l.call(arguments,0):[];if("number"===typeof b[0])return b;"string"===typeof b[0]&&(f=b.shift(),a=null!=(g=b.pop())?g:1,b.length&&(c=null!=(e=b[0])?e:!1));d.isDuration(b[0])&&(f="ms",a=b[0].as(f));return[a,f,c]};h.prototype._inner=function(b,a){var c,f,g;null==b&&(b="ms");null==a&&(a=1);g=this.start();f=this._displayEnd.clone();g>g.clone().startOf(b)&&g.startOf(b).add(a,b);f<f.clone().endOf(b)&&f.startOf(b);c=g.twix(f).asDuration(b).get(b);f.subtract(c%
a,b);return[g,f]};h.prototype._mutated=function(){this._start=this.allDay?this._oStart.clone().startOf("d"):this._oStart;this._lastMilli=this.allDay?this._oEnd.clone().endOf("d"):this._oEnd;this._end=this.allDay?this._oEnd.clone().startOf("d"):this._oEnd;return this._displayEnd=this.allDay?this._end.clone().add(1,"d"):this._end};return h}();k._extend(d.locale(),{_twix:k.defaults});k.formatTemplate=function(d,b){return d+" - "+b};d.twix=function(){return function(d,b,a){a.prototype=d.prototype;a=new a;
d=d.apply(a,b);return Object(d)===d?d:a}(k,arguments,function(){})};d.fn.twix=function(){return function(d,b,a){a.prototype=d.prototype;a=new a;d=d.apply(a,b);return Object(d)===d?d:a}(k,[this].concat(l.call(arguments)),function(){})};d.fn.forDuration=function(d,b){return new k(this,this.clone().add(d),b)};d.duration.fn&&(d.duration.fn.afterMoment=function(e,b){return new k(e,d(e).clone().add(this),b)},d.duration.fn.beforeMoment=function(e,b){return new k(d(e).clone().subtract(this),e,b)});return d.twixClass=
k};if(n)return module.exports=k(require("moment/moment"));this.moment?this.Twix=k(this.moment):"undefined"!==typeof moment&&null!==moment&&(this.Twix=k(moment));this.makeTwix=k}).call(this)},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge ./_ChartOptionFactory libs/echarts/light libs/echarts/dark".split(" "),function(n,e,k,l,d,p,h,b,a,c){return n([e,d],{baseClass:"jimu-dijit-chart",
templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",config:null,postCreate:function(){this.inherited(arguments);this._initChart()},updateConfig:function(a){if(!a)return!1;this.config=a;this._specialThemeByConfig(a);var b=this._chartFactory(a);this.chart.setOption(b,!0);this._settingByGrid(a,b);return!0},_settingByGrid:function(a,b){if("gauge"===a.type)return this._resetGaugePosition(a);var c=this.chartUtils.getAxisZeroPosition();a.layout=this.chartUtils.calcDefaultLayout(a);
this.chartUtils.isAxisChart(a)&&(b=this.chartUtils.settingGrid(b,a),b=this.chartUtils.settingDataZoom(b,a,c));b=this.chartUtils.settingChartLayout(b,a);this.chart.setOption(b,!1)},_resetGaugePosition:function(a){this._resetGaugeGrid(a);this._resetGaugeGraphic(a)},setConfig:function(a){if(!a)return!1;this.config=a;this._specialThemeByConfig(this.config);this.clear();var b=this._chartFactory(this.config);this.chart.setOption(b,!0);this._setAixsGrid(a,b);this._resetGaugePosition(a,b);return!0},destroy:function(){this._offEvents();
this.clear();this.inherited(arguments)},_chartFactory:function(a){return this.option=this.chartOptionFactory.produceOption(a)},bindEvents:function(a){this.chart&&a.events&&a.events.length&&(this._offEvents(),a.events.forEach(k.hitch(this,function(a){this.chart.on(a.name,a.callback)})))},_offEvents:function(){this.config.events&&this.config.events[0]&&this.config.events.forEach(k.hitch(this,function(a){this.chart.off(a.name)}))},getDataURL:function(){if(this.chart)return this.chart.getDataURL()},clear:function(){this.chart&&
this.chart.clear()},resize:function(a,b){this.chart&&(l.setStyle(this.domNode,{width:a||"100%",height:b||"100%"}),this.chart.resize(),this._resizeDataZoom(),this._resetGaugePosition(this.config))},_resizeDataZoom:function(){var a=this.option,b=this.config;if(a&&b){var c=this.chartUtils.getAxisZeroPosition(),a=this.chartUtils.settingDataZoom(a,b,c);this.chart.setOption(a)}},_setAixsGrid:function(a,b){this.chartUtils.isAxisChart(a)&&(b=this.chartUtils.settingGrid(b,a),this.chart.setOption(b,!1))},_resetGaugeGraphic:function(a){"gauge"===
a.type&&this.gauge.resetGraphic(a)},_resetGaugeGrid:function(a){"gauge"===a.type&&this.gauge.resetGrid(a)},_specialChartTheme:function(){this.chart&&(this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(a){return"number"===typeof a.value?(a=parseFloat(a.value).toFixed(2),this.chartUtils.tryLocaleNumber(a)):a.value}.bind(this)},lineStyle:{color:"#27727B",type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}},this.chart._theme.valueAxis||
(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}),this.chart._theme.valueAxis.axisLabel.formatter=function(a){return h.localizeNumber(a)})},_specialThemeByConfig:function(a){this._initChartTheme();a.color&&a.color[0]&&(this.chart._theme.color=a.color);this.chart._theme.tooltip.confine=!0;var b="percent"===a.stack;this.chart._theme.tooltip.formatter=function(a){return this.chartUtils.handleToolTip(a,null,!1,b)}.bind(this)},_initChartTheme:function(){this.chart&&
(this.chart._theme||(this.chart._theme={}),this.chart._theme.tooltip||(this.chart._theme.tooltip={}),this.chart._theme.valueAxis||(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}))},_initChart:function(){this.chart=p.init(this.domNode,this.config&&this.config.theme||"light");this.chartUtils=new b({chart:this.chart});this.gauge=new a({chart:this.chart,chartUtils:this.chartUtils});this.chartOptionFactory=new c({chart:this.chart,gauge:this.gauge,
chartUtils:this.chartUtils});this._specialChartTheme(this.config)}})})},"jimu/dijit/_chartUtils":function(){define("dojo/_base/declare jimu/utils esri/lang dojo/_base/lang libs/echarts/echarts dojo/i18n!dojo/cldr/nls/number".split(" "),function(n,e,k,l,d,p){var h={curved:{name:"",type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#5CB4CA"],[1,"#E5E5E5"]],shadowColor:"rgba(0, 0, 0, 0.5)",shadowBlur:0}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{distance:-52,
textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{opacity:.7},detail:{show:!0,offsetCenter:[0,"68%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500},vertical:{yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,
type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]},horizontal:{xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},
axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"top",offset:[20,0],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",
fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]}};return n([],{constructor:function(b){this.chart=b&&b.chart;this.horIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrlRTL="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+";
b=l.clone(h);this.curved=b.curved;this.vertical=b.vertical;this.horizontal=b.horizontal;this.unitDistance=23;this.defultGrid={top:10,bottom:10,left:10,right:10,containLabel:!0}},getAxisZeroPosition:function(){if(!this.chart)return!1;var b;try{b=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[0,0])}catch(g){}if(!b)return{};var a=b[0];b=b[1];var c=this.chart.getHeight(),f=this.chart.getWidth();return{left:a,right:f-a,top:b,bottom:c-b}},getTextWidth:function(b,a){if(!b&&0!==b)return 0;var c=(this.getTextWidth.canvas||
(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");c.font=a;return c.measureText(b).width},getHeightByFontSize:function(b){b=Math.round(b);if("number"!==typeof b||6>b||40<b)return 0;var a=0;b-=6;switch(!0){case 7>=b:a=1*b;break;case 8<=b&&11>=b:a=1*(b-1)+2;break;case 12<=b&&15>=b:a=1*(b-2)+4;break;case 16<=b&&19>=b:a=1*(b-3)+6;break;case 20<=b&&21>=b:a=1*(b-4)+8;break;case 22<=b&&23>=b:a=1*(b-5)+8;break;case 24<=b&&27>=b:a=1*(b-6)+10;break;case 28<=b&&31>=b:a=1*(b-7)+12;
break;case 32<=b&&34>=b:a=1*(b-8)+14}return 8+a},tryLocaleNumber:function(b){var a=b;if(k.isDefined(b)&&isFinite(b))try{var c=e.localizeNumber(b);"string"===typeof c&&(a=c)}catch(f){console.error(f)}return a+""},isStrictNaN:function(b){return"number"===typeof b&&isNaN(b)},localizeNumberForDigitSeparator:function(b,a){if("undefined"===typeof b||this.isStrictNaN(b))return b;var c=new RegExp("\\"+p.group,"g");return b.toString().match(c)?a?b:b.toString().replace(c,""):this._localizeNumberForDigitSeparator(b,
a)},_localizeNumberForDigitSeparator:function(b,a){b=e.localizeNumber(b);return!1===a?b.toString().replace(new RegExp("\\"+p.group,"g"),""):b},isAxisChart:function(b){return"column"===b.type||"bar"===b.type||"line"===b.type},isBaseChartType:function(b){return this.isAxisChart(b)||"pie"===b.type},_getTooltipDisplayValue:function(b,a){"number"===typeof Number(b)&&(b=a?e.convertNumberToPercentage(b):this.tryLocaleNumber(b));return b},generateToolTip:function(b,a,c,f,g){var d="",d=c?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':
'\x3cdiv class\x3d"tooltip-tr"\x3e';c="";b.color&&"auto"!==b.color&&(c='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+e.encodeHTML(b.color)+'"\x3e\x3c/div\x3e');d+=c;c="";"radar"!==b.seriesType&&this._isVaildValue(b.seriesName)?c=b.seriesName:this._isVaildValue(g)&&(c=g);d=""===c?d+("\x3cdiv\x3e"+c+"\x3c/div\x3e"):d+("\x3cdiv\x3e"+c+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");g="null";this._isNotZeroBoolean(a)?g=a:this._isVaildValue(b.value)&&(g=b.value);d+="\x3cdiv\x3e"+this._getTooltipDisplayValue(g,
f)+"\x3c/div\x3e";"pie"===b.seriesType&&(b=b.percent,b=this._isVaildValue(b)?b/100:0,d+='\x3cdiv class\x3d"space-left"\x3e('+e.convertNumberToPercentage(b)+")\x3c/div\x3e");return d+"\x3c/div\x3e"},handleToolTip:function(b,a,c,f,g){var d='\x3cdiv class\x3d"tooltip-div"\x3e';Array.isArray(b)||(b=[b]);this._isVaildValue(b[0].name)&&(d+='\x3cdiv class\x3d"tr"\x3e'+b[0].name+"\x3c/div\x3e");b.forEach(function(b){d="radar"!==b.seriesType?d+this.generateToolTip(b,a,c,f,g):d+this._handleRadarTooltip(b,c,
f,g)}.bind(this));return d+="\x3c/div\x3e"},_handleRadarTooltip:function(b,a,c,f){var g="";(b.value||[]).forEach(function(d,e){g+=this.generateToolTip(b,d,a,c,f[e])}.bind(this));return g},_isVaildValue:function(b){return"%00-"===encodeURI(b)?!1:this._isNotZeroBoolean(b)},_isNotZeroBoolean:function(b){return 0===b?!0:!!b},settingAdvanceOption:function(b,a){a.advanceOption&&("object"===typeof a.advanceOption?l.mixin(b,a.advanceOption):"function"===typeof a.advanceOption&&a.advanceOption(b));return b},
settingColor:function(b,a){a.color&&a.color[0]&&(b.color=a.color);return b},settingToolTip:function(b,a){var c=a.type;b.tooltip||(b.tooltip={});c={confine:!0,trigger:"radar"===c||"pie"===c?"item":"axis",axisPointer:"pie"!==c?{type:"line"===c?"cross":"shadow",snap:!0}:{type:""}};a=a.tooltip||c;b.tooltip.confine=a.confine?a.confine:c.confine;b.tooltip.trigger=a.trigger?a.trigger:c.trigger;b.tooltip.axisPointer=a.axisPointer?a.axisPointer:c.axisPointer;return b},settingDataZoom:function(b,a,c){return this.isAxisChart(a)&&
a.series&&a.series.length?a.dataZoom&&a.dataZoom.length?b=this._settingDataZoom(a,b,c):(b.dataZoom=[],b):b},_settingDataZoom:function(b,a,c){if(!this.chart)return a;var f=this.chart.getWidth(),g=b.series[0].data.length,d=b.series.length,g=b.stack?g:g*d;if(!g||!f)return a.dataZoom=k,a;var f="bar"!==b.type?window.isRTL?c.left:f-c.left-a.grid.right:c.top,e=20>f/g,h=f/(20*g),h=parseFloat(100*h,10).toFixed(3),h=100<h?100:h,h=0===h?.01:h,k=[],t="bar"===b.type?"yAxisIndex":"xAxisIndex",k=b.dataZoom.map(l.hitch(this,
function(a){a={type:a,start:0,show:e};a[t]=[0];a.end=h;a.showDataShadow=!1;a.realtime=!1;return a}));a.dataZoom=k;return a},mockChartDataWhenNoData:function(b){b&&Array.isArray(b.labels)&&0===b.labels.length&&b.labels.push("");b&&Array.isArray(b.series)&&0<b.series.length&&b.series.forEach(function(a){a&&Array.isArray(a.data)&&0===a.data.length&&a.data.push(0)});return b},settingDefaultGrid:function(b){b.grid=l.clone(this.defultGrid);return b},settingGrid:function(b,a){if(!this.isAxisChart(a))return b;
b.grid.containLabel=a.yAxis&&a.yAxis.show;var c=a.layout;if(!c||!c.length)return b;var f=0,g=0,d=0,e=0,h=1;c.forEach(function(a){a=a.layout&&a.layout.position;if("xAixsName"===name||"yAixsName"===name)h=.7;"t"===a?f+=h:"b"===a?g+=h:"l"===a?d+=h:"r"===a&&(e+=h)}.bind(this));var k=l.clone(this.defultGrid),c=k.top||0,t=k.bottom||0,u=k.left||0,k=k.right||0,c=c+this.unitDistance*f,t=t+this.unitDistance*g,u=u+this.unitDistance*d,k=k+this.unitDistance*e;a.yAxis&&!a.yAxis.show&&(t+=this.unitDistance);b.grid.top=
c;b.grid.bottom=t;b.grid.left=u;b.grid.right=k;b=this._settingxAxisNameGap(b,a);return b=this._settingGridForMarkName(b,a)},_settingGridForMarkName:function(b,a){var c=a.markLine,f=a.markArea,g=[],d=[];c&&c.data&&c.data.length&&c.data.forEach(function(a){this._hasEndPosName(a)&&g.push(a.name+"");this._hasStartPosName(a)&&d.push(a.name+"")}.bind(this));f&&f.data&&f.data.length&&f.data.forEach(function(b){b=b[0];this._hasOutRightAxisName(a.type,b)&&g.push(b.name+"");this._hasOutLeftAxisName(a.type,
b)&&d.push(b.name+"")}.bind(this));if(!g.length&&!d.length)return b;if("bar"===a.type)return b.grid.top+=15,b;c=this._getyAxisLabelWidth(a);f=this._getMaxLengthString(g);f=this.getTextWidth(f,"normal 12px sans-serif");window.isRTL?b.grid.left+=f:b.grid.right+=f;f=this._getMaxLengthString(d);f=this.getTextWidth(f,"normal 12px sans-serif");f-=c;if(0>=f)return b;f+=10;window.isRTL?b.grid.right=f:b.grid.left=f;return b},_getyAxisLabelWidth:function(b){var a=b&&b.yAxis;return a&&a.show?(b=this._getMaxData(b))||
0===b?this.getTextWidth(b,"normal "+(a&&a.textStyle&&a.textStyle.fontSize||12)+"px sans-serif"):0:0},_getMaxData:function(b){if((b=b.series)&&b.length)return b=b.map(function(a){if((a=a.data)&&a.length)return a.map(function(a){var b;"number"===typeof a?b=a:a&&"undefined"!==typeof a.value&&(b=a.value);return b=parseInt(b,10)})}).map(function(a){if(a.length)return Math.max.apply(Math,a)}),b.length&&Math.max.apply(Math,b)},_getMaxLengthString:function(b){return b.sort(function(a,b){a=this.getTextWidth(a);
b=this.getTextWidth(b);return b-a}.bind(this))[0]},_hasOutRightAxisName:function(b,a){var c=a.name||0===a.name;a=a.label;var f=window.isRTL?"eft":"ight";b=a&&a.position&&-1<a.position.indexOf("bar"===b?"op":f);a=a&&a.position&&-1<a.position.indexOf("inside");return c&&b&&!a},_hasOutLeftAxisName:function(b,a){var c=a.name||0===a.name;a=a.label;var f=window.isRTL?"ight":"eft";b=a&&a.position&&-1<a.position.indexOf("bar"===b?"op":f);a=a&&a.position&&-1<a.position.indexOf("inside");return c&&b&&!a},_hasEndPosName:function(b){var a=
b.label,a=!a||!a.position||"end"===a.position;return(b.name||0===b.name)&&a},_hasStartPosName:function(b){var a=b.label,a=!a||!a.position||"start"===a.position;return(b.name||0===b.name)&&a},_settingxAxisNameGap:function(b,a){if(!this.isAxisChart(a)||!b.xAxis)return b;a=this.getHeightByFontSize(a.xAxis&&a.xAxis.textStyle&&a.xAxis.textStyle.fontSize||12);b.xAxis.nameGap=10+a;return b},calcDefaultLayout:function(b){if(this.isBaseChartType(b)){var a=b.legend,c=b.xAxis,f=null;b=b.type;"pie"!==b&&(f="bar"!==
b?{name:"dataZoom",layout:{position:"t",inner:!1}}:{name:"dataZoom",layout:{position:window.isRTL?"l":"r",inner:!1}});b=null;a&&a.show&&(b={name:"legend",layout:{position:"b",inner:!1}});a=null;c&&c.show&&"undefined"!==typeof c.name&&(a={name:"xAxisName",layout:{position:"b",inner:!1}},b&&(a.layout.inner=!0));c=[];b&&c.push(b);f&&c.push(f);a&&c.push(a);return c.length&&c}},settingRenderOption:function(b,a){if("curved"===a.shape)return b.animationThreshold=99999999,b.hoverLayerThreshold=99999,b.progressiveThreshold=
99999,b;b.hoverLayerThreshold=500;b.progressiveThreshold=500;b.progressive=100;b.animationThreshold=500;return b},settingBackgroundColor:function(b,a){a.backgroundColor&&(b.backgroundColor=a.backgroundColor);return b},settingAxisChartAxis:function(b,a){var c=a.xAxis,f=a.yAxis,g={nameLocation:"center"},d={nameLocation:"center"};"column"===a.type||"line"===a.type&&a.labels?(g.data=a.labels,g.type="category",d.type="value"):"bar"===a.type&&a.labels&&(d.data=a.labels,d.type="category",g.type="value");
if(c){g.name=c.name;g.show=!!c.show;g.axisLabel||(g.axisLabel={});c.textStyle&&(g.axisLabel=c.textStyle);c.nameTextStyle&&(g.nameTextStyle=c.nameTextStyle);var e=c.format;e&&("int"===e.type?g.minInterval=1:"float"===e.type&&(g.minInterval=0),"undefined"!==typeof e.digitSeparator&&(g.axisLabel.formatter=function(a){return this.localizeNumberForDigitSeparator(a,e.digitSeparator)}.bind(this)))}if(f){d.show=!!f.show;f.textStyle&&(d.axisLabel=f.textStyle);var h=f.format;h&&("int"===h.type?d.minInterval=
1:"float"===h.type&&(d.minInterval=0),"undefined"!==typeof h.digitSeparator&&(d.axisLabel.formatter=function(a){return this.localizeNumberForDigitSeparator(a,h.digitSeparator)}.bind(this)))}window.isRTL&&(g.inverse=!0,d.position="right");b.xAxis=g;b.yAxis=d;return b},settingRadar:function(b,a){if("radar"!==a.type)return b;b.radar={nameGap:6,radius:"70%"};b.radar.axisLabel={show:!0,formatter:function(){}};a.radarShape&&(b.radar.shape=a.radarShape);a.indicator?(this._handleRadarIndicator(a),b.radar.indicator=
a.indicator):console.error("No radar indicator");return b},_handleRadarIndicator:function(b){var a=b.series[0].data,c=[];b.indicator.forEach(function(b,g){if("undefined"!==typeof b.max)return b;c=a.map(function(a){c.push(a.value[g])});var f=Math.max.apply(Math,c);b.max=f})},settingArea:function(b,a){if("line"!==a.type||!a.area)return b;b.series=b.series.map(function(a){a.areaStyle||(a.areaStyle={});"undefined"===typeof a.areaStyle.opacity&&(a.areaStyle.opacity=.4);a.sthisoth=!0;a.smoothMonotone="x";
return a});return b},_mockNegativeValue:function(b){return b&&b[0]&&b[0].data?b.map(function(a){a.data=a.data.map(function(a,b){var c=0===b%2;a&&"undefined"!==typeof a.value?(b=a.value,b=Number(b),a.value=c?-b:b):(b=Number(a),a=-(c?-b:b));return a});return a}):b},hasNegativeValue:function(b){if((b=b.series)&&b[0]&&b[0].data)return b.some(function(a){return a.data.some(function(a){a=a&&"undefined"!==typeof a.value?a.value:a;a=Number(a);return"number"===typeof a&&0>a})})},allNegativeValue:function(b){return(b=
b.series)&&b[0]&&b[0].data?b.every(function(a){return a.data.every(function(a){a=a&&a.value?a.value:a;a=Number(a);return"number"===typeof a&&0>a})}):!1},settingStack:function(b,a){a=this._stackForPercent(a);if("percent"===a.stack){var c=this.hasNegativeValue(a),f=this.allNegativeValue(a),g=0,d=1;c&&(g=-1,f&&(d=0));"bar"===a.type?(b.xAxis.max=d,b.xAxis.min=g):(b.yAxis.max=d,b.yAxis.min=g)}a.stack&&(b.series=b.series.map(function(a){a.stack="stack";return a}));return b},_stackForPercent:function(b){if("percent"!==
b.stack)return b;var a=[];b.series.forEach(function(b){l.clone(b.data).forEach(function(b,c){a[c]||(a[c]=[]);(b=b&&"undefined"!==typeof b.value?b.value:b)||(b=0);a[c].push(b)})});var c=[];a.forEach(function(a,b){c[b]||(c[b]=0);a.forEach(function(a){c[b]+=Math.abs(a)})});var f=a.map(function(a,b){return a.map(function(a){return 0===c[b]?null:0<=a?Math.abs(a)/c[b]:-Math.abs(a)/c[b]})});b.series=b.series.map(function(a,b){var c=l.clone(a.data),c=c.map(function(a,c){if(!a)return a;"undefined"!==typeof a.value?
a.value=f[c][b]:a=f[c][b];return a});a.data=c;return a});return b},settingLegend:function(b,a){var c=a.legend;if(!c)return b.legend={show:!1},b;var f={show:c.show,type:"scroll",itemHeight:11,orient:"horizontal",pageButtonPosition:"end",pageTextStyle:{color:"#939393"}};c.textStyle&&(f.textStyle=c.textStyle);f.formatter=function(a){a=a||"";return 25<a.length?d.format.truncateText(a,140,null,"\u2026"):a};f.tooltip={show:!0,confine:!1,formatter:function(a){a=a&&a.name||"";if(!(25>=a.length))return a}};
b.legend=f;return b=this._handleLegendRTL(b,a)},_handleLegendRTL:function(b,a){if(!a.legend)return b;a={};window.isRTL?(a.x="right",a.pageButtonPosition="start"):(a.x="left",a.pageButtonPosition="end");b.legend=l.mixin(b.legend,a);return b},settingScale:function(b,a){if(!a.scale)return b;if("bar"===a.type)b.xAxis.scale=!0;else if("line"===a.type||"column"===a.type)b.yAxis.scale=!0;return b},pieChartAvoidLegendLabelOverLap:function(b,a){if("pie"!==a.type)return b;var c=a.dataLabel&&a.dataLabel.show?
.75:.85;a.legend&&a.legend.show&&(c-=.12);b.series[0].radius[1]=100*c+"%";return b},settingChartLayout:function(b,a){if(!this.isBaseChartType(a))return b;(a=a.layout)&&a.length&&a.forEach(function(a){this._assigneeLayout(b,a)}.bind(this));return b},avoidAdjoiningColorSameForPie:function(b,a){if("pie"!==a.type||!b.color||2>=b.color.length)return b;b.series&&b.series[0]&&b.series.forEach(l.hitch(this,function(a){var c=a.data.length;0===(c-1)%b.color.length&&(a=a.data[c-1],a.itemStyle||(a.itemStyle=
{}),a.itemStyle.color||(a.itemStyle.color=b.color[1]))}));return b},_assigneeLayout:function(b,a){var c=a.name;if("xAxisName"!==c&&"yAxisName"!==c){var f=a.layout;a=this._getOperateObjByProperty(b,c);if(!a)return b;var g=this._getSubPosition(f&&f.subPosition),d=f&&f.position,f=f&&f.inner,e={};"l"===d?e.left=f?this.unitDistance+this.defultGrid.left-5:this.defultGrid.left-5:"r"===d?e.right=f?this.unitDistance+this.defultGrid.right-5:this.defultGrid.right-5:"t"===d?e.top=f?this.defultGrid.top+this.unitDistance-
5:this.defultGrid.top-5:"b"===d&&(e.bottom=f?this.unitDistance+this.defultGrid.bottom-5:this.defultGrid.bottom-5);l.mixin(a,e);l.mixin(a,g);this._specialLegend(a,c,d);this._specialSliderDataZoom(a,c,d);return b}},_getSubPosition:function(b){if("l"===b)return{left:this.defultGrid.left-5,right:"auto"};if("r"===b)return{right:this.defultGrid.right-5,left:"auto"};if("t"===b)return{top:this.defultGrid.top-5,bottom:"auto"};if("b"===b)return{bottom:this.defultGrid.bottom-5,top:"auto"}},_specialLegend:function(b,
a,c){"legend"===a&&(b.orient="l"===c||"r"===c?"vertical":"horizontal")},_specialSliderDataZoom:function(b,a,c){"dataZoom"===a&&("l"===c||"r"===c?(b.orient="vertical",b.width=15):(b.orient="horizontal",b.height=15))},_getOperateObjByProperty:function(b,a){if("dataZoom"===a)return this._getSliderDataZoom(b);if("legend"===a)return b.legend},_getSliderDataZoom:function(b){var a=null;(b=b.dataZoom)&&b.length&&b.some(function(b){return"slider"===b.type?(a=b,!0):!1});return a},settingAxisSeries:function(b,
a){b=this._setTypeToSeries(b,a);b.series=a.series;return b},settingMarks:function(b,a){b=this.settingMarkLine(b,a);return b=this.settingMarkArea(b,a)},settingMarkLine:function(b,a){(a=a.markLine)&&a.data&&(a.silent=!0,a.data.forEach(function(a){a.label||(a.label={show:!1,position:"end"});"undefined"!==typeof a.name&&(a.label.show=!0,a.label.formatter=a.name)}),b.series[0].markLine=l.clone(a));return b},settingMarkArea:function(b,a){a.markArea&&(this._handleMarkAreaRTL(a.markArea),a.markArea.silent=
!0,b.series[0].markArea=a.markArea);return b},_handleMarkAreaRTL:function(b){window.isRTL&&b&&b.data&&b.data.length&&b.data.forEach(function(a){var b=(a=a&&a[0]&&a[0].label)&&a.position;b&&("left"===b?b="right":"right"===b?b="left":"insideLeft"===b?b="insideRight":"insideRight"===b&&(b="insideLeft"),a.position=b)})},_settingSeriesDataLabel:function(b,a){a=a.dataLabel;if(!a)return b;var c={};c.show=!!a.show;"undefined"!==typeof a.textStyle&&(c.textStyle=a.textStyle);b.series.forEach(function(a){a.label=
c});return b},settingRadarSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series.map(l.hitch(this,function(b){b.data=this._handleSeriesDataForPieLikeType(b,a);return b=this._settingRaderSerie(b,a)}));return b},_settingRaderSerie:function(b,a){if("radar"!==b.type)return b;var c=a.indicator.map(function(a){return a.name});b.tooltip={};b.tooltip.formatter=function(a){return this.handleToolTip(a,null,!1,!1,c)};return b},settingFunnelSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=
a.series.map(l.hitch(this,function(b){b.data=this._handleSeriesDataForPieLikeType(b,a);return b=this._settingFunnelSerie(b,a)}));return b},_settingFunnelSerie:function(b,a){if("funnel"!==b.type)return b;b.minSize="0%";b.maxSize="100%";b.min=a.min.value;b.max=a.max.value;b.sort=a.funnelSort||"descending";return b},settingPieSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series.map(l.hitch(this,function(b){b.data=this._handleSeriesDataForPieLikeType(b,a);return b=this._settingPieSerie(b,
a)}));return b},_settingPieSerie:function(b,a){if("pie"!==b.type)return b;var c=a.dataLabel&&a.dataLabel.show;b.selectedMode="single";b.selectedOffset=10;b.hoverOffset=5;b.radius=[0,"70%"];b.labelLine={show:!0,length:5,length2:5};b.labelLine.show="undefined"===typeof a.labelLine?!0:a.labelLine;c||(b.labelLine.show=!1);"number"===typeof a.innerRadius&&(0>a.innerRadius&&(a.innerRadius=0),60<a.innerRadius&&(a.innerRadius=60),b.radius[0]=a.innerRadius+"%");"rose"===a.pieMode&&(b.roseType=a.roseType||
"radius");return b=this._absoluteValueForPieChart(b)},_absoluteValueForPieChart:function(b){if(!b||!b.data||!b.data[0])return b;b.data=b.data.map(function(a){"number"===typeof a?a=Math.abs(a):"object"===typeof a&&"number"===typeof a.value&&(a.value=Math.abs(a.value));return a});return b},_handleSeriesDataForPieLikeType:function(b,a){return b.data.map(l.hitch(this,function(b,f){var c={};b||"number"===typeof b?(c.value="undefined"!==typeof b.value?b.value:b,b.itemStyle&&(c.itemStyle||(c.itemStyle={}),
c.itemStyle=l.mixin(c.itemStyle,b.itemStyle))):c.value=b;c.name=a.labels[f]||"";return c}))},_setTypeToSeries:function(b,a){var c=a.series;if(!c)return b;c.forEach(function(b){b.type||(b.type=a.type);b.type="column"===a.type?"bar":a.type});return b},splitAxisStackColumn:function(b,a){var c=b.series;if(!c||!c.length)return b;var f;c.some(function(b){b=b.data;if(!b||!b.length)return!0;b.some(function(b){if(b&&b.itemStyle&&"undefined"!==typeof b.itemStyle.color&&"line"!==a.type)return f=a.stack?"stack":
"single",!0;f=!1})});var g=0;"single"===f?g=.1:"stack"===f&&(g=1);var d="";"stack"===f&&(d="#fff",a.backgroundColor&&"transparent"!==a.backgroundColor&&(d=a.backgroundColor));b.series=b.series.map(function(a){if("bar"===a.type||"pie"===a.type)a.itemStyle||(a.itemStyle={}),a.emphasis||(a.emphasis={}),a.itemStyle.borderWidth=g,a.emphasis.borderWidth=g,d?(a.itemStyle.borderColor=d,a.emphasis.borderColor=d):(a.itemStyle.borderColor="transparent",a.emphasis.borderColor="transparent");return a});return b},
preProcessConfig:function(b,a){a.min=a.min||{value:0,format:{digitSeparator:!0}};a.max=a.max||{value:1E3,format:{digitSeparator:!0}};return b},settingLabelColor:function(b,a){var c="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(c=a.gaugeOption.labelColor);"curved"===a.shape?b.series[0].axisLabel.textStyle.color=c:"horizontal"===a.shape?b.xAxis.axisLabel.textStyle.color=c:"vertical"===a.shape&&(b.yAxis.axisLabel.textStyle.color=c);return b},settingValueStyle:function(b,a){var c=a.gaugeOption&&a.gaugeOption.valueStyle,
f=c&&c.textStyle,c=c&&c.formatter;f&&l.mixin("curved"===a.shape?b.series[0].detail.textStyle:b.series[1].data[0].label.textStyle,f);c&&("curved"===a.shape?b.series[0].detail.formatter=c:b.series[1].data[0].label.formatter=c);return b},settingGaugeColumnColor:function(b,a){var c=a.gaugeOption&&a.gaugeOption.bgColor;a=a.gaugeOption&&a.gaugeOption.columnColor;c&&(b.series[0].itemStyle.color=c);a&&(b.series[1].data[0].itemStyle.color=a);return b},initHorizontalOption:function(b){l.mixin(b,this.horizontal);
return b},setHorizontalGrid:function(b){b.grid={top:"middle",height:90,left:"10%",right:"10%",containLabel:!0};return b},settingHorizontalAxis:function(b,a){b.xAxis.max=a.max.value;b.xAxis.min=a.min.value;b.xAxis.scale=!0;return b},settingHorizontalSeries:function(b,a){var c=b.series;if(!c||!c.length)return b;var f=c[1];c[0].data[0]=a.max.value;b=this._handleValueDisplayForColumnGauge(b,a);f.data[0].name=a.labels&&a.labels[0]||"";f.name=a.series[0].name||"";return b},settingHorizontalGaugeRTL:function(b){if(!window.isRTL)return b;
b.series[1].label.offset=[-20,0];b.xAxis.inverse=!0;b.yAxis.position="right";return b},initVerticalOption:function(b){l.mixin(b,this.vertical);return b},setVerticalGrid:function(b){b.grid={left:"middle",width:60,top:"10%",bottom:"10%",containLabel:!0};b.grid.left=this._getGridLeftOfVerticalGauge();return b},settingVerticalAxis:function(b,a){b.yAxis.max=a.max.value;b.yAxis.min=a.min.value;return b},settingVerticalSeries:function(b,a){var c=b.series;if(!c||!c.length)return b;var f=c[1];c[0].data[0]=
a.max.value;b=this._handleValueDisplayForColumnGauge(b,a);f.data[0].name=a.labels&&a.labels[0]||"";f.name=a.series[0].name||"";return b},settingVerticalGaugeRTL:function(b,a){if(!window.isRTL)return b;var c=(a.series[0].data[0]+"").length-1;a.gaugeOption&&a.gaugeOption.valueStyle&&"undefined"!==typeof a.gaugeOption.valueStyle.decimalPlaces&&(c+=a.gaugeOption.valueStyle.decimalPlaces);b.series[1].label.offset=[-17-9*c,-15];b.xAxis.inverse=!0;b.yAxis.position="right";return b},initCurvedOption:function(b){b.series=
[this.curved];return b},settingCurvedTooltip:function(b){b.tooltip.formatter=function(a){return this.handleToolTip(a,null,!1)}.bind(this);return b},settingCurvedSeries:function(b,a){var c=b.series&&b.series[0];if(!c)return b;var f=a.max.value,g=a.min.value;c.min=g;c.max=f;var d=a.series&&a.series[0]&&a.series[0].data&&a.series[0].data[0],d=d||0;c.data[0].value=d;f=d<=g?0:d>=f?1:parseFloat((d-g)/(f-g)).toFixed(2);c.axisLine.lineStyle.color[0][0]=f;if(f=a.labels&&a.labels[0])c.data[0].name=f;c.name=
a.series[0]&&a.series[0].name||"";c.axisLine.lineStyle.width=30;b.series=[c];return b},settingCurvedGaugeColor:function(b,a){var c=b.series&&b.series[0];a.gaugeOption&&(a.gaugeOption.bgColor&&(c.axisLine.lineStyle.color[1][1]=a.gaugeOption.bgColor),a.gaugeOption.columnColor&&(c.axisLine.lineStyle.color[0][1]=a.gaugeOption.columnColor,c.itemStyle.color=a.gaugeOption.columnColor));return b},settingCurvedTargets:function(b,a){if(!b.series)return b;b.series[0].splitNumber=1E3;b.series[0].axisTick.splitNumber=
1;b.series[0].axisTick.show=!1;var c=this._getTargetValues(a);return b=this._showTargetsForCurved(b,a,c)},createTargetGraphic:function(b){var a=b.shape,c=[];if("vertical"!==a&&"horizontal"!==a)return c;var f="#000";b.gaugeOption&&b.gaugeOption.labelColor&&(f=b.gaugeOption.labelColor);var g,d=b.min.value,e=b.max.value;b=this._getTargetValues(b);var h=b.range;b.values.forEach(function(b){if(!(b.value>e||b.value<d)){g=this._calcGraphicPosition(b.value,a);var h=g.top,m=g.textLeft,k=this._createGraphic(g.graphicLeft,
h,b,f,"image",a);b=this._createGraphic(m,h,b,f,"text",a);c.push(k);c.push(b)}}.bind(this));h.forEach(function(b){b.value>e||b.value<d||(g=this._calcGraphicPosition(b.value,a),b=this._createGraphic(g.textLeft,g.top,b,f,"text",a),c.push(b))}.bind(this));return c},_calcGraphicPosition:function(b,a){var c,f,g;"vertical"===a?(c=this.chart.convertToPixel({xAxisIndex:0},0),c=parseFloat(c,10).toFixed(2),c=Number(c),window.isRTL&&(c+=40),f=c-26,g=window.isRTL?f+11:f-11-6*(b.toString().length-1),c=this._getyAxisValueTop(b),
c-=2):"horizontal"===a&&(c=this.chart.convertToPixel({yAxisIndex:0},0),c=parseInt(c,10),c=Number(c)+16,f=this._getxAxisValueLeft(b),b=6*(b.toString().length-2),g=f,0<b&&(g=f-b));return{top:c,graphicLeft:f,textLeft:g}},_createGraphic:function(b,a,c,f,g,d){var h=this.horIconUrl;"vertical"===d&&(h=window.isRTL?this.verIconUrlRTL:this.verIconUrl);var m=null;"image"===g?m={z:10,type:"image",$action:"merge",id:"wab_gid_image-"+e.getRandomString(),left:b,style:{image:h,width:10,height:10},silent:!0,top:a}:
"text"===g&&(c=this.localizeNumberForDigitSeparator(c.value,c.format&&c.format.digitSeparator),m={z:10,type:"text",$action:"merge",id:"wab_gid_text-"+e.getRandomString(),left:b,style:{text:c,fill:f,font:"normal 11px sans-serif"},silent:!0});"text"===g&&(m.top="vertical"===d?a-2:a+11);return m},updateGridForVerticalGauge:function(b){if("gauge"===b.type&&"vertical"===b.shape)return{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_getTargetValues:function(b){var a=b.gaugeOption&&
b.gaugeOption.showTargetValueLabel,c=b.gaugeOption&&b.gaugeOption.showDataRangeLabel,f=b.gaugeOption&&b.gaugeOption.targetValue,g=b.min;b=b.max;var d={values:[],range:[]};f&&a&&f.forEach(function(a){d.values.push(a)});c&&(0>d.values.indexOf(g.value)&&(d.range[0]=g),0>d.values.indexOf(b.value)&&(d.range[1]=b));return d},_showTargetsForCurved:function(b,a,c){var f=c.values.concat(c.range),g=(a.max.value-a.min.value)/1E3;f.sort(function(a,b){return a.value-b.value});b.series[0].axisLabel.formatter=l.hitch(this,
function(a){var b,c;f.forEach(function(f){"undefined"===typeof b&&f.value>=a&&f.value<a+g&&(b=f.value,c=f.format)});"number"===typeof b&&(b=this.localizeNumberForDigitSeparator(b,c&&c.digitSeparator));return b});return b},_handleValueDisplayForColumnGauge:function(b,a){var c=a.min.value,f=a.max.value,g;g=a.series[0].data[0];a=g>=f?f:g<=c?c:g;b.tooltip.formatter=function(a){return this.handleToolTip(a,g,!1)}.bind(this);b.series[1].data[0].value=a;return b},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/
2-30},_getxAxisValueLeft:function(b){b=this.chart.convertToPixel({xAxisIndex:0},b);return parseFloat(b,10)-4},_getyAxisValueTop:function(b){b=this.chart.convertToPixel({yAxisIndex:0},b);return parseFloat(b,10)}})})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare"],function(n){return n([],{constructor:function(e){this.chart=e.chart;this.chartUtils=e.chartUtils},produceOption:function(e,k){e=this.chartUtils.preProcessConfig(e,k);"curved"===k.shape?e=this.setCurvedGaugeOption(e,k):"vertical"===
k.shape?e=this.setVerticalGaugeOption(e,k):"horizontal"===k.shape?e=this.setHorizontalGaugeOption(e,k):console.error("invaild gauge shape");e=this.chartUtils.settingLabelColor(e,k);return e=this.chartUtils.settingValueStyle(e,k)},setCurvedGaugeOption:function(e,k){e=this.chartUtils.initCurvedOption(e);e=this.chartUtils.settingCurvedSeries(e,k);e=this.chartUtils.settingCurvedTooltip(e,k);e=this.chartUtils.settingCurvedGaugeColor(e,k);return e=this.chartUtils.settingCurvedTargets(e,k)},setVerticalGaugeOption:function(e,
k){e=this.chartUtils.initVerticalOption(e,this.vertical);e=this.chartUtils.setVerticalGrid(e);e=this.chartUtils.settingVerticalAxis(e,k);e=this.chartUtils.settingVerticalSeries(e,k);e=this.chartUtils.settingGaugeColumnColor(e,k);return e=this.chartUtils.settingVerticalGaugeRTL(e,k)},setHorizontalGaugeOption:function(e,k){e=this.chartUtils.initHorizontalOption(e,this.horizontal);e=this.chartUtils.setHorizontalGrid(e);e=this.chartUtils.settingHorizontalAxis(e,k);e=this.chartUtils.settingHorizontalSeries(e,
k);e=this.chartUtils.settingGaugeColumnColor(e,k);return e=this.chartUtils.settingHorizontalGaugeRTL(e,k)},resetGraphic:function(e){if("horizontal"===e.shape||"vertical"===e.shape)e=this.chartUtils.createTargetGraphic(e),this.clearGraphic(),this.chart.setOption({graphic:e}),this.cacheGraphic=null,this.cacheGraphic=e},clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(e){e.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},resetGrid:function(e){("horizontal"===
e.shape||"vertical"===e.shape)&&(e=this.chartUtils.updateGridForVerticalGauge(e))&&this.chart.setOption({grid:e})}})})},"jimu/dijit/_ChartOptionFactory":function(){define(["dojo/_base/declare"],function(n){return n([],{constructor:function(e){this.chart=e.chart;this.gauge=e.gauge;this.chartUtils=e.chartUtils},produceOption:function(e){if(e&&e.type){var k=e.type,l={},l=this.setCommonOption(l,e);this.chartUtils.isAxisChart(e)?l=this.setAxisChartOption(l,e):"pie"===k?l=this.setPieChartOption(l,e):"funnel"===
k?l=this.setFunnelChartOption(l,e):"radar"===k?l=this.setRadarChartOption(l,e):e.shape&&(l=this.setGaugeChartOption(l,e));return l=this.chartUtils.settingAdvanceOption(l,e)}},setPieChartOption:function(e,k){e=this.chartUtils.settingPieSeries(e,k);e=this.chartUtils._settingSeriesDataLabel(e,k);e=this.chartUtils.pieChartAvoidLegendLabelOverLap(e,k);return e=this.chartUtils.avoidAdjoiningColorSameForPie(e,k)},setGaugeChartOption:function(e,k){return e=this.gauge.produceOption(e,k)},setFunnelChartOption:function(e,
k){return e=this.chartUtils.settingFunnelSeries(e,k)},setRadarChartOption:function(e,k){e=this.chartUtils.settingRadar(e,k);return e=this.chartUtils.settingRadarSeries(e,k)},setAxisChartOption:function(e,k){e=this.chartUtils.settingDefaultGrid(e,k);e=this.chartUtils.settingAxisChartAxis(e,k);e=this.chartUtils.settingAxisSeries(e,k);e=this.chartUtils.settingMarks(e,k);e=this.chartUtils._settingSeriesDataLabel(e,k);e=this.chartUtils.splitAxisStackColumn(e,k);e=this.chartUtils.settingStack(e,k);e=this.chartUtils.settingArea(e,
k);return e=this.chartUtils.settingScale(e,k)},setCommonOption:function(e,k){this.chart._theme||(this.chart._theme={});e=this.chartUtils.settingRenderOption(e,k);e=this.chartUtils.settingBackgroundColor(e,k);e=this.chartUtils.settingColor(e,k);e=this.chartUtils.settingToolTip(e,k);return e=this.chartUtils.settingLegend(e,k)}})})},"libs/echarts/light":function(){(function(n,e){"function"===typeof define&&define.amd?define(["exports","./echarts"],e):"object"===typeof exports&&"string"!==typeof exports.nodeName?
e(exports,require("./echarts")):e({},n.echarts)})(this,function(n,e){e?e.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},
symbolSize:"6",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,
lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},
dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(n,e){"function"===typeof define&&define.amd?define(["exports","./echarts"],e):"object"===typeof exports&&"string"!==typeof exports.nodeName?e(exports,require("./echarts")):
e({},n.echarts)})(this,function(n,e){e?e.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},
emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,
lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleColor:"#BDBDBD",handleSize:"100%",
borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"widgets/Infographic/utils":function(){define("dojo/on jimu/utils dojo/_base/lang dojo/_base/Color dojo/_base/array dojo/Deferred esri/layers/FeatureLayer".split(" "),function(n,e,k,l,d,p,h){var b={stringFieldType:"esriFieldTypeString",oidFieldType:"esriFieldTypeOID",dateFieldType:"esriFieldTypeDate",numberFieldTypes:["esriFieldTypeSmallInteger","esriFieldTypeInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"],getClientFeaturesFromMap:function(a,b,f,g){return e.getClientFeaturesFromMap(a,b,f,g)},listenClientFeaturesFromMap:function(a,b,f,g,e){var c=[];f&&(c.push(n(b,"selection-complete",k.hitch(this,function(){e(this.getClientFeaturesFromMap(a,b,f,g))}))),c.push(n(b,"selection-clear",k.hitch(this,function(){e(this.getClientFeaturesFromMap(a,b,f,g))}))));g&&c.push(n(a,"extent-change",k.hitch(this,function(){0<b.graphics.length&&e(this.getClientFeaturesFromMap(a,
b,f,g))})));c.push(n(b,"update-end",k.hitch(this,function(){e(this.getClientFeaturesFromMap(a,b,f,g))})));e(this.getClientFeaturesFromMap(a,b,f,g));return{remove:function(){c&&d.forEach(c,k.hitch(this,function(a){a.remove()}));c=null}}},getVaildIndicator:function(a,b,f){var c=[];b.map(k.hitch(this,function(b){(b=this._handleOperator(b,a,f))&&c.push(b)}));if(0<c.length)return c[c.length-1]},filterFeaturesByDataSourceSetting:function(a,b,f){if(0===a.length)return[];if(b.useSelection){var c=a[0].getLayer();
if(c){var h=c.getSelectedFeatures();0<h.length&&(a=d.filter(a,function(a){return-1<h.indexOf(a)}))}}b.filterByExtent&&(a=e.filterFeaturesByExtent(f.extent,a));return a},_handleOperator:function(a,b,f){function c(a){d={};a.valueColor&&(d.valueColor=a.valueColor);a.gaugeColor&&(d.gaugeColor=a.gaugeColor);a.iconInfo&&(d.iconInfo=a.iconInfo)}var d,e=a.value.map(k.hitch(this,function(b){return a.isRatio?b/100*f:b}));"greater"===a.operator&&b>e[0]?c(a):"smaller"===a.operator&&b<e[0]?c(a):"between"===a.operator&&
b>e[0]&&b<e[1]?c(a):"equal"===a.operator&&b===e[0]?c(a):"notEqual"===a.operator&&b!==e[0]&&c(a);return d},isInteger:function(a){return"number"===typeof a&&0===a%1},_getFieldNamesByFields:function(a){if(a&&a.length)return a.map(function(a){return this._getFieldNameByFieldInfo(a)}.bind(this))},_getFieldNameByFieldInfo:function(a){return a&&a.name},isBaseAxisChart:function(a){return"column"===a||"bar"===a||"line"===a},isEqual:function(a,b){return typeof a!==typeof b?!1:"object"!==typeof a?a===b:e.isEqual(a,
b)},separationChartProperties:function(a,b){var c=["mode","type"],g=["backgroundColor","seriesStyle","legend","highLightColor"];"feature"===b?c=c.concat(["clusterField","valueFields"]):"category"===b?c=c.concat(["clusterField","dateConfig","valueFields","operation","nullValue"]):"count"===b?c=c.concat(["clusterField","dateConfig"]):"field"===b&&(c=c.concat(["valueFields","operation","nullValue"]));c=c.concat(["sortOrder","maxLabels"]);g="pie"===a?g.concat(["dataLabel","innerRadius"]):g.concat("xAxis yAxis stack area tooltip marks".split(" "));
return{dataProperties:c,displayProperties:g}},isValidChartConfig:function(a){if(a&&(a=a.data)){var b=a.mode,f=a.type;if(b&&f&&("count"===b||a.valueFields&&a.valueFields.length)&&("pie"!==f||""!==a.maxLabels))return!0}},getChartConfig:function(a){if(a){var b=this.separationChartProperties(a.type,a.mode),f=b.displayProperties,g={},d={};b.dataProperties.forEach(k.hitch(this,function(b){g[b]=a[b]}));f.forEach(k.hitch(this,function(b){d[b]=a[b]}));b={data:g,display:d};return this.isValidChartConfig(b)?
b:!1}},specialChartConfig:function(a,b){var c=a&&a.data;if(c){var g=c.sortOrder;"feature"===c.mode&&g&&g.field===c.clusterField&&(g.isLabelAxis=!0)}if(a=a&&a.display)c&&(a.mode=c.mode),a.theme||(a.theme=b)},_cloneAndFormatDS:function(a){a=k.clone(a);var b={};a.name&&(b.name=a.name);a.dataSourceType&&(b.dataSourceType=a.dataSourceType);a.layerId&&(b.layerId=a.layerId);a.frameWorkDsId&&(b.frameWorkDsId=a.frameWorkDsId);a=null;return b},isDSEqual:function(a,b){if(a&&b)return a=this._cloneAndFormatDS(a),
b=this._cloneAndFormatDS(b),this.isEqual(a,b)},separationGradientColors:function(a,b){var c=[];2===a.length&&(c=this._createGradientColors(a[0],a[a.length-1],b));return c},_createGradientColors:function(a,b,f){var c=[];a=new l(a);var d=new l(b);b=(d.r-a.r)/f;for(var e=(d.g-a.g)/f,d=(d.b-a.b)/f,h=new l,k=0,t=0,u=0,r=0;r<f;r++)k=parseInt(a.r+b*r,10),t=parseInt(a.g+e*r,10),u=parseInt(a.b+d*r,10),h.setColor([k,t,u]),c.push(h.toHex());return c},mockLayerDefinitionForSTD:function(a){var b={type:"Table",
fields:[]};b.fields=a.fields;b.fields.push({name:"STAT_COUNT",type:"esriFieldTypeInteger",alias:"STAT_COUNT"});return b},getLoadedLayer:function(a){var b=new p,f=null,f="string"===typeof a?new h(a):"esri.layers.FeatureLayer"===a.declaredClass?a:new h({layerDefinition:k.clone(a),featureSet:null});if(f.loaded)b.resolve(f);else f.on("load",function(){b.resolve(f)});return b},parseDataSourceId:function(a){var b=a.split("~"),f={};if(2>b.length)return console.error("Bad data source id:",a),f;switch(b[0]){case "map":return b=
a.lastIndexOf("~"),f={from:"map",layerId:a.substring(4,b)};case "widget":return f={from:"widget",widgetId:b[1]};case "external":return f={from:"external"};default:console.error("Bad data source id:",a)}},getDsTypeInfoMeta:function(a,b){var c={dsTypeInfo:null,dsMeta:null};c.dsTypeInfo=this.parseDataSourceId(a);if(b=b.dataSource&&b.dataSource.dataSources)c.dsMeta=b[a];return c},getValueFromFeatures:function(a,b,f){if(!a||!b||!f)return!1;a=this.getSingleValueFromFeatures(a,b,f);a=this._getVaildValue(a);
return"number"!==typeof a?!1:a},_getVaildValue:function(a){if(a||0===a)return Number(a)},cleanFeatures:function(a){if(a&&a.length)return a.map(function(a){return{attributes:a.attributes}})},getFieldAliasByFieldInfo:function(a,b){var c="";if(!a)return c;var g=a.name,c=a.alias||g;b&&(c=this.getAliasFromPopupInfo(g,b));return c},getAliasFromPopupInfo:function(a,b){var c=a;if(!b)return c;(b=b.fieldInfos)&&0<b.length&&b.some(function(b){return b.fieldName===a?(c=b.label,!0):!1});return c},isFolatNumber:function(a){return"number"!==
typeof a?!1:/^(-?\d+)(\.\d+)?$/.test(a)},addAliasForLayerDefinition:function(a,b){a&&a.fields&&0<a.fields.length&&a.fields.forEach(k.hitch(this,function(a){var c=this.getFieldAliasByFieldInfo(a,b);c&&(a.alias=c)}))},mockDataSourceForGaugeRange:function(a,b){var c=this.getRangeSourceInfo(a);a=this.mockDataSourceByStatSourceID(c.range1,b);b=this.mockDataSourceByStatSourceID(c.range2,b);return[a,b]},mockDataSourceByStatSourceID:function(a,b){a=a||{};var c=a.id||b;a=a.id?a.label:b;var g;c&&(g={name:a,
frameWorkDsId:c,dataSourceType:"DATA_SOURCE_FROM_FRAMEWORK"});return g},getStatisticForChart:function(a){var b,f,g,d=a.mode;f=a.valueFields;var e=a.operation,h=a.nullValue;"average"===e&&(e="avg");a=a.clusterField;"count"!==d?(b=f,f=e):f="count";if("category"===d||"count"===d)g=[a];return{type:f,fields:b,groupByFields:g,nullValue:h}},getStatisticForGauge:function(a){var b={};a=a.statistics;if(!a||!a.length)return b;a.forEach(function(a){"value"===a.type&&(b.value=a.config.value);"range"===a.type&&
"stat"===a.config.type&&(b[a.name]=a.config.value.statistic)});return b},getStatisticForNumber:function(a){if(a&&a.statistics&&a.statistics.length)return a.statistics[0].config.value},getRangeDataSource:function(a){var b={};if(!a||!a.config)return b;a=a.config.statistics;if(!a||!a.length)return b;a.forEach(function(a){"range"===a.type&&"stat"===a.config.type&&(b[a.name]={name:a.config.value.sourceLabel||a.config.value.sourceID,frameWorkDsId:a.config.value.sourceID,dataSourceType:"DATA_SOURCE_FROM_FRAMEWORK"})});
return b},getRangeFixedValue:function(a){var b={};a=a.config.statistics;if(!a||!a.length)return b;a.forEach(function(a){"range"===a.type&&"fixed"===a.config.type&&(b[a.name]=a.config.value)});return b},checkDataSourceIsVaild:function(a,b,f,g,d){var c={code:0,fields:[]},e=null;a?"DATA_SOURCE_FROM_FRAMEWORK"===a.dataSourceType?(c.label=a.name||a.frameWorkDsId,g&&g.dataSource&&g.dataSource.dataSources?(a=g.dataSource.dataSources[a.frameWorkDsId])?(e=a.dataSchema&&a.dataSchema.fields,b=this._getNeededFieldsByMainDijitJson(b,
d),c=this._isDataSourceContainNeededFields(e,b,c)):c.code=1:c.code=1):"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===a.dataSourceType&&(e=a.layerId,c.label=a.name||a.layerId,e&&f?(a=f.getLayer(e))?(e=a.fields,b=this._getNeededFieldsByMainDijitJson(b,d),c=this._isDataSourceContainNeededFields(e,b,c)):c.code=1:c.code=1):c.code=1;return c},getCheckDataSourceResultCode:function(a){if(a&&a.length){a=k.clone(a);var b=a.shift();if(b.code)return b.code;var f=0;a.some(function(a){if(a&&1===a.code)return f=3,!0;if(a&&
2===a.code)return f=2,!0});return f}},getRangeSourceInfo:function(a){var b={};if(!a||!a.length)return b;a.forEach(function(a){if("range"===a.type&&"stat"===a.config.type){var c=a.name,f=a.config.value.sourceID;a=a.config.value.sourceLabel;c&&f&&(b[c]={id:f,label:a||f})}});return b},getGaugeNumberStatisticField:function(a){var b={};if(!a||!a.length)return b;a.forEach(function(a){if("range"===a.type&&"stat"===a.config.type){var c=a.name;a=a.config.value.statistic.field;c&&a&&(b[c]=a)}else"value"===
a.type&&(a=a.config.value.field,b.value=a)});return b},_isDataSourceContainNeededFields:function(a,b,f){if(!a||!a.length)return f.code=1,f;var c=this._getFieldNamesByFields(a);if(!b||!b.length)return f.code=0,f;b.forEach(function(a){0>c.indexOf(a)&&f.fields.push(a)});f.fields.length&&(f.code=2);return f},_getNeededFieldsByMainDijitJson:function(a,b){if(a)return this._getNeededFieldsByDijitConfig(a.type,a.config,b)},_getNeededFieldsByDijitConfig:function(a,b,f){var c=null;if(b){if("chart"===a){c=[];
f=b.data;if(!f)return;f.clusterField&&c.push(f.clusterField);f.valueFields&&f.valueFields.length&&(c=c.concat(f.valueFields))}else if("gauge"===a||"number"===a)c=[],(a=b.statistics)&&(f=this.getGaugeNumberStatisticField(a)[f])&&c.push(f);if(c&&c.length)return c}},formatterRangeNumber:function(a){"number"!==typeof a&&(a=Number(a));if(!a&&0!==a)return!1;this.isFolatNumber(a)&&(a=a.toFixed(2),a=Number(a));return a},upperCaseString:function(a){return a&&"string"===typeof a?a.toUpperCase():a},lowerCaseString:function(a){return a&&
"string"===typeof a?a.toLowerCase():a},isStrictNaN:function(a){return"number"===typeof a&&isNaN(a)},isValidValue:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&!this.isStrictNaN(a)},getLayerIdByDataSource:function(a){if(a){var b=a.layerId;a=a.frameWorkDsId;!b&&a&&(a=this.parseDataSourceId(a))&&"undefined"!==a.layerId&&(b=a.layerId);return b}},hasDigitSeparator:function(a,b){var c=!1;if(!a||!b)return c;(b=b.fieldInfos)&&0<b.length&&b.some(function(b){return b.fieldName===a?(c=!(!b.format||
!b.format.digitSeparator),!0):!1});return c},_getFieldInfo:function(a,b){var c=null;b=b.fields;for(var g=0;g<b.length;g++)b[g].name===a&&(c=b[g]);return c},_isNumberType:function(a,c,f){if(!a||!c)return!1;var g=k.clone(b.numberFieldTypes);f&&g.push(b.oidFieldType);return(a=this._getFieldInfo(a,c))?-1<g.indexOf(a.type):!1},isAxisType:function(a){return-1<["column","bar","line"].indexOf(a)},isValueAxis:function(a,b){if(this.isAxisType(b))return"bar"===b?!a:a},_isValidChartConfig:function(a){if(!a)return!1;
a=a.data;return!(!a||!a.mode)},_upgradeAxisFormat:function(a,b,f,g,d,e){if("undefined"!==typeof a.digitSeparator)return a;this.isValueAxis(b,g)?a.digitSeparator=!0:this._isNumberType(f,d,!0)&&(b=this.hasDigitSeparator(f,e),a.digitSeparator=b);return a},upgradeChartAxisFormatConfig:function(a,b,f){if(!this._isValidChartConfig(a))return a;var c=a.data.type;if(!this.isAxisType(c)||!a.display)return a;a=k.clone(a);var d=a.data.clusterField,e=a.display.xAxis,h=a.display.yAxis;e.format||(e.format={});h.format||
(h.format={});this._upgradeAxisFormat(e.format,!1,d,c,b,f);this._upgradeAxisFormat(h.format,!0,d,c,b,f);return a}};return b})},"widgets/Infographic/dijits/GaugeDijit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html ./BaseDijit jimu/utils jimu/dijit/Chart ../utils ./clientStatistic".split(" "),function(n,e,k,l,d,p,h,b){return n([l],{templateString:'\x3cdiv style\x3d"width:100%;height:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv"class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3cdiv class\x3d"gauge-dom" data-dojo-attach-point\x3d"gaugeDomNode"\x3e\x3c/div\x3e\x3c/div\x3e',
type:"gauge",baseClass:"infographic-gauge-dijit",config:null,defValueStyle:{state:!0,isRatio:!1,font:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},textColor:"#59bad8"},dataFormat:{unit:"none",decimalPlaces:"",prefix:"",suffix:""}},constructor:function(a){this.inherited(arguments);this.visible=a.visible},postCreate:function(){this.inherited(arguments);this._features=null;this._upgradeConfig(this.config);this.setConfig(this.config);this._updateBackGroundColor()},_upgradeConfig:function(a){var b=
a&&a.display&&a.display.currentValue;(b=b&&b.dataFormat)&&"undefined"===typeof b.digitSeparator&&(b.digitSeparator=!0);b=(a=a&&a.display&&a.display.dataLabels)&&a.dataFormat||{};"undefined"===typeof b.digitSeparator&&(b.digitSeparator=!0);a.dataFormat=b},setLayerInfo:function(){},setVisible:function(a){this.visible=a},resetData:function(){this.gaugeValue=this._valueObj=this._r2fs=this._r1fs=this._features=this.dataSource=null},onDataSourceDataUpdate:function(a){this._valueObj=a},setMainFeatures:function(a){a&&
(this._features=h.cleanFeatures(a))},setRangeFeatures:function(a,b){"range1"===b?this._r1fs=h.cleanFeatures(a):"range2"===b&&(this._r2fs=h.cleanFeatures(a))},resize:function(){this.chart&&this.chart.resize()},setDataSource:function(a){this.inherited(arguments);this.dataSource=a},setConfig:function(a){a&&(this.config=a)},startRendering:function(){if(this._shouldRenderGauge()){this.chart||this._createJimuChart();this._updateBackGroundColor();var a=this._calculateGaugeValue();0===a?this.showNodata():
-1===a?this.showNodata(this.nls.invalidRangeTip):(a=this._createChartOption(),this.chart.updateConfig(a))}},_splitStatistic:function(a){if(a&&a.length){var b={};a.forEach(function(a){if("value"===a.type)b.value=a.config.value;else if("range"===a.type){var c=a.name;"stat"===a.config.type?b[c]=a.config.value.statistic:"fixed"===a.config.type&&(b[c]={value:a.config.value})}});return b}},_getValueObjForSetting:function(){var a=this.config&&this.config.statistics;if(a&&a.length){var c=this._splitStatistic(a),
f=c.value,g=c.range1,c=c.range2,d=this.dataSource,a=h.mockDataSourceForGaugeRange(a),f=b.statistic(f,d,this._features);"undefined"!==typeof g.value?g=g.value:(g=b.statistic(g,a[0],this._r1fs),g=b.formatterRangeNumber(g));"undefined"!==typeof c.value?c=c.value:(c=b.statistic(c,a[1],this._r2fs),c=b.formatterRangeNumber(c));return{value:f,ranges:[g,c]}}},_calculateGaugeValue:function(){var a;a=this.inSettingPage?this._getValueObjForSetting():this._valueObj;if(!h.isValidValue(a)||!h.isValidValue(a.value))return 0;
if(!this._isEffectiveRange(a))return-1;this.gaugeValue=a;return 1},_createChartOption:function(){var a=this._splitValueObj(this.gaugeValue),b=a.min,f=a.max,g=a.value,g=this._parseRealValueDecimal(g),d=this.config,a=d.display&&d.display.dataLabels&&d.display.dataLabels.dataFormat,g={tooltip:{confine:!0,trigger:"item"},series:[{data:[g]}]};g.shape=d.shape;g.type="gauge";g.theme=this.isDarkTheme()?"dark":"light";d=this._createGaugeOption();g.gaugeOption=d;g.max={value:f,format:a};g.min={value:b,format:a};
return g},_parseRealValueDecimal:function(a){var b=this._getVaildValueDisplay();if(b=this._getVaildDecimalPlaces(b))a=a.toFixed(b),a=Number(a);return a},_createGaugeOption:function(){var a=this._splitValueObj(this.gaugeValue),b=a.value,f=this.config,d=f.display&&f.display.dataLabels&&f.display.dataLabels.dataFormat,e={},h=this._getValueStyle();h&&(e.valueStyle=h);this._setGaugeDisplay(e);a=this._getIndicatorInfo(f,b,a);a.targetValue&&(b=this._isShowTargetValue()?a.targetValue:[],e.targetValue=b.map(function(a){return{value:a,
format:d}}));a.columnColor&&(e.columnColor=a.columnColor);return e},_getIndicatorInfo:function(a,b,f){var c=!1,e=!1,k=!1,l=this._getIndicatorValues(a,f);d.isNotEmptyObject(l,!0)&&(c=l);if(a=a.indicators)(b=h.getVaildIndicator(b,a,f.max))&&b.gaugeColor&&(e=b.gaugeColor),b&&b.valueColor&&(k=b.valueColor);return{targetValue:c,columnColor:e,valueColor:k}},_getIndicatorValues:function(a,b){var c=[];a.indicators&&(a.indicators.forEach(function(a){a.value&&a.value.forEach(e.hitch(this,function(f){c.push(this.betterDisplayNumberOfMultiDecimal(a.isRatio?
f/100*b.max:f,2))}))}.bind(this)),c.sort(function(a,b){return a-b}),c=d.uniqueArray(c));return c},betterDisplayNumberOfMultiDecimal:function(a,b){if("number"!==typeof a)return a;var c=0,d=a.toString().split(".");1===d.length?c=0:2===d.length&&(c=d[1].length);return c?(c>b&&(c=b),a=a.toFixed(c),parseFloat(a)):a},_splitValueObj:function(a){var b;b=a.value;a=a.ranges;a.sort(function(a,b){return a-b});return{min:a[0],max:a[1],value:b}},_isEffectiveRange:function(a){var b=this._splitValueObj(a);a=b.min;
b=b.max;return"undefined"===typeof a||"undefined"===typeof b||b===a?!1:!0},_isRangeNeedFeatures:function(a,b){var c=!1;a=a.statistics;if(!a||!a.length)return c;a.some(function(a){if("range"===a.type&&a.name===b&&"stat"===a.config.type)return c=!0});return c},_shouldRenderGauge:function(){if(this.visible&&this.config){var a;if(this.inSettingPage){var b=this._isRangeNeedFeatures(this.config,"range1");a=this._isRangeNeedFeatures(this.config,"range2");b=b?this._r1fs:!0;a=a?this._r2fs:!0;a=this.domNode&&
this._features&&b&&a}else b=(a=this._valueObj)&&a.ranges,a=this.domNode&&a&&b&&"number"===typeof a.value&&"number"===typeof b[0]&&"number"===typeof b[1];a?this.hideNodata():this.showNodata();return!!a}},_updateBackGroundColor:function(){var a=this.config;(a=a&&a.display&&a.display.backgroundColor)&&k.setStyle(this.domNode,"backgroundColor",a)},_createJimuChart:function(){var a=this._getDefaultChartOption();this.chart=new p({chartDom:this.gaugeDomNode,config:a});this.chart.placeAt(this.gaugeDomNode);
this.chart.resize()},_generateValueFormatter:function(a){var b=this._splitValueObj(this.gaugeValue),f=b.max,g=b.min;if(a)return e.hitch(this,function(a,b){var c="",e,h,k=a.dataFormat;if(!k)return b;e=k.decimalPlaces;h=k.digitSeparator;if(e||0===e)e=Number(e);a.isRatio?b=b<=g?d.convertNumberToPercentage(0,e,h):d.convertNumberToPercentage((b-g)/(f-g),e,h):"percentage"===k.unit?b=d.convertNumberToPercentage(b,e,h):"thousand"===k.unit?(c=this.nls.thousandAbbreviation,b/=1E3):"million"===k.unit?(c=this.nls.millionAbbreviation,
b/=1E6):"billion"===k.unit&&(c=this.nls.billionAbbreviation,b/=1E9);a.isRatio||"percentage"===k.unit||(b=d.localizeNumberByFieldInfo(b,{format:{places:e,digitSeparator:h}}));c&&(b+=c);a=b;k.prefix&&(a=k.prefix+" "+a);k.suffix&&(a+=" "+k.suffix);return a},a,b.value)},_getVaildDecimalPlaces:function(a){if(a){if((a=(a=a.dataFormat)&&a.decimalPlaces)||0===a)a=Number(a);if("number"===typeof a)return a}},_getVaildValueDisplay:function(){var a=this.config;if(a=a&&a.display)return a.currentValue&&a.currentValue.state?
a.currentValue:e.clone(this.defValueStyle)},_generateTextStyle:function(a){var b=this._splitValueObj(this.gaugeValue),b=this._getIndicatorInfo(this.config,b.value,b),f=a&&a.font;if(f){a={};"undefined"!==typeof f.fontSize&&(a.fontSize=Number(f.fontSize));a.color=b.valueColor||f.textColor;b=f.font;if(!b)return a;a.fontWeight=b.bold?"bold":"normal";b.fontFamily&&(a.fontFamily=b.fontFamily);a.fontStyle=b.italic?"italic":"normal";return a}},_isShowTargetValue:function(){var a=this.config&&this.config.display&&
this.config.display.dataLabels;if(a)return!!a.targetValue},_setGaugeDisplay:function(a){var b=this.config.display;b&&(b.gaugeColor&&(a.columnColor=b.gaugeColor),b.bgColor&&(a.bgColor=b.bgColor),b.dataLabels&&b.dataLabels.state&&(b=b.dataLabels,a.showDataRangeLabel=!!b.dataRange,a.showTargetValueLabel=!!b.targetValue,a.labelColor=b.textColor||""))},_getValueStyle:function(){var a=this._getVaildValueDisplay();if(a){var b={},f=this._getVaildDecimalPlaces(a);"number"===typeof f&&(b.decimalPlaces=f);b.formatter=
this._generateValueFormatter(a);if(a=this._generateTextStyle(a))b.textStyle=a;return b}},_getDefaultChartOption:function(){var a={type:"gauge",confine:!0,shape:"curved",min:0,max:100,series:[{data:[0]}]};this.config&&this.config.shape&&(a.shape=this.config.shape);a.theme=this.isDarkTheme()?"dark":"light";return a},showNodata:function(a){this.chart&&this.chart.clear();k.addClass(this.domNode,"no-data");a&&(this.noDataDiv.innerHTML=a)},hideNodata:function(){k.removeClass(this.domNode,"no-data")}})})},
"widgets/Infographic/dijits/clientStatistic":function(){define(["jimu/DataSourceManager","jimu/statisticsUtils","../utils"],function(n,e,k){return{getSingleValueForServerStatFeature:function(e){e=e&&e[0]&&e[0].attributes;if(!e)return null;var d=Object.keys(e)[0];return Number(e[d])},getResultForExtraStatFeature:function(e,d){var l=d.field;d=d.type;l="count"===d?"STAT_COUNT":k.upperCaseString(l+"_"+d);d=e&&e[0]&&e[0].attributes;if(!d)return null;e=d[l];"undefined"===typeof e&&(l=k.lowerCaseString(l),
e=d[l]);return Number(e)},statistic:function(e,d,k,h){return e&&d&&k?"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===d.dataSourceType?this.getStatisticResultFromFeatures(k,e):"Features"===this._getExtalDataSourceType(d,h)?this.getStatisticResultFromFeatures(k,e):this.statisticExtraStatSource(e,k):null},formatterRangeNumber:function(e){if(!e&&0!==e)return!1;"number"!==typeof e&&(e=Number(e));this.isFolatNumber(e)&&(e=e.toFixed(2),e=Number(e));return e},isFolatNumber:function(e){return"number"!==typeof e?!1:
/^\d+(\.\d+)$/.test(e)},statisticExtraStatSource:function(e,d){var k;if(d){if(0===d.length)k=void 0;else if(1===d.length)k=this._getValueFromFeatureOfExtraStatFeatures(d[0],e);else if(1<d.length){var h={count:0,sum:0},b,a,c,f=0,g=0;d.forEach(function(d){b=this._getValueFromFeatureOfExtraStatFeatures(d,e);switch(e.type){case "count":h.count+=b;break;case "sum":h.sum+=b;break;case "min":h.min="undefined"===typeof h.min?b:Math.min(h.min,b);break;case "max":h.max="undefined"===typeof h.max?b:Math.max(h.max,
b);break;case "avg":c=this._getValueFromFeatureOfExtraStatFeatures(d,{type:"count"}),a=this._getValueFromFeatureOfExtraStatFeatures(d,{field:e.field,type:"sum"}),f+=a,g+=c}}.bind(this));"avg"===e.type&&(h.avg=0===g?0:f/g);k=h[e.type]}return k}},_getValueFromFeatureOfExtraStatFeatures:function(e,d){if(!e||!e.attributes)return"count"===d.type?0:void 0;d="count"===d.type?"STAT_COUNT":k.upperCaseString(d.field+"_"+d.type);e=e.attributes;var l=e[d];"undefined"===typeof l&&(d=k.lowerCaseString(d),l=e[d]);
return l},_getCountValueFromFeatureOfExtraStatFeatures:function(e){if(e&&e.attributes){e=e.attributes;var d,l="STAT_COUNT";d=e[l];"undefined"===typeof d&&(l=k.lowerCaseString(l),d=e[l]);return d||0}},getStatisticResultFromFeatures:function(k,d){if(k){if("count"===d.type)return k.length;var l=d.type;return e.getStatisticsResultFromClientSync({featureSet:{features:k},fieldName:d.field,statisticTypes:[l]})[l+"Field"]}},_getExtalDataSourceType:function(e,d){return this._getExtalDataSourceInfo(e,d).type},
_getExtalDataSourceInfo:function(e,d){if(e){d=d||this.appConfig;var k=e.frameWorkDsId;if("undefined"!==typeof k){var h={};return h=(d=d&&d.dataSource&&d.dataSource.dataSources)?d[k]:n.getInstance().getDataSourceConfig(e.frameWorkDsId)}}}}})},"widgets/Infographic/dijits/NumberDijit":function(){define("dojo/_base/declare ./BaseDijit dojo/dom-style dojo/_base/html jimu/utils ../utils ./clientStatistic ./styleUtils".split(" "),function(n,e,k,l,d,p,h,b){return n([e],{templateString:'\x3cdiv tabindex\x3d"0" class\x3d"has-link" role\x3d"link" style\x3d"height:100%;width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv"class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3ca tabindex\x3d"-1" data-dojo-attach-point\x3d"numberContent" class\x3d"number-content no-trim" target\x3d"_blank"\x3e\x3cdiv data-dojo-attach-point\x3d"leftIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"number" class\x3d"number"\x3e\x3cdiv data-dojo-attach-point\x3d"prefix" class\x3d"prefix"\x3e\x3c/div\x3e\x3cdiv class\x3d"value-content" data-dojo-attach-point\x3d"valueContent"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"suffix" class\x3d"suffix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"rightIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e',
baseClass:"infographic-number-dijit",type:"number",config:null,constructor:function(a){this.visible=a.visible},postCreate:function(){this.inherited(arguments);this._value=this._features=null;this._upgradeConfig(this.config);this.setConfig(this.config);this._updateBackGroundColor()},_upgradeConfig:function(a){(a=a&&a.dataFormat)&&"undefined"===typeof a.digitSeparator&&(a.digitSeparator=!0)},setLayerInfo:function(){},setVisible:function(a){this.visible=a},resetData:function(){this.numberValue=this._value=
this._features=this.dataSource=null},onDataSourceDataUpdate:function(a){this.inSettingPage?a&&"undefined"!==typeof a.features&&(this._features=p.cleanFeatures(a.features)):"number"===typeof a&&(this._value=a)},setDataSource:function(a){this.inherited(arguments);this.dataSource=a},setConfig:function(a){a&&(this.config=a)},startRendering:function(){this._shouldRenderNumber()&&(this._updateBackGroundColor(),this._calculateNumberValue(),"number"!==typeof this.numberValue?this.showNodata():this._renderNumber(this.numberValue))},
_calculateNumberValue:function(){var a;this.inSettingPage?(a=p.getStatisticForNumber(this.config),a=h.statistic(a,this.dataSource,this._features)):a=this._value;"undefined"!==typeof a&&!1!==a&&(this.numberValue=a)},_renderNumber:function(a){this._cleanNumberContent();this.valueContent.innerHTML=d.localizeNumber(a);this._setValueDisplay()},_setValueDisplay:function(){var a=this.config;a&&(this._setBackground(a),this._setFont(a),this._setDataFormat(a),this._setIndicatorStyle())},_shouldRenderNumber:function(){if(this.visible&&
this.config){var a;(a=this.inSettingPage?this.domNode&&this._features:this.domNode&&"number"===typeof this._value)?this.hideNodata():this.showNodata();return!!a}},_getIndicatorColor:function(){var a=!1,b=!1,f=this.config.indicators;f&&((f=p.getVaildIndicator(this.numberValue,f))&&f.valueColor&&(a=f.valueColor),f&&d.isNotEmptyObject(f.iconInfo)&&(b=f.iconInfo));return{color:a,icon:b}},_cleanNumberContent:function(){l.removeClass(this.leftIcon);l.addClass(this.leftIcon,["icon"]);l.removeClass(this.rightIcon);
l.addClass(this.rightIcon,["icon"]);this.replaceIcon&&(l.destroy(this.replaceIcon),this.replaceIcon=null);l.empty(this.valueContent);l.empty(this.prefix);l.empty(this.suffix);this._setValueColor("")},_updateBackGroundColor:function(){var a=this.config;(a=a&&a.background&&a.background.backgroundColor)&&l.setStyle(this.domNode,"backgroundColor",a)},_setBackground:function(a){if(a=a&&a.background){a.backgroundColor&&l.setStyle(this.domNode,"backgroundColor",a.backgroundColor);var b=a.alignment;b&&(l.removeClass(this.domNode),
l.addClass(this.domNode,"infographic-number-dijit"),b.horizontal&&l.addClass(this.domNode,"horizontal-"+b.horizontal),b.vertical&&l.addClass(this.domNode,"vertical-"+b.vertical));a.link?l.setAttr(this.numberContent,"href",a.link):l.removeAttr(this.numberContent,"href")}},_setFont:function(a){if(a&&a.font){var c={};b.font.setStyle(a.font,c);l.setStyle(this.number,c)}},_setDataFormat:function(a){var b,f="",e;b=this.numberValue;var h=a.dataFormat;h&&(a=h.decimalPlaces,e=h.digitSeparator,a&&(a=Number(a)),
"percentage"===h.unit?b=d.convertNumberToPercentage(b,a,e):"thousand"===h.unit?(f=this.nls.thousandAbbreviation,b/=1E3):"million"===h.unit?(f=this.nls.millionAbbreviation,b/=1E6):"billion"===h.unit&&(f=this.nls.billionAbbreviation,b/=1E9),"percentage"!==h.unit&&(b=d.localizeNumberByFieldInfo(b,{format:{places:a,digitSeparator:e}})),f&&(b+=f),this.valueContent.innerHTML=b,h.prefix&&(this.prefix.innerHTML=h.prefix),h.suffix&&(this.suffix.innerHTML=h.suffix))},_setIndicatorStyle:function(){var a=this._getIndicatorColor();
a.color&&this._setValueColor(a.color);a.icon&&this._setIndicatorIcon(a.icon)},_setValueColor:function(a){k.set(this.number,"color",a)},_setIndicatorIcon:function(a){a&&("left"===a.placement||"right"===a.placement?this._setLeftRightIcon(a):"replace"===a.placement&&this._setReplaceIcon(a))},_setReplaceIcon:function(a){var b=l.create("div",{"class":"indicator-icon "+a.icon});l.empty(this.valueContent);l.place(b,this.valueContent);k.set(b,"color",a.color);k.set(b,"display","inline-flex")},_setLeftRightIcon:function(a){var b;
"left"===a.placement?b=this.leftIcon:"right"===a.placement&&(b=this.rightIcon);l.addClass(b,"indicator-icon "+a.icon);k.set(b,"color",a.color)},showNodata:function(a){this._cleanNumberContent();l.addClass(this.domNode,"no-data");a&&(this.noDataDiv.innerHTML=a)},hideNodata:function(){l.removeClass(this.domNode,"no-data")}})})},"widgets/Infographic/dijits/SourceLauncher":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on dojo/Deferred dijit/_WidgetBase jimu/utils ../utils jimu/LayerInfos/LayerInfos esri/geometry/geometryEngine esri/geometry/Extent esri/tasks/query esri/tasks/QueryTask esri/tasks/StatisticDefinition esri/layers/FeatureLayer ./clientStatistic".split(" "),
function(n,e,k,l,d,p,h,b,a,c,f,g,m,q,v,w){return n([p,k],{oidFieldType:"esriFieldTypeOID",constructor:function(b){this.uniqueID=h.getRandomString();this.map=b.map;this.useSelection=b.useSelection;this.filterByExtent=b.filterByExtent;this.returnFeatures=b.returnFeatures;this.statistic=b.statistic;this.dataSource=b.dataSource;this.config=b.config;this.isDateType=!!(this.config&&this.config.data||{}).dateConfig;this.layerInfosObj=a.getInstanceSync();this.layerObject=b.layerObject;this.timeIntervalHandle=
this.filterChangedHandle=this.updateEndHandle=this.refreshIntervalHandle=this.selectionHandle=this.exchetChangeHandle=this._oldQueryParameter=this._queryParameter=this._layerUrl=null;this._loadingTypes={};this.extents=this.getBookmarkExtents(b.appConfig)},start:function(){this.showLoading("sl-get-lyobj");this._tryGetLayerObject("sl-get-lyobj").then(function(){this.hideLoading("sl-get-lyobj");this.awake();this._listenEventsContinuousAccessFeatures()}.bind(this),function(a){console.error(a.message||
a);this.hideLoading("sl-get-lyobj");this._onFailed()}.bind(this))},awake:function(){this.sleeping=!1;this._getFeaturesForFirst()},sleep:function(){this.sleeping=!0},destroy:function(){this._loadingTypes={};this._removeHandles();this.inherited(arguments)},_getFeaturesForFirst:function(){this._trigerCallback()},_listenEventsContinuousAccessFeatures:function(){if(this.layerObject&&this.layerInfo){var a=this._shouldAccessClientFeatures();this.useSelection&&(this._resetSelectionHandle(),this.selectionHandle=
l(this.layerObject,"selection-complete,selection-clear",e.hitch(this,function(){this._trigerCallback()})));a||(this._resetFilterChangedHandle(),this.filterChangedHandle=l(this.layerInfo,"filterChanged",e.hitch(this,function(a){a&&a.zoomAfterFilter&&this.filterByExtent||this._trigerCallback()})));a&&(this._resetUpdateEndHandle(),this.updateEndHandle=l(this.layerObject,"update-end",e.hitch(this,function(){this._trigerCallback()})));this.filterByExtent&&this.map&&(this._resetExtentChangeHandle(),this.exchetChangeHandle=
l(this.map,"extent-change",e.hitch(this,function(){this.emit("start");this._trigerCallback(!0)})));a||(this._setTimeListener(),this._resetRefreshIntervalHandle(),this.refreshIntervalHandle=l(this.layerObject,"refresh-interval-change",e.hitch(this,this._setTimeListener)))}},_setTimeListener:function(){var a=this._getLayerRefreshInterval();a?(this._resetTimeIntervalHandle(),this.timeIntervalHandle=setInterval(e.hitch(this,function(){this._trigerCallback()}),6E4*a)):this._resetTimeIntervalHandle()},
_trigerCallback:function(a){var b=this.computingTheWayToGetFeatures();if(!a||2!==b||!this._isLayerOnDemandMode())switch(this.emit("start"),b){case 1:this._getFeaturesFromSelection(this.map,this.layerObject,this.filterByExtent,e.hitch(this,this._onDataUpdate));break;case 2:this._getClientFeaturesFromMap(this.map,this.layerObject,this.filterByExtent,e.hitch(this,this._onDataUpdate));break;case 3:this._getStatisticsFeaturesForServer(e.hitch(this,this._onDataUpdate))}},computingTheWayToGetFeatures:function(){var a=
0;return this.sleeping||!this.layerObject?a:a=this._isMapLayer()?this._shouldAccessFeaturesBySelection()?1:this._shouldAccessClientFeatures()?2:3:0},_getClientFeaturesFromMap:function(a,b,c,f){var d=b.graphics;c&&(d=this._filterFeaturesByExtent(a.extent,d));d=this._sortClientFeaturesByObjID(d,b);f(d)},_getFeaturesFromSelection:function(a,b,c,d){var f=[],e=!1,f=b.getSelectedFeatures(),e=!0;c&&(f=this._filterFeaturesByExtent(a.extent,f));f.isSelectedFeatures=e;f=this._sortClientFeaturesByObjID(f,b);
d(f)},_getStatisticsFeaturesForServer:function(a){this._updateLayerInfoFilter();this._tryGenerateQueryParameter();this._shouldLaunchQuery()&&(this.showLoading("sl-sev-st"),this.queryDeferred=this._doQuery(),this.queryDeferred.then(e.hitch(this,function(b){this.queryDeferred=null;this.hideLoading("sl-sev-st");b=b.features||[];b=this._calculateAverageWithNullValueAsZero(b,this.config);a(b,!0)}),e.hitch(this,function(a){this.queryDeferred=null;console.error(a.message||a);this.hideLoading("sl-sev-st");
this._onFailed("sl-sev-st")})))},_updateLayerInfoFilter:function(){if(this.dataSource&&"undefined"!==typeof this.dataSource.layerId){var a=this.layerInfosObj.getLayerInfoById(this.dataSource.layerId);a&&(this._layerFilter=a.getFilter())}},_onFailed:function(){this.emit("failed")},hideLoading:function(a){this._loadingTypes[a]=!1;this._shouldHideLoading()&&this._hideLoading()},showLoading:function(a){this._loadingTypes[a]=!0;this._showLoading()},_showLoading:function(){this.emit("loading",this.uniqueID)},
_hideLoading:function(){this.emit("unloading",this.uniqueID)},_shouldHideLoading:function(){if(this._loadingTypes)return Object.keys(this._loadingTypes).map(function(a){return this._loadingTypes[a]}.bind(this)).every(function(a){return!a})},_onDataUpdate:function(a,b){a=this._getValueByFeatures(a,b);this.emit("data-update",a);setTimeout(function(){this.emit("done")}.bind(this),500)},_getValueByFeatures:function(a,b){if(!a||!a.length)return null;var c=null;this.returnFeatures?a&&(c={features:a,hasStatisticsed:!!b}):
c=this._getValueForNumber(a);return c},_getValueForNumber:function(a){return this._isNeededCalculateForClient()?w.statistic(this.statistic,this.dataSource,a):w.getSingleValueForServerStatFeature(a)},_isMapLayer:function(){return"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===this.dataSource.dataSourceType},_isLayerOnDemandMode:function(){return this.layerObject&&this.layerObject.currentMode===v.MODE_ONDEMAND},_shouldAccessFeaturesBySelection:function(){return this.useSelection&&this.layerObject&&this.layerObject.getSelectedFeatures().length},
_shouldAccessClientFeatures:function(){var a=this.config&&this.config.data&&"feature"===this.config.data.mode,b=this.isDateType,c=this._isSupportServerStatByExtent();return a||b||!c},_isSupportServerStatByExtent:function(){var a=this.layerObject&&this.layerObject.version&&10.11<=Number(this.layerObject.version),b=this._isLayerSupportStatistics();return a&&b},_isLayerSupportStatistics:function(){if(this.layerObject&&this.layerObject.url){var a=!1;return a=this.layerObject.advancedQueryCapabilities?
!!this.layerObject.advancedQueryCapabilities.supportsStatistics:!!this.layerObject.supportsStatistics}},_getLayerRefreshInterval:function(){if(this.layerObject&&this.layerObject.refreshInterval)return this.layerObject.refreshInterval},_sortClientFeaturesByObjID:function(a,b){if(0<a.length){var c=h.getObjectIdField(b);c&&(b=a[0])&&b.attributes&&b.attributes.hasOwnProperty(c)&&a.sort(function(a,b){a.attributes||(a.attributes={});b.attributes||(b.attributes={});a=a.attributes[c];b=b.attributes[c];return a<
b?-1:a>b?1:0})}return a},_filterFeaturesByExtent:function(a,b){var f=a.normalize();return b=b.filter(e.hitch(this,function(a){try{if(a.geometry){var b="point"===a.geometry.type||"multipoint"===a.geometry;return f.some(e.hitch(this,function(f){return b?f.contains(a.geometry):c.intersects(f,a.geometry)}))}}catch(y){console.error(y)}return!1}))},_calculateAverageWithNullValueAsZero:function(a,c){if(!this._shouldCalcAvgForNullValue(c)||!a||!a.length)return a;c=c.data&&c.data.valueFields;if(!c||!c.length)return a;
var f=c.map(function(a){return a+"_sum"});a.forEach(function(a){var c=a.attributes;if(c){var d=c.STAT_COUNT;"undefined"===typeof d?(d=c.stat_count,delete c.stat_count):delete c.STAT_COUNT;var e,g,h;f.forEach(function(a){h=a.replace(/_SUM$/gi,"");var f=b.upperCaseString(a);a=b.lowerCaseString(a);var k=b.upperCaseString(h+"_AVG");e=c[f];"undefined"===typeof e?(e=c[a],delete c[a]):delete c[f];!e&&"number"!==typeof e||!d?c[k]=null:(g=e/d,c[k]=g)})}});return a},_shouldCalcAvgForNullValue:function(a){var b=
a&&a.data&&a.data.mode,c=a&&a.data&&a.data.operation;a=a&&a.data&&a.data.nullValue;return b&&("category"===b||"field"===b)&&a&&"average"===c},_shouldLaunchQuery:function(){var a=!0,b=!(!this.queryDeferred||this.queryDeferred.isResolved()||this.queryDeferred.isRejected()),c=h.isEqual(this._queryParameter,this._oldQueryParameter);b&&c&&(a=!1);this._oldQueryParameter=e.clone(this._queryParameter);return a},_getOutStatistics:function(a){var c=a.fields,f=a.type,d=a.nullValue,e=f;d&&"avg"===f&&(e="sum");
a=null;c&&c.length?(a=c.map(function(a){var c=b.upperCaseString(a+"_"+e),f=new q;f.statisticType=e;f.onStatisticField=a;f.outStatisticFieldName=c;return f}.bind(this)),d&&"avg"===f&&(c=new q,c.statisticType="count",c.onStatisticField=this._getStatisticsFieldForCountType(this.layerObject),c.outStatisticFieldName="STAT_COUNT",a.push(c))):(c=new q,c.statisticType="count",c.onStatisticField=this._getStatisticsFieldForCountType(this.layerObject),c.outStatisticFieldName="STAT_COUNT",a=[c]);return a},_tryGenerateQueryParameter:function(){this._queryParameter=
{};this._layerUrl&&(this._queryParameter.url=this._layerUrl);this._layerFilter&&(this._queryParameter.where=this._layerFilter);var a,c,f;if(this.returnFeatures)this.statistic&&(this._queryParameter.outStatistics=this._getOutStatistics(this.statistic),this.statistic.groupByFields&&(this._queryParameter.groupByFieldsForStatistics=this.statistic.groupByFields));else if(this.statistic){a=this.statistic.type;c=this.statistic.field;f=b.upperCaseString(c+"_"+a);"count"===this.statistic.type&&(c=this._getStatisticsFieldForCountType(this.layerObject),
f="STAT_COUNT");var d=new q;d.statisticType=a;d.onStatisticField=c;d.outStatisticFieldName=f;this._queryParameter.outStatistics=[d]}},_getStatisticsFieldForCountType:function(a){var b=null;a&&(b=(a=(a=a.fields)&&a.filter(function(a){return a.type===this.oidFieldType}.bind(this))[0])&&a.name);return b||"*"},_doQuery:function(){var a=new d;if(!this._queryParameter)return a.reject("Empty query parameter."),a;if(!this._queryParameter.url)return a.reject("Empty layer url."),a;var b=new m(this._queryParameter.url),
c=new g;c.where=this._queryParameter.where||"1\x3d1";c.returnGeometry=!1;if(this.dataSource.filterByExtent&&this.map){var f=this.map.extent;c.geometry=f;c.cacheHint=this.supportCacheHint(f)}this._queryParameter.groupByFieldsForStatistics&&(c.groupByFieldsForStatistics=this._queryParameter.groupByFieldsForStatistics);if(this._hasVaildOutStatistics(this._queryParameter.outStatistics))c.outStatistics=this._queryParameter.outStatistics;else return a.reject("Invaild outStatistics of query params."),a;
this._queryParameter.orderByFields&&(c.orderByFields=this._queryParameter.orderByFields);return b.execute(c)},_hasVaildOutStatistics:function(a){return a&&a.length?a.every(function(a){return this._isTrueOrZero(a.onStatisticField)&&this._isTrueOrZero(a.outStatisticFieldName)&&!!a.statisticType}.bind(this)):!1},_isTrueOrZero:function(a){return!!a||0===a},_tryGetLayerObject:function(){var a=new d;if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"!==this.dataSource.dataSourceType)return a.resolve(),a;var b=this.layerInfosObj.getLayerInfoById(this.dataSource.layerId);
if(b)return this.layerInfo=b,this.layerObject?(this._layerUrl=this.layerObject.url,a.resolve(),a):b.getLayerObject().then(e.hitch(this,function(a){this.layerObject=a;this._layerUrl=this.layerObject.url}));a.reject("invaild data source");return a},_isNeededCalculateForClient:function(){var a=this.layerObject&&this.useSelection&&0<this.layerObject.getSelectedFeatures().length,b=this._isSupportServerStatByExtent();return a||!b},_resetExtentChangeHandle:function(){this.exchetChangeHandle&&this.exchetChangeHandle.remove&&
(this.exchetChangeHandle.remove(),this.exchetChangeHandle=null)},_resetUpdateEndHandle:function(){this.updateEndHandle&&this.updateEndHandle.remove&&(this.updateEndHandle.remove(),this.updateEndHandle=null)},_resetFilterChangedHandle:function(){this.filterChangedHandle&&this.filterChangedHandle.remove&&(this.filterChangedHandle.remove(),this.filterChangedHandle=null)},_resetSelectionHandle:function(){this.selectionHandle&&this.selectionHandle.remove&&(this.selectionHandle.remove(),this.selectionHandle=
null)},_resetRefreshIntervalHandle:function(){this.refreshIntervalHandle&&this.refreshIntervalHandle.remove&&(this.refreshIntervalHandle.remove(),this.refreshIntervalHandle=null)},_resetTimeIntervalHandle:function(){this.timeIntervalHandle&&(clearInterval(this.timeIntervalHandle),this.timeIntervalHandle=null)},_removeHandles:function(){this._resetExtentChangeHandle();this._resetUpdateEndHandle();this._resetFilterChangedHandle();this._resetSelectionHandle();this._resetRefreshIntervalHandle();this._resetTimeIntervalHandle();
this._resetSelectionHandle()},supportCacheHint:function(a){return this.appConfig?(this.extents||[]).some(function(b){b=this.getTargetExtent(b);return this.isSameExtent(a,b)}.bind(this)):!1},getBookmarkExtents:function(a){a=this.getBookmarkConfig(a);return this.getExtendsFromBookmarkConfigs(a)},getBookmarkConfig:function(a){if(!a)return[];var b=[],b=b.concat(a.widgetOnScreen&&a.widgetOnScreen.widgets||[]),b=b.concat(a.widgetPool&&a.widgetPool.widgets||[]);(a.widgetPool&&a.widgetPool.groups||[]).forEach(function(a){b=
b.concat(a.widgets)});return b.filter(function(a){return"Bookmark"===a.name}).map(function(a){return a.config})},getExtentsFormBookmarkConfig:function(a){if(a&&a.bookmarks2D&&a.bookmarks2D.length)return a.bookmarks2D.map(function(a){return a.extent})},isSameExtent:function(a,c){a=this.getCleanExtent(a);c=this.getCleanExtent(c);return b.isEqual(a,c)},getTargetExtent:function(a){return this.map&&this.map.getTargetExtent?this.map.getTargetExtent(new f(a)):a},getCleanExtent:function(a){if(a)return{xmax:a.xmax,
xmin:a.xmin,ymax:a.ymax,ymin:a.ymin}},getExtendsFromBookmarkConfigs:function(a){var b=[];a.forEach(function(a){a=this.getExtentsFormBookmarkConfig(a)||[];b=b.concat(a)}.bind(this));return b}})})},"widgets/Infographic/dijits/ExtraSourceLauncher":function(){define("dojo/_base/declare dojo/Evented dijit/_WidgetBase jimu/DataSourceManager ../utils ./clientStatistic".split(" "),function(n,e,k,l,d,p){return n([k,e],{constructor:function(d){this.dataSourceManager=l.getInstance();this.appConfig=d.appConfig;
this.frameWorkDsId=d.dataSource.frameWorkDsId;this.returnFeatures=d.returnFeatures;this.formatResult=d.formatResult;this.statistic=d.statistic;this.exdsBeginUpdateHandle=null;this._isStatisticDataSource()},start:function(){this.awake()},awake:function(){this.sleeping=!1;this._getFeaturesForFirst()},sleep:function(){this.sleeping=!0},destroy:function(){this._removeHandles();this.inherited(arguments)},setAppConfigDSFeatures:function(d){this.sleeping||this._onDataUpdate(d)},_getFeaturesForFirst:function(){var d=
this.dataSourceManager.getData(this.dataSource.frameWorkDsId);this._onDataUpdate(d&&d.features)},_onDataUpdate:function(e){var b;this.returnFeatures?e&&(b={features:e,hasStatisticsed:!!this._isStatDataSource}):(b=this._isStatDataSource?p.statisticExtraStatSource(this.statistic,e):p.getStatisticResultFromFeatures(e,this.statistic),this.formatResult&&(b=d.formatterRangeNumber(b)));this.emit("data-update",b)},_isStatisticDataSource:function(){var d=this.appConfig.dataSource&&this.appConfig.dataSource.dataSources,
d=d&&d[this.frameWorkDsId];this._isStatDataSource=!(!d||"FeatureStatistics"!==d.type)},_resetExdsBeginUpdateHandle:function(){this.exdsBeginUpdateHandle&&this.exdsBeginUpdateHandle.remove&&(this.exdsBeginUpdateHandle.remove(),this.exdsBeginUpdateHandle=null)},_removeHandles:function(){this._resetExdsBeginUpdateHandle()}})})},"widgets/Infographic/_ChartSetting":function(){define("dojo/_base/declare dojo/_base/html dojo/on dojo/query dijit/focus dojo/Evented dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./_ChartSetting.html".split(" "),
function(n,e,k,l,d,p,h,b,a,c){return n([b,a,p],{templateString:c,baseClass:"ig-chart-setting-dlg",postCreate:function(){var a=this.chartJson.config||{},b=a.data||{},a=a.display||{},c=b.type;"pie"===c?(e.setStyle(this.verticalAxisSection,"display","none"),e.setStyle(this.horizontalAxisSection,"display","none"),e.setStyle(this.withoutRecordsSection,"display","none")):e.setStyle(this.dataLabelsSection,"display","none");b.dateConfig||e.setStyle(this.withoutRecordsSection,"display","none");this._calcuteLegendDisplay(b,
a)||e.setStyle(this.legendSection,"display","none");"count"!==b.mode&&"field"!==b.mode||"pie"===c||e.setStyle(this.legendSection,"display","none");(c=a.legend)&&c.show&&this._toggle(this.legendToggle);(c=a.dataLabel)&&c.show&&this._toggle(this.dataLabelsToggle);(c=a.xAxis)&&c.show&&this._toggle(this.horizontalAxisToggle);(a=a.yAxis)&&a.show&&this._toggle(this.verticalAxisToggle);b.dateConfig&&b.dateConfig.isNeedFilled&&this._toggle(this.withoutRecordsToggle);this.own(k(this.domNode,"keydown",function(a){a.keyCode===
h.ESCAPE&&this.emit("escape")}.bind(this)))},focusFirst:function(){var a=l(".toggle",this.domNode);if(a&&a.length){var b=null;a.some(function(a){return"none"!==e.getStyle(a,"display")?(b=a,!0):!1});b&&d.focus(b)}},_calcuteLegendDisplay:function(a,b){var c=a.mode;"pie"===a.type?a=!0:(a=!0,"count"===c||"field"===c?a=!1:b.seriesStyle&&(a="layerSymbol"!==b.seriesStyle.type));return a},_toggle:function(a){e.hasClass(a,"toggle-on")?(e.removeClass(a,"toggle-on"),e.addClass(a,"toggle-off"),a.setAttribute("aria-pressed",
!1)):(e.removeClass(a,"toggle-off"),e.addClass(a,"toggle-on"),a.setAttribute("aria-pressed",!0))},_onToggleClick:function(a){var b=a.target;this._toggle(b);a=e.hasClass(b,"toggle-on")?!0:!1;b=e.attr(b,"data-id");"legend"===b?this.chartJson.config.display.legend.show=a:"dataLabels"===b?this.chartJson.config.display.dataLabel.show=a:"horizontalAxis"===b?this.chartJson.config.display.xAxis.show=a:"verticalAxis"===b?this.chartJson.config.display.yAxis.show=a:"withoutRecords"===b&&this.chartJson.config.data.dateConfig&&
(this.chartJson.config.data.dateConfig.isNeedFilled=a);this.chartDijit.setConfig(this.chartJson.config);this.chartDijit.startRendering()}})})},"widgets/Infographic/IGUtils":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/promise/all esri/tasks/query esri/tasks/QueryTask jimu/LayerInfos/LayerInfos jimu/DataSourceManager jimu/utils ./utils".split(" "),function(n,e,k,l,d,p,h,b,a,c){return n([],{constructor:function(a){this.appConfig=a.appConfig;this.map=a.map;this.layerInfosObj=
h.getInstanceSync();this.dataSourceManager=b.getInstance();this.cacheData={}},destroy:function(){this.cacheData=this.dataSourceManager=this.layerInfosObj=this.map=this.appConfig=null},preprocessingDataSource:function(a){var b=new e;if(!a)return b.resolve(),b;var c=this._tryGetLayerIdDataSchema(a),d=c.dataSchema,c=this._tryGetLayerObject(c.layerId);a=this._tryGetLayerForFrameWork(d,a);l([c,a]).then(function(a){var c=a[0];b.resolve({layerObject:c&&c.layerObject,popupInfo:c&&c.popupInfo,featureLayerForFrameWork:a[1]})},
function(a){b.reject(a)});return b},getFeaturesForSetting:function(a){var b=new e;if(!a)return b.resolve(),b;this.getFeaturesByDataSource(a).then(function(a){a=this._cutFeaturesForSetting(a);b.resolve(a)}.bind(this),function(a){b.reject(a)});return b},preprocessingDataSourceForSetting:function(a){var b=new e;if(!a)return b.resolve(),b;var c=this._tryGetLayerIdDataSchema(a),d=c.layerId,f=c.dataSchema,c=this._tryGetLayerObject(d),f=this._tryGetLayerForFrameWork(f,a);a=this.getLayerDefinitionByDataSource(a,
d);l([c,f,a]).then(function(a){var c=a[0];b.resolve({layerObject:c&&c.layerObject,popupInfo:c&&c.popupInfo,featureLayerForFrameWork:a[1],definition:a[2]})}.bind(this),function(a){b.reject(a)});return b},preprocessingDataSourceForRange:function(a){var b=new e;if(!a)return b.resolve(),b;var c=this._tryGetLayerIdDataSchema(a).layerId,c=this.getLayerDefinitionByDataSource(a,c);a=this.getFeaturesByDataSource(a);l([c,a]).then(function(a){var c=a[0];a=a[1];a=this._cutFeaturesForSetting(a);b.resolve({definition:c,
features:a})}.bind(this),function(a){b.reject(a)});return b},_tryGetLayerIdDataSchema:function(a){var b={layerId:"",dataSchema:null};if(a.layerId)this.dsType="CLIENT_FEATURES",b.layerId=a.layerId;else if(a.frameWorkDsId){a=(a=c.getDsTypeInfoMeta(a.frameWorkDsId,this.appConfig))&&a.dsMeta;if(!a)return b;"Features"===a.type?this.dsType="FRAMEWORK_FEATURES":"FeatureStatistics"===a.type&&(this.dsType="FRAMEWORK_STATISTICS");b.dataSchema=a.dataSchema;a=c.parseDataSourceId(a.id);b.layerId=a&&a.layerId}return b},
_tryGetLayerObject:function(a){var b=new e;if(!a)return b.resolve(),b;a=this._tryGetLayerInfo(a);if(!a)return console.error("Invalid data source"),b.resolve(),b;var c=a.getPopupInfo();a.getLayerObject().then(function(a){b.resolve({layerObject:a,popupInfo:c})}.bind(this),function(a){b.reject(a)});return b},_tryGetLayerForFrameWork:function(a,b){var d=new e;if(!a)return d.resolve(),d;var f=a;"FRAMEWORK_STATISTICS"===this._getDataSourceType(b)&&(f=c.mockLayerDefinitionForSTD(a));c.getLoadedLayer(f).then(function(a){d.resolve(a)}.bind(this),
function(a){d.reject(a)});return d},_tryGetLayerInfo:function(a){var b=this.layerInfosObj.getLayerInfoById(a);b||(b=this.layerInfosObj.getTableInfoById(a));return b},getLayerDefinitionByDataSource:function(a,b){var d=new e;if(!a)return console.error("Invalid data source"),d.resolve(),d;var f;if(a.layerId){b=this._tryGetLayerInfo(a.layerId);if(!b)return d.reject("Invalid data source"),d;f=b.getPopupInfo();this._getServiceDefinitionByLayerInfo(b).then(function(a){c.addAliasForLayerDefinition(a,f);d.resolve(a)}.bind(this),
function(a){d.reject(a)});return d}if(a.frameWorkDsId){b&&(b=this._tryGetLayerInfo(b))&&(f=b.getPopupInfo());b=null;a=(this.appConfig.dataSource&&this.appConfig.dataSource.dataSources)[a.frameWorkDsId];if("Features"===a.type)return b=k.clone(a.dataSchema),c.addAliasForLayerDefinition(b,f),d.resolve(b),d;if("FeatureStatistics"===a.type)return b={type:"Table",fields:[]},a=k.clone(a.dataSchema),b.fields=a.fields,a.groupByFields&&a.groupByFields[0]&&(b.groupByFields=k.clone(a.groupByFields)),c.addAliasForLayerDefinition(b,
f),d.resolve(b),d}},_getDataSourceType:function(a){if(a){if(a.layerId)return"CLIENT_FEATURES";if(a.frameWorkDsId&&(a=(a=c.getDsTypeInfoMeta(a.frameWorkDsId,this.appConfig))&&a.dsMeta)){if("Features"===a.type)return"FRAMEWORK_FEATURES";if("FeatureStatistics"===a.type)return"FRAMEWORK_STATISTICS"}}},_getServiceDefinitionByLayerInfo:function(b){var c=new e;b.getServiceDefinition().then(k.hitch(this,function(d){d?c.resolve(d):b.getLayerObject().then(function(b){b?(b=a.getFeatureLayerDefinition(b),c.resolve(b)):
c.resolve(null)},function(a){c.reject(a)})}));return c},getFeaturesByDataSource:function(a){var b=new e,c=null;if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===a.dataSourceType){a=a.layerId;if(!a)return b.resolve(),b;this._getFeaturesForMapDS(a).then(function(a){c=a.features;b.resolve(c)},function(a){b.reject(a)})}else{a=a.frameWorkDsId;if(!a)return b.resolve(),b;this.getFeaturesForFrameDS(a).then(function(a){c=a.features;b.resolve(c)},function(a){b.reject(a)})}return b},_cutFeaturesForSetting:function(a){a&&
1E3<a.length&&(a=a.slice(0,1E3));return a},_getFeaturesForMapDS:function(a){var b=new e,c=this._tryGetLayerInfo(a);if(!c)return b.reject("Can not get layerInfo by the layer id of this data source."),b;a=c.getUrl();var f=c.getFilter();if(!a)return console.warn("Invalid layer url of data source, use client features."),c.getLayerObject().then(function(a){b.resolve({features:a.graphics})}),b;c=new d;c.outSpatialReference=this.map.spatialReference;c.where=f||"1\x3d1";c.outFields=["*"];c.returnGeometry=
!1;return(new p(a)).execute(c)},getFeaturesForFrameDS:function(a){var b=new e;if(this.cacheData[a])return b.resolve(this.cacheData[a]),b;if("widget"===c.parseDataSourceId(a).from)return b.resolve({}),b;var d=this.dataSourceManager.getDataSourceConfig(a),d=k.clone(d);if(!d)return b.reject("Can not get vaild data source config by the frameWorkDsId of this data source."),b;d.filterByExtent=!1;this.dataSourceManager.doQuery(d).then(function(c){this.cacheData[a]=c;b.resolve(c)}.bind(this),function(a){b.reject(a)});
return b}})})},"widgets/Infographic/a11y/widget":function(){define(["dojo/keys","jimu/utils"],function(n,e){return{_onRuntimeSettingIconKeydown:function(e){e.keyCode===n.ENTER&&this._onRuntimeSettingIconClicked(e)},_initDomNodeAsLastNode:function(){e.initLastFocusNode(this.domNode,this.domNode)}}})},"widgets/Infographic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Infographic/dijits/ChartDijit.html":'\x3cdiv style\x3d"width:100%;height:100%;"\x3e\r\n    \x3cdiv style\x3d"display: none;" data-dojo-attach-point\x3d"yAxisName" class\x3d"y-axis-name rotate"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"chart-dijit" style\x3d"width:100%;height:100%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noDataDiv" class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"overlap" class\x3d"over-lay hide"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"chart-dom" data-dojo-attach-point\x3d"chartDomNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/_ChartSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"legendSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.legend}"\x3e${nls.legend}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"legendToggle" tabindex\x3d"0" aria-label\x3d"${nls.legend}" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"legend" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"dataLabelsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.dataLabels}"\x3e${nls.dataLabels}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dataLabelsToggle" tabindex\x3d"0" aria-label\x3d"${nls.dataLabels}" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"dataLabels" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"horizontalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.horizontalAxis}"\x3e${nls.horizontalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"horizontalAxisToggle"  tabindex\x3d"0" aria-label\x3d"${nls.horizontalAxis}" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"horizontalAxis" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"verticalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.verticalAxis}"\x3e${nls.verticalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"verticalAxisToggle"  tabindex\x3d"0" aria-label\x3d"${nls.verticalAxis}"data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"verticalAxis" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n   \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"withoutRecordsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.showPeriodsWithoutRecords}"\x3e${nls.showPeriodsWithoutRecords}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"withoutRecordsToggle" tabindex\x3d"0" aria-label\x3d"${nls.showPeriodsWithoutRecords}" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"withoutRecords" role\x3d"button" aria-pressed\x3d"false"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/Infographic/Widget.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\t \x3cdiv data-dojo-attach-point\x3d"shelter" class\x3d"loading hide"\x3e\x3c/div\x3e\r\n\t \x3cdiv data-dojo-attach-point\x3d"virtualFocusNode" class\x3d"lastFocusNode screen-readers-only" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Infographic/css/style.css":'@font-face {font-family: \'icomoon\'; src: url("fonts/icomoon.eot?oflavm"); src: url("fonts/icomoon.eot?oflavm#iefix") format(\'embedded-opentype\'), url("fonts/icomoon.ttf?oflavm") format(\'truetype\'), url("fonts/icomoon.woff?oflavm") format(\'woff\'), url("fonts/icomoon.svg?oflavm#icomoon") format(\'svg\'); font-weight: normal; font-style: normal;}.jimu-widget-infographic .indicator-icon,.jimu-widget-infographic-setting .indicator-icon {font-family: \'icomoon\' !important; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}.jimu-widget-infographic .loading {position: absolute; overflow: hidden; bottom: 4px; right: 0; width: 17px; height: 17px; z-index: 101;}.jimu-rtl .jimu-widget-infographic .loading {left: 2px; right: auto;}.jimu-widget-infographic .loading {font-size: 10px; text-indent: -9999em; border-top: 3px solid rgba(219, 206, 206, 0.7); border-right: 3px solid rgba(219, 206, 206, 0.7); border-bottom: 3px solid rgba(219, 206, 206, 0.7); border-left: 3px solid #ffffff; -webkit-transform: translateZ(0); -ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2); border-radius: 8px;}.jimu-widget-infographic .loading:after {border-radius: 50%; width: 24px; height: 24px;}.jimu-widget-infographic .hide {display: none !important;}.icon-like:before {content: "\\e900";}.icon-unlike:before {content: "\\e904";}.icon-stop:before {content: "\\e902";}.icon-danger:before {content: "\\e901";}.icon-star:before {content: "\\e903";}.icon-alarm:before {content: "\\e906";}.icon-down:before {content: "\\e909";}.icon-right:before {content: "\\e90f";}.icon-up:before {content: "\\e911";}.icon-wrong:before {content: "\\e912";}.lm_goldenlayout .lm_item .lm_content {position: relative;}.lm_goldenlayout .lm_item .lm_content .table-layout-container {display: table; table-layout: fixed; overflow: hidden; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .table-layout-container \x3e div {padding: 10px 15px;}.lm_goldenlayout .lm_item .lm_content .image-node {display: table-cell; overflow: hidden; position: relative; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .no-trim {white-space: pre-wrap;}.infographic-number-dijit {display: flex; justify-content: center; align-items: center;}.infographic-number-dijit .number-content .value-content {white-space: nowrap;}.infographic-number-dijit a,.infographic-number-dijit a:hover,.infographic-number-dijit a:visited,.infographic-number-dijit a:link,.infographic-number-dijit a:active {text-decoration: none;}.infographic-number-dijit.horizontal-left {justify-content: flex-start;}.infographic-number-dijit.horizontal-center {justify-content: center;}.infographic-number-dijit.horizontal-right {justify-content: flex-end;}.infographic-number-dijit.vertical-top {align-items: flex-start;}.infographic-number-dijit.vertical-middle {align-items: center;}.infographic-number-dijit.vertical-bottom {align-items: flex-end;}.infographic-number-dijit .number-content {display: flex; justify-content: center; max-width: 340px;}.infographic-number-dijit .number {display: flex; justify-content: space-between; align-items: baseline;}.infographic-number-dijit .indicator-icon {font-size: 22px; align-self: center; text-align: center;}.infographic-number-dijit .number .prefix {margin-right: 6px;}.infographic-number-dijit .number .suffix {margin-left: 6px;}.infographic-number-dijit .rightImgDiv {width: 35%; height: 100%; text-align: left;}.jimu-widget-infographic .infographic-number-dijit,.jimu-widget-infographic .infographic-chart-dijit,.jimu-widget-infographic .infographic-gauge-dijit {position: relative;}.infographic-chart-dijit .over-lay.hide {display: none !important;}.infographic-chart-dijit .over-lay {display: block; z-index: 99; position: absolute; left: 0; top: 0; height: 100%; width: 100%;}.infographic-number-dijit .no-data-tip,.infographic-chart-dijit .no-data-tip,.infographic-gauge-dijit .no-data-tip {display: none; position: absolute; left: 0; right: 0; height: 30px; top: calc(50% - 10px); text-align: center; color: #666;}.infographic-number-dijit.no-data .no-data-tip,.infographic-chart-dijit.no-data .no-data-tip,.infographic-gauge-dijit.no-data .no-data-tip {display: block; margin: 0 10px;}.infographic-number-dijit.no-data .chart-dom,.infographic-chart-dijit.no-data .chart-dom,.infographic-gauge-dijit.no-data .gauge-dom {visibility: hidden;}.infographic-number-dijit .chart-dom,.infographic-chart-dijit .chart-dom,.infographic-gauge-dijit .gauge-dom {visibility: visible; width: 100%; height: 100%;}.infographic-chart-dijit {display: flex;}.infographic-chart-dijit .y-axis-name {width: 30px; height: 100%; flex: 0 1 auto; justify-content: center; align-items: center; display: flex; white-space: nowrap; font-family: sans-serif; font-size: 12px;}.infographic-chart-dijit .y-axis-name.rotate {transform: rotate(-90deg); -webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg); -ms-transform: rotate(-90deg); -o-transform: rotate(-90deg); filter: progid:DXImageTransform.Microsoft.BasicImage(rotation\x3d3);}.infographic-chart-dijit .chart-dijit {width: calc(100% - 30px); height: 100%; flex: 1 1 auto;}.jimu-widget-infographic *:focus {outline-offset: -2px !important;}.ie-gte-10 .infographic-text-dijit:focus {width: 99%!important; height: 95%!important; margin: 1px!important;}.jimu-widget-infographic {position: relative; width: 100%; height: 100%;}.jimu-widget-infographic .chart-setting {position: absolute; top: 0; right: 0; cursor: pointer; width: 16px; height: 16px; background: no-repeat center center url(images/chart-setting.svg); z-index: 1;}.jimu-rtl .jimu-widget-infographic .chart-setting {left: 0; right: auto;}.ig-chart-setting-dlg .jimu-leading-margin10 {margin-left: 10px; margin-right: 0;}.jimu-rtl .ig-chart-setting-dlg .jimu-leading-margin10 {margin-right: 10px; margin-left: 0;}.ig-chart-setting-dlg .textOverFlow {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.ig-chart-setting-dlg .flex {display: flex; justify-content: space-between; margin-top: 8px;}.ig-chart-setting-dlg .label {width: 120px;}.ig-chart-setting-dlg .toggle {width: 38px; height: 18px; cursor: pointer;}.ig-chart-setting-dlg .toggle.toggle-on {background: no-repeat center left url(./images/toggle_on_light.svg);}.ig-chart-setting-dlg .toggle.toggle-off {background: no-repeat center left url(./images/toggle_off_light.svg);}',
"*now":function(n){n(['dojo/i18n!*preload*widgets/Infographic/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/query dojo/on dojo/Deferred dijit/_WidgetsInTemplateMixin dijit/popup dijit/TooltipDialog jimu/BaseWidget jimu/dijit/GridLayout jimu/LayerInfos/LayerInfos jimu/utils ./DijitFactory jimu/DataSourceManager ./dijits/SourceLauncher ./dijits/ExtraSourceLauncher ./_ChartSetting ./IGUtils ./utils dijit/focus ./a11y/widget xstyle/css!../../libs/goldenlayout/goldenlayout-base.css".split(" "),function(n,e,k,l,d,p,h,b,a,c,f,g,m,
q,v,w,t,u,r,z,x,y,A){n=n([f,b],{name:"Infographic",baseClass:"jimu-widget-infographic",dijits:null,clientFeaturesHandle:null,layerInfosObj:null,dataSource:null,mainDijit:null,mainDijitJson:null,mainDijitVisible:!1,postMixInProperties:function(){this.inherited(arguments);e.mixin(this.nls,window.jimuNls.statisticsChart);this.layerInfosObj=m.getInstanceSync();this._loadingTypes={}},postCreate:function(){this.inherited(arguments);this.upgradeConfig(this.config);this._initGolbalInfo();this._listenDSManagerUpdateEvent();
this._initDijitFactory();this._initSettingIconEvent();this.initForA11yBeforeStartup()},upgradeConfig:function(a){a&&a.dijits&&(a=a.dijits.filter(function(a){return"image"===a.type})[0])&&a.config&&!a.config.alt&&(a.config.alt=window.jimuNls.common.image)},startup:function(){this.inherited(arguments);this._renderByConfig(this.config);this.mainDijit=this._getMainDijit();this._createRuntimeSettingIocn(this.config);this._checkDataSource(this.config);this.mainDijitVisible&&this._avalidDataSource&&(this._processdsdef=
this._preprocessingDataSource())},_listenDSManagerUpdateEvent:function(){this.exdsBeginUpdateHandle=p(this.dataSourceManager,"begin-update",e.hitch(this,function(a){this._handleLoadingStatusForExds(a,!0)}))},_checkDataSource:function(a){a=this._checkDataSourceCode(a&&a.dataSource);this._avalidDataSource=0===a.code;!this._avalidDataSource&&this.mainDijit&&this.mainDijit.showNodata(a.message)},onOpen:function(){this.removeRootNodeRole();this._processdsdef?this._processDataSource():this._onOpenTriger()},
_onOpenTriger:function(){this.mainDijitVisible&&this._avalidDataSource&&this._isDOMInitialized().then(function(){clearInterval(this.domReadyInterval);this._initSourceLaunchers();this.initForA11y();this.resize()}.bind(this))},initForA11y:function(){if(!this.hasInitedForA11y){var a=d(".has-link",this.domNode);a&&a.length?q.initLastFocusNode(this.domNode,a[a.length-1]):this.runtimeSettingIcon?q.initLastFocusNode(this.domNode,this.runtimeSettingIcon):this._initDomNodeAsLastNode();this.virtualFocusNode&&
(l.destroy(this.virtualFocusNode),this.virtualFocusNode=null);this.hasInitedForA11y=!0}},removeRootNodeRole:function(){this.domNode&&this.domNode.removeAttribute("role")},initForA11yBeforeStartup:function(){if(!this.domNode.hasAttribute("aria-label")){var a=this.getTextDijitConfigText();a&&l.setAttr(this.domNode,"aria-label",a)}},_onMainValueUpdate:function(a){if(this.mainDijit&&this._shouldUpdateValue(a,"MAIN")){if("gauge"===this.mainDijit.type&&(a=this._spellGaugeValueObj(),!this._isGaugeValueObjValid(a)))return;
this.mainDijit.onDataSourceDataUpdate(a);this.mainDijit.startRendering()}},_onRangeValueUpdate:function(a,b){this._shouldUpdateValue(a,b?"RANGE1":"RANGE2")&&(a=this._spellGaugeValueObj(),this._isGaugeValueObjValid(a)&&(this.mainDijit.onDataSourceDataUpdate(a),this.mainDijit.startRendering()))},_processDataSource:function(){this.showLoading("process-ds");this._processdsdef.then(function(){this.hideLoading("process-ds");this._processdsdef=null;this._setDataSource();this._setLayerInfoToMainDijit();this._onOpenTriger()}.bind(this),
function(a){this.hideLoading("process-ds");this._processdsdef=null;console.error(a)}.bind(this))},_setDataSource:function(){var a=this.config&&this.config.dataSource;a&&this.dijits&&this.dijits.length&&this.dijits.forEach(function(b){b.setDataSource(a)})},_initSourceLaunchers:function(){if(this.config.dataSource){var a=this.mainDijitJson||this._getMainDijitJson();this.sourceLauncher?this.sourceLauncher.awake():(this._initSourceLauncher(),this.sourceLauncher.start());"gauge"===a.type&&this._initRangeSourceLauncher(a)}},
resize:function(){this.inherited(arguments);this.layout&&this.layout.resize();this.mainDijit&&this.mainDijit.resize&&this.mainDijit.resize()},onClose:function(){this.sourceLauncher&&this.sourceLauncher.sleep();this.rangeSourceLauncher1&&this.rangeSourceLauncher1.sleep();this.rangeSourceLauncher2&&this.rangeSourceLauncher2.sleep();this.runtimeSettingDialog&&this.runtimeSettingDialog.isShow&&(a.close(this.runtimeSettingDialog),this.runtimeSettingDialog.isShow=!1)},onDataSourceDataUpdate:function(a,
b){this._handleLoadingStatusForExds(a,!1);var c=this.config.dataSource,d=this.rangeDataSource1,e=this.rangeDataSource2;c&&a===c.frameWorkDsId&&this.sourceLauncher&&this.sourceLauncher.setAppConfigDSFeatures(b.features);d&&a===d.frameWorkDsId&&this.rangeSourceLauncher1&&this.rangeSourceLauncher1.setAppConfigDSFeatures(b.features);e&&a===e.frameWorkDsId&&this.rangeSourceLauncher2&&this.rangeSourceLauncher2.setAppConfigDSFeatures(b.features)},_handleLoadingStatusForExds:function(a,b){var c=this.config.dataSource,
d=this.rangeDataSource1,e=this.rangeDataSource2,d=d&&d.frameWorkDsId,e=e&&e.frameWorkDsId;if(a===(c&&c.frameWorkDsId)||a===d||a===e)b?this.showLoading(a):this.hideLoading(a)},destroy:function(){this.sourceLauncher&&this.sourceLauncher.destroy();this.rangeSourceLauncher1&&this.rangeSourceLauncher1.destroy();this.rangeSourceLauncher2&&this.rangeSourceLauncher2.destroy();this.runtimeSettingDialog&&(this.runtimeSettingDialog.destroy(),this.runtimeSettingDialog=null);this.exdsBeginUpdateHandle&&this.exdsBeginUpdateHandle.remove&&
(this.exdsBeginUpdateHandle.remove(),this.exdsBeginUpdateHandle=null);this._loadingTypes={};this.inherited(arguments)},_initGolbalInfo:function(){this.dataSourceManager=w.getInstance();this._features=[];this.featureLayerForFrameWork=this.popupInfo=this.layerObject=null;if(this.mainDijitJson=this._getMainDijitJson())this._initRangeValue(this.mainDijitJson),this._ininRangeDataSource(this.mainDijitJson),this.mainDijitVisible=this.mainDijitJson&&this.mainDijitJson.visible,this.dijits=[],this.igUtils=
new z({appConfig:this.appConfig,map:this.map})},_initDijitFactory:function(){v.setNls(this.nls);v.setMap(this.map);v.setInSettingPage(!1);v.setAppConfig(this.appConfig);v.setContext({folderUrl:this.folderUrl})},_initSettingIconEvent:function(){this.on("click",e.hitch(this,function(){this.runtimeSettingDialog&&a.close(this.runtimeSettingDialog)}))},_renderByConfig:function(a){a&&a.layout&&a.dijits&&(this._clearDijits(),this._createLayoutWithDijits(a))},_initRangeSourceLauncher:function(a){var b=this._initRangeData(a);
a=b.rst1;b=b.rst2;this.rangeSourceLauncher1?this.rangeSourceLauncher1.awake():a&&this.rangeDataSource1&&(this._initRangeLauncher(a,this.rangeDataSource1,!0),this.rangeSourceLauncher1.start());this.rangeSourceLauncher2?this.rangeSourceLauncher2.awake():b&&this.rangeDataSource2&&(this._initRangeLauncher(b,this.rangeDataSource2,!1),this.rangeSourceLauncher2.start())},showLoading:function(a){this._loadingTypes[a]=!0;this._showLoading()},hideLoading:function(a){this._loadingTypes[a]=!1;this._shouldHideLoading()&&
this._hideLoading()},_shouldHideLoading:function(){if(this._loadingTypes)return Object.keys(this._loadingTypes).map(function(a){return this._loadingTypes[a]}.bind(this)).every(function(a){return!a})},_showLoading:function(){l.hasClass(this.shelter,"hide")&&l.removeClass(this.shelter,"hide")},_hideLoading:function(){l.hasClass(this.shelter,"hide")||l.addClass(this.shelter,"hide")},_HandlingOutliers:function(a){if(this.mainDijit&&!x.isValidValue(a))return this.mainDijit.showNodata(),!0},_spellGaugeValueObj:function(){return{value:this.MAIN_VALUE,
ranges:[this.RANGE1_VALUE,this.RANGE2_VALUE]}},_isGaugeValueObjValid:function(a){var b=a&&a.ranges;if(!a||!b)return!1;var c=b[0],b=b[1];(a=x.isValidValue(a.value)&&x.isValidValue(c)&&x.isValidValue(b))||this.mainDijit.showNodata();return a},_checkDataSourceCode:function(a){var b=this.mainDijitJson;if(!b)return{};var c,d;a=x.checkDataSourceIsVaild(a,b,this.map,this.appConfig,"value");"gauge"===b.type&&(this.rangeDataSource1&&(c=x.checkDataSourceIsVaild(this.rangeDataSource1,b,this.map,this.appConfig,
"range1")),this.rangeDataSource2&&(d=x.checkDataSourceIsVaild(this.rangeDataSource2,b,this.map,this.appConfig,"range2")));var b=[a,c,d],e="";c=x.getCheckDataSourceResultCode(b);b.forEach(function(a){e+=this._getDSErrorString(a)}.bind(this));return{code:c,message:e}},_getDSErrorString:function(a){var b="";if(!a)return b;if(1===a.code||3===a.code)a.label===this._lastDataSourceLabel?b="":(b=this.nls.dataSource+" "+a.label+" "+this.nls.dsErrorTipSuf,this._lastDataSourceLabel=a.label);2===a.code&&(b=this.nls.fieldString+
" "+a.fields.join(",")+" "+this.nls.dsErrorTipSuf);return b},_clearDijits:function(){this.dijits&&this.dijits.length&&this.dijits.forEach(e.hitch(this,function(a){a.destroy()}));this.dijits=[]},_createLayoutWithDijits:function(a){var b=a.dijits;b&&b.length&&(b=b.map(function(a){var b=v.createDijit(a);this.dijits.push(b);return{id:a.id,dijit:b}},this),this.layout=new g({components:b,layoutDefinition:a.layout.definition,container:this.domNode,editable:!1}),this.layout.on("initialised",e.hitch(this,
function(){k.forEach(this.dijits,e.hitch(this,function(a){a.startup()}))})))},_getMainDijit:function(){if(this.dijits&&this.dijits.length){var a=null,b=["number","gauge","chart"];return a=this.dijits.filter(function(a){return-1<b.indexOf(a.type)})[0]}},_getMainDijitJson:function(){if(this.config&&this.config.dijits&&this.config.dijits.length){var a=null,b=["number","gauge","chart"];return a=this.config.dijits.filter(function(a){return-1<b.indexOf(a.type)})[0]}},getTextDijitConfigText:function(){if(this.config&&
this.config.dijits&&this.config.dijits.length){var a="";this.config.dijits.forEach(function(b){var c="";b.visible&&("text"===b.type?c=b.config&&b.config.text||"":"image"===b.type&&(c=b.config&&b.config.alt||""),a+=" "+c)});return a}},_initRangeValue:function(a){a&&"gauge"===a.type&&(a=x.getRangeFixedValue(a),this.RANGE1_VALUE=a.range1,this.RANGE2_VALUE=a.range2)},_ininRangeDataSource:function(a){a=x.getRangeDataSource(a);this.rangeDataSource1=a.range1;this.rangeDataSource2=a.range2},_setLayerInfoToMainDijit:function(){this.mainDijit&&
this.mainDijit.setLayerInfo(this.layerObject,this.featureLayerForFrameWork,this.popupInfo)},_createRuntimeSettingIocn:function(a){this.mainDijitVisible&&a.dijits&&a.dijits.length&&a.dijits.some(function(a){return a.visible&&"chart"===a.type},this)&&(this.runtimeSettingIcon=l.create("div",{tabindex:"0",role:"button",title:this.nls.setting,"class":"chart-setting"},this.domNode),this.own(p(this.runtimeSettingIcon,"click",e.hitch(this,this._onRuntimeSettingIconClicked))),this.own(p(this.runtimeSettingIcon,
"keydown",e.hitch(this,this._onRuntimeSettingIconKeydown))),this.runtimeSettingDialog=new c({content:this._createChartSettingContent(a)}),this.runtimeSettingDialog.isShow=!1)},_onRuntimeSettingIconClicked:function(b){this.runtimeSettingDialog.isShow?(a.close(this.runtimeSettingDialog),this.runtimeSettingDialog.isShow=!1,y.focus(this.runtimeSettingIcon)):(a.open({popup:this.runtimeSettingDialog,around:this.runtimeSettingIcon}),this.chartSetting&&this.chartSetting.focusFirst(),this.runtimeSettingDialog.isShow=
!0);b.stopPropagation()},_createChartSettingContent:function(b){var c=b.dijits.filter(function(a){return"chart"===a.type})[0];if(!c)return console.error("Unknow error"),"\x3cdiv\x3e\x3c/div\x3e";if(!c.config)return"\x3cdiv\x3e\x3c/div\x3e";this.chartSetting=new r({chartJson:c,chartDijit:this.dijits.filter(function(a){return a.jsonId===c.id})[0],nls:this.nls});this.own(p(this.chartSetting,"escape",function(){a.close(this.runtimeSettingDialog);this.runtimeSettingDialog.isShow=!1;y.focus(this.runtimeSettingIcon)}.bind(this)));
return this.chartSetting.domNode},_isDOMInitialized:function(){var a=new h;setTimeout(function(){this.domReadyInterval=setInterval(function(){var b=this.mainDijit&&this.mainDijit.domNode;b&&(b=l.getMarginBox(b),b.w&&b.h&&a.resolve())}.bind(this),200)}.bind(this),200);return a},_initSourceLauncher:function(){var a=this.config.dataSource;if(a){var b=this._getMainDijitJson();if(b&&b.config){var c=null,c="chart"===b.type?x.getStatisticForChart(b.config.data):x.getStatisticForGauge(b.config).value;this.sourceLauncher=
"DATA_SOURCE_FROM_FRAMEWORK"===a.dataSourceType?new u({appConfig:this.appConfig,dataSource:a,statistic:c,returnFeatures:"chart"===b.type,formatResult:!1}):new t({layerObject:this.layerObject,map:this.map,appConfig:this.appConfig,useSelection:a.useSelection,filterByExtent:a.filterByExtent,dataSource:a,config:b.config,statistic:c,returnFeatures:"chart"===b.type});this._listenSourceLauncherEvent()}}},_initRangeData:function(a){if("gauge"===a.type&&a&&a.config)return a=x.getStatisticForGauge(a.config),
{rst1:a.range1,rst2:a.range2}},_initRangeLauncher:function(a,b,c){c?a&&(this.rangeSourceLauncher1=new u({appConfig:this.appConfig,dataSource:b,statistic:a,returnFeatures:!1,formatResult:!0}),this._listenRangeLauncherEvent(this.rangeSourceLauncher1,!0)):a&&(this.rangeSourceLauncher2=new u({appConfig:this.appConfig,dataSource:b,statistic:a,returnFeatures:!1,formatResult:!0}),this._listenRangeLauncherEvent(this.rangeSourceLauncher2,!1))},_listenSourceLauncherEvent:function(){this.own(p(this.sourceLauncher,
"data-update",e.hitch(this,function(a){this._onMainValueUpdate(a)})));this.own(p(this.sourceLauncher,"loading",e.hitch(this,function(a){this.showLoading(a)})));this.own(p(this.sourceLauncher,"unloading",e.hitch(this,function(a){this.hideLoading(a)})));this.own(p(this.sourceLauncher,"failed",e.hitch(this,function(){this._HandlingOutliers()})));this.own(p(this.sourceLauncher,"start",e.hitch(this,function(){this._onMainSourceLauncherStart()})));this.own(p(this.sourceLauncher,"done",e.hitch(this,function(){this._onMainSourceLauncherDone()})))},
_onMainSourceLauncherStart:function(){if(this.mainDijit&&"function"===typeof this.mainDijit.onUpdateDataStart)this.mainDijit.onUpdateDataStart()},_onMainSourceLauncherDone:function(){if(this.mainDijit&&"function"===typeof this.mainDijit.onUpdateDataDone)this.mainDijit.onUpdateDataDone()},_listenRangeLauncherEvent:function(a,b){a&&this.own(p(a,"data-update",e.hitch(this,function(a){this._onRangeValueUpdate(a,b)})))},_isDifferentValues:function(a,b){var c=!0,d=this[b+"_VALUE"];if(a&&"undefined"!==typeof a.hasStatisticsed){var e=
null,f=null;a.features&&(e=a.features.map(function(a){return a.attributes}));d&&d.features&&(f=d.features.map(function(a){return a.attributes}));q.isEqual(f,e)&&(c=!1)}else c=a!==d;c&&(this[b+"_VALUE"]=a);return c},_shouldUpdateValue:function(a,b){b=this._isDifferentValues(a,b);a=this._HandlingOutliers(a);return b&&!a},_preprocessingDataSource:function(){var a=this.config&&this.config.dataSource,b=new h;return a?this.igUtils.preprocessingDataSource(a).then(function(a){this.layerObject=a&&a.layerObject;
this.popupInfo=a&&a.popupInfo;this.featureLayerForFrameWork=a&&a.featureLayerForFrameWork}.bind(this)):(b.reject("Empty data source"),b)}});n.extend(A);return n});