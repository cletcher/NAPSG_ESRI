// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query jimu/BaseWidgetSetting".split(" "),function(d,f,c,g,h,b,k){return d([k],{baseClass:"jimu-widget-dsc-setting",postCreate:function(){this.setConfig(this.config)},_createDataSourceNodes:function(){var b=this.appConfig.dataSource.dataSources;g.forEach(Object.keys(b),function(a){var e=c.create("div",{"class":"ds "+(a===this.config.dataSourceId?"selected":""),"data-ds-id":a,innerHTML:b[a].label},this.dataSourceListNode);
this.own(h(e,"click",f.hitch(this,this._onDataSourceClick,a)))},this)},_onDataSourceClick:function(d,a){b(".ds",this.domNode).removeClass("selected");c.addClass(a.target,"selected");c.empty(this.fieldListNode);var e=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];g.filter(this.appConfig.dataSource.dataSources[d].dataSchema.fields,function(a){-1<e.indexOf(a.type)&&(a=c.create("div",{"class":"field "+(a.name===this.config.summaryField?"selected":""),
"data-field-name":a.name,innerHTML:a.alias},this.fieldListNode),this.own(h(a,"click",f.hitch(this,function(a){b(".field",this.domNode).removeClass("selected");c.addClass(a.target,"selected")}))))},this)},setConfig:function(){this._createDataSourceNodes()},getConfig:function(){if(0===b(".ds.selected").length||0===b(".field.selected").length)alert("Please select.");else return{dataSourceId:c.attr(b(".ds.selected")[0],"data-ds-id"),summaryField:c.attr(b(".field.selected")[0],"data-field-name")}}})});