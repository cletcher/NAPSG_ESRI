// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Draw/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Draw/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:auto;"\x3e\r\n  \x3cdiv class\x3d"tip" style\x3d"margin-bottom:10px;"\x3e${nls.defineUnits}\x3c/div\x3e\r\n\t\x3cdiv class\x3d"query-setting-content" data-dojo-attach-point\x3d"content"\x3e\r\n\t\t\x3cdiv class\x3d"location-section" data-dojo-attach-point\x3d"locationTabNode" onselectstart\x3d"return false;"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-with-icon"  data-dojo-attach-point\x3d"btnAddLocation"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-add" data-dojo-attach-point\x3d"btnAddLocationIcon"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addLocation}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"locationTableDiv"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"distance-section" data-dojo-attach-point\x3d"distanceTabNode" onselectstart\x3d"return false;"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-with-icon"  data-dojo-attach-point\x3d"btnAddDistance"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-add" data-dojo-attach-point\x3d"btnAddDistanceIcon"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addDistance}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"distanceTableDiv"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"output-section" data-dojo-attach-point\x3d"areaTabNode" onselectstart\x3d"return false;"\x3e\r\n\t\t\t\x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"btnAddArea"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-add" data-dojo-attach-point\x3d"btnAddAreaIcon"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"add-label"\x3e${nls.addArea}\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"areaTableDiv"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Draw/setting/css/style.css":".jimu-widget-draw-setting .add-with-icon{margin-top:8px; margin-bottom:3px;}.jimu-widget-draw-setting .jimu-tab{position: static;}.jimu-widget-draw-setting .jimu-tab\x3e.jimu-viewstack{position: static; top: auto; left: auto; right: auto; bottom: auto; height: auto;}.jimu-widget-draw-setting .jimu-viewstack\x3e.view{height: auto;}.jimu-widget-draw-setting .tip{color: #000; font-size: 14px;}.jimu-widget-draw-setting .add-with-icon.jimu-state-disabled{color: #ccc; cursor: default;}.jimu-widget-draw-setting .jimu-simple-table .simple-table-cell.empty-text-td {line-height: 20px;}.jimu-widget-draw-setting .jimu-simple-table .simple-table-cell .normal-text-div{color: #000;}.claro .jimu-widget-draw-setting .dijitSelectLabel,.claro .jimu-widget-draw-setting .dijitTextBox .dijitInputInner,.claro .jimu-widget-draw-setting .dijitValidationTextBox .dijitValidationContainer{max-height: 21px;}.jimu-widget-draw-setting .jimu-simple-table .simple-table-cell{font-size: 14px; padding-right: 3px;}.jimu-widget-draw-setting .jimu-simple-table .simple-table-field:first-child,.jimu-widget-draw-setting .jimu-simple-table .simple-table-cell:first-child{width: 265px;}",
"*now":function(l){l(['dojo/i18n!*preload*widgets/Draw/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/query dojo/on dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/dijit/TabContainer jimu/utils dijit/form/Select jimu/dijit/CheckBox jimu/dijit/SimpleTable".split(" "),function(l,c,d,e,m,k,r,t,u,h,n,v,p){return l([t,r],{baseClass:"jimu-widget-draw-setting",locationUnits:null,distanceUnits:null,areaUnits:null,_disabledClass:"jimu-state-disabled",postMixInProperties:function(){this.inherited(arguments);this.jimuNls=
window.jimuNls;this.locationUnits=[{value:"DEGREES",label:this.jimuNls.units.degrees,abbr:this.jimuNls.units.degreesAbbr||"dd",format:"YN XE"},{value:"DEGREE-MINUTE-SECOND",label:this.jimuNls.units.degreeMS,abbr:this.jimuNls.units.degreeMSAbbr||"dms",format:"A\u00b0B'C\"N X\u00b0Y'Z\"E"}];this.distanceUnits=[{value:"KILOMETERS",label:this.nls.kilometers,abbr:this.nls.kilometersAbbreviation||"km",conversion:h.localizeNumber(.001,{places:3})},{value:"MILES",label:this.nls.miles,abbr:this.nls.milesAbbreviation||
"mi",conversion:h.localizeNumber(6.21E-4,{places:6})},{value:"METERS",label:this.nls.meters,abbr:this.nls.metersAbbreviation||"m",conversion:h.localizeNumber(1)},{value:"FEET",label:this.nls.feet,abbr:this.nls.feetAbbreviation||"ft",conversion:h.localizeNumber(3.2808,{places:4})},{value:"YARDS",label:this.nls.yards,abbr:this.nls.yardsAbbreviation||"yd",conversion:h.localizeNumber(1.0936133,{places:7})},{value:"NAUTICAL_MILES",label:this.nls.nauticalmiles,abbr:this.nls.nauticalmilesAbbreviation||"nm",
conversion:h.localizeNumber(5.39956803455,{places:9})+"e-4"}];this.areaUnits=[{value:"SQUARE_KILOMETERS",label:this.nls.squareKilometers,abbr:this.nls.squareKilometersAbbreviation||"sq km",conversion:h.localizeNumber(1E-6,{places:6})},{value:"SQUARE_MILES",label:this.nls.squareMiles,abbr:this.nls.squareMilesAbbreviation||"sq mi",conversion:h.localizeNumber(3.861021,{places:6})+"e-7"},{value:"ACRES",label:this.nls.acres,abbr:this.nls.acresAbbreviation||"ac",conversion:h.localizeNumber(2.4710538147E-4,
{places:14})},{value:"HECTARES",label:this.nls.hectares,abbr:this.nls.hectaresAbbreviation||"ha",conversion:h.localizeNumber(1E-4,{places:4})},{value:"SQUARE_METERS",label:this.nls.squareMeters,abbr:this.nls.squareMetersAbbreviation||"sq m",conversion:h.localizeNumber(1)},{value:"SQUARE_FEET",label:this.nls.squareFeet,abbr:this.nls.squareFeetAbbreviation||"sq ft",conversion:h.localizeNumber(10.763910417,{places:9})},{value:"SQUARE_YARDS",label:this.nls.squareYards,abbr:this.nls.squareYardsAbbreviation||
"sq yd",conversion:h.localizeNumber(1.19599005,{places:8})}]},postCreate:function(){this.inherited(arguments);this.locationTable=new p({fields:[{name:"label",title:this.nls.label,"class":"label",type:"empty"},{name:"abbr",title:this.nls.abbr,"class":"abbr",type:"text",editable:!1},{name:"format",title:this.jimuNls.common.format,"class":"format",type:"text",editable:!1},{name:"actions",title:this.nls.actions,"class":"actions",type:"actions",actions:["up","down","delete"]}]});this.locationTable.placeAt(this.locationTableDiv);
this.distanceTable=new p({fields:[{name:"label",title:this.nls.label,"class":"label",type:"empty"},{name:"abbr",title:this.nls.abbr,"class":"abbr",type:"text",editable:!1},{name:"conversion",title:this.nls.conversion,"class":"conversion",type:"text",editable:!1},{name:"actions",title:this.nls.actions,"class":"actions",type:"actions",actions:["up","down","delete"]}]});this.distanceTable.placeAt(this.distanceTableDiv);this.areaTable=new p({fields:[{name:"label",title:this.nls.label,"class":"label",
type:"empty"},{name:"abbr",title:this.nls.abbr,"class":"abbr",type:"text",editable:!1},{name:"conversion",title:this.nls.conversion,"class":"conversion",type:"text",editable:!1},{name:"actions",title:this.nls.actions,"class":"actions",type:"actions",actions:["up","down","delete"]}]});this.areaTable.placeAt(this.areaTableDiv);this.cbxOperationalLayer=new v({label:this.nls.operationalLayer,style:"margin-top:10px;"});e.addClass(this.cbxOperationalLayer.domNode,"tip");this.cbxOperationalLayer.placeAt(this.domNode);
this.own(k(this.btnAddLocation,"click",c.hitch(this,this._addLocation)));this.own(k(this.btnAddDistance,"click",c.hitch(this,this._addDistance)));this.own(k(this.btnAddArea,"click",c.hitch(this,this._addArea)));this.own(k(this.locationTable,"row-delete",c.hitch(this,function(a){a.select&&(a.select.destroy(),delete a.select);this._resetLocationSelectOptions();this._checkStatusForBtnAddLocation()})));this.own(k(this.distanceTable,"row-delete",c.hitch(this,function(a){a.select&&(a.select.destroy(),delete a.select);
this._resetDistanceSelectOptions();this._checkStatusForBtnAddDistance()})));this.own(k(this.areaTable,"row-delete",c.hitch(this,function(a){a.select&&(a.select.destroy(),delete a.select);this._resetAreaSelectOptions();this._checkStatusForBtnAddArea()})));this.setConfig(this.config)},startup:function(){this.inherited(arguments);this.tabContainer=new u({tabs:[{title:this.nls.location,content:this.locationTabNode},{title:this.nls.distance,content:this.distanceTabNode},{title:this.nls.area,content:this.areaTabNode}],
isNested:!0},this.content);this.tabContainer.startup()},setConfig:function(a){a.isOperationalLayer=!!a.isOperationalLayer;this.config=a;if(!this.config.locationUnits){var b=[],g;for(g in this.locationUnits){var c=this.locationUnits[g];b.push({unit:c.value,addr:c.abbr,format:c.format})}this.config.locationUnits=b}this._setLocationTable(this.config.locationUnits);this._setDistanceTable(this.config.distanceUnits);this._setAreaTable(this.config.areaUnits);this.cbxOperationalLayer.setValue(a.isOperationalLayer)},
_setLocationTable:function(a){this.locationTable.clear();d.forEach(a,c.hitch(this,function(a){var b=this._getLocationUnitInfo(a.unit);b&&(b.abbr=a.abbr,this._addLocationUnitRow(b))}))},_setDistanceTable:function(a){this.distanceTable.clear();d.forEach(a,c.hitch(this,function(a){var b=this._getDistanceUnitInfo(a.unit);b&&(b.abbr=a.abbr,this._addDistanceUnitRow(b))}))},_setAreaTable:function(a){this.areaTable.clear();d.forEach(a,c.hitch(this,function(a){var b=this._getAreaUnitInfo(a.unit);b&&(b.abbr=
a.abbr,this._addAreaUnitRow(b))}))},getConfig:function(){var a={locationUnits:[],distanceUnits:[],areaUnits:[],isOperationalLayer:!1};a.locationUnits=this._getLocationConfig();a.distanceUnits=this._getDistanceConfig();a.areaUnits=this._getAreaConfig();a.isOperationalLayer=this.cbxOperationalLayer.getValue();return a},_getLocationConfig:function(){var a=[],a=this.locationTable.getRows();return a=d.map(a,c.hitch(this,function(a){var b=this.locationTable.getRowData(a);return{unit:a.select.get("value"),
abbr:b.abbr,format:b.format}}))},_getDistanceConfig:function(){var a=[],a=this.distanceTable.getRows();return a=d.map(a,c.hitch(this,function(a){var b=this.distanceTable.getRowData(a);return{unit:a.select.get("value"),abbr:b.abbr}}))},_getAreaConfig:function(){var a=[],a=this.areaTable.getRows();return a=d.map(a,c.hitch(this,function(a){var b=this.areaTable.getRowData(a);return{unit:a.select.get("value"),abbr:b.abbr}}))},_getAllLocationUnitValues:function(){return d.map(this.locationUnits,c.hitch(this,
function(a){return a.value}))},_getUsedLocationUnitValues:function(){var a=this.locationTable.getRows();return d.map(a,c.hitch(this,function(a){return a.select.get("value")}))},_getNotUsedLocationUnitValues:function(){var a=this._getAllLocationUnitValues(),b=this._getUsedLocationUnitValues();return d.filter(a,c.hitch(this,function(a){return 0>d.indexOf(b,a)}))},_getLocationUnitInfo:function(a){var b=null,g=d.filter(this.locationUnits,c.hitch(this,function(b){return b.value===a}));0<g.length&&(b=c.mixin({},
g[0]));return b},_addLocation:function(){var a=this._getNotUsedLocationUnitValues();0!==a.length&&(a=this._getLocationUnitInfo(a[0]),this._addLocationUnitRow(a))},_checkStatusForBtnAddLocation:function(){0===this._getNotUsedLocationUnitValues().length?(e.addClass(this.btnAddLocation,this._disabledClass),e.addClass(this.btnAddLocationIcon,this._disabledClass)):(e.removeClass(this.btnAddLocation,this._disabledClass),e.removeClass(this.btnAddLocationIcon,this._disabledClass))},_addLocationUnitRow:function(a){var b=
this.locationTable.addRow({abbr:a.abbr,format:a.format});if(b.success&&b.tr){var b=b.tr,d=m(".simple-table-cell",b)[0];e.setStyle(d,"verticalAlign","middle");var f=new n({style:"width:100%;height:18px;line-height:18px;"});f.placeAt(d);f.startup();f.addOption({value:a.value,label:a.label,selected:!0});this.own(k(f,"change",c.hitch(this,this._resetLocationSelectOptions)));b.select=f}this._resetLocationSelectOptions();this._checkStatusForBtnAddLocation()},_showCorrectLocationInfoBySelectedOption:function(a){var b=
this._getLocationUnitInfo(a.select.value);this.locationTable.editRow(a,{abbr:b.abbr,format:b.format})},_resetLocationSelectOptions:function(){var a=this.locationTable.getRows(),b=d.map(a,c.hitch(this,function(a){return a.select})),g=this._getNotUsedLocationUnitValues(),f=d.map(g,c.hitch(this,function(a){return this._getLocationUnitInfo(a)}));d.forEach(b,c.hitch(this,function(b,g){var q=b.get("value"),e=d.filter(b.getOptions(),c.hitch(this,function(a){return a.value!==q}));b.removeOption(e);d.forEach(f,
c.hitch(this,function(a){b.addOption({value:a.value,label:a.label})}));b.set("value",q);this._showCorrectLocationInfoBySelectedOption(a[g])}))},_getAllDistanceUnitValues:function(){return d.map(this.distanceUnits,c.hitch(this,function(a){return a.value}))},_getUsedDistanceUnitValues:function(){var a=this.distanceTable.getRows();return d.map(a,c.hitch(this,function(a){return a.select.get("value")}))},_getNotUsedDistanceUnitValues:function(){var a=this._getAllDistanceUnitValues(),b=this._getUsedDistanceUnitValues();
return d.filter(a,c.hitch(this,function(a){return 0>d.indexOf(b,a)}))},_getDistanceUnitInfo:function(a){var b=null,g=d.filter(this.distanceUnits,c.hitch(this,function(b){return b.value===a}));0<g.length&&(b=c.mixin({},g[0]));return b},_addDistance:function(){var a=this._getNotUsedDistanceUnitValues();0!==a.length&&(a=this._getDistanceUnitInfo(a[0]),this._addDistanceUnitRow(a))},_checkStatusForBtnAddDistance:function(){0===this._getNotUsedDistanceUnitValues().length?(e.addClass(this.btnAddDistance,
this._disabledClass),e.addClass(this.btnAddDistanceIcon,this._disabledClass)):(e.removeClass(this.btnAddDistance,this._disabledClass),e.removeClass(this.btnAddDistanceIcon,this._disabledClass))},_addDistanceUnitRow:function(a){var b=this.distanceTable.addRow({abbr:a.abbr,conversion:a.conversion});if(b.success&&b.tr){var b=b.tr,d=m(".simple-table-cell",b)[0];e.setStyle(d,"verticalAlign","middle");var f=new n({style:"width:100%;height:18px;line-height:18px;"});f.placeAt(d);f.startup();f.addOption({value:a.value,
label:a.label,selected:!0});this.own(k(f,"change",c.hitch(this,this._resetDistanceSelectOptions)));b.select=f}this._resetDistanceSelectOptions();this._checkStatusForBtnAddDistance()},_showCorrectDistanceInfoBySelectedOption:function(a){var b=this._getDistanceUnitInfo(a.select.value);this.distanceTable.editRow(a,{abbr:b.abbr,conversion:b.conversion})},_resetDistanceSelectOptions:function(){var a=this.distanceTable.getRows(),b=d.map(a,c.hitch(this,function(a){return a.select})),g=this._getNotUsedDistanceUnitValues(),
f=d.map(g,c.hitch(this,function(a){return this._getDistanceUnitInfo(a)}));d.forEach(b,c.hitch(this,function(b,g){var e=b.get("value"),h=d.filter(b.getOptions(),c.hitch(this,function(a){return a.value!==e}));b.removeOption(h);d.forEach(f,c.hitch(this,function(a){b.addOption({value:a.value,label:a.label})}));b.set("value",e);this._showCorrectDistanceInfoBySelectedOption(a[g])}))},_getAllAreaUnitValues:function(){return d.map(this.areaUnits,c.hitch(this,function(a){return a.value}))},_getUsedAreaUnitValues:function(){var a=
this.areaTable.getRows();return d.map(a,c.hitch(this,function(a){return a.select.get("value")}))},_getNotUsedAreaUnitValues:function(){var a=this._getAllAreaUnitValues(),b=this._getUsedAreaUnitValues();return d.filter(a,c.hitch(this,function(a){return 0>d.indexOf(b,a)}))},_getAreaUnitInfo:function(a){var b=null,g=d.filter(this.areaUnits,c.hitch(this,function(b){return b.value===a}));0<g.length&&(b=c.mixin({},g[0]));return b},_addArea:function(){var a=this._getNotUsedAreaUnitValues();0!==a.length&&
(a=this._getAreaUnitInfo(a[0]),this._addAreaUnitRow(a))},_checkStatusForBtnAddArea:function(){0===this._getNotUsedAreaUnitValues().length?(e.addClass(this.btnAddArea,this._disabledClass),e.addClass(this.btnAddAreaIcon,this._disabledClass)):(e.removeClass(this.btnAddArea,this._disabledClass),e.removeClass(this.btnAddAreaIcon,this._disabledClass))},_addAreaUnitRow:function(a){var b=this.areaTable.addRow({abbr:a.abbr,conversion:a.conversion});if(b.success&&b.tr){var b=b.tr,d=m(".simple-table-cell",b)[0];
e.setStyle(d,"verticalAlign","middle");var f=new n({style:"width:100%;height:18px;line-height:18px;"});f.placeAt(d);f.startup();f.addOption({value:a.value,label:a.label,selected:!0});this.own(k(f,"change",c.hitch(this,this._resetAreaSelectOptions)));b.select=f}this._resetAreaSelectOptions();this._checkStatusForBtnAddArea()},_showCorrectAreaInfoBySelectedOption:function(a){var b=this._getAreaUnitInfo(a.select.value);this.areaTable.editRow(a,{abbr:b.abbr,conversion:b.conversion})},_resetAreaSelectOptions:function(){var a=
this.areaTable.getRows(),b=d.map(a,c.hitch(this,function(a){return a.select})),e=this._getNotUsedAreaUnitValues(),f=d.map(e,c.hitch(this,function(a){return this._getAreaUnitInfo(a)}));d.forEach(b,c.hitch(this,function(b,e){var g=b.get("value"),h=d.filter(b.getOptions(),c.hitch(this,function(a){return a.value!==g}));b.removeOption(h);d.forEach(f,c.hitch(this,function(a){b.addOption({value:a.value,label:a.label})}));b.set("value",g);this._showCorrectAreaInfoBySelectedOption(a[e])}))}})});