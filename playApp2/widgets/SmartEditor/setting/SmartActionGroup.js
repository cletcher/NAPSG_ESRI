// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/SmartEditor/setting/SmartActionGroup.html":'\x3cdiv class\x3d"esriCTSmartActionsGroupContainer"\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv class\x3d"esriCTlabel"\x3e\r\n      ${nls.smartActionsPage.groupNameLabel}\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTLayerField"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"groupNameTextBoxNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv class\x3d"esriCTlabelParentContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel"\x3e\r\n        ${nls.smartActionsPage.layerForExpressionLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerFieldDropBox"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"layerSelectorDiv"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHintCheck"\x3e\r\n      ${nls.smartActionsPage.layerForExpressionNote}\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv class\x3d"esriCTlabel"\x3e${nls.smartActionsPage.expressionText}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTExpression"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"expressionTextBoxNode" class\x3d"esriCTExpressionTextBoxNode"\x3e\x3c/div\x3e\r\n      \x3cdiv class\x3d"editExpressionIconNode" title\x3d"${nls.smartActionsPage.editExpressionLabel}"\x3e\r\n        \x3cdiv class\x3d"jimu-icon jimu-icon-edit" data-dojo-attach-point\x3d"editExpressionIconNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"submitWhenHiddenNode" class\x3d"esriCTlabel esriCTSubmitAttributeDataText"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTRowContainer row"\x3e\r\n    \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n      \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.smartActionsPage.layerAndFieldsApplyLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"esriCTTableParentContainer" data-dojo-attach-point\x3d"tableParentContainer"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-class dojo/dom-style dojo/dom-attr dojox/html/entities dojo/on dojo/query dojo/Deferred dojo/text!./SmartActionGroup.html dijit/_TemplatedMixin jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox jimu/BaseWidgetSetting jimu/dijit/SimpleTable jimu/dijit/Popup dijit/form/ValidationTextBox jimu/dijit/CheckBox jimu/dijit/Message ./FilterPage".split(" "),function(C,D,g,l,h,n,x,p,E,
q,v,F,G,H,y,I,J,K,z,A,B,L,M){return C([J,D,H],{baseClass:"jimu-widget-smartEditor-setting-smartActionGroup",templateString:G,_totalLayers:[],_prevAppliedOn:[],filterInfo:{filter:""},postCreate:function(){this.inherited(arguments);this._totalLayers=[];this._prevAppliedOnLayers=[];this.appliedOn&&(this._prevAppliedOnLayers=g.clone(Object.keys(this.appliedOn)));this._initComponents()},_initComponents:function(){this.groupNameTextBox=new A({required:!0,trim:!0,"class":"esriCTGroupNameTextBox"},h.create("div",
{},this.groupNameTextBoxNode));this.groupNameTextBox.validator=g.hitch(this,function(a){return a?a!==this.prevName&&-1<this.existingGroupNames.indexOf(a)?(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.uniqueGroupNameMsg),!1):!0:(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.requiredGroupNameMsg),!1)});this.name&&this.groupNameTextBox.set("value",this.name);this._initLayerSelector();this.expressionTextBox=new A({disabled:!0,required:!0,"class":"esriCTTextBoxNode",
promptMessage:this.nls.smartActionsPage.invalidExpression},h.create("div",{},this.expressionTextBoxNode));this.filterInfo&&this.filterInfo.expression&&this.expressionTextBox.set("value",this.filterInfo.expression);this.own(q(this.editExpressionIconNode,"click",g.hitch(this,this._showFilter)));this._submitHidden=new B({label:this.nls.smartActionsPage.submitAttributeText},h.create("div",{},this.submitWhenHiddenNode));this.submitWhenHidden&&this._submitHidden.setValue(this.submitWhenHidden);this._createTable(this.appliedOn)},
_addLayersDropDown:function(){var a,b;a=this._createLayerChooserMapArgs();a=new y(a);a.startup();a=new I({layerChooser:a});a.placeAt(this.layerSelectorDiv);a.startup();this._layerSelector=a;b=this._totalLayers[0];this.layerForExpression&&(a=this._jimuLayerInfos.getLayerOrTableInfoById(this.layerForExpression))&&(b=a.layerObject);this._layerSelector.setSelectedLayer(b);this.own(q(this._layerSelector,"selection-change",g.hitch(this,function(){this.expressionTextBox.get("value")&&(new L({message:this.nls.smartActionsPage.warningMsgOnLayerChange}),
this.onFilterInfoChanged({expression:"",filter:null,submitWhenHidden:!1}))})))},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,filter:this._createFiltersForLayerSelector()}},_createFiltersForLayerSelector:function(){return y.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0)},_initLayerSelector:function(){var a;a=this._createLayerChooserMapArgs();this._layerChooserFromMap=new y(a);this._layerChooserFromMap.startup();a=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();
var b=this._layerChooserFromMap.layerInfosObj.getTableInfoArray();b&&0<b.length&&(a=a.concat(b));this._getAllFilteredLayers(a,[])},_isLayerEditable:function(a){var b=!1;a&&a.layerObject&&(a=a.layerObject.getEditCapabilities(),a.canCreate||a.canUpdate||a.canDelete||a.canUpdateGeometry)&&(b=!0);return b},_getAllFilteredLayers:function(a,b){l.forEach(a,g.hitch(this,function(a){var c;a.isLeaf()?(c=new F,this._layerChooserFromMap.filter(a).then(g.hitch(this,function(b){b&&this._isLayerEditable(a)&&this._totalLayers.push(a);
c.resolve()})),b.push(c)):this._getAllFilteredLayers(a.newSubLayers,b)}))},_validateGroup:function(){var a;if(!this.groupNameTextBox.isValid())return this.groupNameTextBox.focus(),!1;if(this._layerSelector){if(a=this._layerSelector.getSelectedItem(),!a||!a.layerInfo||!a.layerInfo.layerObject)return!1}else return!1;return this.expressionTextBox.isValid()?!0:(this.expressionTextBox.set("disabled",!1),this.expressionTextBox.focus(),this.expressionTextBox.set("disabled",!0),!1)},showDialog:function(){this._addLayersDropDown();
var a=new z({titleLabel:"Configure Smart Action",width:900,maxHeight:500,autoHeight:!1,content:this,"class":this.baseClass,buttons:[{label:this.nls.ok,onClick:g.hitch(this,function(){var b={},c=this._layerSelector.getSelectedItem().layerInfo.layerObject;if(this._validateGroup()){b.name=this.groupNameTextBox.get("value");b.submitWhenHidden=this._submitHidden.checked;b.layerForExpression=c.id;b.filterInfo=this.filterInfo;b.appliedOn=this.appliedOn;this._applySettingsInLayer(b);for(var d in b.appliedOn){var c=
b.appliedOn[d],e;for(e in c)c[e].hasOwnProperty("Priority")&&delete c[e].Priority,c[e].hasOwnProperty("ExistingExpressions")&&delete c[e].ExistingExpressions}this.emit("groupInfoUpdated",b);a.close()}})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:g.hitch(this,function(){a.close()})}],onClose:g.hitch(this,function(){})});this.groupNameTextBox.focus();this._setMaxWidth()},_getTableData:function(){var a=[],b;l.forEach(this._layerTable.getRows(),g.hitch(this,function(c){c.layerSelector&&
(b={},b.layerId=c.layerSelector.getSelectedItem().layerInfo.id,b.field=c.layerFields.getValue(),a.push(b))}));return a},_showFilter:function(a){if(!this.groupNameTextBox.isValid())return this.groupNameTextBox.focus(),!1;this._filterPage&&this._filterPage.destroy();var b=this._layerSelector.getSelectedItem().layerInfo.layerObject;this._filterPage=new M({nls:this.nls,_resourceInfo:this._resourceInfo,_url:b.url,_layerId:b.id,_filterInfo:this.filterInfo,_groupName:this.groupNameTextBox.get("value")});
this.own(q(this._filterPage,"filterInfo",g.hitch(this,function(a){this.onFilterInfoChanged(a)})));this._filterPage.popup(a)},onFilterInfoChanged:function(a){this.filterInfo=g.clone(a);this.filterInfo.filter=JSON.parse(E.decode(this.filterInfo.filter));this.expressionTextBox.set("value",a.expression);this._destroyTable();this._createTable(this.appliedOn)},_destroyTable:function(){h.empty(this.tableParentContainer)},_createHeaderObj:function(a,b,c){var d,e=h.create("th"),f=h.create("div",{innerHTML:a.title,
title:a.title});a.hasOwnProperty("headerIcon")&&(d=h.create("div",{title:a.title}));0<c&&(n.add(e,"esriCTTableTH"),n.add(f,"esriCTTableHeaderTitle "),a.hasOwnProperty("headerIcon")&&n.add(d,"esriCTTableHeaderIcon "+a.headerIcon));var k=h.create("div",{"class":"esriCTPriorityColumnParentContainer"}),m=h.create("div",{"class":"esriCTPriorityColumnParentDiv"});m.appendChild(f);a.hasOwnProperty("headerIcon")&&m.appendChild(d);d=h.create("div",{"class":"esriCTPriorityNumberDiv"});4===c&&(h.create("div",
{"class":"esriCTPriorityOneDiv",innerHTML:this.nls.smartActionsPage.priorityOneText},d),h.create("div",{"class":"esriCTPriorityTwoDiv",innerHTML:this.nls.smartActionsPage.priorityTwoText},d),h.create("div",{"class":"esriCTPriorityThreeDiv",innerHTML:this.nls.smartActionsPage.priorityThreeText},d));k.appendChild(m);k.appendChild(d);e.appendChild(k);x.set(e,"width",a.width);b.appendChild(e)},_createHeaders:function(a){var b,c;c=[{title:"",icon:"",width:"41%"},{title:this.nls.actionPage.actions.hide,
width:"13%",headerIcon:"esriCTHide"},{title:this.nls.actionPage.actions.required,width:"13%",headerIcon:"esriCTRequired"},{title:this.nls.actionPage.actions.disabled,width:"13%",headerIcon:"esriCTDisabled"},{title:this.nls.smartActionsPage.priorityColumnText,icon:"",width:"20%"}];b=h.create("tr");n.add(b,"esriCTTableRow");l.forEach(c,g.hitch(this,function(a,c){this._createHeaderObj(a,b,c)}));a.appendChild(b)},_setMaxWidth:function(){var a=v(".esriCTTableHeaderTitle");l.forEach(a,g.hitch(this,function(a){var b=
x.getComputedStyle(a).width;x.set(a,"max-width",b)}))},_createPriorityIcons:function(a,b){var c=b.Priority;a=h.create("td",{},a);var d=h.create("div",{"class":"esriCTPriorityIconMainDiv"},a);l.forEach(c,g.hitch(this,function(a){h.create("div",{"class":"esriCTPriorityIcons esriCT"+a,title:this.nls.actionPage.actions[a.toLowerCase()]},d)}));c=h.create("div",{"class":"jimu-icon jimu-icon-edit esriCTPriorityEditIcon",title:this.nls.smartActionsPage.priorityPopupTitle},d);this.own(q(c,"click",g.hitch(this,
function(a){this._createPriorityTable(a.currentTarget.parentNode);this._createPriorityPopup(a.currentTarget.parentNode,b)})))},_createPriorityTable:function(a){this._priorityTable=new K({fields:[{name:"priorityName",title:this.nls.smartActionsPage.priorityPopupColumnTitle,type:"empty",width:"80%"},{name:"actions",title:this.nls.intersectionPage.actionsText,type:"actions",width:"20%",actions:["up","down"],"class":"actions"}],selectable:!1});this._priorityTable.startup();this._populatePriorityTable(a)},
_getExistingPriority:function(a){var b={esriCTHide:"Hide",esriCTRequired:"Required",esriCTDisabled:"Disabled"},c=[];l.forEach(a.childNodes,g.hitch(this,function(a,e){if(3>e)for(var d in b)n.contains(a,d)&&c.push(b[d])}));return c},_populatePriorityTable:function(a){a=this._getExistingPriority(a);l.forEach(a,g.hitch(this,function(a){var b=h.create("div",{innerHTML:this.nls.actionPage.actions[a.toLowerCase()],title:this.nls.actionPage.actions[a.toLowerCase()]});n.add(b,"esriCTTablePriorityTitle");p.set(b,
"priority",a);var d=h.create("div",{title:this.nls.actionPage.actions[a.toLowerCase()]});n.add(d,"esriCTPriorityPopupIcon esriCT"+a);a=this._priorityTable.addRow({}).tr;a=v(".simple-table-cell",a)[0];a.appendChild(d);a.appendChild(b)}))},_fetchPriority:function(){var a=this._priorityTable.getRows(),b=[];l.forEach(a,g.hitch(this,function(a){b.push(p.get(a.childNodes[0].childNodes[1],"priority"))}));return b},_changePriority:function(a,b){l.forEach(a,g.hitch(this,function(a,d){l.forEach(b.childNodes,
g.hitch(this,function(b,c){d===c&&(l.forEach(["Hide","Required","Disabled"],g.hitch(this,function(a){n.remove(b,"esriCT"+a)})),n.add(b,"esriCT"+a),p.set(b,"title",this.nls.actionPage.actions[a.toLowerCase()]))}))}))},_createPriorityPopup:function(a,b){var c=new z({titleLabel:this.nls.smartActionsPage.priorityPopupTitle,width:450,maxHeight:445,autoHeight:!0,content:this._priorityTable,"class":this.baseClass,buttons:[{label:this.nls.ok,onClick:g.hitch(this,function(){var d=this._fetchPriority();this._changePriority(d,
a);b.Priority=d;c.close()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:g.hitch(this,function(){c.close()})}],onClose:g.hitch(this,function(){})})},_createLayerName:function(a,b){var c=b,d=h.create("td"),e=h.create("div",{},d);this._jimuLayerInfos.getLayerInfoById(b)?c=this._jimuLayerInfos.getLayerInfoById(b).layerObject.name:this._jimuLayerInfos.getTableInfoById(b)&&(c=this._jimuLayerInfos.getTableInfoById(b).layerObject.name);var f=h.create("div",{"class":"esriCTToggleLayerIcon esriCTToggleLayerCollapsed esriCTToggleLayerExpanded",
style:{"margin-top":"5px"}},e);h.create("div",{"class":"esriCTLayerTitle",innerHTML:c},e);p.set(f,"rootnodelayerid",b);this.own(q(f,"click",g.hitch(this,function(a){n.toggle(a.currentTarget,"esriCTToggleLayerExpanded");a=p.get(a.currentTarget,"rootnodelayerid");v('[layerid\x3d"'+a+'"]').toggleClass("esriCTHidden")})));a.appendChild(d)},_createFieldNameTd:function(a,b){b=h.create("td",{innerHTML:b,"class":"esriCTLayerFields"});a.appendChild(b)},_addRows:function(a,b){var c=b.layerDetails;b=b.fieldLabels;
var d=[],e;for(e in c){var f=c[e],k=h.create("tr",{"class":"esriCTLayerNameRow"});this._createLayerName(k,e);a.appendChild(k);for(var m in f){k=h.create("tr",{"class":"esriCTLayerFieldRow esriCTHidden"});p.set(k,"layerid",e);p.set(k,"field",m);this._createFieldNameTd(k,b[e][m]);var w={layerid:e,field:m,action:"Hide"},t="";f[m].ExistingExpressions.hasOwnProperty("Hide")&&(t=f[m].ExistingExpressions.Hide);this._createCheckBox(k,w,f[m].Hide,t);w.action="Required";t="";f[m].ExistingExpressions.hasOwnProperty("Required")&&
(t=f[m].ExistingExpressions.Required);this._createCheckBox(k,w,f[m].Required,t);w.action="Disabled";t="";f[m].ExistingExpressions.hasOwnProperty("Disabled")&&(t=f[m].ExistingExpressions.Disabled);this._createCheckBox(k,w,f[m].Disabled,t);-1===d.indexOf(e)&&(f[m].Hide||f[m].Required||f[m].Disabled)&&d.push(e);this._createPriorityIcons(k,f[m]);a.appendChild(k)}}0<d.length&&setTimeout(g.hitch(this,function(){l.forEach(d,function(a){v('[rootnodelayerid\x3d"'+a+'"]').toggleClass("esriCTToggleLayerExpanded");
v('[layerid\x3d"'+a+'"]').toggleClass("esriCTHidden")})}),100)},_createCheckBox:function(a,b,c,d){var e=h.create("td");n.add(e,"esriCTCheckBoxTD");var f=h.create("div");c&&d&&(c=!1);var k=h.create("div");n.add(k,"esriCTCheckBoxMainDiv");var m=h.create("div");c=new B({checked:c},m);p.set(m,"action",b.action);var g=this.appliedOn[b.layerid][b.field];this.own(q(c,"change",function(a){var b=p.get(this.domNode,"action");g[b]=a}));k.appendChild(m);f.appendChild(k);d&&(b=h.create("div",{title:d}),n.add(b,
"esriCTExistingExpressionDiv"),f.appendChild(b));e.appendChild(f);a.appendChild(e)},_createTable:function(a){var b=h.create("table");n.add(b,"esriCTTableMainNode");this._createHeaders(b);this.tableParentContainer.appendChild(b);(a=this._createLayerDetails(g.clone(a)))&&a.layerDetails&&a.fieldLabels&&(this.appliedOn=a.layerDetails,this._addRows(b,a))},_validateIfLayerHaveUsedFields:function(a,b){var c;b&&(c=b.length,l.forEach(a,function(a){l.forEach(b,function(b){a.name===b.fieldObj.name&&a.type===
b.fieldObj.type&&c--})},this));return 0===c?!0:!1},_mergeActions:function(a,b){for(var c=0;c<a.length;c++)for(var d=0;d<b.length;d++)if(b[d].filter&&b[d].actionName===a[c].actionName){a[c]=g.clone(b[d]);break}return a},_mergeFieldValidations:function(a){var b={};l.forEach(a,function(a){for(var c in a)b.hasOwnProperty(c)?b[c]=this._mergeActions(b[c],a[c]):b[c]=g.clone(a[c])},this);return b},_getLayersFieldValidations:function(a,b,c){l.forEach(b,function(b){b.featureLayer&&b.featureLayer.id===c&&b.fieldValidations&&
(a||(a=[]),a.push(b.fieldValidations));b.relationshipInfos&&(a=this._getLayersFieldValidations(a,b.relationshipInfos,c))},this);return a},_getPartsInExpression:function(a,b){b&&l.forEach(b,g.hitch(this,function(b){b.parts?this._getPartsInExpression(a,b.parts):a.push(b)}));return a},_createLayerDetails:function(a){var b,c,d;c=null;this.filterInfo&&this.filterInfo.filter&&(b=this._getPartsInExpression([],this.filterInfo.filter.parts));c={};d={};l.forEach(this._totalLayers,function(e){if(!e.isTable||
e.isTable&&0<e.layerObject.relationships.length){var f,k,g=[];f=!1;k={};f=this._jimuLayerInfos.getLayerOrTableInfoById(e.id);k.allFields=f.layerObject.fields;f&&(f=this.editUtils.getConfigInfo(f,{}),k.fieldInfos=f.fieldInfos);f=this._validateIfLayerHaveUsedFields(k.allFields,b);k&&k.fieldInfos&&(f||!b)&&(g=this._getLayersFieldValidations(g,this._configInfos,e.id),k.fieldValidations=this._mergeFieldValidations(g),c[e.id]={},d[e.id]={},l.forEach(k.fieldInfos,function(b){var f;"esriFieldTypeGeometry"!==
b.type&&"esriFieldTypeOID"!==b.type&&"esriFieldTypeBlob"!==b.type&&"esriFieldTypeGlobalID"!==b.type&&"esriFieldTypeRaster"!==b.type&&"esriFieldTypeXML"!==b.type&&(d[e.id][b.name]=b.label,c[e.id][b.name]=a&&a[e.id]&&a[e.id][b.name]?a[e.id][b.name]:{Hide:!1,Required:!1,Disabled:!1},k.fieldValidations&&k.fieldValidations[b.name]?(f=this._getPriorites(k.fieldValidations[b.name]),c[e.id][b.name].Priority=f.Priority,c[e.id][b.name].ExistingExpressions=f.ExistingExpressions):(c[e.id][b.name].Priority=["Hide",
"Required","Disabled"],c[e.id][b.name].ExistingExpressions=[]))},this))}},this);return{layerDetails:c,fieldLabels:d}},_getPriorites:function(a){var b=[],c={};l.forEach(a,function(a){b.push(a.actionName);a.filter&&a.filter.displaySQL&&(!a.filter.hasOwnProperty("smartActionGroupName")||!this.prevName||a.filter.hasOwnProperty("smartActionGroupName")&&this.prevName&&this.prevName!==a.filter.smartActionGroupName)&&(c[a.actionName]=a.filter.displaySQL)},this);return{Priority:b,ExistingExpressions:c}},_getVaidationForAction:function(a,
b){var c=null;l.some(a,function(a){if(a.actionName===b&&a.filter&&a.filter.displaySQL)return c=a,!0});return c},_applysettingsToField:function(a,b){var c,d;d=[];d=this._getLayersFieldValidations(d,this._configInfos,a);c=b.appliedOn[a];for(var e=0;e<d.length;e++){var f=d[e];if(f)for(var k in c){for(var h=c[k],l=[],n=!1,p=0;p<h.Priority.length;p++){var q=h.Priority[p],r={};r.actionName=q;r.submitWhenHidden=!1;if(h[q])n=!0,"Hide"===q&&(r.submitWhenHidden=b.submitWhenHidden),r.expression=b.filterInfo.expression,
r.filter=g.clone(b.filterInfo).filter,r.filter.smartActionGroupName=b.name,this._removeSettingsFromOtherGroups(b.name,a,k,q);else if(f&&f[k]){var u=this._getVaidationForAction(f[k],q);u&&u.filter&&!h[q]&&u.filter.hasOwnProperty("smartActionGroupName")&&u.filter.smartActionGroupName===this.prevName?n=!0:u&&(r.expression=u.filter.expr,r.filter=u.filter)}l.push(r)}n&&(f||(f={}),f[k]=l)}}},_removePrevSettingsFromLayerFields:function(a){var b=[];if(b=this._getLayersFieldValidations(b,this._configInfos,
a))for(var c=0;c<b.length;c++)if(a=b[c])for(var d in a)a&&a[d]&&l.forEach(a[d],function(a){a&&a.filter&&a.filter.hasOwnProperty("smartActionGroupName")&&a.filter.smartActionGroupName===this.prevName&&(a.submitWhenHidden=!1,a.hasOwnProperty("expression")&&delete a.expression,delete a.filter)},this)},_removeSettingsFromOtherGroups:function(a,b,c,d){var e;if(this.existingGroups)for(var f in this.existingGroups)f!==a&&f!==this.prevName&&(e=this.existingGroups[f].appliedOn)&&e.hasOwnProperty(b)&&e[b].hasOwnProperty(c)&&
e[b][c].hasOwnProperty(d)&&(e[b][c][d]=!1)},_applySettingsInLayer:function(a){for(var b in a.appliedOn){var c;this._prevAppliedOnLayers&&-1<this._prevAppliedOnLayers.indexOf(b)&&(c=this._prevAppliedOnLayers.indexOf(b),this._prevAppliedOnLayers.splice(c,1));this._applysettingsToField(b,a)}this.deleteGroup()},deleteGroup:function(){this._prevAppliedOnLayers&&l.forEach(this._prevAppliedOnLayers,function(a){this._removePrevSettingsFromLayerFields(a)},this)}})});