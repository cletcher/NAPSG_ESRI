// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/SmartEditor/setting/Address.html":'\x3cdiv style\x3d"max-height: 445px;padding: 0 5px;"\x3e\r\n  \x3cdiv class\x3d"esriCTAddressWidth" data-dojo-attach-point\x3d"addressDijitMainWrapper"\x3e \r\n      \x3cdiv class\x3d"esriCTWrapper" data-dojo-attach-point\x3d"groupInfoNode1"\x3e\r\n        \x3cdiv  class\x3d"esriCTlabel"\x3e\r\n          ${nls.intersectionPage.groupNameLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTGroupInfoContainer"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"groupNameTextBoxNode" style\x3d"width: 100%"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTWrapper"\x3e\r\n    \x3cdiv class\x3d"esriCTlabel" title\x3d"${nls.addressPage.selectFieldTitle}"\x3e${nls.addressPage.selectFieldTitle}\x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTGroupInfoContainer"\x3e\r\n      \x3cdiv class\x3d"esriCTSelectAttributeNode" data-dojo-attach-point\x3d"selectNode" style\x3d"width: 100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHint"\x3e${nls.addressPage.geocoderHint}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n  \x3cdiv class\x3d"esriCTWrapper" data-dojo-attach-point\x3d"groupInfoNode2"\x3e\r\n    \x3cfieldset class\x3d"esriCTFieldset"\x3e\r\n      \x3clegend class\x3d"esriCTLegendTitle"\x3e${nls.intersectionPage.layerAndFieldsApplyLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"esriCTTableParentContainer" data-dojo-attach-point\x3d"tableParentContainer"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/Evented dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/dom-class dojo/text!./Address.html dijit/_TemplatedMixin jimu/BaseWidgetSetting jimu/dijit/Popup jimu/dijit/Message dijit/form/ValidationTextBox dijit/form/Select ./layersAndFieldsApplyOn dojo/on".split(" "),function(l,m,d,e,g,f,n,p,q,r,t,u,v,w,x){return l([q,m,p],{baseClass:"jimu-widget-smartEditor-setting-address",templateString:n,_validGeocoderFields:[],ValidFieldsByTypeToApplyOn:{esriFieldTypeOID:["esriFieldTypeSmallInteger",
"esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"],esriFieldTypeSmallInteger:["esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeInteger:["esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeDouble:["esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],
esriFieldTypeSingle:["esriFieldTypeSmallInteger","esriFieldTypeString","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"],esriFieldTypeGUID:["esriFieldTypeGUID","esriFieldTypeString"],esriFieldTypeDate:["esriFieldTypeDate"],esriFieldTypeString:["esriFieldTypeString"]},postCreate:function(){this.inherited(arguments);this._validGeocoderFields=this._getValidGeocoderFields();this._initControls();this.isDelete||this.showDialog();this._createLayersAndFields()},_initControls:function(){var c,
b,a;this.groupNameTextBox=new u({style:{width:"99%"},required:!0,trim:!0},g.create("div",{},this.groupNameTextBoxNode));this.groupNameTextBox.validator=d.hitch(this,function(a){return a?a!==this.prevName&&-1<this.existingGroupNames.indexOf(a)?(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.uniqueGroupNameMsg),!1):!0:(this.groupNameTextBox.set("invalidMessage",this.nls.smartActionsPage.requiredGroupNameMsg),!1)});this.name&&this.groupNameTextBox.set("value",this.name);c=this._getFieldsOptionsObj(this._validGeocoderFields);
this.fieldSelector=new v({style:{width:"99%"},options:c},g.create("div",{},this.selectNode));this._fieldValues&&this._fieldValues.Address&&this._fieldValues.Address.hasOwnProperty("field")&&(b=this._fieldValues.Address.field);b&&(a=!1,e.some(c,d.hitch(this,function(c){if(c.value===b)return a=!0})),a?this.fieldSelector.set("value",b,!1):new t({message:this.nls.addressPage.prevConfigruedFieldChangedMsg}));this.own(x(this.fieldSelector,"change",d.hitch(this,function(){this._createLayersAndFields()})))},
showDialog:function(){var c=!1,b=!1,a=500,h=675;this.isGroup||(f.add(this.groupInfoNode1,"esriCTHidden"),f.add(this.groupInfoNode2,"esriCTHidden"),f.remove(this.addressDijitMainWrapper,"esriCTAddressWidth"),f.add(this.addressDijitMainWrapper,"esriCTFullWidth"),h=600,a=300,b=!0);c=!1;this._fieldValues&&this._fieldValues.Address&&this._fieldValues.Address.hasOwnProperty("enabled")&&(c=this._fieldValues.Address.enabled);var k=new r({titleLabel:this.nls.addressPage.popupTitle,width:h,maxHeight:a,autoHeight:b,
content:this,buttons:[{label:this.nls.ok,onClick:d.hitch(this,function(){var a={},b={};a.enabled=c;a.field=this.fieldSelector.get("value");if(this.isGroup){if(!this.groupNameTextBox.isValid()){this.groupNameTextBox.focus();return}}else delete this._fieldValues.Address.attributeActionGroupName;this._fieldValues.Address||(this._fieldValues.Address={actionName:"Address"});d.mixin(this._fieldValues.Address,a);this.isGroup?(b.name=this.groupNameTextBox.get("value"),b.dataType=a.field,b.attributeInfo=a,
b.appliedOn=this._layerAndFieldsApplyOnObj.getCheckedFields(b),this.emit("groupInfoUpdated",b)):this.emit("attributeActionUpdated");k.close()})},{label:this.nls.cancel,classNames:["jimu-btn-vacation"],onClick:d.hitch(this,function(){k.close()})}],onClose:d.hitch(this,function(){})})},_getFieldsOptionsObj:function(c){var b=[];e.forEach(c,d.hitch(this,function(a){"esriFieldTypeGeometry"!==a.type&&"esriFieldTypeBlob"!==a.type&&"esriFieldTypeRaster"!==a.type&&"esriFieldTypeXML"!==a.type&&b.push({label:a.alias||
a.name,value:a.name,fieldType:a.type})}));return b},_createLayerFieldsFilter:function(){var c,b={},a=this.fieldSelector.getOptions(this.fieldSelector.value).fieldType;a&&this.ValidFieldsByTypeToApplyOn[a]&&(c=this.ValidFieldsByTypeToApplyOn[a],e.forEach(this._totalLayers,d.hitch(this,function(a){a.isTable||e.forEach(a.layerObject.fields,d.hitch(this,function(d){-1<c.indexOf(d.type)&&d.editable&&(b[a.id]||(b[a.id]={}),b[a.id][d.name]=d)}))})));return b},_createLayersAndFields:function(){this._layerAndFieldsApplyOnObj=
new w({map:this.map,layerInfos:this.layerInfos,_configInfos:this._configInfos,actionName:"Address",nls:this.nls,prevName:this.prevName,existingGroups:this.existingGroups,layerDetails:this._createLayerFieldsFilter(),appliedOn:this.appliedOn});g.empty(this.tableParentContainer);this._layerAndFieldsApplyOnObj.placeAt(this.tableParentContainer);this._layerAndFieldsApplyOnObj.startup()},deleteGroup:function(){this._layerAndFieldsApplyOnObj.deleteGroup()},_getValidGeocoderFields:function(){var c=[];this._geocoderSettings&&
this._geocoderSettings.hasOwnProperty("url")&&e.forEach(this._geocoderSettings.fields,d.hitch(this,function(b){c.push(b)}));return c}})});