// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/DataAggregation/js/UI/templates/Coordinates.html":'\x3cdiv class\x3d"pad-left-5 no-select"\x3e\r\n  \x3ctable class\x3d"page-table" cellpading\x3d"0" data-dojo-attach-point\x3d"coordinateTable"\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd colspan\x3d"2" class\x3d"panel-title-td"\x3e\r\n          \x3cdiv class\x3d"panel-title-text"\x3e${nls.mapping.locationMapping}\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n      \x3ctr class\x3d"bottom-border-bold task-instruction-row"\x3e\r\n        \x3ctd colspan\x3d"2" class\x3d"panel-title-hint-td"\x3e\r\n          \x3cdiv class\x3d"instruction"\x3e${nls.coordinates.coordinatesPageHint}\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./templates/Coordinates.html dojo/_base/array dijit/form/Select".split(" "),function(h,k,d,e,l,m,n,p,q,r,g){return h([l,m,n,p],{baseClass:"cf-coordinates",declaredClass:"CriticalFacilities.Coordinates",templateString:q,_started:null,label:"Coordinates",parent:null,nls:null,map:null,appConfig:null,config:null,fields:[],xField:null,
yField:null,theme:"",styleColor:"",firstField:"",constructor:function(a){k.mixin(this,a)},postCreate:function(){this.inherited(arguments);this._initUI()},_initUI:function(){"X"===this.firstField?(this._initXField(),this._initYField()):(this._initYField(),this._initXField());this._setFields(this.fields,this.xField,this.yField)},_initXField:function(){var a=this._initSelectTd(this.xField.label+":");this.lblX=a.label;this.selectX=new g({name:"selectX",style:"min-width: 200px"});this.selectX.placeAt(a.select);
this.selectX.startup()},_initYField:function(){var a=this._initSelectTd(this.yField.label+":");this.lblY=a.label;this.selectY=new g({name:"selectY",style:"min-width: 200px"});this.selectY.placeAt(a.select);this.selectY.startup()},_initSelectTd:function(a){var b=e.create("tr",{className:"bottom-border"},this.coordinateTable),c=e.create("td",{className:"field-control-td pad-left-10"},b),c=e.create("div",{className:"main-text float-left"},c);c.innerHTML=a;return{select:e.create("td",{className:"float-right field-control-td"},
b),label:c}},startup:function(){this._started=!0;this._updateAltIndexes()},onShown:function(){this.pageContainer.nextDisabled=!1},validate:function(a,b){var c=new d;"next-view"===a?c.resolve(this._nextView(b)):"back-view"===a?c.resolve(this._backView(b)):this._homeView(b).then(function(a){c.resolve(a)});return c},_updateAltIndexes:function(){this.pageContainer&&!this._startPageView&&(this._startPageView=this.pageContainer.getViewByTitle("StartPage"),this._locationTypeView=this.pageContainer.getViewByTitle("LocationType"),
this._startPageView&&this._locationTypeView?(this.altNextIndex=this._startPageView.index,this.altBackIndex=this._locationTypeView.index):this._startPageView&&(this.altBackIndex=this.altNextIndex=this._startPageView.index))},_nextView:function(a){a.currentView.label===this.label&&(a=0<this._getResults().fields.length,this.parent._locationMappingComplete=a,this.emit("location-mapping-update",a));return!0},_backView:function(a){a.currentView.label===this.label&&(this.parent._locationMappingComplete=
!1,this.emit("location-mapping-update",!1));return!0},_homeView:function(a){var b=new d;this.pageContainer.getViewByTitle("Home").verifyClearSettings(a).then(function(a){b.resolve(a)});return b},_setFields:function(a,b,c){var e=this._getDefaultFieldName(a,b),t=this._getDefaultFieldName(a,c),f=[{label:this.nls.warningsAndErrors.noValue,value:this.nls.warningsAndErrors.noValue}],d=[{label:this.nls.warningsAndErrors.noValue,value:this.nls.warningsAndErrors.noValue}];r.forEach(a,function(a){f.push({label:a.label,
value:a.value,selected:e===a.value});d.push({label:a.label,value:a.value,selected:t===a.value})});this.selectX.addOption(f);this.selectY.addOption(d)},_getDefaultFieldName:function(a,b){b=b.isRecognizedValues;for(var c=0;c<b.length;c++)for(var e=b[c],d=0;d<a.length;d++){var f=a[d];if(f.value.toString().toUpperCase()===e.toString().toUpperCase())return f.value}},setStyleColor:function(a){this.styleColor=a},updateImageNodes:function(){},_getResults:function(){return{type:"xy",fields:this.selectX.value!==
this.nls.warningsAndErrors.noValue&&this.selectY.value!==this.nls.warningsAndErrors.noValue?[{targetField:"X",sourceField:this.selectX.value},{targetField:"Y",sourceField:this.selectY.value}]:[]}}})});