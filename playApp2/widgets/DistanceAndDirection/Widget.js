// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/DistanceAndDirection/views/TabLine":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/utils esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/tasks/FeatureSet esri/geometry/geometryEngine esri/geometry/Polyline esri/geometry/Circle esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic ../models/LineFeedback ../models/ShapeModel ../views/CoordinateInput ../views/EditOutputCoordinate ../models/DirectionalLineSymbol dojo/text!../templates/TabLine.html dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(q,b,p,g,a,e,c,n,v,m,h,k,d,r,y,l,w,t,F,B,G,I,J,P,L,H,u,M,D,N,Q,E,C,R,A,x,z,S){return q([k,d,r],{templateString:A,baseClass:"jimu-widget-TabLine",_restrictFocusOnAddStartPointBtn:!1,_restrictFocusOnEndStartPointBtn:!1,_startPointInputKeyPressed:!1,_endPointInputKeyPressed:!1,constructor:function(f){q.safeMixin(this,f)},postCreate:function(){this._endPointInputKeyPressed=this._startPointInputKeyPressed=this._restrictFocusOnEndStartPointBtn=this._restrictFocusOnAddStartPointBtn=!1;this.currentLengthUnit=
this.lengthUnitDD.get("value");this.currentAngleUnit=this.angleUnitDD.get("value");var f={directionSymbol:"arrow1",directionPixelBuffer:1E5,showStartSymbol:!0,showEndSymbol:!0},f=b.mixin(f,this.lineSymbol);this._lineSym=new R(f);this._ptSym=new u(this.pointSymbol);this._labelSym=new M(this.labelSymbol);this._tsGL=new B;this.map.addLayer(this._tsGL);this.map.addLayer(this.getLayer());if(this._gl.loaded)f=t.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Line Graphics"),f.showLabels(),
f.enablePopup();else this._gl.on("load",b.hitch(this,function(){var f=t.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Line Graphics");f.showLabels();f.enablePopup()}));this.coordToolStart=new E({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.startPointLabel},this.startPointCoordsLine);this.coordToolStart.inputCoordinate.formatType="DD";this.coordToolEnd=new E({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.endPointLabel},this.endPointCoordsLine);this.coordToolEnd.inputCoordinate.formatTyp=
"DD";this.coordinateFormatStart=new y({content:new C({nls:this.nls}),style:"width: 400px"});S.after(this.coordinateFormatStart,"onClose",b.hitch(this,function(){x.focus(this.coordinateFormatButtonStart);if(this._restrictFocusOnAddStartPointBtn){var f=this.coordToolStart.getValue();if(""===f||null===f||void 0===f)this._restrictFocusOnAddStartPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&e.add(this.coordinateFormatStart.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.coordinateFormatEnd=
new y({content:new C({nls:this.nls}),style:"width: 400px"});S.after(this.coordinateFormatEnd,"onClose",b.hitch(this,function(){x.focus(this.coordinateFormatButtonEnd);if(this._restrictFocusOnEndStartPointBtn){var f=this.coordToolEnd.getValue();if(""===f||null===f||void 0===f)this._restrictFocusOnEndStartPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&e.add(this.coordinateFormatEnd.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dtStart=new N({map:this.map,coordTool:this.coordToolStart.inputCoordinate.util,
nls:this.nls});this.dtEnd=new N({map:this.map,coordTool:this.coordToolStart.inputCoordinate.util,nls:this.nls});this.dtStart.setLineSymbol(this._lineSym);this.lineTypeDDDidChange();this.syncEvents();this.lengthInput.invalidMessage=this.nls.numericInvalidMessage;this.lengthInput.rangeMessage=this.nls.lineLengthErrorMessage;this.angleInput.invalidMessage=this.nls.numericInvalidMessage;this.angleInput.rangeMessage=this.nls.orientationErrorMessage},getLayer:function(){if(!this._gl){var f={labelExpressionInfo:{value:this.nls.lengthLabel+
": {GeoLength}"}},f=new I(f);f.labelPlacement="above-along";f.where="GeoLength \x3e 0";f.symbol=this._labelSym.setOffset(0,10);f={labelExpressionInfo:{value:this.nls.angleLabel+": {LineAngle}"}};f=new I(f);f.labelPlacement="below-along";f.where="LineAngle \x3e 0";f.symbol=b.clone(this._labelSym).setOffset(0,-10);f={layerDefinition:{geometryType:"esriGeometryPolyline",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"GeoLength",type:"esriFieldTypeString",
alias:"Length"},{name:"LineAngle",type:"esriFieldTypeString",alias:"Angle"}]},featureSet:new J};this._gl=new G(f,{id:"Distance \x26 Direction - Line Graphics",outFields:["*"],showLabels:!0});this.own(g(this._gl,"visibility-change",b.hitch(this,function(f){this._tsGL.setVisibility(f.visible)})));return this._gl}},syncEvents:function(){a.subscribe("TAB_SWITCHED",b.hitch(this,this.tabSwitched));a.subscribe("DD-WIDGET-CLOSED",b.hitch(this,this._closeDijit));a.subscribe(N.drawnLineLengthDidChange,b.hitch(this,
this.lineLengthDidChange));a.subscribe(N.drawnLineAngleDidChange,b.hitch(this,this.lineAngleDidChange));this.dtStart.watch("startPoint",b.hitch(this,function(f,d,a){this.coordToolStart.inputCoordinate.set("coordinateEsriGeometry",a);this.coordToolStart.inputCoordinate.set("inputType",this.coordToolStart.inputCoordinate.formatType);this.dtStart.addStartGraphic(a,this._ptSym)}));this.dtStart.watch("endPoint",b.hitch(this,function(f,d,a){this.coordToolStart.inputCoordinate.set("coordinateEsriGeometry",
a)}));this.dtStart.watch("currentEndPoint",b.hitch(this,function(f,a,d){this.coordToolStart.inputCoordinate.set("coordinateEsriGeometry",d)}));this.dtStart.on("draw-complete",b.hitch(this,this.feedbackDidCompleteStart));this.coordToolStart.inputCoordinate.watch("outputString",b.hitch(this,function(f,d,a){this.coordToolStart.manualInput||(this.coordToolStart.set("value",a),this._restrictFocusOnAddStartPointBtn?this._restrictFocusOnAddStartPointBtn=!1:this._startPointInputKeyPressed?this._startPointInputKeyPressed=
!1:x.focus(this.addPointBtnStart))}));this.coordToolStart.on("keydown",b.hitch(this,this.coordToolStartKeyWasPressed));this.dtEnd.watch("startPoint",b.hitch(this,function(f,a,d){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",d);this.coordToolEnd.inputCoordinate.set("inputType",this.coordToolEnd.inputCoordinate.formatType);this.dtEnd.addStartGraphic(d,this._ptSym)}));this.dtEnd.watch("endPoint",b.hitch(this,function(f,d,a){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",
a)}));this.dtEnd.watch("currentEndPoint",b.hitch(this,function(f,d,a){this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",a)}));this.dtEnd.on("draw-complete",b.hitch(this,this.feedbackDidCompleteEnd));this.coordToolEnd.inputCoordinate.watch("outputString",b.hitch(this,function(f,a,d){this.coordToolEnd.manualInput||(this.coordToolEnd.set("value",d),this._restrictFocusOnEndStartPointBtn?this._restrictFocusOnEndStartPointBtn=!1:this._endPointInputKeyPressed?this._endPointInputKeyPressed=!1:
x.focus(this.addPointBtnEnd))}));this.coordToolEnd.on("keydown",b.hitch(this,this.coordToolEndKeyWasPressed));this.lengthUnitDD.on("change",b.hitch(this,this.lengthUnitDDDidChange));this.angleUnitDD.on("change",b.hitch(this,this.angleUnitDDDidChange));this.lineTypeDD.on("change",b.hitch(this,this.lineTypeDDDidChange));this.own(g(this.coordinateFormatButtonStart,"click",b.hitch(this,this.coordinateFormatButtonStartClicked)),g(this.coordinateFormatButtonStart,"keydown",b.hitch(this,function(f){if(f.keyCode===
m.ENTER||f.keyCode===m.SPACE)z.stop(f),this.coordinateFormatButtonStartClicked()})),g(this.coordinateFormatStart.content.applyButton,"click",b.hitch(this,function(){this._restrictFocusOnAddStartPointBtn=!0;var f=this.coordinateFormatStart.content.formats[this.coordinateFormatStart.content.ct],d=f.defaultFormat,a=this.coordinateFormatStart.content.frmtSelect.get("value");f.useCustom&&(d=f.customFormat);this.coordToolStart.inputCoordinate.set("formatPrefix",this.coordinateFormatStart.content.addSignChkBox.checked);
this.coordToolStart.inputCoordinate.set("formatString",d);this.coordToolStart.inputCoordinate.set("formatType",a);this.setCoordLabelStart(a);l.close(this.coordinateFormatStart);x.focus(this.coordinateFormatButtonStart)})),g(this.coordinateFormatStart.content.applyButton,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE){z.stop(f);this._restrictFocusOnAddStartPointBtn=!0;var d=this.coordinateFormatStart.content.formats[this.coordinateFormatStart.content.ct],a=d.defaultFormat,
k=this.coordinateFormatStart.content.frmtSelect.get("value");d.useCustom&&(a=d.customFormat);this.coordToolStart.inputCoordinate.set("formatPrefix",this.coordinateFormatStart.content.addSignChkBox.checked);this.coordToolStart.inputCoordinate.set("formatString",a);this.coordToolStart.inputCoordinate.set("formatType",k);this.setCoordLabelStart(k);l.close(this.coordinateFormatStart);x.focus(this.coordinateFormatButtonStart)}f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatStart),x.focus(this.coordinateFormatButtonStart))})),
g(this.coordinateFormatStart.content.cancelButton,"click",b.hitch(this,function(){l.close(this.coordinateFormatStart)})),g(this.coordinateFormatStart.content.cancelButton,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE)z.stop(f),l.close(this.coordinateFormatStart),x.focus(this.coordinateFormatButtonStart);f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatStart),x.focus(this.coordinateFormatButtonStart))})),g(this.coordinateFormatButtonEnd,"click",b.hitch(this,
this.coordinateFormatButtonEndClicked)),g(this.coordinateFormatButtonEnd,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE)z.stop(f),this.coordinateFormatButtonEndClicked()})),g(this.coordinateFormatEnd.content.applyButton,"click",b.hitch(this,function(){this._restrictFocusOnEndStartPointBtn=!0;var f=this.coordinateFormatEnd.content.formats[this.coordinateFormatEnd.content.ct],d=f.defaultFormat,a=this.coordinateFormatEnd.content.frmtSelect.get("value");f.useCustom&&(d=
f.customFormat);this.coordToolEnd.inputCoordinate.set("formatPrefix",this.coordinateFormatEnd.content.addSignChkBox.checked);this.coordToolEnd.inputCoordinate.set("formatString",d);this.coordToolEnd.inputCoordinate.set("formatType",a);this.setCoordLabelEnd(a);l.close(this.coordinateFormatEnd);x.focus(this.coordinateFormatButtonEnd)})),g(this.coordinateFormatEnd.content.applyButton,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE){z.stop(f);this._restrictFocusOnEndStartPointBtn=
!0;var d=this.coordinateFormatEnd.content.formats[this.coordinateFormatEnd.content.ct],a=d.defaultFormat,k=this.coordinateFormatEnd.content.frmtSelect.get("value");d.useCustom&&(a=d.customFormat);this.coordToolEnd.inputCoordinate.set("formatPrefix",this.coordinateFormatEnd.content.addSignChkBox.checked);this.coordToolEnd.inputCoordinate.set("formatString",a);this.coordToolEnd.inputCoordinate.set("formatType",k);this.setCoordLabelEnd(k);l.close(this.coordinateFormatEnd);x.focus(this.coordinateFormatButtonEnd)}f.keyCode===
m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatEnd),x.focus(this.coordinateFormatButtonEnd))})),g(this.coordinateFormatEnd.content.cancelButton,"click",b.hitch(this,function(){l.close(this.coordinateFormatEnd)})),g(this.coordinateFormatEnd.content.cancelButton,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE)z.stop(f),l.close(this.coordinateFormatEnd),x.focus(this.coordinateFormatButtonEnd);f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatEnd),x.focus(this.coordinateFormatButtonEnd))})),
g(this.addPointBtnStart,"click",b.hitch(this,this.addStartPointButtonClicked)),g(this.addPointBtnStart,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE)z.stop(f),this.addStartPointButtonClicked()})),g(this.addPointBtnEnd,"click",b.hitch(this,this.addEndPointButtonClicked)),g(this.addPointBtnEnd,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE)z.stop(f),this.addEndPointButtonClicked()})),g(this.interactiveLine,"change",b.hitch(this,this.interactiveCheckBoxChanged)),
g(this.interactiveLine,"keydown",b.hitch(this,function(f){f.keyCode===m.ENTER&&(this.interactiveLine.checked=this.interactiveLine.checked?!1:!0,this.interactiveCheckBoxChanged())})),g(this.okButton,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE)z.stop(f),this.okButtonClicked()})),g(this.clearGraphicsButton,"keydown",b.hitch(this,function(f){if(f.keyCode===m.ENTER||f.keyCode===m.SPACE)z.stop(f),this.clearGraphics()})),g(this.coordinateFormatStart.content.frmtSelect,
"keydown",b.hitch(this,function(f){f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatStart),x.focus(this.coordinateFormatButtonStart))})),g(this.coordinateFormatStart.content.frmtVal,"keydown",b.hitch(this,function(f){f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatStart),x.focus(this.coordinateFormatButtonStart))})),g(this.coordinateFormatStart.content.addSignChkBox,"keydown",b.hitch(this,function(f){f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatStart),x.focus(this.coordinateFormatButtonStart));
f.keyCode===m.ENTER&&(z.stop(f),this.coordinateFormatStart.content.addSignChkBox.checked=this.coordinateFormatStart.content.addSignChkBox.checked?!1:!0)})),g(this.coordinateFormatEnd.content.frmtSelect,"keydown",b.hitch(this,function(f){f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatEnd),x.focus(this.coordinateFormatButtonEnd))})),g(this.coordinateFormatEnd.content.frmtVal,"keydown",b.hitch(this,function(f){f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatEnd),x.focus(this.coordinateFormatButtonEnd))})),
g(this.coordinateFormatEnd.content.addSignChkBox,"keydown",b.hitch(this,function(f){f.keyCode===m.ESCAPE&&(z.stop(f),l.close(this.coordinateFormatEnd),x.focus(this.coordinateFormatButtonEnd));f.keyCode===m.ENTER&&(z.stop(f),this.coordinateFormatEnd.content.addSignChkBox.checked=this.coordinateFormatEnd.content.addSignChkBox.checked?!1:!0)})),g(this.lengthInputDiv,n.leave,b.hitch(this,this.checkValidInputs)),g(this.angleInputDiv,n.leave,b.hitch(this,this.checkValidInputs)))},lineLengthDidChange:function(f){f=
v.format(f,{places:2,locale:p.locale});this.lengthInput.set("value",f)},lineAngleDidChange:function(f){f=v.format(f,{places:2,locale:p.locale});this.angleInput.set("value",f)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.coordToolEnd.set("disabled",this.interactiveLine.checked);this.interactiveLine.checked?(e.add(this.addPointBtnEndDiv,"controlGroupHidden"),this.addPointBtnStart.title=this.nls.drawLineLabel,this.addPointBtnEnd.hidden=!0):(this.coordToolEnd.clear(),this.addPointBtnStart.title=
this.nls.addPointLabel,e.remove(this.addPointBtnEndDiv,"controlGroupHidden"),this.addPointBtnEnd.hidden=!1);this.checkValidInputs()},lineTypeDDDidChange:function(){"Points"===this.lineTypeDD.get("value")?(this.addPointBtnStart.title=this.nls.addPointLabel,this.coordToolEnd.set("disabled",!1),this.angleInput.set("disabled",!0),this.lengthInput.set("disabled",!0),this.interactiveLine.disabled=!1,e.remove(this.addPointBtnEndDiv,"controlGroupHidden"),e.remove(this.interactiveLabel,"disabledLabel"),this.addPointBtnEnd.hidden=
!1):(this.addPointBtnStart.title=this.nls.addPointLabel,this.interactiveLine.disabled=!0,this.interactiveLine.checked&&(this.interactiveLine.checked=!1),this.coordToolEnd.set("value",""),this.coordToolEnd.set("disabled",!0),this.angleInput.set("disabled",!1),this.lengthInput.set("disabled",!1),e.add(this.addPointBtnEndDiv,"controlGroupHidden"),e.add(this.interactiveLabel,"disabledLabel"),this.addPointBtnEnd.hidden=!0);this.checkValidInputs()},coordinateFormatButtonStartClicked:function(){this.coordinateFormatStart.content.set("ct",
this.coordToolStart.inputCoordinate.formatType);l.open({popup:this.coordinateFormatStart,around:this.coordinateFormatButtonStart});x.focus(this.coordinateFormatStart.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormatStart&&this.coordinateFormatStart.domNode.offsetParent&&l.close(this.coordinateFormatStart);this.coordinateFormatEnd&&this.coordinateFormatEnd.domNode.offsetParent&&l.close(this.coordinateFormatEnd)},coordinateFormatButtonEndClicked:function(){this.coordinateFormatEnd.content.set("ct",
this.coordToolEnd.inputCoordinate.formatType);l.open({popup:this.coordinateFormatEnd,around:this.coordinateFormatButtonEnd});x.focus(this.coordinateFormatEnd.content.frmtSelect.focusNode)},coordToolStartKeyWasPressed:function(f){this.dtStart.removeStartGraphic();f.keyCode===m.ENTER&&(this._startPointInputKeyPressed=this._restrictFocusOnAddStartPointBtn=!0,this.coordToolStart.inputCoordinate.getInputType().then(b.hitch(this,function(f){"UNKNOWN"===f.inputType?(new w({message:this.nls.invalidCoordinateTypeMessage}),
this.coordToolStart.inputCoordinate.coordinateEsriGeometry=null):(this.dtStart.onLineStartManualInputHandler(this.coordToolStart.inputCoordinate.coordinateEsriGeometry),this.setCoordLabelStart(f.inputType),this.coordToolStart.inputCoordinate.set("formatString",this.coordinateFormatStart.content.formats[f.inputType].defaultFormat),this.coordToolStart.inputCoordinate.set("formatType",f.inputType),this.dtStart.addStartGraphic(f.coordinateEsriGeometry,this._ptSym));this.checkValidInputs()})))},coordToolEndKeyWasPressed:function(f){this.dtEnd.removeStartGraphic();
f.keyCode===m.ENTER&&(this._endPointInputKeyPressed=this._restrictFocusOnEndStartPointBtn=!0,this.coordToolEnd.inputCoordinate.getInputType().then(b.hitch(this,function(f){"UNKNOWN"===f.inputType?(new w({message:this.nls.invalidCoordinateTypeMessage}),this.coordToolEnd.inputCoordinate.coordinateEsriGeometry=null):(this.dtEnd.onLineStartManualInputHandler(this.coordToolEnd.inputCoordinate.coordinateEsriGeometry),this.setCoordLabelEnd(f.inputType),this.coordToolEnd.inputCoordinate.set("formatString",
this.coordinateFormatEnd.content.formats[f.inputType].defaultFormat),this.coordToolEnd.inputCoordinate.set("formatType",f.inputType),this.dtEnd.addStartGraphic(f.coordinateEsriGeometry,this._ptSym));this.checkValidInputs()})))},setCoordLabelStart:function(f){f=F.sanitizeHTML(c.substitute(this.nls.startPointLabel+" (${crdType})",{crdType:f}));this.lineStartPointLabel.innerHTML=f;h.set(this.coordToolStart.textbox,"aria-label",f)},setCoordLabelEnd:function(f){f=F.sanitizeHTML(c.substitute(this.nls.endPointLabel+
" (${crdType})",{crdType:f}));this.lineEndPointLabel.innerHTML=f;h.set(this.coordToolEnd.textbox,"aria-label",f)},checkValidInputs:function(){e.add(this.okButton,"jimu-state-disabled");h.set(this.okButton,"tabindex",-1);this.interactiveLine.checked||("DistAndBearing"===this.lineTypeDD.get("value")?null!==this.coordToolStart.inputCoordinate.coordinateEsriGeometry&&this.lengthInput.isValid()&&this.angleInput.isValid()&&(e.remove(this.okButton,"jimu-state-disabled"),h.set(this.okButton,"tabindex",0)):
this.interactiveLine.checked||null===this.coordToolStart.inputCoordinate.coordinateEsriGeometry||null===this.coordToolEnd.inputCoordinate.coordinateEsriGeometry||(e.remove(this.okButton,"jimu-state-disabled"),h.set(this.okButton,"tabindex",0)))},addStartPointButtonClicked:function(){e.contains(this.addPointBtnStart,"drawPointBtn-active")?(this.dtStart.deactivate(),this._setMapNavigation(!0)):(this.tabSwitched(),this.coordToolStart.manualInput=!1,this.coordToolEnd.manualInput=!1,this._setMapNavigation(!1),
"Points"===this.lineTypeDD.get("value")&&this.interactiveLine.checked?this.dtStart.activate("polyline"):this.dtStart.activate("point"));e.toggle(this.addPointBtnStart,"drawPointBtn-active")},addEndPointButtonClicked:function(){e.contains(this.addPointBtnEnd,"drawPointBtn-active")?(this.dtEnd.deactivate(),this._setMapNavigation(!0)):(this.tabSwitched(),this.coordToolStart.manualInput=!1,this.coordToolEnd.manualInput=!1,this._setMapNavigation(!1),this.dtEnd.activate("point"));e.toggle(this.addPointBtnEnd,
"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dtStart.set("lengthUnit",this.currentLengthUnit)},angleUnitDDDidChange:function(){this.currentAngleUnit=this.angleUnitDD.get("value");this.dtStart.set("angleUnit",this.currentAngleUnit);"degrees"===this.currentAngleUnit?(this.angleInput.constraints.max=360,this.angleInput.rangeMessage=this.nls.degreesRangeMessage):(this.angleInput.constraints.max=6400,this.angleInput.rangeMessage=this.nls.millsRangeMessage)},
feedbackDidCompleteStart:function(f){if("polyline"===f.geometry.type){if(void 0!==this.lengthInput.get("value")||void 0!==this.angleInput.get("value")){this.currentLine=new Q(f);var d=null,d=new L({paths:4326===this.map.spatialReference.wkid?this.currentLine.geographicGeometry.paths:this.currentLine.wmGeometry.paths,spatialReference:this.map.spatialReference});4326===this.map.spatialReference.wkid&&(d=P.geodesicDensify(d,1E4));this.currentLine.graphic=new D(d,this._lineSym,{GeoLength:this.lengthInput.get("displayedValue").toString()+
" "+this.lengthUnitDD.get("displayedValue"),LineAngle:this.angleInput.get("displayedValue").toString()+" "+this.angleUnitDD.get("displayedValue")});d=f.geometry.getExtent().getCenter();f=P.nearestCoordinate(f.geometry,d);var d={lengthLabel:this.nls.lengthLabel,spacerLabel:" ",lengthInputValue:this.lengthInput.get("displayedValue").toString(),abbrevLengthLabel:this._getLengthAbbrevation(this.lengthUnitDD.get("value")),angleLabel:this.nls.angleLabel,angleValue:this.angleInput.get("displayedValue").toString(),
abbrevAngleLabel:this._getDegreeAbbreviation(this.angleUnitDD.get("value"))},a=c.substitute(window.isRTL?"${spacerLabel}${lengthInputValue}${spacerLabel}${abbrevLengthLabel}${spacerLabel}${lengthLabel}":"${lengthLabel}${spacerLabel}${lengthInputValue}${spacerLabel}${abbrevLengthLabel}",d);this._tsGL.add(new D(f.coordinate,b.clone(this._labelSym).setOffset(0,30).setText(a)));a=c.substitute(window.isRTL?"${spacerLabel}${angleValue}${spacerLabel}${abbrevAngleLabel}${spacerLabel}${angleLabel}":"${angleLabel}${spacerLabel}${angleValue}${spacerLabel}${abbrevAngleLabel}",
d);this._tsGL.add(new D(f.coordinate,b.clone(this._labelSym).setText(a)));this._gl.add(this.currentLine.graphic);this._gl.refresh();this.dtEnd.onLineStartManualInputHandler(this.currentLine.endPoint);this.dtStart.onLineStartManualInputHandler(this.currentLine.startPoint);this.dtStart.removeStartGraphic();this.dtEnd.removeStartGraphic();f=4326===this.map.spatialReference.wkid?this.currentLine.geographicGeometry.getExtent().expand(3):this.currentLine.wmGeometry.getExtent().expand(3);this.map.setExtent(f);
this.interactiveLine.checked&&e.toggle(this.addPointBtnStart,"drawPointBtn-active")}}else e.toggle(this.addPointBtnStart,"drawPointBtn-active");this.checkValidInputs();this._setMapNavigation(!0);this.dtStart.deactivate()},feedbackDidCompleteEnd:function(f){this.checkValidInputs();this._setMapNavigation(!0);this.dtEnd.deactivate();e.toggle(this.addPointBtnEnd,"drawPointBtn-active")},createManualGraphic:function(){var f=this.coordToolStart.inputCoordinate.coordinateEsriGeometry,d=this.coordToolEnd.inputCoordinate.coordinateEsriGeometry,
a=new L;a.addPath([f,d]);var k=P.geodesicLength(a,9001);this.lengthInput.set("value",this.dtStart.coordTool.convertMetersToUnits(k,this.lengthUnitDD.get("value")));this.angleInput.set("value",this.dtStart.getAngle(f,d));this.map.setExtent(a.getExtent().expand(3));this.feedbackDidCompleteStart({geometry:a,geographicGeometry:a});this.dtStart.clearPoints();this.dtEnd.clearPoints()},okButtonClicked:function(f){if(!e.contains(this.okButton,"jimu-state-disabled"))if(this._restrictFocusOnEndStartPointBtn=
this._restrictFocusOnAddStartPointBtn=!0,"Points"===this.lineTypeDD.get("value"))this.createManualGraphic();else{f=this.coordToolStart.inputCoordinate.coordinateEsriGeometry;var d=this.coordToolStart.inputCoordinate.util.convertToMeters(this.lengthInput.get("value"),this.lengthUnitDD.get("value")),d=new H(f,{geodesic:!0,radius:d,numberOfPoints:64E3}),a=this.angleInput.get("value"),a="degrees"===this.currentAngleUnit?parseInt(177.77777778*a,10):parseInt(10*a,10),d=d.getPoint(0,a),a=new L;a.addPath([f,
d]);this.feedbackDidCompleteStart({geometry:a,geographicGeometry:a});this.coordToolEnd.inputCoordinate.set("coordinateEsriGeometry",d)}},clearGraphics:function(){this._gl&&(this._gl.clear(),this._tsGL.clear(),this.dtStart.removeStartGraphic(),this.dtEnd.removeStartGraphic(),this.coordToolStart.clear(),this.coordToolEnd.clear(),this.tabSwitched());this.checkValidInputs();for(var f=0;f<this.map.graphicsLayerIds.length;f++)this.map.getLayer(this.map.graphicsLayerIds[f]).refresh()},setGraphicsHidden:function(){this._gl&&
this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},tabSwitched:function(){this.dtStart.deactivate();this.dtEnd.deactivate();this._setMapNavigation(!0);this.addPointBtnStart&&e.remove(this.addPointBtnStart,"drawPointBtn-active");this.addPointBtnEnd&&e.remove(this.addPointBtnEnd,"drawPointBtn-active");l.close(this.coordinateFormat)},_setMapNavigation:function(f){f?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(f){var d=
null;if(f)switch(f){case "feet":d=this.nls.abbrevFeetLabel;break;case "kilometers":d=this.nls.abbrevKmLabel;break;case "miles":d=this.nls.abbrevMilesLabel;break;case "meters":d=this.nls.abbrevMetersLabel;break;case "nautical-miles":d=this.nls.abbrevNauticalMilesLabel;break;case "yards":d=this.nls.abbrevYardsLabel;break;default:d=f}return d},_getDegreeAbbreviation:function(f){var d=null;if(f)switch(f){case "degrees":d=this.nls.abbrevDegreesLabel;break;case "mils":d=this.nls.abbrevMilsLabel;break;default:d=
f}return d},setFirstFocusNode:function(){F.initFirstFocusNode(this.domNodeObj,this.lineTypeDD.focusNode)},focusFirstNodeOfSelectedTab:function(){x.focus(this.lineTypeDD.focusNode)},setLastFocusNode:function(){F.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"esri/geometry/Circle":function(){define("dojo/_base/declare dojo/_base/lang dojo/has ../kernel ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(q,b,p,g,a,e,c,n,v,m){q=
q(e,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.344,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(c,k){c.center?k=c:(k=k||{},k.center=c);this.center=b.isArray(k.center)?new a(k.center[0],k.center[1]):k.center;this.radius=k.radius||1E3;this.radiusUnit=k.radiusUnit||m.METERS;this.geodesic=!0===k.geodesic?!0:!1;this.numberOfPoints=
k.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var a=this.radius*this._unitToMeters[this.radiusUnit],k=this._srType(this.center.spatialReference);if(this.geodesic){var d;switch(k){case "webMercator":d=n.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":d=
this.center}a=this._createGeodesicCircle(d,a,this.numberOfPoints,d.spatialReference);"webMercator"===k&&(a=n.geographicToWebMercator(a))}else{var c;"webMercator"===k||"projected"===k?c=a/this._convert2Meters(1,this.center.spatialReference):"geographic"===k&&(c=a/this._unitToMeters.esriDecimalDegrees);a=this._createPlanarCircle(this.center,c,this.numberOfPoints)}this.spatialReference=a.spatialReference;this.addRing(a.rings[0]);this.verifySR()},_createGeodesicCircle:function(a,k,d,b){for(var r=0,l=
Math.PI/180,w=[],t;r<2*Math.PI;)t=c._directGeodeticSolver(a.y*l,a.x*l,r,k,b),w.push([t.x,t.y]),r+=Math.PI/(d/2);w.push(w[0]);return new e(w)},_createPlanarCircle:function(a,k,d){for(var c=0,b=[],l,w;c<2*Math.PI;)l=a.x+Math.cos(c)*k,w=a.y+Math.sin(c)*k,b.push([l,w]),c+=Math.PI/(d/2);b.push(b[0]);a=new e(a.spatialReference);a.addRing(b);return a},_srType:function(a){return a.isWebMercator()?"webMercator":null!=v[a.wkid]||a.wkt&&0===a.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(a,
k){if(null!=v[k.wkid])k=v.values[v[k.wkid]];else{k=k.wkt;var d=k.lastIndexOf(",")+1,c=k.lastIndexOf("]]");k=parseFloat(k.substring(d,c))}return a*k}});p("extend-esri")&&b.setObject("geometry.Circle",q,g);return q})},"widgets/DistanceAndDirection/models/LineFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/has dojo/topic esri/toolbars/draw esri/graphic esri/geometry/Polyline esri/geometry/geometryEngine jimu/utils ./Feedback".split(" "),function(q,b,p,g,a,e,c,
n,v,m,h){h=q([h],{constructor:function(a){q.safeMixin(this,a);this.syncEvents()},syncEvents:function(){a.subscribe("manual-startpoint-input",b.hitch(this,this.onLineStartManualInputHandler));a.subscribe("manual-line-end-point-input",b.hitch(this,this.onLineEndManualInputHandler));a.subscribe("clear-points",b.hitch(this,this.clearPoints))},clearPoints:function(a){a&&(this._points=[],this.map.graphics.clear())},onLineStartManualInputHandler:function(a){this._points=[];this._points.push(a.offset(0,0));
this.set("startPoint",this._points[0]);this.map.centerAt(a)},onLineEndManualInputHandler:function(a){this._points.push(a.offset(0,0));this.set("endPoint",this._points[1])},getAngle:function(a,d){var c=null,c=(180*Math.atan2(d.x-a.x,d.y-a.y)/Math.PI+360)%360;"mils"===this.angleUnit&&(c*=17.777777778);return c.toFixed(2)},_onClickHandler:function(a){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);a=d||a.mapPoint;d=this.map;var b;this._points.push(a);switch(this._geometryType){case e.POINT:this.set("startPoint",
this._points[0]);this.set("endPoint",this._points[0]);this._drawEnd(a);this._setTooltipMessage(0);break;case e.POLYLINE:if(2===this._points.length){this.set("endPoint",this._points[1]);this._onDblClickHandler();return}1===this._points.length?(this.set("startPoint",this._points[0]),b=new n(d.spatialReference),b.addPath(this._points),this._graphic=d.graphics.add(new c(b,this.lineSymbol),!0),d.snappingManager&&d.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=p.connect(d,
"onMouseMove",this._onMouseMoveHandler),this._tGraphic=d.graphics.add(new c(new n({paths:[[[a.x,a.y],[a.x,a.y]]],spatialReference:d.spatialReference}),this.lineSymbol),!0)):(this.set("endPoint",this._points[1]),this._graphic.geometry._insertPoints([a],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),d=this._tGraphic,b=d.geometry,b.setPoint(0,0,a),b.setPoint(0,1,a),d.setGeometry(b))}this._setTooltipMessage(this._points.length);1===this._points.length&&"polyline"===this._geometryType&&
(a=this._tooltip)&&(a.innerHTML=m.sanitizeHTML(this.nls.clickToFinishLineMessage))},_onDblClickHandler:function(a){var d=this._points,c=this.map.spatialReference;g("esri-touch")&&a&&d.push(a.mapPoint);a=new n({paths:[[[d[0].x,d[0].y],[d[1].x,d[1].y]]],spatialReference:c});a.geodesicLength=v.geodesicLength(a,9001);p.disconnect(this._onMouseMoveHandler_connect);this._clear();this._setTooltipMessage(0);this._drawEnd(a)},_onMouseMoveHandler:function(c){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);
var b=this._geometryType===e.POLYLINE?this._points[0]:this._points[this._points.length-1];c=d||c.mapPoint;var k=this._tGraphic.geometry;k.setPoint(0,0,{x:b.x,y:b.y});k.setPoint(0,1,{x:c.x,y:c.y});d=v.geodesicDensify(k,10001);k=v.geodesicLength(k,9001);this._graphic.setGeometry(d);d=this.coordTool.convertMetersToUnits(k,this.lengthUnit);b=this.getAngle(b,c);a.publish("DD_LINE_LENGTH_DID_CHANGE",d);a.publish("DD_LINE_ANGLE_DID_CHANGE",b)}});h.drawnLineLengthDidChange="DD_LINE_LENGTH_DID_CHANGE";h.drawnLineAngleDidChange=
"DD_LINE_ANGLE_DID_CHANGE";return h})},"widgets/DistanceAndDirection/models/Feedback":function(){define("dojo/_base/declare dojo/Stateful esri/toolbars/draw esri/geometry/Point esri/graphic esri/geometry/geometryEngineAsync esri/units".split(" "),function(q,b,p,g,a,e,c){return q([p,b],{startPoint:null,_setStartPoint:function(a){this._set("startPoint",a)},endPoint:null,_setEndPoint:function(a){this._set("endPoint",a)},lengthUnit:"meters",_setLengthUnit:function(a){this._set("lengthUnit",a)},angleUnit:"degrees",
_setAngle:function(a){this._set("angleUnit",a)},isDiameter:!0,constructor:function(){e.isSimple(new g({x:-122.65,y:45.53,spatialReference:{wkid:4326}}))},getRadiusUnitType:function(){var a=c.METERS;switch(this.lengthUnit){case "meters":a=c.METERS;break;case "feet":a=c.FEET;break;case "kilometers":a=c.KILOMETERS;break;case "miles":a=c.MILES;break;case "nautical-miles":a=c.NAUTICAL_MILES;break;case "yards":a=c.YARDS}return a},addStartGraphic:function(c,b){this.removeStartGraphic();this.startGraphic=
new a(c,b);this.map.graphics.add(this.startGraphic)},removeStartGraphic:function(){this.startGraphic&&this.map.graphics.remove(this.startGraphic);this.startGraphic=null}})})},"esri/geometry/geometryEngineAsync":function(){define("require exports esri/kernel module esri/geometry/Geometry esri/geometry/Polygon esri/geometry/Polyline esri/geometry/Point esri/geometry/Extent esri/geometry/Multipoint esri/workers/WorkerClient dojo/Deferred".split(" "),function(q,b,p,g,a,e,c,n,v,m,h,k){function d(a){if(void 0===
n.fromJson){if(void 0!==a.x&&void 0!==a.y)return new n(a);if(void 0!==a.paths)return new c(a);if(void 0!==a.rings)return new e(a);if(void 0!==a.points)return new m(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return new v(a)}else{if(void 0!==a.x&&void 0!==a.y)return n.fromJson(a);if(void 0!==a.paths)return c.fromJson(a);if(void 0!==a.rings)return e.fromJson(a);if(void 0!==a.points)return m.fromJson(a);if(void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax)return v.fromJson(a)}}
function r(a,d){var c;if(null==a||void 0===a||"number"===typeof a)return a;var b=a.toString();if(""===b)return null;if(2==d){if(c=P[b],void 0!==c)return c}else if(0==d){c=J[b];if(void 0!==c)return c;c=L[a];if(void 0!==c)return c}else if(3==d&&(c=J[b],void 0!==c))return c;if(1==d&&(c=L[a],void 0!==c))return c;if(!0===/^\d+$/.test(b))return parseInt(b);throw Error("Unrecognised Unit Type");}function y(a){if(void 0!==a&&null!==a)switch(a){case "loxodrome":return 1;case "great-elliptic":return 2;case "normal-section":return 3;
case "shape-preserving":return 4}return 0}function l(a){if(null===a||void 0===a)return null;if(G)switch(a.type){case "point":return{x:a.x,y:a.y,z:a.z,m:a.m};case "multipoint":return{points:a.points,hasZ:a.hasZ,hasM:a.hasM};case "polyline":return{paths:a.paths,hasZ:a.hasZ,hasM:a.hasM};case "polygon":return{rings:a.rings,hasZ:a.hasZ,hasM:a.hasM};case "extent":return{xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,ymax:a.ymax,zmin:a.zmin,zmax:a.zmax,mmin:a.mmin,mmax:a.mmax}}else switch(a.type){case "point":return{x:a.x,
y:a.y};case "multipoint":return{points:a.points};case "polyline":return{paths:a.paths};case "polygon":return{rings:a.rings};case "extent":return{xmin:a.xmin,ymin:a.ymin,xmax:a.xmax,ymax:a.ymax}}return null}function w(a,c){if(null===a)return null;a=d(a);G?a.set("spatialReference",c):a.setSpatialReference(c);return a}function t(a){return null==a||void 0===a?null:-1!=a.wkid&&null!==a.wkid&&void 0!==a.wkid?{wkid:a.wkid}:""!==a.wkt&&void 0!==a.wkt&&null!==a.wkt?{wkt:a.wkt}:null}function F(a,d,c){var b=
new k,D=d.spatialReference;u.a({action:a,geoma:l(d),geomb:l(c),spatialReference:t(d.spatialReference)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(w(a.result,D))},function(a){b.reject(a)});return b.promise}function B(a,d,c){var b=new k;u.a({action:a,geoma:l(d),geomb:l(c),spatialReference:t(d.spatialReference)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(a.result)},function(a){b.reject(a)});return b.promise}var G=0==p.version.indexOf("4."),
I;(function(a){a[a.Linear=0]="Linear";a[a.Angular=1]="Angular";a[a.Area=2]="Area";a[a.LinearOrAngular=3]="LinearOrAngular"})(I||(I={}));var J={feet:9002,kilometers:9036,meters:9001,miles:9035,"nautical-miles":9030,yards:9096},P={acres:109402,ares:109463,hectares:109401,"square-feet":109405,"square-kilometers":109414,"square-meters":109404,"square-miles":109413,"square-yards":109442},L={degrees:9102,radians:9101},H=function(){function a(){this.c=!0;this.i=null}a.prototype.A=function(a){var d=this;
this.i=new h;this.i.setWorker(this.l(),function(){d.c=!1;a()})};a.prototype.l=function(){return q.B?q.B("./geometryenginewebworker"):g.id.replace(/\/[^\/]*$/ig,"/")+"./geometryenginewebworker"};return a}(),u=function(){function a(){}a.a=function(d){var c=new k;a.h.push({task:d,d:c});a.f();return c.promise};a.f=function(){if(0<a.h.length){for(var d=null,c=0;c<a.b.length;c++)if(!1===a.b[c].c){d=a.b[c];break}null===d&&a.b.length<a.g&&(c=new H,a.b.push(c),c.A(function(){a.f()}));if(null!==d){var b=this.h.shift();
d.c=!0;d.i.postMessage(b.task).then(function(c){d.c=!1;try{b.d.resolve(c)}catch(C){}a.f()},function(c){d.c=!1;try{b.d.reject(c)}catch(C){}a.f()})}}};a.b=[];a.h=[];a.g=4;return a}();return function(){function d(){}d._removeAllWorkers=function(){u.b=[]};d._setMaxWorkers=function(a){d._removeAllWorkers();u.g=a};d._getMaxWorkers=function(){return u.g};d._getNumWorkers=function(){return u.b.length};d.extendedSpatialReferenceInfo=function(a){var d=new k;u.a({action:"extendedspatialreferenceinfo",spatialReference:t(a)}).then(function(a){0===
a.status?d.reject(Error(a.error.message)):d.resolve(a.result)},function(a){d.reject(a)});return d.promise};d.equals=function(a,d){return null===a&&null!==d||null===d&&null!==a?!1:B("equals",a,d)};d.intersects=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return B("intersects",a,d)};d.touches=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return B("touches",a,d)};d.within=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");
return B("within",a,d)};d.disjoint=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return B("disjoint",a,d)};d.overlaps=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return B("overlaps",a,d)};d.crosses=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return B("crosses",a,d)};d.contains=function(a,d){if(null===a||null===d)throw Error("Illegal Argument Exception");return B("contains",a,d)};d.isSimple=function(a){return B("issimple",
a,null)};d.clip=function(a,d){return F("clip",a,d)};d.simplify=function(a){var d=new k,c=a.spatialReference;u.a({action:"simplify",geoma:l(a),spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?d.reject(Error(a.error.message)):d.resolve(w(a.result,c))},function(a){d.reject(a)});return d.promise};d.rotate=function(a,d,c){var b=new k,e=a.spatialReference;if(void 0===c||null===c)switch(a.type){case "point":c=a;break;case "extent":c=G?a.get("center"):a.getCenter();break;default:c=G?
a.get("extent").get("center"):a.getExtent().getCenter()}u.a({action:"rotate",geoma:l(a),spatialReference:t(a.spatialReference),angle:d,rotpt:l(c)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(w(a.result,e))},function(a){b.reject(a)});return b.promise};d.flipHorizontal=function(a,d){var c=new k,b=a.spatialReference;if(void 0===d||null===d)switch(a.type){case "point":d=a;break;case "extent":d=G?a.get("center"):a.getCenter();break;default:d=G?a.get("extent").get("center"):
a.getExtent().getCenter()}u.a({action:"fliph",geoma:l(a),spatialReference:t(a.spatialReference),flippt:l(d)}).then(function(a){0===a.status?c.reject(Error(a.error.message)):c.resolve(w(a.result,b))},function(a){c.reject(a)});return c.promise};d.flipVertical=function(a,d){var c=new k,b=a.spatialReference;if(void 0===d||null===d)switch(a.type){case "point":d=a;break;case "extent":d=G?a.get("center"):a.getCenter();break;default:d=G?a.get("extent").get("center"):a.getExtent().getCenter()}u.a({action:"flipv",
geoma:l(a),spatialReference:t(a.spatialReference),flippt:l(d)}).then(function(a){0===a.status?c.reject(Error(a.error.message)):c.resolve(w(a.result,b))},function(a){c.reject(a)});return c.promise};d.distance=function(a,d,c){var b=new k;u.a({action:"distance",geoma:l(a),geomb:l(d),spatialReference:t(a.spatialReference),distanceunits:r(c,3)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(a.result)},function(a){b.reject(a)});return b.promise};d.relate=function(a,d,c){var b=
new k;u.a({action:"relate",geoma:l(a),geomb:l(d),relation:c,spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(a.result)},function(a){b.reject(a)});return b.promise};d.nearestCoordinate=function(a,d,c){var b=new k,e=a.spatialReference;u.a({action:"nearestcoord",geoma:l(a),geomb:l(d),spatialReference:t(a.spatialReference),testinterior:void 0===c?!0:c}).then(function(a){0===a.status?b.reject(Error(a.error.message)):(a.result.coordinate=
w(a.result.coordinate,e),b.resolve(a.result))},function(a){b.reject(a)});return b.promise};d.nearestVertex=function(a,d){var c=new k,b=a.spatialReference;u.a({action:"nearestvertex",geoma:l(a),geomb:l(d),spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?c.reject(Error(a.error.message)):(a.result.coordinate=w(a.result.coordinate,b),c.resolve(a.result))},function(a){c.reject(a)});return c.promise};d.nearestVertices=function(a,d,c,b){var e=new k,r=a.spatialReference;u.a({action:"nearestvertices",
geoma:l(a),geomb:l(d),spatialReference:t(a.spatialReference),searchradius:c,maxreturn:b}).then(function(a){if(0===a.status)e.reject(Error(a.error.message));else{for(var d=0;d<a.result.length;d++)a.result[d].coordinate=w(a.result[d].coordinate,r);e.resolve(a.result)}},function(a){e.reject(a)});return e.promise};d.cut=function(a,d){var c=new k,b=a.spatialReference;u.a({action:"cut",geoma:l(a),geomb:l(d),spatialReference:t(a.spatialReference)}).then(function(a){if(0===a.status)c.reject(Error(a.error.message));
else{for(var d=0;d<a.result.length;d++)a.result[d]=w(a.result[d],b);c.resolve(a.result)}},function(a){c.reject(a)});return c.promise};d.generalize=function(a,d,c,b){var e=new k,g=a.spatialReference;u.a({action:"generalize",geoma:l(a),maxdeviation:d,removedegenerateparts:c,maxdeviationunit:r(b,3),spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?e.reject(Error(a.error.message)):e.resolve(w(a.result,g))},function(a){e.reject(a)});return e.promise};d.densify=function(a,d,c){var b=
new k,e=a.spatialReference;u.a({action:"densify",geoma:l(a),maxsegmentlength:d,maxsegmentlengthunit:r(c,3),spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(w(a.result,e))},function(a){b.reject(a)});return b.promise};d.geodesicDensify=function(a,d,c,b){void 0===b&&(b=0);var e=new k,g=a.spatialReference;u.a({action:"geodensify",geoma:l(a),maxsegmentlength:d,maxsegmentlengthunit:r(c,3),spatialReference:t(a.spatialReference),curveType:b}).then(function(a){0===
a.status?e.reject(Error(a.error.message)):e.resolve(w(a.result,g))},function(a){e.reject(a)});return e.promise};d.intersect=function(c,b){return c instanceof a?F("intersect",c,b):d.u(c,b)};d.u=function(a,d){for(var c=new k,b=[],e=0;e<a.length;e++)b.push(l(a[e]));var r=d.spatialReference;u.a({action:"intersectmany",geom:l(d),geometries:b,spatialReference:t(d.spatialReference)}).then(function(a){if(0===a.status)c.reject(Error(a.error.message));else{for(var d=0;d<a.result.length;d++)a.result[d]=w(a.result[d],
r);c.resolve(a.result)}},function(a){c.reject(a)});return c.promise};d.difference=function(c,b){return c instanceof a?F("difference",c,b):d.s(c,b)};d.s=function(a,d){for(var c=new k,b=[],e=0;e<a.length;e++)b.push(l(a[e]));var r=d.spatialReference;u.a({action:"differencemany",geom:l(d),geometries:b,spatialReference:t(d.spatialReference)}).then(function(a){if(0===a.status)c.reject(Error(a.error.message));else{for(var d=0;d<a.result.length;d++)a.result[d]=w(a.result[d],r);c.resolve(a.result)}},function(a){c.reject(a)});
return c.promise};d.symmetricDifference=function(c,b){return c instanceof a?F("symdifference",c,b):d.w(c,b)};d.w=function(a,d){for(var c=new k,b=[],e=0;e<a.length;e++)b.push(l(a[e]));var r=d.spatialReference;u.a({action:"symdifferencemany",geom:l(d),geometries:b,spatialReference:t(d.spatialReference)}).then(function(a){if(0===a.status)c.reject(Error(a.error.message));else{for(var d=0;d<a.result.length;d++)a.result[d]=w(a.result[d],r);c.resolve(a.result)}},function(a){c.reject(a)});return c.promise};
d.union=function(d,c){void 0===c&&(c=null);var b=new k,e=[];if(null===d)return b.resolve(null),b.promise;d instanceof a&&(d=[d],null!==c&&d.push(c));if(0===d.length)return b.resolve(null),b.promise;for(c=0;c<d.length;c++)e.push(l(d[c]));var r=d[0].spatialReference;u.a({action:"unionmany",geometries:e,spatialReference:t(r)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(w(a.result,r))},function(a){b.reject(a)});return b.promise};d.buffer=function(c,b,e,g){void 0===g&&(g=
!1);if(c instanceof a){var y=new k,n=c.spatialReference;u.a({action:"buffer",geoma:l(c),spatialReference:t(c.spatialReference),distance:b,unit:r(e,3),geodesic:!1,geodesicmaxdeviation:NaN,geodesiccurvetype:0}).then(function(a){0===a.status?y.reject(Error(a.error.message)):y.resolve(w(a.result,n))},function(a){y.reject(a)});return y.promise}if("[object Array]"!==Object.prototype.toString.call(b)){for(var A=[],x=0;x<c.length;x++)A.push(b);b=A}if(b.length!=c.length){if(0==b.length)throw Error("Illegal Argument Exception");
for(var A=[],h=0,x=0;x<c.length;x++)void 0===b[x]?A.push(h):(A.push(b[x]),h=b[x]);b=A}return d.j(c,b,e,!1,g,"geodesic",NaN)};d.geodesicBuffer=function(c,b,e,g,n,h){if(c instanceof a){var A=new k;void 0===n&&(n=NaN);var x=c.spatialReference;u.a({action:"buffer",geoma:l(c),spatialReference:t(c.spatialReference),distance:b,unit:r(e,0),geodesic:!0,geodesicmaxdeviation:n,geodesiccurvetype:y(g)}).then(function(a){0===a.status?A.reject(Error(a.error.message)):A.resolve(w(a.result,x))},function(a){A.reject(a)});
return A.promise}if("[object Array]"!==Object.prototype.toString.call(b)){for(var m=[],B=0;B<c.length;B++)m.push(b);b=m}if(b.length!=c.length){if(0==b.length)throw Error("Illegal Argument Exception");for(var m=[],f=0,B=0;B<c.length;B++)void 0===b[B]?m.push(f):(m.push(b[B]),f=b[B]);b=m}return d.j(c,b,e,!0,g,n,h)};d.j=function(a,d,c,b,e,g,n){var A=new k,h=[];void 0===n&&(n=NaN);if(null===a||0===a.length)return A.resolve(null),A.promise;for(var m=0;m<a.length;m++)h.push(l(a[m]));c=b?r(c,0):r(c,3);var f=
a[0].spatialReference;u.a({action:"buffermany",geometries:h,spatialReference:t(f),distances:d,tounionresults:e,unit:c,geodesic:b,geodesicmaxdeviation:n,geodesiccurvetype:y(g)}).then(function(a){if(0===a.status)A.reject(Error(a.error.message));else{for(var d=0;d<a.result.length;d++)a.result[d]=w(a.result[d],f);A.resolve(a.result)}},function(a){A.reject(a)});return A.promise};d.convexHull=function(c,b){void 0===b&&(b=!1);if(c instanceof a){var e=new k,r=c.spatialReference;u.a({action:"convexhull",geoma:l(c),
spatialReference:t(c.spatialReference)}).then(function(a){0===a.status?e.reject(Error(a.error.message)):e.resolve(w(a.result,r))},function(a){e.reject(a)});return e.promise}return d.o(c,b)};d.o=function(a,d){for(var c=new k,b=[],e=0;e<a.length;e++)b.push(l(a[e]));var r=0<a.length?a[0].spatialReference:null;u.a({action:"convexhullmany",geometries:b,merge:d}).then(function(a){if(0===a.status)c.reject(Error(a.error.message));else{for(var d=0;d<a.result.length;d++)a.result[d]=w(a.result[d],r);c.resolve(a.result)}},
function(a){c.reject(a)});return c.promise};d.offset=function(c,b,e,g,n,y){var A=0;if(null!=g&&void 0!=g)switch(g){case "round":A=0;break;case "bevel":A=1;break;case "miter":A=2;break;case "square":A=3}if(c instanceof a){var h=new k,m=c.spatialReference;u.a({action:"offset",geoma:l(c),spatialReference:t(c.spatialReference),distance:b,joins:A,bevelratio:n,flattenerror:y,offsetunit:r(e,3)}).then(function(a){0===a.status?h.reject(Error(a.error.message)):h.resolve(w(a.result,m))},function(a){h.reject(a)});
return h.promise}return d.v(c,b,e,A,n,y)};d.v=function(a,d,c,b,e,g){for(var n=new k,y=[],h=0;h<a.length;h++)y.push(l(a[h]));var m=0<a.length?a[0].spatialReference:null;u.a({action:"offsetmany",geometries:y,spatialReference:t(m),distance:d,joins:b,bevelratio:e,offsetunit:r(c,3),flattenerror:g}).then(function(a){if(0===a.status)n.reject(Error(a.error.message));else{for(var d=0;d<a.result.length;d++)a.result[d]=w(a.result[d],m);n.resolve(a.result)}},function(a){n.reject(a)});return n.promise};d.planarArea=
function(a,d){var c=new k;u.a({action:"area",geoma:l(a),unit:r(d,2),spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?c.reject(Error(a.error.message)):c.resolve(a.result)},function(a){c.reject(a)});return c.promise};d.planarLength=function(a,d){var c=new k;u.a({action:"length",geoma:l(a),unit:r(d,3),spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?c.reject(Error(a.error.message)):c.resolve(a.result)},function(a){c.reject(a)});return c.promise};d.geodesicArea=
function(a,d,c){var b=new k;u.a({action:"geodesicarea",geoma:l(a),unit:r(d,2),geodesiccurvetype:y(c),spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(a.result)},function(a){b.reject(a)});return b.promise};d.geodesicLength=function(a,d,c){var b=new k;u.a({action:"geodesiclength",geoma:l(a),unit:r(d,0),geodesiccurvetype:y(c),spatialReference:t(a.spatialReference)}).then(function(a){0===a.status?b.reject(Error(a.error.message)):b.resolve(a.result)},
function(a){b.reject(a)});return b.promise};return d}()})},"esri/workers/WorkerClient":function(){define("dojo/Evented dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/request ../sniff ../kernel ../urlUtils require".split(" "),function(q,b,p,g,a,e,c,n,v){var m=window.Blob||window.webkitBlob||window.mozBlob,h=window.URL||window.webkitURL||window.mozURL;q=b([q],{declaredClass:"esri.workers.WorkerClient",worker:null,returnDeferreds:!1,_queue:null,constructor:function(a,d,c){this._isIE=e("ie");this.returnDeferreds=
!!c;this._queue={};this._acceptMessage=g.hitch(this,this._acceptMessage);this._errorMessage=g.hitch(this,this._errorMessage);a&&this.setWorker(a,g.hitch(this,function(a){this.worker=a;d(a)}))},setWorker:function(a,d){if(a instanceof Array){var c=a;a=c.shift()}var b=this._getUrl(a),b=n.normalize(b);a=!n.hasSameOrigin(b,location.href);var e;if(!1===b)return console.log("Can not resolve worker path"),!1;this.worker&&(e=this.worker,e.removeEventListener("message",this._acceptMessage,!1),e.removeEventListener("error",
this._errorMessage,!1),e.terminate(),e=null);if(a){a=this._getUrl("./mutableWorker",!0);try{this._getRemoteText(a,g.hitch(this,function(a){a=h.createObjectURL(new m([a],{type:"text/javascript"}));d(this._createWorker(a,b))}))}catch(w){try{a=n.getProxyUrl(a).path+"?"+encodeURI(a),this._useProxy=!0,d(this._createWorker(a,c))}catch(t){return console.log("Can not create worker"),!1}}}else setTimeout(g.hitch(this,function(){d(this._createWorker(b,c))}),0)},_createWorker:function(a,d){a=new Worker(a);a.addEventListener("message",
this._acceptMessage,!1);a.addEventListener("error",this._errorMessage,!1);this.worker=a;d&&this.importScripts(d);return a},postMessage:function(a,d){if(a instanceof Array||"object"!=typeof a)a={data:a};var c=Math.floor(64E9*Math.random()).toString(36);a.msgId=c;c=this._queue[c]=new p;this.worker?(d?this.worker.postMessage(a,d):this.worker.postMessage(a),this.emit("start-message",{target:this,message:a})):c.reject({message:"No worker was set."});return this.returnDeferreds?c:c.promise||c},terminate:function(){var a=
Object.keys(this._queue);this.worker&&this.worker.terminate();for(var d=a.length-1;0<=d;d--)this._queue[a[d]].cancel("terminated"),delete this._queue[a[d]]},addWorkerCallback:function(a,d){var c=this._getUrl(a,!0);!1===c?(d=new p,d.reject({message:"Could not load text from "+a})):(d=this.postMessage({action:"add-callback",url:c,cbName:d||"main"}),d.then(g.hitch(this,function(a){a.target=this;this.emit("callback-added",a)})));return d},importScripts:function(a){Array.isArray(a)||(a=[a]);a=a.map(function(a){a=
this._getUrl(a,!0);this._useProxy&&!n.hasSameOrigin(a,location.href)&&(a=n.getProxyUrl(a).path+"?"+encodeURI(a));return a},this);a=this.postMessage({action:"import-script",url:a});a.then(g.hitch(this,function(a){a.target=this;this.emit("scripts-imported",a)}));return a},_acceptMessage:function(a){var d=a.data,c=d.msgId;if(d.status&&"debug"==d.status)console[d.showAs||"debug"](d);else if(c&&c in this._queue){var b=this._queue[c];"progress"==d.status?b.progress(a.data):("error"==d.status?b.reject(a.data):
b.resolve(a.data),delete this._queue[c])}this.emit("message",{message:a.data,event:a,target:this})},_errorMessage:function(a){this.onerror||this.onError?this.onerror?this.onerror(a):this.onError(a):console.log("Worker Error: "+a.message+"\nIn "+a.filename+" on "+a.lineno)},_getUrl:function(a,d){if(!a)return console.error("can not resolve empty path"),!1;a.match(/\.js$/)||(a+=".js");a=v.toUrl(a);return d?n.getAbsoluteUrl(a):a},_getRemoteText:function(c,d){(c=this._getUrl(c))&&a.get(c,{sync:!1,handleAs:"text",
headers:{"X-Requested-With":"","Content-Type":"text/plain"}}).then(function(a){d(a)})},_startBlobWorker:function(){var a=this._xdSource;a||(a=this._getUrl("./mutableWorker"),a=new m(["if(!self._mutable){importScripts('"+a+"');}"],{type:"text/javascript"}),a=this._xdSource=h.createObjectURL(a));try{return new Worker(a)}catch(d){return console.log(d.message),!1}}});e("extend-esri")&&g.setObject("workers.WorkerClient",q,c);return q})},"widgets/DistanceAndDirection/models/ShapeModel":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/string dojo/number esri/geometry/geometryEngine esri/geometry/webMercatorUtils esri/geometry/Polyline".split(" "),
function(q,b,p,g,a,e,c,n){return q(null,{Units:"meters feet kilometers miles nautical-miles yards".split(" "),getAngle:function(a){var c=null,c=void 0===this.angle?(180*Math.atan2(this.endPoint.x-this.startPoint.x,this.endPoint.y-this.startPoint.y)/Math.PI+360)%360:Number(this.angle);"mils"===a&&(c*=17.777777778);return c.toFixed(2)},getLength:function(a){var c=this.Units[0];-1<this.Units.indexOf(a.toLowerCase())&&(c=a.toLowerCase());return e.geodesicLength(this.geographicGeometry,c)},getFormattedLength:function(c){return a.format(this.getLength(c),
{places:4})},formatLength:function(c){return a.format(c,{places:4})},constructor:function(v){q.safeMixin(this,v);if("polygon"===this.geometry.type)if(this.geometry.hasOwnProperty("drawType")){if("ellipse"===this.geometry.drawType){var m=new n;b.forEach(this.geometry.geometry.rings,p.hitch(this,function(a){m.paths.push(a)}));m.spatialReference=this.geometry.spatialReference;this.geographicGeometry=m=c.webMercatorToGeographic(m);this.geodesicGeometry=e.geodesicDensify(this.geometry.geometry,1E4);this.wmGeometry=
this.geometry.geometry;this.angle=this.geometry.angle;this.startPoint=c.webMercatorToGeographic(this.geometry.center);this.formattedStartPoint=g.substitute("${xStr}, ${yStr}",{xStr:a.format(this.startPoint.y,{places:4}),yStr:a.format(this.startPoint.x,{places:4})})}}else v=new n({paths:[[this.geometry.paths[0][0],this.geometry.paths[0][1]]],spatialReference:{wkid:this.geometry.spatialReference.wkid}}),this.geographicGeometry=v=c.webMercatorToGeographic(v),this.geodesicGeometry=e.geodesicDensify(v,
1E4),this.wmGeometry=this.geometry,this.startPoint=this.geodesicGeometry.getPoint(0,0),this.endPoint=this.geodesicGeometry.getPoint(0,this.geodesicGeometry.paths[0].length-1),this.formattedStartPoint=g.substitute("${xStr}, ${yStr}",{xStr:a.format(this.startPoint.y,{places:4}),yStr:a.format(this.startPoint.x,{places:4})}),this.formattedEndPoint=g.substitute("${xStr}, ${yStr}",{xStr:a.format(this.endPoint.y,{places:4}),yStr:a.format(this.endPoint.x,{places:4})});else"point"===this.geometry.type?(this.geodesicGeometry=
e.geodesicBuffer(this.geometry,this.calculatedDistance,"meters"),this.geographicGeometry=null!==this.lineGeometry?this.lineGeometry:this.geometry,102100!==this.geodesicGeometry.spatialReference.wkid&&3857!==this.geodesicGeometry.spatialReference.wkid?(this.wgsGeometry=this.geodesicGeometry,this.wmGeometry=c.geographicToWebMercator(this.geodesicGeometry)):(this.wgsGeometry=c.webMercatorToGeographic(this.geodesicGeometry),this.wmGeometry=this.geodesicGeometry),this.formattedStartPoint=g.substitute("${xStr}, ${yStr}",
{xStr:a.format(this.wgsGeometry.getCentroid().y,{places:4}),yStr:a.format(this.wgsGeometry.getCentroid().x,{places:4})})):(this.geodesicGeometry=e.geodesicDensify(this.geographicGeometry,1E4),this.wmGeometry=c.geographicToWebMercator(this.geodesicGeometry),this.startPoint=this.geodesicGeometry.getPoint(0,0),this.endPoint=this.geodesicGeometry.getPoint(0,this.geodesicGeometry.paths[0].length-1),this.formattedStartPoint=g.substitute("${xStr}, ${yStr}",{xStr:a.format(this.startPoint.y,{places:4}),yStr:a.format(this.startPoint.x,
{places:4})}),this.formattedEndPoint=g.substitute("${xStr}, ${yStr}",{xStr:a.format(this.endPoint.y,{places:4}),yStr:a.format(this.endPoint.x,{places:4})}))}})})},"widgets/DistanceAndDirection/views/CoordinateInput":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","../models/Coordinate"],function(q,b,p){return q("test",b,{required:!0,inputCoordinate:null,invalidMessage:"",validateOnInput:!0,_validateOnInputSetter:function(b){this.validateOnInput="true"===b},clear:function(){this.set("validateOnInput",
!0);this.set("value","");this.inputCoordinate.coordinateEsriGeometry=null},constructor:function(b){q.safeMixin(this,b);this.inherited(arguments);this.inputCoordinate=new p({appConfig:arguments[0].appConfig,nls:this.nls})},validator:function(b){if(!this.validateOnInput)return!0;this.inputCoordinate.set("inputString",b);this.set("invalidMessage",this.inputCoordinate.message);this.set("promptMessage",this.inputCoordinate.message);return!0}})})},"widgets/DistanceAndDirection/models/Coordinate":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-class dojo/Stateful dojo/Deferred esri/geometry/Point esri/SpatialReference esri/geometry/webMercatorUtils jimu/dijit/Message ./util ./dialogConfirm ./ConfirmNotation".split(" "),
function(q,b,p,g,a,e,c,n,v,m,h,k,d){return q([a],{formatPrefix:!1,_formatPrefixSetter:function(a){this.formatPrefix=a},inputString:null,_inputStringSetter:function(a){this.inputString=a},formatString:"YN XE",_formatStringSetter:function(a){this.formatString=a},inputType:"UNKNOWN",formatType:"DD",_formatTypeSetter:function(a){this.formatType=a;this.getFormattedValue()},outputString:"",coordinateEsriGeometry:null,_coordinateEsriGeometrySetter:function(a){null!==a&&(this.coordinateEsriGeometry=a=4326!==
a.spatialReference.wkid?v.webMercatorToGeographic(a):a,this.getFormattedValue())},constructor:function(a){q.safeMixin(this,a);this.util=new h({appConfig:this.appConfig,nls:this.nls})},getInputType:function(){this.inputTypeDef=new e;var a=this.util.getCleanInput(this.inputString);this.util.getCoordinateType(a).then(p.hitch(this,function(e){if(e)if(1===e.length){var l=this.processCoordTextInput(a,e[0],!1);this.util.getXYNotation(l,e[0].conversionType).then(p.hitch(this,function(a){0>=a.length||!a[0][0]&&
0!==a[0][0]?(this.hasError=!0,this.valid=!1,this.message=this.nls.invalidCoordinateMessage):(this.valid=this.isManual=!0,this.formatType=e[0].conversionType,this.inputType=e[0].conversionType,this.coordinateEsriGeometry=new c(a[0][0],a[0][1],new n({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));p.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message=this.nls.invalidCoordinateMessage;this.inputTypeDef.resolve(this)})}else{var w=new k({title:this.nls.confirmInputNotationMessage,
nls:this.nls,content:new d({nls:this.nls},e),style:"width: 400px",hasSkipCheckBox:!1});"DartTheme"===this.appConfig.theme.name&&g.add(w.domNode,"dartThemeClaroDijitTooltipContainerOverride");w.show().then(p.hitch(this,function(){var d=b.filter(e,function(a){return a.name===w.content.comboOptions.get("value")}),l=this.processCoordTextInput(a,d[0],!1);this.util.getXYNotation(l,d[0].conversionType).then(p.hitch(this,function(a){0>=a.length||!a[0][0]&&0!==a[0][0]?(this.hasError=!0,this.valid=!1,this.message=
this.nls.invalidCoordinateMessage):(this.valid=this.isManual=!0,this.inputType=e[0].conversionType,this.formatType=e[0].conversionType,this.coordinateEsriGeometry=new c(a[0][0],a[0][1],new n({wkid:4326})),this.message="");this.inputTypeDef.resolve(this)}));p.hitch(this,function(){this.hasError=!0;this.valid=!1;this.inputType="UNKNOWN";this.message=this.nls.invalidCoordinateMessage;this.inputTypeDef.resolve(this)})},function(){this.inputTypeDef.reject()}))}else this.hasError=!0,this.valid=!1,this.inputType=
"UNKNOWN",this.message=this.nls.invalidCoordinateMessage,this.inputTypeDef.resolve(this)}));return this.inputTypeDef},processCoordTextInput:function(a,d,c){var b=d.pattern.exec(a),e,l,n,r,g,h,k,y,p,q,v=!1,D=d.name;switch(d.name){case "DD":e=b[2];l=b[7];n=b[10];r=b[16];g=b[3].replace(/[,:]/,".");h=b[11].replace(/[,:]/,".");D="DD";break;case "DDrev":e=b[11];l=b[16];n=b[2];r=b[8];g=b[12].replace(/[,:]/,".");h=b[3].replace(/[,:]/,".");D="DD";break;case "DDM":e=b[2];l=b[7];n=b[10];r=b[15];g=b[3];k=b[4].replace(/[,:]/,
".");h=b[11];y=b[12].replace(/[,:]/,".");D="DDM";break;case "DDMrev":e=b[10];l=b[15];n=b[2];r=b[7];g=b[11];k=b[12].replace(/[,:]/,".");h=b[3];y=b[4].replace(/[,:]/,".");D="DDM";break;case "DMS":e=b[2];l=b[8];n=b[11];r=b[17];g=b[3];k=b[4];p=b[5].replace(/[,:]/,".");h=b[12];y=b[13];q=b[14].replace(/[,:]/,".");D="DMS";break;case "DMSrev":e=b[11],l=b[17],n=b[2],r=b[8],g=b[12],k=b[13],p=b[14].replace(/[,:]/,"."),h=b[3],y=b[4],q=b[5].replace(/[,:]/,"."),D="DMS"}e&&l?(v=!0,e=(new RegExp(/[Ss-]/)).test(e)?
"-":"+"):e=e&&(new RegExp(/[Ss-]/)).test(e)?"-":l&&(new RegExp(/[Ss-]/)).test(l)?"-":"+";n&&r?(v=!0,n=(new RegExp(/[Ww-]/)).test(n)?"-":"+"):n=n&&(new RegExp(/[Ww-]/)).test(n)?"-":r&&(new RegExp(/[Ww-]/)).test(r)?"-":"+";v&&(c||new m({message:this.nls.prefixSuffixMessage}));switch(D){case "DD":a=e+g+","+n+h;break;case "DDM":a=e+g+" "+k+","+n+h+" "+y;break;case "DMS":a=e+g+" "+k+" "+p+","+n+h+" "+y+" "+q}return a},getInputTypeSync:function(){return null!==this.util.getCoordinateType(this.inputString)},
getFormattedValue:function(){this.coordinateEsriGeometry&&this.util.getCoordValues({x:this.coordinateEsriGeometry.x,y:this.coordinateEsriGeometry.y},this.formatType,6).then(p.hitch(this,function(a){this.set("outputString",this.getCoordUI(a))}))},getCoordUI:function(a){var d=this.get("formatPrefix"),c;switch(this.formatType){case "DD":a=this.util.getFormattedDDStr(a,this.formatString,d);c=a.formatResult;break;case "DDM":a=this.util.getFormattedDDMStr(a,this.formatString,d);c=a.formatResult;break;case "DMS":a=
this.util.getFormattedDMSStr(a,this.formatString,d);c=a.formatResult;break;case "USNG":a=this.util.getFormattedUSNGStr(a,this.formatString,d);c=a.formatResult;break;case "MGRS":a=this.util.getFormattedMGRSStr(a,this.formatString,d);c=a.formatResult;break;case "GARS":a=this.util.getFormattedGARSStr(a,this.formatString,d);c=a.formatResult;break;case "GEOREF":a=this.util.getFormattedGEOREFStr(a,this.formatString,d);c=a.formatResult;break;case "UTM":a=this.util.getFormattedUTMStr(a,this.formatString,
d);c=a.formatResult;break;case "UTM (H)":a=this.util.getFormattedUTMHStr(a,this.formatString,d),c=a.formatResult}return c}})})},"widgets/DistanceAndDirection/models/util":function(){define(["dojo/_base/declare","dojo/_base/array","dojo/_base/Deferred","esri/tasks/GeometryService"],function(q,b,p,g){return q(null,{constructor:function(a){this.appConfig=a.appConfig;this.nls=a.nls;(a=this.appConfig.geometryService)||(a="//utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer");this.geomService=
new g(a)},getCleanInput:function(a){a=a.replace(/\n/g,"");a=a.replace(/\s+/g," ").trim();return a.toUpperCase()},getCoordValues:function(a,b,c){var e=new p;a={sr:4326,coordinates:[[a.x,a.y]],conversionType:b.name?b.name:b,numOfDigits:c||6,rounding:!0,addSpaces:!1};switch(b){case "DD":a.numOfDigits=6;break;case "USNG":a.numOfDigits=5;break;case "MGRS":a.conversionMode="mgrsDefault";a.numOfDigits=5;break;case "UTM (H)":a.conversionType="utm";a.conversionMode="utmNorthSouth";a.addSpaces=!0;break;case "UTM":a.conversionType=
"utm";a.conversionMode="utmDefault";a.addSpaces=!0;break;case "GARS":a.conversionMode="garsDefault"}this.geomService.toGeoCoordinateString(a).then(function(a){e.resolve(a)},function(){e.resolve(null)});return e.promise},getXYNotation:function(a,b){var c=new p,e;e=b.name?b.name:b;b={sr:4326,conversionType:e,strings:[]};switch(e){case "DD":case "DDM":case "DMS":b.numOfDigits=2;a=a.replace(/[\u00b0\u02da\u00ba^~*"'\u2032\u00a8\u02dd]/g,"");b.strings.push(a);break;case "USNG":b.strings.push(a);b.addSpaces=
"false";break;case "MGRS":b.conversionMode="mgrsNewStyle";b.strings.push(a);b.addSpaces="false";break;case "UTM (H)":b.conversionType="utm";b.conversionMode="utmNorthSouth";b.strings.push(a);break;case "UTM":b.conversionType="utm";b.conversionMode="utmDefault";b.strings.push(a);break;case "GARS":b.conversionMode="garsCenter";b.strings.push(a);break;case "GEOREF":b.strings.push(a)}this.geomService.fromGeoCoordinateString(b).then(function(a){c.resolve(a)},function(){c.resolve(null)});return c.promise},
getNotations:function(){return[{name:"DD",pattern:/^(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)$/,notationType:this.nls.DDLatLongNotation,conversionType:"DD"},{name:"DDrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d([,.]\d*)?|1[0-7]\d([,.]\d*)?|180([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d([,.]\d*)?|90([,.]0*)?)([\u00b0\u02da\u00ba^~*]*)([NS\+\-\s])*)$/,
notationType:this.nls.DDLongLatNotation,conversionType:"DD"},{name:"DDM",pattern:/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)[\s]*$/,notationType:this.nls.DDMLatLongNotation,conversionType:"DDM"},{name:"DDMrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]\d|\d)([,.]\d*)?)['\u2032\s_]*([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)['\u2032\s_]*([NS\+\-\s])*)[\s]*$/,
notationType:this.nls.DDMLongLatNotation,conversionType:"DDM"},{name:"DMS",pattern:/^(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)([,:;\s|\/\\]+)(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)[\s]*$/,notationType:this.nls.DMSLatLongNotation,conversionType:"DMS"},{name:"DMSrev",pattern:/^(([EW\+\-\s])*([0]?\d?\d|1[0-7]\d|180)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([EW\+\-\s])*)([,:;\s|\/\\]+)(([NS\+\-\s])*([0-8]?\d|90)[\u00b0\u02da\u00ba^~*\s\-_]+([0-5]?\d|\d)['\u2032\s\-_]+(([0-5]?\d|\d)([,.]\d*)?)["\u00a8\u02dd\s_]*([NS\+\-\s])*)[\s]*$/,
notationType:this.nls.DMSLongLatNotation,conversionType:"DMS"},{name:"GARS",pattern:/^\d{3}[a-zA-Z]{2}[1-4]?[1-9]?$/,notationType:this.nls.GARSNotation,conversionType:"GARS"},{name:"GEOREF",pattern:/^[a-zA-Z]{4}\d{1,8}$/,notationType:this.nls.GEOREFNotation,conversionType:"GEOREF"},{name:"MGRS",pattern:/^\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})$|^(\d{1,2}[-,;:\s]*[C-HJ-NP-X][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*)(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d[-,;:\s]+\d|\d{2}[-,;:\s]+\d{2}|\d{3}[-,;:\s]+\d{3}|\d{4}[-,;:\s]+\d{4}|\d{5}[-,;:\s]+\d{5})$|^[ABYZ][-,;:\s]*[A-HJ-NP-Z]{2}[-,;:\s]*(\d{2}|\d{4}|\d{6}|\d{8}|\d{10})?$/,
notationType:this.nls.MGRSNotation,conversionType:"MGRS"},{name:"UTM",pattern:/^\d{1,2}[-,;:\s]*[c-hj-np-xC-HJ-NP-X][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]?\d{1,7}\.?\d*[mM]?$/,notationType:this.nls.UTMBandNotation,conversionType:"UTM"},{name:"UTM (H)",pattern:/^\d{1,2}[-,;:\s]*[NnSs][-,;:\s]*\d{1,6}\.?\d*[mM]?[-,;:\s]+\d{1,7}\.?\d*[mM]?$/,notationType:this.nls.UTMHemNotation,conversionType:"UTM (H)"}]},getCoordinateType:function(a){var e=this.getCleanInput(a);a=new p;var c=this.getNotations(),e=b.filter(c,
function(a){return a.pattern.test(this.v)},{v:e});0<e.length?a.resolve(e):a.resolve(null);return a.promise},getFormattedDDStr:function(a,b,c){var e={};e.sourceValue=a;e.sourceFormatString=b;a=a[0].split(/[ ,]+/);e.latdeg=a[0].replace(/[nNsS]/,"");e.londeg=a[1].replace(/[eEwW]/,"");c&&(e.latdeg="N"===a[0].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===a[1].slice(-1)?"-"+e.londeg:"+"+e.londeg);b=b.replace(/X/,e.londeg);b=b.replace(/[eEwW]/,a[1].slice(-1));b=b.replace(/[nNsS]/,a[0].slice(-1));b=
b.replace(/Y/,e.latdeg);e.formatResult=b;return e},getFormattedDDMStr:function(a,b,c){var e={};e.sourceValue=a;e.sourceFormatString=b;e.parts=a[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1].replace(/[nNsS]/,"");e.londeg=e.parts[2];e.lonmin=e.parts[3].replace(/[eEwW]/,"");c&&(e.latdeg="N"===e.parts[1].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===e.parts[3].slice(-1)?"-"+e.londeg:"+"+e.londeg);a=b.replace(/[EeWw]/,e.parts[3].slice(-1));a=a.replace(/Y/,e.lonmin);a=a.replace(/X/,e.londeg);
a=a.replace(/[NnSs]/,e.parts[1].slice(-1));a=a.replace(/B/,e.latmin);a=a.replace(/A/,e.latdeg);e.formatResult=a;return e},getFormattedDMSStr:function(a,b,c){var e={};e.sourceValue=a;e.sourceFormatString=b;e.parts=a[0].split(/[ ,]+/);e.latdeg=e.parts[0];e.latmin=e.parts[1];e.latsec=e.parts[2].replace(/[NnSs]/,"");e.londeg=e.parts[3];e.lonmin=e.parts[4];e.lonsec=e.parts[5].replace(/[EWew]/,"");c&&(e.latdeg="N"===e.parts[2].slice(-1)?"+"+e.latdeg:"-"+e.latdeg,e.londeg="W"===e.parts[5].slice(-1)?"-"+
e.londeg:"+"+e.londeg);a=b.replace(/A/,e.latdeg);a=a.replace(/B/,e.latmin);a=a.replace(/C/,e.latsec);a=a.replace(/X/,e.londeg);a=a.replace(/Y/,e.lonmin);a=a.replace(/Z/,e.lonsec);a=a.replace(/[NnSs]/,e.parts[2].slice(-1));a=a.replace(/[EeWw]/,e.parts[5].slice(-1));e.formatResult=a;return e},getFormattedUSNGStr:function(a,b){var c={};c.sourceValue=a;c.sourceFormatString=b;a[0].match(/^[ABYZ]/)?c.gzd=a[0].match(/[ABYZ]/)[0].trim():c.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();c.grdsq=a[0].replace(c.gzd,
"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();c.easting=a[0].replace(c.gzd+c.grdsq,"").match(/^\d{1,5}/)[0].trim();c.northing=a[0].replace(c.gzd+c.grdsq,"").match(/\d{1,5}$/)[0].trim();a=b.replace(/Y/,c.northing);a=a.replace(/X/,c.easting);a=a.replace(/S/,c.grdsq);a=a.replace(/Z/,c.gzd);c.formatResult=a;return c},getFormattedMGRSStr:function(a,b){var c={};c.sourceValue=a;c.sourceFormatString=b;a[0].match(/^[ABYZ]/)?c.gzd=a[0].match(/[ABYZ]/)[0].trim():c.gzd=a[0].match(/\d{1,2}[C-HJ-NP-X]/)[0].trim();c.grdsq=
a[0].replace(c.gzd,"").match(/[a-hJ-zA-HJ-Z]{2}/)[0].trim();c.easting=a[0].replace(c.gzd+c.grdsq,"").match(/^\d{1,5}/)[0].trim();c.northing=a[0].replace(c.gzd+c.grdsq,"").match(/\d{1,5}$/)[0].trim();a=b.replace(/Y/,c.northing);a=a.replace(/X/,c.easting);a=a.replace(/S/,c.grdsq);a=a.replace(/Z/,c.gzd);c.formatResult=a;return c},getFormattedGARSStr:function(a,b){var c={};c.sourceValue=a;c.sourceFormatString=b;c.lon=a[0].match(/\d{3}/);c.lat=a[0].match(/[a-zA-Z]{2}/);a=a[0].match(/\d*$/);c.quadrant=
a[0][0];c.key=a[0][1];b=b.replace(/K/,c.key);b=b.replace(/Q/,c.quadrant);b=b.replace(/Y/,c.lat);b=b.replace(/X/,c.lon);c.formatResult=b;return c},getFormattedGEOREFStr:function(a,b){var c={};c.sourceValue=a;c.sourceFormatString=b;c.lon=a[0].match(/[a-zA-Z]{1}/)[0].trim();c.lat=a[0].replace(c.lon,"").match(/[a-zA-Z]{1}/)[0].trim();c.quadrant15lon=a[0].replace(c.lon+c.lat,"").match(/[a-zA-Z]{1}/)[0].trim();c.quadrant15lat=a[0].replace(c.lon+c.lat+c.quadrant15lon,"").match(/[a-zA-Z]{1}/)[0].trim();a=
a[0].replace(c.lon+c.lat+c.quadrant15lon+c.quadrant15lat,"");c.quadrant1lon=a.substr(0,a.length/2);c.quadrant1lat=a.substr(a.length/2,a.length);b=b.replace(/Y/,c.quadrant1lat);b=b.replace(/X/,c.quadrant1lon);b=b.replace(/D/,c.quadrant15lat);b=b.replace(/C/,c.quadrant15lon);b=b.replace(/B/,c.lat);b=b.replace(/A/,c.lon);c.formatResult=b;return c},getFormattedUTMStr:function(a,b){var c={};c.sourceValue=a;c.sourceFormatString=b;c.parts=a[0].split(/[ ,]+/);c.zone=c.parts[0].replace(/[A-Z]/,"");c.bandLetter=
c.parts[0].slice(-1);c.easting=c.parts[1];c.westing=c.parts[2];a=b.replace(/Y/,c.westing);a=a.replace(/X/,c.easting);a=a.replace(/B/,c.bandLetter);a=a.replace(/Z/,c.zone);c.formatResult=a;return c},getFormattedUTMHStr:function(a,b){var c={};c.sourceValue=a;c.sourceFormatString=b;c.parts=a[0].split(/[ ,]+/);c.zone=c.parts[0].replace(/[A-Z]/,"");c.hemisphere=c.parts[0].slice(-1);c.easting=c.parts[1];c.westing=c.parts[2];a=b.replace(/Y/,c.westing);a=a.replace(/X/,c.easting);a=a.replace(/H/,c.hemisphere);
a=a.replace(/Z/,c.zone);c.formatResult=a;return c},convertMetersToUnits:function(a,b){var c=0;switch(b.toLowerCase()){case "meters":c=a;break;case "feet":c=3.28084*a;break;case "kilometers":c=.001*a;break;case "miles":c=6.21371E-4*a;break;case "nautical-miles":c=5.39957E-4*a;break;case "yards":c=1.09361*a}return c},convertToMeters:function(a,b){var c=a;switch(b){case "meters":c=a;break;case "feet":c=.3048*a;break;case "kilometers":c=1E3*a;break;case "miles":c=1609.34*a;break;case "nautical-miles":c=
1852.001376036*a;break;case "yards":c=.9144*a}return c}})})},"widgets/DistanceAndDirection/models/dialogConfirm":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/Deferred dojo/dom-construct dijit/Dialog dijit/form/Button dijit/form/CheckBox jimu/utils".split(" "),function(q,b,p,g,a,e,c,n){return b(a,{okButton:null,cancelButton:null,skipCheckBox:null,hasOkButton:!0,hasCancelButton:!0,hasSkipCheckBox:!0,hasUnderlay:!0,dfd:null,buttonNode:null,constructor:function(a){q.mixin(this,a)},
postCreate:function(){this.inherited("postCreate",arguments);var a,b=!1;a=g.create("div",{className:"dijitDialogPaneContent dialogConfirm"},this.domNode,"last");this.hasSkipCheckBox&&(this.skipCheckBox=new c({checked:!1},g.create("div")),a.appendChild(this.skipCheckBox.domNode),g.create("label",{"for":this.skipCheckBox.id,innerHTML:n.sanitizeHTML(this.nls.rememberDecisionMessage)},a));this.hasOkButton&&(this.okButton=new e({label:this.nls.common.ok,onClick:q.hitch(this,function(){b=this.hasSkipCheckBox?
this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.resolve(b)})},g.create("div")),a.appendChild(this.okButton.domNode));this.hasCancelButton&&(this.cancelButton=new e({label:this.nls.common.cancel,onClick:q.hitch(this,function(){b=this.hasSkipCheckBox?this.skipCheckBox.get("checked"):!1;this.hide();this.dfd.cancel(b)})},g.create("div")),a.appendChild(this.cancelButton.domNode));this.buttonNode=a},show:function(){this.inherited("show",arguments);this.hasUnderlay||g.destroy(this.id+"_underlay");
return this.dfd=new p}})})},"widgets/DistanceAndDirection/models/ConfirmNotation":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./ConfirmNotation.html jimu/utils".split(" "),function(q,b,p,g,a,e){return q([b,p,g],{templateString:a,numberOfInputs:0,selectOptions:{},constructor:function(a,b){this.numberOfInputs=b.length;this.selectOptions=b},postCreate:function(){this.label1.innerHTML=e.sanitizeHTML(this.numberOfInputs+this.nls.multipleNotationsMessage);
for(var a=0;a<this.selectOptions.length;a++)this.comboOptions.addOption({value:this.selectOptions[a].name,label:this.selectOptions[a].notationType})}})})},"widgets/DistanceAndDirection/views/EditOutputCoordinate":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/on dojo/dom-attr dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!../templates/EditOutputCoordinate.html jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),function(q,b,p,g,a,e,c,n,
v){return q([e,c,n],{templateString:v,formats:{},ct:"DD",_setCtAttr:function(a){this.frmtSelect.set("value",a)},postCreate:function(){this.formats={DD:{defaultFormat:"YN XE",customFormat:null,useCustom:!1},DDM:{defaultFormat:"A\u00b0 B'N X\u00b0 Y'E",customFormat:null,useCustom:!1},DMS:{defaultFormat:"A\u00b0 B' C\"N X\u00b0 Y' Z\"E",customFormat:null,useCustom:!1},GARS:{defaultFormat:"XYQK",customFormat:null,useCustom:!1},GEOREF:{defaultFormat:"ABCDXY",customFormat:null,useCustom:!1},MGRS:{defaultFormat:"ZSXY",
customFormat:null,useCustom:!1},USNG:{defaultFormat:"ZSXY",customFormat:null,useCustom:!1},UTM:{defaultFormat:"ZB X Y",customFormat:null,useCustom:!1},"UTM (H)":{defaultFormat:"ZH X Y",customFormat:null,useCustom:!1}};a.set(this.frmtVal,"value",this.formats[this.ct].defaultFormat);this.own(this.frmtSelect.on("change",b.hitch(this,this.frmtSelectValueDidChange)));this.own(g(this.frmtVal,"change",b.hitch(this,this.formatValDidChange)));this.displayPrefixContainer()},formatValDidChange:function(){var b=
a.get(this.frmtVal,"value"),c=this.frmtSelect.get("value");this.formats[c].customFormat=b;this.formats[c].useCustom=!0;this.currentformat=b},frmtSelectValueDidChange:function(){var b=this.frmtSelect.get("value"),c=this.formats[b].useCustom?this.formats[b].customFormat:this.formats[b].defaultFormat;this.ct=b;a.set(this.frmtVal,"value",c);this.displayPrefixContainer()},displayPrefixContainer:function(){switch(this.frmtSelect.get("value")){case "DD":case "DDM":case "DMS":p.set(this.prefixContainer,{display:""});
break;default:p.set(this.prefixContainer,{display:"none"})}}})})},"widgets/DistanceAndDirection/models/DirectionalLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/Stateful esri/geometry/screenUtils esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol esri/graphic esri/geometry/ScreenPoint esri/geometry/geometryEngine dojo/_base/fx dojo/fx dojo/on".split(" "),function(q,b,p,g,a,e,c,n,v,m,h,k){return q([a,p],{constructor:function(a){this.inherited(arguments);this.setStyle(a.style);
this.setColor(a.color);this.setWidth(a.width);this.directionSymbols={arrow1:"m0.5,50.5c0,0 99.5,-41 99.5,-41c0,0 0.5,81.5 0.5,81.5c0,0 -100,-40.5 -100,-40.5z",arrow2:"M1,50l99.5,-50c0,0 -40,49.5 -40,49.5c0,0 39.5,50 39.5,50c0,0 -99,-49.5 -99,-49.5z",arrow3:"m0.5,50.5l90,-50l9,9.5l-79.5,40.5l80,39.5l-10,10.5l-89.5,-50z",arrow4:"m55.4605,51.5754l43.0685,-48.2908l-43.3797,48.2908l43.8197,44.8899l-43.5085,-44.8899zm-6.0505,42.3899l-0.44,-88.1807l-43.37967,45.7908l43.81967,42.3899z"};this.directionColor=
a.directionColor||this.color;this.directionSize=a.directionSize||12;this.directionPixelBuffer=a.directionPixelBuffer||40;this.animationRepeat=a.animationRepeat;this.animationDuration=a.animationDuration||350;this.directionSymbol=a.directionSymbol||"arrow1";this.showDirectionalSymbols=a.showDirectionalSymbols||!0;this.showStartSymbol=a.showStartSymbol||!1;this.startSymbol=a.startSymbol||new e({color:[128,128,128,64],size:8,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:2,type:"esriSLS",
style:"esriSLSSolid"}});this.showEndSymbol=a.showEndSymbol||!1;this.endSymbol=a.startSymbol||new e({color:[128,128,128,64],size:8,type:"esriSMS",style:"esriSMSX",outline:{color:[0,0,0,255],width:2,type:"esriSLS",style:"esriSLSSolid"}});this.graphics=[];this.map=null;this.drawGraphicDirection=this._drawDirection;this.type="DirectionalLineSymbol"},getStroke:function(){var a=0<arguments.callee.caller.arguments.length?arguments.callee.caller.arguments[4]:arguments.callee.caller.caller.arguments[4];if(!a||
a.dlsSymbolGroup)return this.inherited(arguments);this.graphics.push(a);var b=a.getLayer(),c=this.map=b.getMap();a.dlsSymbolGroup=b._div.createGroup();this._drawDirection(a,b,c);b.dlsGraphicRemove||(b.dlsGraphicRemove=b.on("graphic-remove",function(a){a.graphic.dlsSymbolGroup&&(dojo.query(".dls-symbol",a.graphic.dlsSymbolGroup.rawNode).forEach(dojo.destroy),dojo.destroy(a.graphic.dlsSymbolGroup.rawNode),a.graphic.dlsSymbolGroup=null)}));var e=null,w=null;c.graphics.dlsGraphicDraw||(c.graphics.dlsGraphicDraw=
c.graphics.on("graphic-draw",function(a){a.graphic.dlsSymbolGroup&&(e=a.graphic,(w="DirectionalLineSymbol"===e.symbol.type?e.symbol:e.symbol.outline&&"DirectionalLineSymbol"===e.symbol.outline.type?e.symbol.outline:null)&&w.drawGraphicDirection(e,this,this.getMap()))}));c.dlsExtChanged||(c.dlsExtChanged=c.on("extent-change",function(){for(var a=0,d=this.graphics.graphics.length;a<d;a++)if(e=this.graphics.graphics[a],e.symbol)if(e.attributes&&e.attributes.isDirectionalGraphic)this.graphics.remove(e),
a--,d--;else{var c="DirectionalLineSymbol"===e.symbol.type?e.symbol:e.symbol.outline&&"DirectionalLineSymbol"===e.symbol.outline.type?e.symbol.outline:null;c&&c.drawGraphicDirection(e,b,this)}for(a=0;a<this.graphicsLayerIds.length;a++)if(b=this.getLayer(this.graphicsLayerIds[a]),b.dlsGraphicRemove)for(d=0,c=b.graphics.length;d<c;d++)e=b.graphics[d],e.symbol&&(e.attributes&&e.attributes.isDirectionalGraphic?(b.remove(e),d--,c--):e.symbol.drawGraphicDirection(e,b,this))}));return this.inherited(arguments)},
_drawDirection:function(a,b,c){if(a.dlsSymbolGroup){var d=a.dlsSymbolGroup,e=a.geometry;e.spatialReference.wkid!==c.spatialReference.wkid&&(esri.geometry.canProject(e,c)?e=esri.geometry.project(e,c):console.error("Can't project geometry wkid - "+e.spatialReference.wkid+" to map wkid "+c.spatialReference.wkid));a.directions=[];dojo.query(".dls-symbol",a.dlsSymbolGroup.rawNode).forEach(dojo.destroy);var k=g.toScreenGeometry(c.extent,c.width,c.height,e);c=g.toScreenGeometry(c.extent,c.width,c.height,
c.extent);if(k="polyline"===e.type?k.paths:k.rings){if(this.showStartSymbol&&(e=this._getFirstItem(k),e=this._createGraphic(e,this.startSymbol),e.geometry)){b.add(e);var h=e.getShape();h?(d.add(h),e.attr("class","dls-symbol"),a.directions.push(e),a.visible||e.hide(),e.origJson=e.toJson(),e.toJson=this.directionGraphicToJson):b.remove(e)}if(this.showDirectionalSymbols)for(e=0,h=k.length;e<h;e++)for(var r=k[e],m=0,n=r.length-1;m<n;m++)if(m!==r.length)for(var y=r[m],p=r[m+1],q=this._getAngle(y,p),y=
this._getDirectionPoints(y,p,c),p=0,v=y.length;p<v;p++){var u=this._createGraphic(y[p],this._createSymbol(this.directionSymbol,q));b.add(u);var M=u.getShape();d.add(M);u.attr("class","dls-symbol");a.directions.push(u);a.visible||u.hide();u.origJson=u.toJson();u.toJson=this.directionGraphicToJson}this.showEndSymbol&&(e=this._getSecondToLastItem(k))&&(c=this._getLastItem(k))&&!this._isEqual(e,c)&&(k=this._getAngle(e,c),k=this._createSymbol(this.endSymbol,k),c=this._createGraphic(c,k),c.geometry&&(b.add(c),
(k=c.getShape())?(d.add(k),c.attr("class","dls-symbol"),a.directions.push(c),a.visible||c.hide(),c.origJson=c.toJson(),c.toJson=this.directionGraphicToJson):b.remove(c)));a.dlsAnimationRepeat&&(1<a.dlsAnimationRepeat||Infinity===a.dlsAnimationRepeat)&&this._animateGraphic(a,a.dlsAnimationRepeat)}else console.error("Can't apply DirectionalLineSymbol to geometry "+e.type)}},_getLastItem:function(a){return a[a.length-1][a[a.length-1].length-1]},_getSecondToLastItem:function(a){return a[a.length-1][a[a.length-
1].length-2]},_getFirstItem:function(a){return a[0][0]},_getAngle:function(a,b){return 180/Math.PI*Math.atan2(b[1]-a[1],b[0]-a[0])-180},_isEqual:function(a,b){var c=Object.getOwnPropertyNames(a),d=Object.getOwnPropertyNames(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var e=c[d];if(a[e]!==b[e])return!1}return!0},_createSymbol:function(a,c){var d;"simplemarkersymbol"===a.type||"picturemarkersymbol"===a.type?d=b.clone(a):"string"===typeof a?(d=new e,d.setSize(this.directionSize).setPath(this.directionSymbols[a]?
this.directionSymbols[a]:a).setOutline(null).setColor(this.directionColor)):console.error("Symbol must be set to one of the pre-defined strings {'arrow1', 'arrow2', 'arrow3', 'arrow4'}, or a SimpleMarkerSymbol or PictureMarkerSymbol.");d.setAngle(c);return d},_createGraphic:function(a,b){var d=new c;d.setSymbol(b);d.attributes={isDirectionalGraphic:!0};a=new n(a[0],a[1]);a=this.map.toMap(a);d.geometry=v.within(a,this.map.extent)?a:null;return d},_getDirectionPoints:function(a,b,c){var d=[],e=a[0]<
b[0]?a[0]:b[0],k=a[0]>b[0]?a[0]:b[0],g=a[1]<b[1]?a[1]:b[1],h=a[1]>b[1]?a[1]:b[1],m=c.xmin<c.xmax?c.xmin:c.xmax,r=c.xmin>c.xmax?c.xmin:c.xmax,n=c.ymin<c.ymax?c.ymin:c.ymax;c=c.ymin>c.ymax?c.ymin:c.ymax;b=[b[0]-a[0],b[1]-a[1]];var p=Math.sqrt(b[0]*b[0]+b[1]*b[1]);if(p<this.directionPixelBuffer)return d;b[0]=b[0]/p*this.directionPixelBuffer;b[1]=b[1]/p*this.directionPixelBuffer;for(a=[a[0]+b[0],a[1]+b[1]];a[0]>=e&&a[0]<=k&&a[1]>=g&&a[1]<=h;)a[0]>=m&&a[0]<=r&&a[1]>=n&&a[1]<=c&&d.push([a[0],a[1]]),a=[a[0]+
b[0],a[1]+b[1]];return d},get:function(a){return this[a]?this[a]:null},_setDirectionSymbolAttr:function(a){this._set("directionSymbol",a);this._drawDirection()},_setStartSymbolAttr:function(a){this._set("startSymbol",a);this._drawDirection()},_setEndSymbolAttr:function(a){this._set("endSymbol",a);this._drawDirection()},_setShowStartSymbolAttr:function(a){this._set("showStartSymbol",a);this._drawDirection()},_setShowEndSymbolAttr:function(a){this._set("showEndSymbol",a);this._drawDirection()},animateDirection:function(a,
b){a&&(a=parseInt(a,10),isNaN(a)&&(a=Infinity),this.animationRepeat=a);if(!this.animationRepeat||1>this.animationRepeat)this.stopAnimation();else for(b&&(this.animationDuration=b),this.animationChain=null,this.animationEnd&&this.animationEnd.remove(),b=0,a=this.graphics.length;b<a;b++){var c=this.graphics[b];c.dlsSymbolGroup&&this._animateGraphic(c,this.animationRepeat)}},_animateGraphic:function(a,c){var d=[],e=this.animationDuration;a.dlsAnimationChain&&a.dlsAnimationChain.stop();dojo.query(".dls-symbol",
a.dlsSymbolGroup.rawNode).forEach(function(a){m.fadeOut({node:a,duration:10}).play();a=m.fadeIn({node:a,duration:e});d.push(a)});a.dlsAnimationRepeat=c;a.dlsAnimationChain=h.chain(d);a.dlsAnimationEnd=k(a.dlsAnimationChain,"End",b.hitch(this,function(){!isNaN(c)&&1<c?(c--,this._animateGraphic(a,c)):Infinity===c&&this._animateGraphic(a,c)}));try{a.dlsAnimationChain.play()}catch(w){}},stopAnimation:function(){for(var a=0,b=this.graphics.length;a<b;a++){var c=this.graphics[a];c.dlsSymbolGroup&&(dojo.query(".dls-symbol",
c.dlsSymbolGroup.rawNode).forEach(function(a){m.fadeIn({node:a,duration:10}).play()}),c.dlsAnimationRepeat=0,c.dlsAnimationChain&&c.dlsAnimationChain.stop(),c.dlsAnimationEnd&&c.dlsAnimationEnd.remove())}},toJson:function(){var a=this.inherited(arguments),b=this.color.toRgba();b[3]*=255;a.color=b;return a},directionGraphicToJson:function(){if(this.jsonUpdated||!this.origJson.symbol||!this.origJson.symbol.angle)return this.origJson;this.origJson.symbol.angle*=-1;this.jsonUpdated=!0;return this.origJson}})})},
"widgets/DistanceAndDirection/views/TabCircle":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/dom-attr dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos esri/layers/FeatureLayer esri/symbols/SimpleFillSymbol esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic esri/geometry/webMercatorUtils esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Point esri/geometry/Circle esri/tasks/FeatureSet esri/layers/LabelClass ../models/CircleFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabCircle.html jimu/utils dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox dijit/TitlePane".split(" "),
function(q,b,p,g,a,e,c,n,v,m,h,k,d,r,y,l,w,t,F,B,G,I,J,P,L,H,u,M,D,N,Q,E,C,R,A,x,z,S){return q([k,d,r],{templateString:R,baseClass:"jimu-widget-TabCircle",_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,constructor:function(a){q.safeMixin(this,a)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=this.useCalculatedDistance=!1;this.currentLengthUnit=this.lengthUnitDD.get("value");this._circleSym=new B(this.circleSymbol);this._ptSym=new G(this.pointSymbol);
this._labelSym=new I(this.labelSymbol);this.map.addLayer(this.getLayer());if(this._gl.loaded){var a=t.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");a.showLabels();a.enablePopup()}else this._gl.on("load",b.hitch(this,function(){var a=t.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");a.showLabels();a.enablePopup()}));this.coordTool=new E({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.startPointCoords);
this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new y({content:new C({nls:this.nls}),style:"width: 400px"});S.after(this.coordinateFormat,"onClose",b.hitch(this,function(){x.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var a=this.coordTool.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&c.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");
this.dt=new Q({map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls});this.dt.setFillSymbol(this._circleSym);this.syncEvents();this.checkValidInputs();this.radiusInput.invalidMessage=this.nls.numericInvalidMessage;this.radiusInput.rangeMessage=this.nls.rangeErrorMessage;this.timeInput.invalidMessage=this.nls.numericInvalidMessage;this.timeInput.rangeMessage=this.nls.invalidTimeMessage;this.distanceInput.invalidMessage=this.nls.numericInvalidMessage;this.distanceInput.rangeMessage=
this.nls.invalidDistanceMessage;this.distCalcControl.set("title",this.nls.distanceCalculatorLabel)},getLayer:function(){if(!this._gl){var a=new N({labelExpressionInfo:{value:"{Label}"}});a.symbol=this._labelSym;var b={layerDefinition:{id:"circleLayer",geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Label",type:"esriFieldTypeString",alias:"Label"}]},featureSet:new D};this._gl=new F(b,{id:"Distance \x26 Direction - Circle Graphics",
showLabels:!0,outFields:["*"]});this._gl.setLabelingInfo([a]);return this._gl}},syncEvents:function(){a.subscribe("TAB_SWITCHED",b.hitch(this,this.tabSwitched));a.subscribe("DD-WIDGET-CLOSED",b.hitch(this,this._closeDijit));this.distCalcControl.watch("open",b.hitch(this,this.distCalcDidExpand));this.dt.watch("length",b.hitch(this,function(a,b,c){this.circleLengthDidChange(c)}));this.dt.watch("startPoint",b.hitch(this,function(a,b,c){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.coordTool.inputCoordinate.set("inputType",
this.coordTool.inputCoordinate.formatType);this.dt.addStartGraphic(c,this._ptSym)}));this.dt.watch("endPoint",b.hitch(this,function(a,b,c){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",c)}));this.coordTool.inputCoordinate.watch("outputString",b.hitch(this,function(a,b,c){this.coordTool.manualInput||(this.coordTool.set("value",c),this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:x.focus(this.addPointBtn))}));
this.dt.on("draw-complete",b.hitch(this,this.feedbackDidComplete));this.own(g(this.coordTool,"keydown",b.hitch(this,this.coordToolKeyWasPressed)),this.lengthUnitDD.on("change",b.hitch(this,this.lengthUnitDDDidChange)),this.creationType.on("change",b.hitch(this,this.creationTypeDidChange)),this.distanceUnitDD.on("change",b.hitch(this,this.distanceInputDidChange)),this.timeUnitDD.on("change",b.hitch(this,this.timeInputDidChange)),g(this.coordinateFormatButton,"click",b.hitch(this,this.coordinateFormatButtonWasClicked)),
g(this.coordinateFormatButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)z.stop(a),this.coordinateFormatButtonWasClicked()})),g(this.addPointBtn,"click",b.hitch(this,this.pointButtonWasClicked)),g(this.addPointBtn,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)z.stop(a),this.pointButtonWasClicked()})),g(this.timeInput,"change",b.hitch(this,this.timeInputDidChange)),g(this.distanceInput,"change",b.hitch(this,this.distanceInputDidChange)),
g(this.distanceInput,"keyup",b.hitch(this,this.distanceInputKeyWasPressed)),g(this.clearGraphicsButton,"click",b.hitch(this,this.clearGraphics)),g(this.clearGraphicsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)z.stop(a),this.clearGraphics()})),g(this.interactiveCircle,"change",b.hitch(this,this.interactiveCheckBoxChanged)),g(this.interactiveCircle,"keydown",b.hitch(this,function(a){a.keyCode===h.ENTER&&(this.interactiveCircle.checked=this.interactiveCircle.checked?
!1:!0,this.interactiveCheckBoxChanged())})),g(this.coordinateFormat.content.applyButton,"click",b.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var a=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],b=a.defaultFormat,c=this.coordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",b);
this.coordTool.inputCoordinate.set("formatType",c);this.setCoordLabel(c);l.close(this.coordinateFormat);x.focus(this.coordinateFormatButton)})),g(this.coordinateFormat.content.applyButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE){z.stop(a);this._restrictFocusOnAddCenterPointBtn=!0;var b=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],c=b.defaultFormat,d=this.coordinateFormat.content.frmtSelect.get("value");b.useCustom&&(c=b.customFormat);
this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",c);this.coordTool.inputCoordinate.set("formatType",d);this.setCoordLabel(d);l.close(this.coordinateFormat);x.focus(this.coordinateFormatButton)}a.keyCode===h.ESCAPE&&(z.stop(a),l.close(this.coordinateFormat),x.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.cancelButton,"click",b.hitch(this,function(){l.close(this.coordinateFormat)})),
g(this.coordinateFormat.content.cancelButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)z.stop(a),l.close(this.coordinateFormat),x.focus(this.coordinateFormatButton);a.keyCode===h.ESCAPE&&(z.stop(a),l.close(this.coordinateFormat),x.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.frmtSelect,"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&(z.stop(a),l.close(this.coordinateFormat),x.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.frmtVal,
"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&(z.stop(a),l.close(this.coordinateFormat),x.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.addSignChkBox,"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&(z.stop(a),l.close(this.coordinateFormat),x.focus(this.coordinateFormatButton));a.keyCode===h.ENTER&&(z.stop(a),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),g(this.radiusInputDiv,v.leave,b.hitch(this,
this.checkValidInputs)),g(this.okButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)z.stop(a),this.okButtonClicked()})))},circleLengthDidChange:function(a){var b=m.format(a,{places:2,locale:p.locale});this.radiusInput.set("displayedValue",b);this.radiusInput.set("value",a)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.interactiveCircle.checked?(this.radiusInput.set("disabled",!0),this.distCalcControl.set("open",!1),this.distCalcControl.set("open",
!1),this.distCalcControl.set("toggleable",!1)):(this.radiusInput.set("disabled",!1),this.distCalcControl.set("disabled",!1),this.distCalcControl.set("toggleable",!0));this.checkValidInputs()},coordToolKeyWasPressed:function(c){this.dt.removeStartGraphic();c.keyCode===h.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(b.hitch(this,function(b){"UNKNOWN"===b.inputType?(new w({message:this.nls.invalidCoordinateTypeMessage}),
this.coordTool.inputCoordinate.coordinateEsriGeometry=null):(a.publish("manual-circle-center-point-input",this.coordTool.inputCoordinate.coordinateEsriGeometry),this.setCoordLabel(b.inputType),this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[b.inputType].defaultFormat),this.coordTool.inputCoordinate.set("formatType",b.inputType),this.dt.addStartGraphic(b.coordinateEsriGeometry,this._ptSym));this.checkValidInputs()})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",
this.coordTool.inputCoordinate.formatType);l.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});x.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&l.close(this.coordinateFormat)},distCalcDidExpand:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.coordTool.inputCoordinate.isManual=!0;this.distCalcControl.get("open")?this.radiusInput.set("disabled",
!0):(this.radiusInput.set("disabled",!1),this.timeInput.set("value",1),this.distanceInput.set("value",1))},timeInputDidChange:function(){this.currentTimeInSeconds=this.timeInput.get("value")*this.timeUnitDD.get("value");this.getCalculatedDistance()},distanceInputKeyWasPressed:function(a){this.distanceInputDidChange();a.keyCode===h.ENTER&&(this.coordTool.inputCoordinate.outputString&&""!==this.coordTool.inputCoordinate.inputString?(this.removeManualGraphic(),this.setGraphic(!0),this.dt._onDoubleClickHandler()):
new w({message:this.nls.noCenterPointSetMessage}))},okButtonClicked:function(){c.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,this.removeManualGraphic(),this.setGraphic(!0))},distanceInputDidChange:function(){this.currentDistanceInMeters=this.distanceInput.get("value")*this.distanceUnitDD.value.split(";")[0]/this.distanceUnitDD.value.split(";")[1];this.getCalculatedDistance()},getCalculatedDistance:function(){if(this.currentTimeInSeconds&&0<this.currentTimeInSeconds&&
this.currentDistanceInMeters&&0<this.currentDistanceInMeters){this.calculatedRadiusInMeters=this.currentTimeInSeconds*this.currentDistanceInMeters;this.useCalculatedDistance=!0;var a=0;switch(this.currentLengthUnit){case "feet":a=3.2808399*this.calculatedRadiusInMeters;break;case "meters":a=this.calculatedRadiusInMeters;break;case "yards":a=1.0936133*this.calculatedRadiusInMeters;break;case "kilometers":a=.001*this.calculatedRadiusInMeters;break;case "miles":a=6.21371192E-4*this.calculatedRadiusInMeters;
break;case "nautical-miles":a=5.39957E-4*this.calculatedRadiusInMeters}a="Diameter"===this.creationType.get("value")?2*a:a;a=m.format(a,{places:"4"});this.radiusInput.set("value",a)}else this.calculatedRadiusInMeters=null,this.useCalculatedDistance=!0},pointButtonWasClicked:function(){c.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,a.publish("clear-points"),this._setMapNavigation(!1),this.dt.set("isDiameter","Diameter"===
this.creationType.get("value")),this.distCalcControl.get("open")?this.dt.activate("point"):this.interactiveCircle.checked?this.dt.activate("polyline"):this.dt.activate("point"));c.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit);this.distCalcControl.get("open")&&this.distanceInputDidChange()},creationTypeDidChange:function(){var a="Diameter"===this.creationType.get("value")?
this.nls.diameterLabel:this.nls.radiusLabel;this.radiusDiameterLabel.innerHTML=A.sanitizeHTML(a);e.set(this.radiusInput,"aria-label",a);e.set(this.lengthUnitDD,"aria-label",a)},feedbackDidComplete:function(a){if(a.geometry.center){var b=a.geometry.center,d=new u(a.geometry.rings[0][0][0],a.geometry.rings[0][0][1],a.geometry.center.spatialReference);a=new L(a.geometry.center.spatialReference);a.addPath([b,d]);this.setGraphic(!1,a);x.focus(this.addPointBtn)}else c.toggle(this.addPointBtn,"drawPointBtn-active"),
this._setMapNavigation(!0),this.dt.deactivate(),this.checkValidInputs()},setCoordLabel:function(a){a=A.sanitizeHTML(n.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:a}));this.coordInputLabel.innerHTML=a;e.set(this.coordTool.textbox,"aria-label",a)},removeManualGraphic:function(){null!==this.tempGraphic&&this._gl.remove(this.tempGraphic);this.dt.removeStartGraphic()},setGraphic:function(a,b){a||c.toggle(this.addPointBtn,"drawPointBtn-active");this._setMapNavigation(!0);this.dt.deactivate();
this.dt.removeStartGraphic();a="Diameter"===this.creationType.get("value")?this.radiusInput.get("value")/2:this.radiusInput.get("value");a=this.coordTool.inputCoordinate.util.convertToMeters(a,this.lengthUnitDD.get("value"));b=this.coordTool.inputCoordinate.coordinateEsriGeometry;var d=null,d=4326===this.map.spatialReference.wkid?b:P.geographicToWebMercator(b);a=new M({center:d,radius:a,geodesic:!0,numberOfPoints:360});b=new H(this.map.spatialReference);b.addRing(a.rings[0]);a=new J(b,this._circleSym,
{Label:window.isRTL?this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.radiusInput.get("displayedValue")+" "+this.creationType.get("displayedValue"):this.creationType.get("displayedValue")+" "+this.radiusInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"))});this._gl.add(a);this._gl.refresh();this.emit("graphic_created",this.currentCircle);this.dt.set("startPoint",null)},clearGraphics:function(){this._gl&&(this._gl.clear(),this._gl.refresh(),
this.clearUI(!1));this.checkValidInputs();for(var a=0;a<this.map.graphicsLayerIds.length;a++)this.map.getLayer(this.map.graphicsLayerIds[a]).refresh()},clearUI:function(a){a||this.coordTool.clear();this.dt.set("startPoint",null);this.useCalculatedDistance=!1;this.currentCircle=null;c.remove(this.addPointBtn,"drawPointBtn-active");e.set(this.startPointCoords,"value","");this.radiusInput.set("value",1E3);this.timeInput.set("value",1);this.distanceInput.set("value",1)},setGraphicsHidden:function(){this._gl&&
this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){c.add(this.okButton,"jimu-state-disabled");e.set(this.okButton,"tabindex",-1);!this.interactiveCircle.checked&&null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.radiusInput.isValid()&&(c.remove(this.okButton,"jimu-state-disabled"),e.set(this.okButton,"tabindex",0))},tabSwitched:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.dt.set("startPoint",
null);this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&c.remove(this.addPointBtn,"drawPointBtn-active");l.close(this.coordinateFormat)},_setMapNavigation:function(a){a?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(a){var b=null;if(a)switch(a){case "feet":b=this.nls.abbrevFeetLabel;break;case "kilometers":b=this.nls.abbrevKmLabel;break;case "miles":b=this.nls.abbrevMilesLabel;break;case "meters":b=
this.nls.abbrevMetersLabel;break;case "nautical-miles":b=this.nls.abbrevNauticalMilesLabel;break;case "yards":b=this.nls.abbrevYardsLabel;break;default:b=a}return b},_getDegreeAbbreviation:function(a){var b=null;if(a)switch(a){case "degrees":b=this.nls.abbrevDegreesLabel;break;case "mils":b=this.nls.abbrevMilsLabel;break;default:b=a}return b},_getTimeAbbreviation:function(a){var b=null;if(a)switch(a){case "3600":b=this.nls.abbrevHoursLabel;break;case "60":b=this.nls.abbrevMinutesLabel;break;case "1":b=
this.nls.abbrevSecondsLabel;break;default:b=a}return b},_getRateAbbreviation:function(a){var b=null;if(a)switch(a){case "0.3048;1":b=this.nls.abbrevFeetSecondsLabel;break;case "0.3048;3600":b=this.nls.abbrevFeetHourLabel;break;case "1000;1":b=this.nls.abbrevKmSecondLabel;break;case "1000;3600":b=this.nls.abbrevKmHourLabel;break;case "1;1":b=this.nls.abbrevMetersSecondLabel;break;case "1;3600":b=this.nls.abbrevMetersHourLabel;break;case "1609.344;1":b=this.nls.abbrevMilesSecondLabel;break;case "1609.344;3600":b=
this.nls.abbrevMilesHourLabel;break;case "1852;1":b=this.nls.abbrevNauticalMilesSecondLabel;break;case "1852;3600":b=this.nls.abbrevNauticalMilesHourLabel;break;default:b=a}return b},setFirstFocusNode:function(){A.initFirstFocusNode(this.domNodeObj,this.creationType.domNode)},focusFirstNodeOfSelectedTab:function(){x.focus(this.creationType.focusNode)},setLastFocusNode:function(){A.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/CircleFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Circle esri/geometry/Polyline esri/geometry/geometryEngine ./Feedback".split(" "),
function(q,b,p,g,a,e,c,n,v,m){m=q([m],{constructor:function(a){q.safeMixin(this,a);this.syncEvents()},clearGraphics:function(){this.map.graphics.clear()},syncEvents:function(){g.subscribe("MANUAL_CIRCLE_RADIUS_INPUT",b.hitch(this,this.manualRadiusUpdate));g.subscribe("manual-circle-center-point-input",b.hitch(this,this.onCenterPointManualInputHandler));g.subscribe("clear-points",b.hitch(this,this.clearPoints))},clearPoints:function(a){a&&(this._points=[],this.map.graphics.clear())},onCenterPointManualInputHandler:function(a){this._points=
[];this._points.push(a.offset(0,0));this.set("startPoint",this._points[0]);this.map.centerAt(a)},manualRadiusUpdate:function(){this.circleGraphic&&this.map.graphics.remove(this.circleGraphic)},_onClickHandler:function(a){var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);a=b||a.mapPoint;this._points.push(a);switch(this._geometryType){case e.POINT:this.set("startPoint",a);this._drawEnd(a.offset(0,0));this._setTooltipMessage(0);break;case e.POLYLINE:switch(this._points.length){case 1:this.set("startPoint",
a);this._onMouseMoveHandlerConnect=p.connect(this.map,"onMouseMove",this._onMouseMoveHandler);break;case 2:this._onDoubleClickHandler()}this._setTooltipMessage(this._points.length)}},_onMouseMoveHandler:function(b){var c;this.map.snappingManager&&(c=this.map.snappingManager._snappingPoint);b=c||b.mapPoint;b=this.setCircleGeometry(this.get("startPoint"),b);this.cleanup();this.circleGraphic=new a(b,this.fillSymbol);this.map.graphics.add(this.circleGraphic)},_onDoubleClickHandler:function(){this.disconnectOnMouseMoveHandler();
this.cleanup();this._clear();this._setTooltipMessage(0);this.circleGraphic&&this._drawEnd(this.circleGraphic.geometry)},disconnectOnMouseMoveHandler:function(){p.disconnect(this._onMouseMoveHandlerConnect)},cleanup:function(){this.circleGraphic&&this.map.graphics.remove(this.circleGraphic)},setCircleGeometry:function(a,b){var d=new n(this.map.spatialReference);d.addPath([a,b]);b=v.geodesicLength(d,9001);d=this.coordTool.convertMetersToUnits(b,this.lengthUnit);this.isDiameter&&(d*=2);this.set("length",
d);return new c(a,{radius:b,geodesic:!0,numberOfPoints:360})}});m.DD_CIRCLE_LENGTH_DID_CHANGE="DD_CIRCLE_LENGTH_DID_CHANGE";return m})},"dijit/TitlePane":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/fx dojo/has dojo/_base/kernel dojo/keys ./_CssStateMixin ./_TemplatedMixin ./layout/ContentPane dojo/text!./templates/TitlePane.html ./_base/manager ./a11yclick".split(" "),function(q,b,p,g,a,e,c,n,v,m,h,k,d,r,y){b=b("dijit.TitlePane",
[d,k,h],{title:"",_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!0,toggleable:!0,tabIndex:"0",duration:y.defaultDuration,baseClass:"dijitTitlePane",templateString:r,doLayout:!1,_setTooltipAttr:{node:"focusNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);p.setSelectable(this.titleNode,!1)},postCreate:function(){this.inherited(arguments);this.toggleable&&this._trackMouseState(this.titleBarNode,this.baseClass+"Title");var a=this.hideNode,b=this.wipeNode;
this._wipeIn=c.wipeIn({node:b,duration:this.duration,beforeBegin:function(){a.style.display=""}});this._wipeOut=c.wipeOut({node:b,duration:this.duration,onEnd:function(){a.style.display="none"}})},_setOpenAttr:function(a,b){q.forEach([this._wipeIn,this._wipeOut],function(a){a&&"playing"==a.status()&&a.stop()});b?this[a?"_wipeIn":"_wipeOut"].play():this.hideNode.style.display=this.wipeNode.style.display=a?"":"none";if(this._started)if(a)this._onShow();else this.onHide();this.containerNode.setAttribute("aria-hidden",
a?"false":"true");this.focusNode.setAttribute("aria-pressed",a?"true":"false");this._set("open",a);this._setCss()},_setToggleableAttr:function(a){this.focusNode.setAttribute("role",a?"button":"heading");a?(this.focusNode.setAttribute("aria-controls",this.id+"_pane"),this.focusNode.setAttribute("tabIndex",this.tabIndex),this.focusNode.setAttribute("aria-pressed",this.open)):(g.remove(this.focusNode,"aria-controls"),g.remove(this.focusNode,"tabIndex"),g.remove(this.focusNode,"aria-pressed"));this._set("toggleable",
a);this._setCss()},_setContentAttr:function(a){this.open&&this._wipeOut&&"playing"!=this._wipeOut.status()?(this._wipeIn&&"playing"==this._wipeIn.status()&&this._wipeIn.stop(),e.setMarginBox(this.wipeNode,{h:e.getMarginBox(this.wipeNode).h}),this.inherited(arguments),this._wipeIn?this._wipeIn.play():this.hideNode.style.display=""):this.inherited(arguments)},toggle:function(){this._setOpenAttr(!this.open,!0)},_setCss:function(){var b=this.titleBarNode||this.focusNode,c=this._titleBarClass;this._titleBarClass=
this.baseClass+"Title"+(this.toggleable?"":"Fixed")+(this.open?"Open":"Closed");a.replace(b,this._titleBarClass,c||"");a.replace(b,this._titleBarClass.replace("TitlePaneTitle",""),(c||"").replace("TitlePaneTitle",""));this.arrowNodeInner.innerHTML=this.open?"-":"+"},_onTitleKey:function(a){a.keyCode==m.DOWN_ARROW&&this.open&&(this.containerNode.focus(),a.preventDefault())},_onTitleClick:function(){this.toggleable&&this.toggle()},setTitle:function(a){v.deprecated("dijit.TitlePane.setTitle() is deprecated.  Use set('title', ...) instead.",
"","2.0");this.set("title",a)}});n("dojo-bidi")&&b.extend({_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},_setTooltipAttr:function(a){this._set("tooltip",a);this.textDir&&(a=this.enforceTextDirWithUcc(null,a));g.set(this.focusNode,"title",a)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title),this.set("tooltip",this.tooltip))}});return b})},"widgets/DistanceAndDirection/views/TabEllipse":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/dom-attr dojo/dom-class dojo/string dojo/number dojo/mouse dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/TooltipDialog dijit/_WidgetsInTemplateMixin dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos jimu/utils esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleFillSymbol esri/symbols/TextSymbol esri/graphic esri/tasks/FeatureSet ../models/EllipseFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabEllipse.html dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(q,b,p,g,a,e,c,n,v,m,h,k,d,r,y,l,w,t,F,B,G,I,J,P,L,H,u,M,D,N,Q,E,C,R){return q([k,d,y],{templateString:Q,baseClass:"jimu-widget-TabEllipse",centerPointGraphic:null,_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,constructor:function(a){q.safeMixin(this,a)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!1;this.currentAngleUnit=this.angleUnitDD.get("value");this.currentLengthUnit=this.lengthUnitDD.get("value");this._labelSym=
new L(this.labelSymbol);this._ptSym=new J(this.pointSymbol);this._ellipseSym=new P(this.ellipseSymbol);this._textGL=new B;this.map.addLayer(this._textGL);this.map.addLayer(this.getLayer());if(this._gl.loaded){var a=t.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Ellipse Graphics");a.showLabels();a.enablePopup()}else this._gl.on("load",b.hitch(this,function(){var a=t.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Ellipse Graphics");a.showLabels();a.enablePopup()}));this.coordTool=
new D({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.startPointCoords);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new r({content:new N({nls:this.nls}),style:"width: 400px"});R.after(this.coordinateFormat,"onClose",b.hitch(this,function(){E.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var a=this.coordTool.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===
this.appConfig.theme.name&&c.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new M({map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls});this.dt.setLineSymbol(this._ellipseSym);this.dt.set("lengthUnit","kilometers");this.dt.set("angle",0);this.dt.set("ellipseType","semi");this.syncEvents();this.checkValidInputs();this.majorAxisInput.invalidMessage=this.nls.numericInvalidMessage;this.majorAxisInput.rangeMessage=this.nls.axisErrorMessage;
this.minorAxisInput.invalidMessage=this.nls.numericInvalidMessage;this.minorAxisInput.rangeMessage=this.nls.axisErrorMessage;this.angleInput.invalidMessage=this.nls.numericInvalidMessage;this.angleInput.rangeMessage=this.nls.orientationErrorMessage},getLayer:function(){if(!this._gl){var a=[],c={labelExpressionInfo:{value:this.nls.ellipseMajorAxis+" {MAJOR}"}},c=new I(c);c.labelPlacement="above-along";c.symbol=b.clone(this._labelSym).setOffset(0,20);a.push(c);c={labelExpressionInfo:{value:this.nls.ellipseMinorAxis+
" {MINOR}"}};c=new I(c);c.labelPlacement="center-along";c.symbol=this._labelSym;a.push(c);c={labelExpressionInfo:{value:this.nls.angleLabel+": {ORIENTATION_ANGLE}"}};c=new I(c);c.labelPlacement="below-along";c.symbol=b.clone(this._labelSym).setOffset(0,-20);a.push(c);a={layerDefinition:{extent:{xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:{wkid:102100,latestWkid:102100}},geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},
{name:"MAJOR",type:"esriFieldTypeText",alias:"Major Axis"},{name:"MINOR",type:"esriFieldTypeText",alias:"Minor Axis"},{name:"ORIENTATION_ANGLE",type:"esriFieldTypeText",alias:"Orientation Angle"}]},featureSet:new u};this._gl=new G(a,{id:"Distance \x26 Direction - Ellipse Graphics",showLabels:!0});this.own(g(this._gl,"visibility-change",b.hitch(this,function(a){this._textGL.setVisibility(a.visible)})));return this._gl}},syncEvents:function(){a.subscribe("TAB_SWITCHED",b.hitch(this,this.tabSwitched));
a.subscribe("DD-WIDGET-CLOSED",b.hitch(this,this._closeDijit));a.subscribe(M.DD_ELLIPSE_MINOR_LENGTH_CHANGE,b.hitch(this,this.minorLengthDidChange));a.subscribe(M.DD_ELLIPSE_MAJOR_LENGTH_CHANGE,b.hitch(this,this.majorLengthDidChange));a.subscribe(M.DD_ELLIPSE_ANGLE_CHANGE,b.hitch(this,this.angleDidChange));this.dt.watch("startPoint",b.hitch(this,function(a,b,c){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.dt.addStartGraphic(c,this._ptSym)}));this.coordTool.inputCoordinate.watch("outputString",
b.hitch(this,function(a,b,c){this.coordTool.manualInput||(this.coordTool.set("value",c),this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:E.focus(this.addPointBtn))}));this.own(this.dt.on("draw-complete",b.hitch(this,this.feedbackDidComplete)),this.ellipseType.on("change",b.hitch(this,this.ellipseTypeDDDidChange)),this.angleUnitDD.on("change",b.hitch(this,this.angleUnitDDDidChange)),this.lengthUnitDD.on("change",
b.hitch(this,this.lengthUnitDDDidChange)),g(this.coordinateFormatButton,"click",b.hitch(this,this.coordinateFormatButtonWasClicked)),g(this.coordinateFormatButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)C.stop(a),this.coordinateFormatButtonWasClicked()})),g(this.coordinateFormat.content.applyButton,"click",b.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var a=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],b=a.defaultFormat,
c=this.coordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",b);this.coordTool.inputCoordinate.set("formatType",c);this.setCoordLabel(c);l.close(this.coordinateFormat);E.focus(this.coordinateFormatButton)})),g(this.coordinateFormat.content.applyButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===
h.SPACE){C.stop(a);this._restrictFocusOnAddCenterPointBtn=!0;var b=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],c=b.defaultFormat,d=this.coordinateFormat.content.frmtSelect.get("value");b.useCustom&&(c=b.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",c);this.coordTool.inputCoordinate.set("formatType",d);this.setCoordLabel(d);l.close(this.coordinateFormat);
E.focus(this.coordinateFormatButton)}a.keyCode===h.ESCAPE&&(C.stop(a),l.close(this.coordinateFormat),E.focus(this.coordinateFormatButton))})),g(this.addPointBtn,"click",b.hitch(this,this.pointButtonWasClicked)),g(this.addPointBtn,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)C.stop(a),this.pointButtonWasClicked()})),g(this.interactiveEllipse,"change",b.hitch(this,this.interactiveCheckBoxChanged)),g(this.interactiveEllipse,"keydown",b.hitch(this,function(a){a.keyCode===
h.ENTER&&(this.interactiveEllipse.checked=this.interactiveEllipse.checked?!1:!0,this.interactiveCheckBoxChanged())})),g(this.coordTool,"keydown",b.hitch(this,this.coordToolKeyWasPressed)),g(this.angleInput,"change",b.hitch(this,this.angleDidChange)),g(this.coordinateFormat.content.cancelButton,"click",b.hitch(this,function(){l.close(this.coordinateFormat)})),g(this.coordinateFormat.content.cancelButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)C.stop(a),l.close(this.coordinateFormat),
E.focus(this.coordinateFormatButton);a.keyCode===h.ESCAPE&&(C.stop(a),l.close(this.coordinateFormat),E.focus(this.coordinateFormatButton))})),g(this.clearGraphicsButton,"click",b.hitch(this,this.clearGraphics)),g(this.clearGraphicsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)C.stop(a),this.clearGraphics()})),g(this.majorAxisInputDiv,m.leave,b.hitch(this,this.checkValidInputs)),g(this.minorAxisInputDiv,m.leave,b.hitch(this,this.checkValidInputs)),g(this.coordinateFormat.content.frmtSelect,
"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&(C.stop(a),l.close(this.coordinateFormat),E.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.frmtVal,"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&(C.stop(a),l.close(this.coordinateFormat),E.focus(this.coordinateFormatButton))})),g(this.coordinateFormat.content.addSignChkBox,"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&(C.stop(a),l.close(this.coordinateFormat),E.focus(this.coordinateFormatButton));
a.keyCode===h.ENTER&&(C.stop(a),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),g(this.angleInputDiv,m.leave,b.hitch(this,this.checkValidInputs)),g(this.okButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)C.stop(a),this.okButtonClicked()})))},okButtonClicked:function(){c.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,"full"===e.get(this.ellipseType,"value")?
a.publish("create-manual-ellipse",this.majorAxisInput.get("value")/2,this.minorAxisInput.get("value")/2,this.angleInput.get("value"),this.coordTool.inputCoordinate.coordinateEsriGeometry):a.publish("create-manual-ellipse",this.majorAxisInput.get("value"),this.minorAxisInput.get("value"),this.angleInput.get("value"),this.coordTool.inputCoordinate.coordinateEsriGeometry))},majorLengthDidChange:function(a){"full"===e.get(this.ellipseType,"value")&&(a*=2);var b=v.format(a,{places:2,locale:p.locale});
this.majorAxisInput.set("value",a);this.majorAxisInput.set("displayedValue",b)},minorLengthDidChange:function(a){"full"===e.get(this.ellipseType,"value")&&(a*=2);var b=v.format(a,{places:2,locale:p.locale});this.minorAxisInput.set("value",a);this.minorAxisInput.set("displayedValue",b)},angleDidChange:function(a){var b=v.format(a,{places:2,locale:p.locale});this.angleInput.set("value",a);this.angleInput.set("displayedValue",b);this.dt.set("angle",a)},interactiveCheckBoxChanged:function(){this.tabSwitched();
this.interactiveEllipse.checked?(this.majorAxisInput.set("disabled",!0),this.minorAxisInput.set("disabled",!0),this.angleInput.set("disabled",!0)):(this.majorAxisInput.set("disabled",!1),this.minorAxisInput.set("disabled",!1),this.angleInput.set("disabled",!1));this.checkValidInputs()},coordToolKeyWasPressed:function(c){this.dt.removeStartGraphic();c.keyCode===h.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(b.hitch(this,
function(b){"UNKNOWN"===b.inputType?(new w({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=null):(a.publish("manual-ellipse-center-point-input",this.coordTool.inputCoordinate.coordinateEsriGeometry),this.setCoordLabel(b.inputType),this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[b.inputType].defaultFormat),this.coordTool.inputCoordinate.set("formatType",b.inputType),this.dt.addStartGraphic(b.coordinateEsriGeometry,
this._ptSym));this.checkValidInputs()})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",this.coordTool.inputCoordinate.formatType);l.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});E.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&l.close(this.coordinateFormat)},pointButtonWasClicked:function(){c.contains(this.addPointBtn,"drawPointBtn-active")?
(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,a.publish("clear-points"),this._setMapNavigation(!1),this.interactiveEllipse.checked?this.dt.activate("polyline"):this.dt.activate("point"));c.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit)},ellipseTypeDDDidChange:function(){var a,b;a="full"===e.get(this.ellipseType,"value")?this.nls.majorDiameterLabel:
this.nls.majorRadiusLabel;b="full"===e.get(this.ellipseType,"value")?this.nls.minorDiameterLabel:this.nls.minorRadiusLabel;this.majorAxisLabel.textContent="full"===e.get(this.ellipseType,"value")?this.nls.majorDiameterLabel:this.nls.majorRadiusLabel;this.minorAxisLabel.textContent="full"===e.get(this.ellipseType,"value")?this.nls.minorDiameterLabel:this.nls.minorRadiusLabel;e.set(this.majorAxisInput,"aria-label",a);e.set(this.minorAxisInput,"aria-label",b)},angleUnitDDDidChange:function(){this.currentAngleUnit=
this.angleUnitDD.get("value");this.dt.set("angleUnit",this.currentAngleUnit);"degrees"===this.currentAngleUnit?(this.angleInput.constraints.max=360,this.angleInput.rangeMessage=this.nls.degreesRangeMessage):(this.angleInput.constraints.max=6400,this.angleInput.rangeMessage=this.nls.millsRangeMessage)},feedbackDidComplete:function(a){if("polygon"===a.geometry.type){var d=new H(a.geometry.geometry,this._ellipseSym),e=this.majorAxisLabel.textContent.split(" ")[1];d.setAttributes({MINOR:e+": "+this.minorAxisInput.get("displayedValue")+
" "+this.lengthUnitDD.get("displayedValue"),MAJOR:e+": "+this.majorAxisInput.get("displayedValue")+" "+dijit.byId("lengthUnitDD").get("displayedValue"),ORIENTATION_ANGLE:this.angleInput.get("displayedValue")+" "+this.angleUnitDD.get("displayedValue")});this._gl.add(d);a=a.geometry.geometry.getCentroid();d=window.isRTL?this.minorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.nls.minorRadiusLabel:this.minorAxisLabel.textContent+" "+this.minorAxisInput.get("displayedValue")+
" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"));this._textGL.add(new H(a,b.clone(this._labelSym).setOffset(0,20).setText(d)));d=window.isRTL?this.majorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(dijit.byId("lengthUnitDD").get("value"))+" "+this.nls.majorRadiusLabel:this.majorAxisLabel.textContent+" "+this.majorAxisInput.get("displayedValue")+" "+this._getLengthAbbrevation(dijit.byId("lengthUnitDD").get("value"));this._textGL.add(new H(a,b.clone(this._labelSym).setText(d)));
d=window.isRTL?this.angleInput.get("displayedValue")+" "+this._getDegreeAbbreviation(this.angleUnitDD.get("value"))+" "+this.nls.angleLabel:this.nls.angleLabel+" "+this.angleInput.get("displayedValue")+" "+this._getDegreeAbbreviation(this.angleUnitDD.get("value"));this._textGL.add(new H(a,b.clone(this._labelSym).setOffset(0,-20).setText(d)));this._gl.refresh()}else this.checkValidInputs();this._setMapNavigation(!0);this.dt.deactivate();c.remove(this.addPointBtn,"drawPointBtn-active");this._restrictFocusOnAddCenterPointBtn?
this._restrictFocusOnAddCenterPointBtn=!1:E.focus(this.addPointBtn)},clearGraphics:function(){this._gl&&(this._gl.clear(),this.coordTool.clear(),this._textGL.clear());c.remove(this.addPointBtn,"drawPointBtn-active");this.checkValidInputs();for(var a=0;a<this.map.graphicsLayerIds.length;a++)this.map.getLayer(this.map.graphicsLayerIds[a]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},createCenterPointGraphic:function(){null!==
this.centerPointGraphic&&this._gl.remove(this.centerPointGraphic);var a=this.coordTool.inputCoordinate.coordinateEsriGeometry;a&&(this.centerPointGraphic=new H(a,new J),this._gl.add(this.centerPointGraphic))},removeCenterPointGraphic:function(){this.centerPointGraphic&&this._gl.remove(this.centerPointGraphic)},setCoordLabel:function(a){a=F.sanitizeHTML(n.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:a}));this.coordInputLabel.innerHTML=a;e.set(this.coordTool.textbox,"aria-label",a)},
checkValidInputs:function(){c.add(this.okButton,"jimu-state-disabled");e.set(this.okButton,"tabindex",-1);!this.interactiveEllipse.checked&&null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.majorAxisInput.isValid()&&this.minorAxisInput.isValid()&&this.angleInput.isValid()&&(c.remove(this.okButton,"jimu-state-disabled"),e.set(this.okButton,"tabindex",0))},tabSwitched:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this._setMapNavigation(!0);
this.dt.removeStartGraphic();this.addPointBtn&&c.remove(this.addPointBtn,"drawPointBtn-active");l.close(this.coordinateFormat)},_setMapNavigation:function(a){a?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(a){var b=null;if(a)switch(a){case "feet":b=this.nls.abbrevFeetLabel;break;case "kilometers":b=this.nls.abbrevKmLabel;break;case "miles":b=this.nls.abbrevMilesLabel;break;case "meters":b=this.nls.abbrevMetersLabel;
break;case "nautical-miles":b=this.nls.abbrevNauticalMilesLabel;break;case "yards":b=this.nls.abbrevYardsLabel;break;default:b=a}return b},_getDegreeAbbreviation:function(a){var b=null;if(a)switch(a){case "degrees":b=this.nls.abbrevDegreesLabel;break;case "mils":b=this.nls.abbrevMilsLabel;break;default:b=a}return b},setFirstFocusNode:function(){F.initFirstFocusNode(this.domNodeObj,this.ellipseType.domNode)},focusFirstNodeOfSelectedTab:function(){E.focus(this.ellipseType.focusNode)},setLastFocusNode:function(){F.initLastFocusNode(this.domNodeObj,
this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/EllipseFeedback":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Circle esri/geometry/geometryEngine esri/geometry/webMercatorUtils esri/geometry/geodesicUtils esri/units jimu/utils ./Feedback".split(" "),function(q,b,p,g,a,e,c,n,v,m,h,k,d,r,y,l){l=q([l],{orientationAngle:0,majorAxisLength:[],
minorAxisLength:[],constructor:function(b){q.safeMixin(this,b);this.syncEvents();this._majGraphic=new a;this._majGraphicB=new a;this._minGraphic=new a;this._minGraphicB=new a},syncEvents:function(){g.subscribe("create-manual-ellipse",p.hitch(this,this.onCreateManualEllipse));g.subscribe("manual-ellipse-center-point-input",p.hitch(this,this.onCenterPointManualInputHandler));g.subscribe("clear-points",p.hitch(this,this.clearPoints))},clearPoints:function(){this._points=[];this.map.graphics.clear()},
onCreateManualEllipse:function(b,c,d,e){this._points=[];4326!==this.map.spatialReference.wkid&&(e=k.geographicToWebMercator(e));this._points.push(e);this.majorAxisLength=b=this.coordTool.convertToMeters(b,this.lengthUnit);b=this.getEndPoint(e,0,b);this._points.push(b);b=new n({paths:[[[e.x,e.y],[b.x,b.y]]],spatialReference:this.map.spatialReference});this._majGraphic=new a(b,this.lineSymbol);this._majGraphicB=new a(b,this.lineSymbol);this._majGraphicB.geometry=h.rotate(b,180,e);this.minorAxisLength=
b=this.coordTool.convertToMeters(c,this.lengthUnit);b=this.getEndPoint(e,90,b);this._points.push(b);c=new n({paths:[[[e.x,e.y],[b.x,b.y]]],spatialReference:this.map.spatialReference});this._minGraphic=new a(c,this.lineSymbol);this._minGraphicB=new a(c,this.lineSymbol);this._minGraphicB.geometry=h.rotate(c,180,e);this.orientationAngle=Number(d);this._onDoubleClickHandler()},onCenterPointManualInputHandler:function(a){this._points=[];this._points.push(a.offset(0,0));this.set("startPoint",this._points[0]);
this.map.centerAt(a)},getEndPoint:function(a,b,c){b=b?b:0;c=new m(a,{radius:c,geodesic:!0,numberOfPoints:60});return h.rotate(c,b,a).getPoint(0,0)},_onClickHandler:function(c){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);d=d||c.mapPoint;this._points.push(d.offset(0,0));switch(this._geometryType){case e.POINT:this.set("startPoint",d.offset(0,0));this._drawEnd(d.offset(0,0));this._setTooltipMessage(0);break;case e.POLYLINE:switch(this._points.length){case 1:this.set("startPoint",
this._points[0]);c=new n({paths:[[[d.x,d.y],[d.x,d.y]]],spatialReference:this.map.spatialReference});d=new n({paths:[[[d.x,d.y],[d.x,d.y]]],spatialReference:this.map.spatialReference});this._majGraphic=new a(c,this.lineSymbol);this._majGraphicB=new a(c,this.lineSymbol);this._minGraphic=new a(d,this.lineSymbol);this._minGraphicB=new a(d,this.lineSymbol);this.map.graphics.add(this._majGraphic);this.map.graphics.add(this._majGraphicB);this.map.graphics.add(this._minGraphic);this.map.graphics.add(this._minGraphicB);
this._onMouseMoveHandlerConnect=b.connect(this.map,"onMouseMove",this._onMouseMoveHandler);this._onDoubleClickHandler_connect=b.connect(this.map,"onDblClick",p.hitch(this,this._onDoubleClickHandler));if(c=this._tooltip)c.innerHTML=y.sanitizeHTML(this.nls.majorAxisTooltipMessage);break;case 2:this._tooltip&&(this._tooltip.innerHTML=y.sanitizeHTML(this.nls.minorAxisTooltipMessage));break;case 3:this._onDoubleClickHandler()}}},_onMouseMoveHandler:function(a){var b;this.map.snappingManager&&(b=this.map.snappingManager._snappingPoint);
b=b||a.mapPoint;1===this._points.length?(this._majGraphic.geometry.setPoint(0,1,b),this._majGraphicB.geometry=h.rotate(this._majGraphic.geometry,180,this._points[0]),this._majGraphic.setGeometry(this._majGraphic.geometry).setSymbol(this.lineSymbol),this._majGraphicB.setGeometry(this._majGraphicB.geometry).setSymbol(this.lineSymbol),this.majorAxisLength=h.geodesicLength(this._majGraphic.geometry,9001),a=this.coordTool.convertMetersToUnits(this.majorAxisLength,this.lengthUnit),g.publish("DD_ELLIPSE_MAJOR_LENGTH_CHANGE",
a),a=this.getAngle(k.webMercatorToGeographic(this._points[0]),k.webMercatorToGeographic(b)),"mils"===this.angleUnit&&(a*=17.777777778),g.publish("DD_ELLIPSE_ANGLE_CHANGE",a)):null!==this._minGraphic&&(a=p.clone(this._minGraphic.geometry),b=h.nearestCoordinate(this._majGraphic.geometry,b),b=new c(b.coordinate.x,b.coordinate.y,102100),this._minGraphic.geometry.setPoint(0,1,b),this._minGraphicB.geometry.setPoint(0,1,b),this._minGraphic.geometry=h.rotate(this._minGraphic.geometry,-90,this._points[0]),
this._minGraphicB.geometry=h.rotate(this._minGraphicB.geometry,90,this._points[0]),this._minGraphic.setGeometry(this._minGraphic.geometry).setSymbol(this.lineSymbol),this._minGraphicB.setGeometry(this._minGraphicB.geometry).setSymbol(this.lineSymbol),b=k.webMercatorToGeographic(this._minGraphic.geometry),this.minorAxisLength=d.geodesicLengths([b],r.METERS),b=this.coordTool.convertMetersToUnits(this.minorAxisLength[0],this.lengthUnit),this.minorAxisLength[0]>this.majorAxisLength||0===this.minorAxisLength[0]?
this._minGraphic.setGeometry(a):g.publish("DD_ELLIPSE_MINOR_LENGTH_CHANGE",b))},getLineLength:function(a,b,c,d){return Math.sqrt((a-=c)*a+(b-=d)*b)},getAngle:function(a,b){return(180*Math.atan2(b.x-a.x,b.y-a.y)/Math.PI+360)%360},convertAngle:function(a){return 0<=a&&90>a||180<=a&&270>a?90-a:90<=a&&180>a||270<=a&&360>a?180-a+270:a},_onDoubleClickHandler:function(){if(3<=this._points.length){var a=new v(this.map.spatialReference),b=this.map.toScreen(this._majGraphic.geometry.getPoint(0,0)),c=this.map.toScreen(this._majGraphic.geometry.getPoint(0,
1)),d=this.map.toScreen(this._minGraphic.geometry.getPoint(0,1)),c=this.getLineLength(b.x,b.y,c.x,c.y),d=this.getLineLength(b.x,b.y,d.x,d.y),b=v.createEllipse({center:b,longAxis:c,shortAxis:d,numberOfPoints:60,map:this.map});this.orientationAngle=this.angle;"mils"===this.angleUnit&&(this.orientationAngle/=17.777777778);a.geometry=h.rotate(b,this.convertAngle(this.orientationAngle),this._majGraphic.geometry.getPoint(0,0));a=p.mixin(a,{majorAxisLength:this.coordTool.convertMetersToUnits(this.majorAxisLength,
this.lengthUnit),minorAxisLength:this.coordTool.convertMetersToUnits(this.minorAxisLength,this.lengthUnit),angle:this.angle,drawType:"ellipse",center:this._points[0]})}this.disconnectOnMouseMoveHandler();this._setTooltipMessage(0);this._drawEnd(a);this.cleanup();this.orientationAngle=0},cleanup:function(){this.map.graphics.clear();this._minGraphic=this._majGraphic=null;this.majorAxisLength=[];this.minorAxisLength=[]},disconnectOnMouseMoveHandler:function(){b.disconnect(this._onMouseMoveHandlerConnect)}});
l.DD_ELLIPSE_MAJOR_LENGTH_CHANGE="DD_ELLIPSE_MAJOR_LENGTH_CHANGE";l.DD_ELLIPSE_MINOR_LENGTH_CHANGE="DD_ELLIPSE_MINOR_LENGTH_CHANGE";l.DD_ELLIPSE_ANGLE_CHANGE="DD_ELLIPSE_ANGLE_CHANGE";return l})},"widgets/DistanceAndDirection/views/TabRange":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/dom-construct dojo/on dojo/dom-class dojo/topic dojo/string dojo/mouse dojo/keys dojo/number dojo/dom-attr dijit/registry dijit/_WidgetBase dijit/_TemplatedMixin dijit/TooltipDialog dijit/popup dijit/form/NumberTextBox jimu/dijit/Message jimu/dijit/SimpleTable jimu/LayerInfos/LayerInfos jimu/utils dijit/_WidgetsInTemplateMixin dojo/text!../templates/TabRange.html esri/geometry/Circle esri/geometry/Polyline esri/geometry/Point esri/geometry/geometryEngine esri/graphic esri/layers/GraphicsLayer esri/layers/FeatureLayer esri/layers/LabelClass esri/tasks/FeatureSet esri/symbols/TextSymbol esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol esri/geometry/webMercatorUtils ../views/CoordinateInput ../views/EditOutputCoordinate ../models/RangeRingFeedback dijit/focus dojo/_base/event dojo/aspect jimu/dijit/formSelect jimu/dijit/CheckBox".split(" "),
function(q,b,p,g,a,e,c,n,v,m,h,k,d,r,y,l,w,t,F,B,G,I,J,P,L,H,u,M,D,N,Q,E,C,R,A,x,z,S,f,T,U,V,O,K,W){return q([y,l,P],{templateString:L,baseClass:"jimu-widget-TabRange",startPoint:null,firstDistance:!0,_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,_setStartPointAttr:function(){this._set("startPoint")},_getStartPointAttr:function(){return this.startPoint},constructor:function(a){q.safeMixin(this,a)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=
!1;this._ptSym=new S(this.pointSymbol);this._circleSym=new x(this.circleSymbol);this._lineSym=new z(this.lineSymbol);this._labelSym=new A(this.labelSymbol);this._tsGL=new Q;this.map.addLayer(this._tsGL);this.map.addLayer(this.getLayer());this._initDistanceTable();if(this._gl.loaded){var a=I.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Range Graphics");a.showLabels();a.enablePopup()}else this._gl.on("load",b.hitch(this,function(){var a=I.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Range Graphics");
a.showLabels();a.enablePopup()}));this.coordTool=new T({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.rangeCenter);this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new w({content:new U({nls:this.nls}),style:"width: 400px"});W.after(this.coordinateFormat,"onClose",b.hitch(this,function(){O.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var a=this.coordTool.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnAddCenterPointBtn=
!1}}));"DartTheme"===this.appConfig.theme.name&&c.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");this.dt=new V({map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls});this.dt.setFillSymbol(this._circleSym);this.dt.set("lengthLayer",this._lengthLayer);this.syncEvents();this._distanceTable.addRow({});this.checkValidInputs();this.numRingsInput.invalidMessage=this.nls.ringsErrorMessage;this.numRingsInput.rangeMessage=this.nls.ringsErrorMessage;this.numRadialsInput.invalidMessage=
this.nls.radialsInvalidMessage;this.numRadialsInput.rangeMessage=this.nls.radialsErrorMessage},_initDistanceTable:function(){var a=[{name:"Value",title:this.nls.valueLabel,type:"extension","class":"label",create:b.hitch(this,this._createValueField),getValue:b.hitch(this,this._getValueFieldValue)},{name:"actions",title:this.nls.actionLabel,width:"65px",type:"actions",actions:["up","down","delete"],"class":"label"}];this._distanceTable=new G({fields:a,autoHeight:!0});this._distanceTable.placeAt(this.distanceTable);
this._distanceTable.startup()},_createValueField:function(c){var d=new F({style:"height: 24px;",id:r.getUniqueId("ntb"),required:"true",placeHolder:this.nls.valueText,invalidMessage:this.nls.numericInvalidMessage,value:this.firstDistance?"":0,constraints:{places:2},"class":"numberTextBox","aria-label":this.nls.valueLabel});a.place(d.domNode,c);this.own(e(d,"focus",b.hitch(this,function(){0===d.get("value")&&d.set("value","")})),e(d,"blur",b.hitch(this,function(){var a=this._distanceTable.getRows();
p.forEach(a,b.hitch(this,function(b){!this._distanceTable.getRowData(b).Value.valid&&1<a.length&&this._distanceTable.deleteRow(b)}))})));d.focus();this.firstDistance=!1},_getValueFieldValue:function(a){a=r.byNode(a.childNodes[0]);return{value:a.get("value"),valid:a.isValid()}},getLayer:function(){if(!this._gl){var a=new C({labelExpressionInfo:{value:"{Interval}"}});a.labelPlacement="center-end";a.symbol=this._labelSym;a={layerDefinition:{geometryType:"esriGeometryPolyline",extent:{xmin:0,ymin:0,xmax:0,
ymax:0,spatialReference:{wkid:102100,latestWkid:102100}},objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Interval",type:"esriFieldTypeString",alias:"Interval"}]},featureSet:new R};this._gl=new E(a,{id:"Distance \x26 Direction - Range Graphics",showLabels:!0});this.own(e(this._gl,"visibility-change",b.hitch(this,function(a){this._tsGL.setVisibility(a.visible)})))}return this._gl},syncEvents:function(){n.subscribe("TAB_SWITCHED",b.hitch(this,this.tabSwitched));
n.subscribe("DD-WIDGET-CLOSED",b.hitch(this,this._closeDijit));this.dt.watch("startPoint",b.hitch(this,function(a,b,c){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",c);this.dt.addStartGraphic(c,this._ptSym)}));this.coordTool.inputCoordinate.watch("outputString",b.hitch(this,function(a,b,c){this.coordTool.manualInput||(this.coordTool.set("value",c),this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=
!1:O.focus(this.addPointBtn))}));this.own(e(this.coordTool,"keydown",b.hitch(this,this.coordToolKeyWasPressed)),this.dt.on("draw-complete",b.hitch(this,this.feedbackDidComplete)),e(this.rangeType,"change",b.hitch(this,this.rangeTypeDropDownChanged)),e(this.ringIntervalUnitsDD,"change",b.hitch(this,this.ringIntervalUnitsDidChange)),e(this.coordinateFormatButton,"click",b.hitch(this,this.coordinateFormatButtonWasClicked)),e(this.coordinateFormatButton,"keydown",b.hitch(this,function(a){if(a.keyCode===
h.ENTER||a.keyCode===h.SPACE)K.stop(a),this.coordinateFormatButtonWasClicked()})),e(this.addPointBtn,"click",b.hitch(this,this.pointButtonWasClicked)),e(this.addPointBtn,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)K.stop(a),this.pointButtonWasClicked()})),e(this.coordinateFormat.content.applyButton,"click",b.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var a=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],b=a.defaultFormat,
c=this.coordinateFormat.content.frmtSelect.get("value");a.useCustom&&(b=a.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",b);this.coordTool.inputCoordinate.set("formatType",c);this.setCoordLabel(c);t.close(this.coordinateFormat);O.focus(this.coordinateFormatButton)})),e(this.coordinateFormat.content.applyButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===
h.SPACE){K.stop(a);this._restrictFocusOnAddCenterPointBtn=!0;var b=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],c=b.defaultFormat,d=this.coordinateFormat.content.frmtSelect.get("value");b.useCustom&&(c=b.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",c);this.coordTool.inputCoordinate.set("formatType",d);this.setCoordLabel(d);t.close(this.coordinateFormat);
O.focus(this.coordinateFormatButton)}a.keyCode===h.ESCAPE&&(K.stop(a),t.close(this.coordinateFormat),O.focus(this.coordinateFormatButton))})),e(this.coordinateFormat.content.cancelButton,"click",b.hitch(this,function(){t.close(this.coordinateFormat)})),e(this.coordinateFormat.content.cancelButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)K.stop(a),t.close(this.coordinateFormat),O.focus(this.coordinateFormatButton);a.keyCode===h.ESCAPE&&(K.stop(a),t.close(this.coordinateFormat),
O.focus(this.coordinateFormatButton))})),e(this.clearGraphicsButton,"click",b.hitch(this,this.clearGraphics)),e(this.clearGraphicsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)K.stop(a),this.clearGraphics()})),e(this.numRingsDiv,m.leave,b.hitch(this,this.checkValidInputs)),e(this.ringIntervalDiv,m.leave,b.hitch(this,this.checkValidInputs)),e(this.numRadialsInputDiv,m.leave,b.hitch(this,this.checkValidInputs)),e(this.btnAddDistance,"click",b.hitch(this,function(){var a=
this._distanceTable.getRows(),c=!1;p.forEach(a,b.hitch(this,function(a){this._distanceTable.getRowData(a).Value.valid&&(c=!0)}));c&&this._distanceTable.addRow({})})),e(this.btnAddDistance,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE){K.stop(a);a=this._distanceTable.getRows();var c=!1;p.forEach(a,b.hitch(this,function(a){this._distanceTable.getRowData(a).Value.valid&&(c=!0)}));c&&this._distanceTable.addRow({})}})),e(this._distanceTable.tbody,"keyup",b.hitch(this,function(a){a.keyCode===
h.ENTER&&this._distanceTable.addRow({})})),e(this.coordinateFormat.content.frmtSelect,"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&(K.stop(a),t.close(this.coordinateFormat),O.focus(this.coordinateFormatButton))})),e(this.coordinateFormat.content.frmtVal,"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&(K.stop(a),t.close(this.coordinateFormat),O.focus(this.coordinateFormatButton))})),e(this.coordinateFormat.content.addSignChkBox,"keydown",b.hitch(this,function(a){a.keyCode===h.ESCAPE&&
(K.stop(a),t.close(this.coordinateFormat),O.focus(this.coordinateFormatButton));a.keyCode===h.ENTER&&(K.stop(a),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),e(this.okButton,"keydown",b.hitch(this,function(a){if(a.keyCode===h.ENTER||a.keyCode===h.SPACE)K.stop(a),this.okButtonClicked()})))},setCoordLabel:function(a){a=J.sanitizeHTML(v.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:a}));this.rangeCenterLabel.innerHTML=
a;d.set(this.coordTool.textbox,"aria-label",a)},rangeTypeDropDownChanged:function(){this.tabSwitched();switch(this.rangeType.get("value")){case "Interactive":c.add(this.numRingsContainer,"controlGroupHidden");c.add(this.distancebetweenRingsContainer,"controlGroupHidden");c.add(this.distanceTableContainer,"controlGroupHidden");c.remove(this.distanceUnitsContainer,"controlGroupHidden");break;case "Fixed":c.remove(this.numRingsContainer,"controlGroupHidden");c.remove(this.distancebetweenRingsContainer,
"controlGroupHidden");c.add(this.distanceUnitsContainer,"controlGroupHidden");c.add(this.distanceTableContainer,"controlGroupHidden");break;case "Origin":case "Cumulative":c.add(this.numRingsContainer,"controlGroupHidden"),c.add(this.distancebetweenRingsContainer,"controlGroupHidden"),c.remove(this.distanceUnitsContainer,"controlGroupHidden"),c.remove(this.distanceTableContainer,"controlGroupHidden")}this.checkValidInputs()},coordToolKeyWasPressed:function(a){this.dt.removeStartGraphic();a.keyCode===
h.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(b.hitch(this,function(a){"UNKNOWN"===a.inputType?(new B({message:this.nls.invalidCoordinateTypeMessage}),this.coordTool.inputCoordinate.coordinateEsriGeometry=null):(n.publish("manual-rangering-center-point-input",this.coordTool.inputCoordinate.coordinateEsriGeometry),this.setCoordLabel(a.inputType),this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[a.inputType].defaultFormat),
this.coordTool.inputCoordinate.set("formatType",a.inputType),this.dt.addStartGraphic(a.coordinateEsriGeometry,this._ptSym));this.checkValidInputs()})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",this.coordTool.inputCoordinate.formatType);t.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});O.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&
t.close(this.coordinateFormat)},pointButtonWasClicked:function(){c.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,n.publish("clear-points"),this._setMapNavigation(!1),"Interactive"===this.rangeType.get("value")?this.dt.activate("polyline"):this.dt.activate("point"));c.toggle(this.addPointBtn,"drawPointBtn-active")},ringIntervalUnitsDidChange:function(){this.ringIntervalUnit=this.ringIntervalUnitsDD.get("value")},okButtonClicked:function(){if(!c.contains(this.okButton,
"jimu-state-disabled")){var a,d,e;this._restrictFocusOnAddCenterPointBtn=!0;switch(this.rangeType.get("value")){case "Fixed":d=this.ringIntervalInput.get("value");a=this.numRingsInput.get("value");e=this.ringIntervalUnitsDD.get("value");break;case "Origin":case "Cumulative":if(e=this.distanceUnitsDD.get("value"),this.checkTableValues())if(d=this._distanceTable.getRows(),"Origin"===this.rangeType.get("value"))d=p.map(d,b.hitch(this,function(a){return this._distanceTable.getRowData(a).Value.value}));
else{var f=0;d=p.map(d,b.hitch(this,function(a){a=this._distanceTable.getRowData(a);return f+=a.Value.value}))}else{new B({message:this.nls.distanceTableErrorMessage});return}}a={centerPoint:this.dt.get("startPoint")||this.coordTool.inputCoordinate.coordinateEsriGeometry,numRings:a,numRadials:this.numRadialsInput.get("value"),radius:0,circle:null,circles:[],lastCircle:null,r:0,c:0,radials:0,ringInterval:d,ringIntervalUnitsDD:e,circleSym:this._circleSym};this.createRangeRings(a);this.coordTool.clear()}},
checkTableValues:function(){return 0<this._distanceTable.getRows().length},createRangeRings:function(a){if(a.centerPoint){a.centerPoint.spatialReference.wkid!==this.map.spatialReference.wkid&&(a.centerPoint=f.geographicToWebMercator(a.centerPoint));if(a.ringInterval&&a.ringIntervalUnitsDD)if(a.ringInterval.constructor===Array)for(h=0;h<a.ringInterval.length;h++)a.ringInterval[h]=this.coordTool.inputCoordinate.util.convertToMeters(parseFloat(a.ringInterval[h]),a.ringIntervalUnitsDD);else a.ringDistance=
this.coordTool.inputCoordinate.util.convertToMeters(parseFloat(a.ringInterval),a.ringIntervalUnitsDD);this.dt.removeStartGraphic();if(0===a.circles.length)if(a.ringInterval.constructor===Array)for(h=0;h<a.ringInterval.length;h++)a.radius+=a.ringDistance,a.circle=new H({center:a.centerPoint,geodesic:!0,radius:a.ringInterval[h],numberOfPoints:360}),a.circles.push(a.circle);else for(a.r=0;a.r<a.numRings;a.r++)a.radius+=a.ringDistance,a.circle=new H({center:a.centerPoint,geodesic:!0,radius:a.radius,numberOfPoints:360}),
a.circles.push(a.circle);h=a.ringIntervalUnitsDD;for(a.c=0;a.c<a.circles.length;a.c++){var c=new u({paths:[a.circles[a.c].rings[0]],spatialReference:this.map.spatialReference}),d=window.isRTL?this._getLengthAbbrevation(this.distanceUnitsDD.get("value"))+" "+k.format(k.round(this.coordTool.inputCoordinate.util.convertMetersToUnits(a.circles[a.c].radius,h),2),{places:2,locale:g.locale}):k.format(k.round(this.coordTool.inputCoordinate.util.convertMetersToUnits(a.circles[a.c].radius,h),2),{places:2,locale:g.locale})+
" "+this._getLengthAbbrevation(this.distanceUnitsDD.get("value")),e=new N(c,this._lineSym,{Interval:d});this._gl.add(e);c=new M(c.paths[0][0][0],c.paths[0][0][1],a.centerPoint.spatialReference);this._tsGL.add(new N(c,b.clone(this._labelSym).setText(d).setOffset(0,10)))}for(var h=a.largestRadius=0;h<a.circles.length;h++)a.circles[h].radius>a.largestRadius&&(a.largestRadius=a.circles[h].radius);h=new H({center:a.centerPoint,geodesic:!0,radius:a.largestRadius,numberOfPoints:a.numRadials});if(0!==a.numRadials)for(d=
0;d<h.rings[0].length-1;d++)c=new u(a.centerPoint.spatialReference),c.addPath([b.clone(a.centerPoint),h.getPoint(0,d)]),c=new u(D.geodesicDensify(c,1E4),a.centerPoint.spatialReference),this._gl.add(new N(c,this._lineSym,{Interval:""}));this._gl.redraw();this.map.setExtent(h.getExtent().expand(3))}},feedbackDidComplete:function(a){var b=null;if(a.geometry.hasOwnProperty("circlePoints")){for(var b=a.geometry.circlePoints[0],d={centerPoint:b,numRadials:this.numRadialsInput.get("value"),circles:[],circleSym:this._circleSym,
r:0,c:0,radials:0,ringIntervalUnitsDD:this.distanceUnitsDD.get("value"),intervalUnits:this.distanceUnitsDD.get("value")},e,f=1;f<a.geometry.circlePoints.length;f++)e=new u(a.geometry.spatialReference),e.addPath([b,a.geometry.circlePoints[f]]),e=D.geodesicLength(e,9001),e=new H({center:b,geodesic:!0,radius:e,numberOfPoints:360}),d.circles.push(e);this.createRangeRings(d)}else b=a.geometry,this.checkValidInputs();c.remove(this.addPointBtn,"drawPointBtn-active");this.dt.deactivate();this._setMapNavigation(!0)},
clearGraphics:function(){this._gl&&(this._tsGL.clear(),this._gl.clear(),this._gl.refresh(),this.dt.removeStartGraphic(),this.coordTool.clear());this.checkValidInputs();for(var a=0;a<this.map.graphicsLayerIds.length;a++)this.map.getLayer(this.map.graphicsLayerIds[a]).refresh()},setGraphicsHidden:function(){this._gl&&this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){c.add(this.okButton,"jimu-state-disabled");d.set(this.okButton,"tabindex",-1);"Interactive"!==
this.rangeType.get("value")&&null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.numRingsInput.isValid()&&this.ringIntervalInput.isValid()&&this.numRadialsInput.isValid()&&(c.remove(this.okButton,"jimu-state-disabled"),d.set(this.okButton,"tabindex",0))},tabSwitched:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandlers();this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&c.remove(this.addPointBtn,"drawPointBtn-active");t.close(this.coordinateFormat)},
_setMapNavigation:function(a){a?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(a){var b=null;if(a)switch(a){case "feet":b=this.nls.abbrevFeetLabel;break;case "kilometers":b=this.nls.abbrevKmLabel;break;case "miles":b=this.nls.abbrevMilesLabel;break;case "meters":b=this.nls.abbrevMetersLabel;break;case "nautical-miles":b=this.nls.abbrevNauticalMilesLabel;break;case "yards":b=this.nls.abbrevYardsLabel;break;default:b=
a}return b},_getDegreeAbbreviation:function(a){var b=null;if(a)switch(a){case "degrees":b=this.nls.abbrevDegreesLabel;break;case "mils":b=this.nls.abbrevMilsLabel;break;default:b=a}return b},setFirstFocusNode:function(){J.initFirstFocusNode(this.domNodeObj,this.rangeType.domNode)},focusFirstNodeOfSelectedTab:function(){O.focus(this.rangeType.focusNode)},setLastFocusNode:function(){J.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})})},"widgets/DistanceAndDirection/models/RangeRingFeedback":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/topic esri/graphic esri/toolbars/draw esri/geometry/Circle esri/geometry/Polyline esri/geometry/geometryEngine jimu/utils ./Feedback".split(" "),
function(q,b,p,g,a,e,c,n,v,m,h){return q([h],{constructor:function(a){q.safeMixin(this,a);this.syncEvents();this.circlePoints=[]},syncEvents:function(){g.subscribe("manual-rangering-center-point-input",b.hitch(this,this.onCenterPointManualInputHandler));g.subscribe("clear-points",b.hitch(this,this.clearPoints))},clearPoints:function(a){a&&(this._points=[],this.map.graphics.clear())},clearGraphics:function(){this.map.graphics.clear()},onCenterPointManualInputHandler:function(a){this._points=[];this._points.push(a.offset(0,
0));this.set("startPoint",this._points[0]);this.map.centerAt(a)},_onClickHandler:function(c){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);d=d||c.mapPoint;c=this.map;this._points.push(d.offset(0,0));1===this._points.length&&this.set("startPoint",this._points[0]);this.circlePoints.push(d.offset(0,0));switch(this._geometryType){case e.POINT:this._drawEnd(d.offset(0,0));this._setTooltipMessage(0);break;case e.POLYLINE:d=new n({paths:[[[d.x,d.y],[d.x,d.y]]],spatialReference:c.spatialReference}),
this.lgraphic=new a(d,this.lineSymbol),c.snappingManager&&c.snappingManager._setGraphic(this._graphic),1<this._points.length&&this.circleGraphic&&(c=new a(this.circleGraphic.geometry,this.fillSymbol),this.map.graphics.add(c)),0<this._points.length&&(this._onMouseMoveHandler_connect||(this._onMouseMoveHandler_connect=p.connect(this.map,"onMouseMove",this._onMouseMoveHandler)),this._onDoubleClickHandler_connect||(this._onDoubleClickHandler_connect=p.connect(this.map,"onDblClick",b.hitch(this,this._onDoubleClickHandler))))}this._setTooltipMessage(this._points.length);
1<this._points.length&&(c=this._tooltip)&&(c.innerHTML=m.sanitizeHTML(this.nls.doubleClickEllipseMesage))},_onMouseMoveHandler:function(e){var d;this.map.snappingManager&&(d=this.map.snappingManager._snappingPoint);var g=this._points[0];e=d||e.mapPoint;d=this.lgraphic.geometry;d.setPoint(0,0,{x:g.x,y:g.y});d.setPoint(0,1,{x:e.x,y:e.y});e=v.geodesicLength(d,9001);g=new c(g,{radius:e,geodesic:!0,numberOfPoints:360});this.circleGraphic&&this.map.graphics.remove(this.circleGraphic);g=b.mixin(g,{distanceDirectionType:"military-tools-range-rings"});
this.circleGraphic=new a(g,this.fillSymbol);this.map.graphics.add(this.circleGraphic)},_onDoubleClickHandler:function(){this.disconnectOnMouseMoveHandlers();var a=b.clone(this.circlePoints);this.cleanup();this._clear();this._setTooltipMessage(0);a=b.mixin(this.circleGraphic.geometry,{circlePoints:a});this._drawEnd(a)},disconnectOnMouseMoveHandlers:function(){p.disconnect(this._onMouseMoveHandler_connect);p.disconnect(this._onDoubleClickHandler_connect);this._onDoubleClickHandler_connect=null},cleanup:function(){for(var a=
this.map.graphics.graphics.length-1;0<=a;a--)this.map.graphics.graphics[a].geometry.hasOwnProperty("distanceDirectionType")&&this.map.graphics.remove(this.map.graphics.graphics[a]);this.circlePoints=[]}})})},"widgets/DistanceAndDirection/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/DistanceAndDirection/models/ConfirmNotation.html":'\x3cdiv class\x3d\'coordinateContainer\'\x3e\r\n    \x3cspan class\x3d\'jimu-widget-subtitle\' data-dojo-attach-point\x3d\'label1\'\x3e\x3c/span\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cdiv class\x3d"controlItem" style\x3d"padding-top: 10px;"\x3e\r\n            \x3cselect style\x3d"width: 225px" data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"comboOptions"\x3e\r\n            \x3c/select\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/templates/EditOutputCoordinate.html":'\x3cdiv\x3e\r\n  \x3cspan class\x3d\'jimu-widget-subtitle\'\x3e${nls.setCoordFormatStringMessage}\x3c/span\x3e\r\n  \x3cdiv class\x3d"controlContainer"\x3e\r\n    \x3cselect class\x3d"selectFormat esriCTDropdownObj" name\x3d"test" data-dojo-type\x3d\'jimu/dijit/formSelect\'\r\n      data-dojo-attach-point\x3d"frmtSelect" aria-label\x3d"${nls.setCoordFormatStringMessage}"\x3e\r\n      \x3coption value\x3d"DD"\x3e${nls.ddLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"DDM"\x3e${nls.ddmLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"DMS"\x3e${nls.dmsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"GARS"\x3e${nls.garsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"GEOREF"\x3e${nls.georefLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"MGRS"\x3e${nls.mgrsLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"USNG"\x3e${nls.usngLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"UTM"\x3e${nls.utmLabel}\x3c/option\x3e\r\n      \x3coption value\x3d"UTM (H)"\x3e${nls.utmhLabel}\x3c/option\x3e\r\n    \x3c/select\x3e\r\n    \x3cinput type\x3d"text" data-dojo-attach-point\x3d"frmtVal" class\x3d"formatInput esriCTInputObj"\r\n      aria-label\x3d"${nls.setCoordFormatStringMessage}"\x3e\x3c/input\x3e\r\n    \x3cdiv class\x3d\'settingsContainer\' data-dojo-attach-point\x3d"prefixContainer"\x3e\r\n      \x3cinput data-dojo-attach-point\x3d"addSignChkBox" type\x3d"checkbox" aria-label\x3d"${nls.prefixMessage}"\r\n        class\x3d"esriCTCheckboxObj"\x3e\r\n      \x3clabel class\x3d"formatText"\x3e${nls.prefixMessage}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"btnContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"applyButton" class\x3d\'jimu-btn esriCTButtonObj\' tabindex\x3d"0"\r\n      aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e\r\n      ${nls.common.ok}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"cancelButton" class\x3d\'jimu-btn esriCTButtonObj\' tabindex\x3d"0"\r\n      aria-label\x3d"${nls.common.cancel}" role\x3d"button"\x3e${nls.common.cancel}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabLine.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"lineContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.fromLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect data-dojo-attach-point\x3d"lineTypeDD" style\x3d"width:100%" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          aria-label\x3d"${nls.fromLabel}" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"DistAndBearing"\x3e${nls.distanceBearingLabel}\x3c/option\x3e\r\n          \x3coption selected\x3d"selected" value\x3d"Points"\x3e${nls.pointsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"startDiv"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"lineStartPointLabel"\x3e${nls.startPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoordsLine"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft" data-dojo-attach-point\x3d"addPointBtnStartDiv"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButtonStart" tabindex\x3d"0" aria-label\x3d"${nls.formatInputLabel}"\r\n              role\x3d"button"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtnStart"\r\n              tabindex\x3d"0" aria-label\x3d"${nls.addPointLabel}" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3cinput aria-label\x3d"${nls.createLineInteractively}" class\x3d"interactive-checkbox esriCTCheckboxObj" type\x3d"checkbox"\r\n        data-dojo-attach-point\x3d"interactiveLine" /\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createLineInteractively}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup endPt"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"lineEndPointLabel"\x3e${nls.endPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"endPointCoordsLine"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft" data-dojo-attach-point\x3d"addPointBtnEndDiv"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButtonEnd" tabindex\x3d"0" aria-label\x3d"${nls.formatInputLabel}"\r\n              role\x3d"button"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtnEnd" tabindex\x3d"0"\r\n              aria-label\x3d"${nls.addPointLabel}" role\x3d"button"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.lengthLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"lengthInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.lengthLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000"\r\n          data-dojo-props\x3d"constraints: {min: 1, max: 40030000}" data-dojo-attach-point\x3d"lengthInput"\r\n          data-dojo-attach-event\x3d"keyup: checkValidInputs"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect style\x3d"width: 100px" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"lengthUnitDD" aria-label\x3d"${nls.lengthLabel}"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.angleLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"angleInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.angleLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n          style\x3d"width: calc(100% - 108px);" required\x3d"true" value\x3d"0" data-dojo-props\x3d"constraints: {min: 0, max: 360}"\r\n          data-dojo-attach-point\x3d"angleInput" data-dojo-attach-event\x3d"onChange: checkValidInputs"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect style\x3d"width: 100px" class\x3d"controlSpace" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"angleUnitDD" tabindex\x3d"0" aria-label\x3d"${nls.angleLabel}"\x3e\r\n          \x3coption value\x3d"degrees"\x3e${nls.degreesLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"mils"\x3e${nls.milsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" tabindex\x3d"-1" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\' data-dojo-attach-event\x3d"onclick: clearGraphics"\x3e\r\n        ${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabCircle.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"circleContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.circleTitle}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.circleTitle}" style\x3d"width:100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"creationType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"Radius" selected\x3d"selected"\x3e${nls.radiusLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Diameter"\x3e${nls.diameterLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}" role\x3d"textbox"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawCircleLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawCircleLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createCircleInteractivelyLabel}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveCircle"\r\n          aria-label\x3d"${nls.createCircleInteractivelyLabel}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createCircleInteractivelyLabel}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"radiusDiameterLabel"\x3e${nls.radiusLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"radiusInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.radiusLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000" data-dojo-props\x3d"constraints: {min: 1}"\r\n          data-dojo-attach-point\x3d"radiusInput"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect aria-label\x3d"${nls.radiusLabel}" style\x3d"width: 100px" class\x3d"controlSpace noResize"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'distCalcControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'distCalcControl\' data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.timeLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.timeLabel}" style\x3d\'width: 100%;\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}" data-dojo-attach-point\x3d"timeInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.timeLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"timeUnitDD"\x3e\r\n                  \x3coption value\x3d"3600"\x3e${nls.hoursLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"60" selected\x3d"selected"\x3e${nls.minutesLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1"\x3e${nls.secondsLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.rateLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.rateLabel}" style\x3d\'width: 100%;\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}"\r\n                  data-dojo-attach-point\x3d"distanceInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.rateLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"distanceUnitDD"\x3e\r\n                  \x3coption value\x3d"0.3048;1"\x3e${nls.feetSecondsLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"0.3048;3600"\x3e${nls.feetHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;1"\x3e${nls.kmSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;3600"\x3e${nls.kmHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;1" selected\x3d"selected"\x3e${nls.metersSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;3600"\x3e${nls.metersHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;1"\x3e${nls.milesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;3600"\x3e${nls.milesHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;1"\x3e${nls.nauticalMilesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;3600"\x3e${nls.nauticalMilesHourLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TitlePane.html":'\x3cdiv\x3e\r\n\t\x3cdiv data-dojo-attach-event\x3d"ondijitclick:_onTitleClick, onkeydown:_onTitleKey"\r\n\t\t\tclass\x3d"dijitTitlePaneTitle" data-dojo-attach-point\x3d"titleBarNode" id\x3d"${id}_titleBarNode"\x3e\r\n\t\t\x3cdiv class\x3d"dijitTitlePaneTitleFocus" data-dojo-attach-point\x3d"focusNode"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"arrowNode" class\x3d"dijitInline dijitArrowNode" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"arrowNodeInner" class\x3d"dijitArrowNodeInner"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitTitlePaneTextNode"\x3e\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTitlePaneContentOuter" data-dojo-attach-point\x3d"hideNode" role\x3d"presentation"\x3e\r\n\t\t\x3cdiv class\x3d"dijitReset" data-dojo-attach-point\x3d"wipeNode" role\x3d"presentation"\x3e\r\n\t\t\t\x3cdiv class\x3d"dijitTitlePaneContentInner" data-dojo-attach-point\x3d"containerNode" role\x3d"region" id\x3d"${id}_pane" aria-labelledby\x3d"${id}_titleBarNode"\x3e\r\n\t\t\t\t\x3c!-- nested divs because wipeIn()/wipeOut() doesn\'t work right on node w/padding etc.  Put padding on inner div. --\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/templates/TabEllipse.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"ellipseContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.ellipseTypeLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.ellipseTypeLabel}" style\x3d"width: 100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"ellipseType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"semi"\x3e${nls.ellipseSemiLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"full"\x3e${nls.ellipseFullLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawEllipseLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawEllipseLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createEllipseInteractively}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveEllipse" aria-label\x3d"${nls.createEllipseInteractively}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createEllipseInteractively}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cfieldset\x3e\r\n      \x3clegend\x3e${nls.axisLabel}\x3c/legend\x3e\r\n      \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"majorAxisInputDiv"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"majorAxisLabel"\x3e${nls.majorRadiusLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cinput aria-label\x3d"${nls.majorRadiusLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d\'true\' ,\r\n            value\x3d\'100\' , data-dojo-props\x3d"constraints:{min:1}" data-dojo-attach-point\x3d"majorAxisInput"\r\n            style\x3d"width: 100%;" /\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"minorAxisInputDiv"\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"minorAxisLabel"\x3e${nls.minorRadiusLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cinput aria-label\x3d"${nls.minorRadiusLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d\'true\' ,\r\n            value\x3d\'50\' , data-dojo-props\x3d"constraints:{min:1}" data-dojo-attach-point\x3d"minorAxisInput"\r\n            style\x3d"width: 100%;" /\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3clabel\x3e${nls.unitLabel}\x3c/label\x3e\r\n        \x3cdiv class\x3d"controlItem"\x3e\r\n          \x3cselect aria-label\x3d"${nls.unitLabel}" style\x3d"width: 100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n            id\x3d"lengthUnitDD" data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n            \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n            \x3coption value\x3d"kilometers" selected\x3d"selected"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n            \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n            \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n            \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n            \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n          \x3c/select\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/fieldset\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.orientationLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"angleInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.orientationLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" style\x3d"width: 100%;"\r\n          required\x3d\'true\' , value\x3d\'0\' , data-dojo-props\x3d"constraints:{min:0, max:360}"\r\n          data-dojo-attach-point\x3d"angleInput" /\x3e\r\n        \x3cselect aria-label\x3d"${nls.orientationLabel}" style\x3d"width: 100px" class\x3d"controlSpace"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" id\x3d"angleUnitDD" data-dojo-attach-point\x3d"angleUnitDD"\x3e\r\n          \x3coption value\x3d"degrees"\x3e${nls.degreesLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"mils"\x3e${nls.milsLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel class\x3d"warning"\x3e${nls.warningMessage}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/templates/TabRange.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"rangeContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.lineTypeLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.lineTypeLabel}" data-dojo-attach-point\x3d"rangeType" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption selected\x3d"selected" value\x3d"Interactive"\x3e${nls.interactiveLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Fixed"\x3e${nls.fixedLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Origin"\x3e${nls.originLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Cumulative"\x3e${nls.cumulativeLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d\'rangeCenterLabel\'\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" placeholder\x3d"${nls.startPointPlaceHolderLabel}"\r\n          data-dojo-attach-point\x3d"rangeCenter"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.addPointLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.addPointLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"numRingsContainer"\x3e\r\n      \x3clabel\x3e${nls.numberOfRingsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"numRingsDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.numberOfRingsLabel}" data-dojo-attach-point\x3d"numRingsInput" type\x3d"text"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" name\x3d"numRings" required\x3d"true" , value\x3d"5"\r\n          data-dojo-props\x3d"constraints:{min:1, max: 100, places: 0}" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"distancebetweenRingsContainer"\x3e\r\n      \x3clabel\x3e${nls.distanceBetweenRingsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"ringIntervalDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.distanceBetweenRingsLabel}" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"true" value\x3d"1000"\r\n          data-dojo-props\x3d"constraints:{places: 2}, invalidMessage: \'${nls.ringsDecimalErrorMessage}\'"\r\n          data-dojo-attach-point\x3d"ringIntervalInput" /\x3e\r\n        \x3cselect aria-label\x3d"${nls.distanceBetweenRingsLabel}" data-dojo-attach-point\x3d"ringIntervalUnitsDD"\r\n          style\x3d"width: 100px;" class\x3d"controlSpace noResize" data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"distanceUnitsContainer"\x3e\r\n      \x3clabel\x3e${nls.distanceUnitsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.distanceUnitsLabel}" data-dojo-attach-point\x3d"distanceUnitsDD" style\x3d"width: 100%;"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup controlGroupHidden" data-dojo-attach-point\x3d"distanceTableContainer"\x3e\r\n      \x3cdiv class\x3d"add-with-icon" data-dojo-attach-point\x3d"btnAddDistance" tabindex\x3d"0" role\x3d"button"\r\n        aria-label\x3d"${nls.distancesLabel}"\x3e\r\n        \x3cspan class\x3d"jimu-icon jimu-icon-add" data-dojo-attach-point\x3d"btnAirframeIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"add-label"\x3e${nls.distancesLabel}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"distanceTable" style\x3d"width: 100%;"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d"numRadialsContainer"\x3e\r\n      \x3clabel\x3e${nls.numberOfRadialsLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"numRadialsInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.numberOfRadialsLabel}" data-dojo-type\x3d"dijit/form/NumberTextBox" required\x3d"false"\r\n          value\x3d"3" data-dojo-props\x3d"constraints:{min: 0, max: 360, places: 0}" style\x3d"width: 100%;"\r\n          data-dojo-attach-point\x3d"numRadialsInput" /\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer" data-dojo-attach-point\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/DistanceAndDirection/Widget.html":'\x3cdiv\x3e\r\n\r\n  \x3cdiv id\x3d"DDTabContainer" class\x3d"tabsContainer" data-dojo-attach-point\x3d"DDTabContainer"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"lineTabNode"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"circleTabNode"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"ellipseTabNode"\x3e\x3c/div\x3e\r\n\r\n  \x3cdiv data-dojo-attach-point\x3d"rangeTabNode"\x3e\x3c/div\x3e\r\n  \r\n\x3c/div\x3e\r\n',
"url:widgets/DistanceAndDirection/css/style.css":'.jimu-widget-DistanceAndDirection .jimu-state-active {background-color: #c0c0c0 !important;}.jimu-widget-DistanceAndDirection .tabsContainer {border: 1px solid #838383;}.jimu-widget-DistanceAndDirection .selectInput {width: 119px;}.jimu-widget-DistanceAndDirection .coordInput {width: 225px; height: 32px;}.jimu-widget-DistanceAndDirection .dijitTitlePaneContentOuter {background-color: transparent;}.jimu-widget-DistanceAndDirection .dijitTextBox .dijitInputInner {height: 20px; text-align: right;}.jimu-widget-DistanceAndDirection .dijitTextBox {width: 100%;}.jimu-widget-DistanceAndDirection .tabPanel fieldset {border: 1px solid #ccc; padding: 6px; margin-top: 10px;}.jimu-widget-DistanceAndDirection .tabPanel fieldset\x3ediv {margin: 3px;}.jimu-widget-DistanceAndDirection .tabPanel fieldset\x3ediv\x3elabel {width: 50px; display: inline-block;}.jimu-widget-DistanceAndDirection .controls {display: inline-block; width: 100%; padding: 0 5px;}.jimu-widget-DistanceAndDirection .buttonContainer {width: 100%; text-align: center; margin-top: 20px; border-top: 1px solid #ccc; padding-top: 20px;}.jimu-widget-DistanceAndDirection .controlItem {display: flex;}.jimu-widget-DistanceAndDirection .controlGroup {margin-top: 13px;}.jimu-widget-DistanceAndDirection .controlGroupHidden {display: none;}.jimu-widget-DistanceAndDirection .controlGroup .warning {color: #f00; font-weight: bold; width: 100%; display: inline-block;}.jimu-widget-DistanceAndDirection .controlGroup .controlGroupChild {margin-top: 6px;}.jimu-widget-DistanceAndDirection .controlGroup .splitRight {position: absolute; right: 25px;}.jimu-widget-DistanceAndDirection .controlGroup\x3elabel {width: 100px;}.jimu-widget-DistanceAndDirection .controlSpace {margin-left: 6px;}.jimu-widget-DistanceAndDirection .noResize .dijitSelectLabel,.jimu-widget-DistanceAndDirection .noResize .dijitTextBox .dijitInputInner,.jimu-widget-DistanceAndDirection .noResize.dijitValidationTextBox .dijitValidationContainer {text-overflow: ellipsis; overflow: hidden; width: 58px; text-align: left;}.jimu-widget-DistanceAndDirection .label {font-size: 12px; margin: auto 5px; cursor: default;}.jimu-widget-DistanceAndDirection .numberTextBox {width: 98%; height: 25px; margin-bottom: 2px; border: none;}.jimu-widget-DistanceAndDirection .add-with-icon {display: inline-block; height: 32px; color: #838383; padding-right: 5px;}.jimu-widget-DistanceAndDirection .drawPointBtn {background: url(./images/draw_black.png); background-repeat: no-repeat; background-color: transparent; width: 12px; height: 16px; margin-top: 2px; margin-left: 2px;}.jimu-widget-DistanceAndDirection .drawPointBtn:hover {background: url(./images/draw_black_hover.png); background-repeat: no-repeat; background-color: transparent;}.jimu-widget-DistanceAndDirection .drawPointBtn-active {background: url(./images/draw_black_hover.png); background-repeat: no-repeat; background-color: transparent;}.jimu-widget-DistanceAndDirection .settingBtn {background: url(./images/settings_black.png); background-repeat: no-repeat; background-color: transparent; width: 15px; height: 15px; margin-left: 2px; margin-top: 2px;}@media screen and (min-color-index: 0) and (-webkit-min-device-pixel-ratio: 0) {@media {.jimu-widget-DistanceAndDirection .settingBtn .safariOnly {margin-bottom: 15px;}}}@media not all and (min-resolution: 0.001dpcm) {@supports (-webkit-appearance: none) and (stroke-color: transparent) {.jimu-widget-DistanceAndDirection .settingBtn .safariOnly {margin-bottom: 15px;}}}.jimu-widget-DistanceAndDirection .settingBtn:hover {background: url("./images/settings_black_hover.png");}.jimu-widget-DistanceAndDirection .add-with-icon .draw .hidden {display: none;}.jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td {border-bottom: 0px; width: 24%;}.jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td.jimu-state-active {border: 1px solid #24b5cc; background-color: transparent !important;}.jimu-widget-DistanceAndDirection .controlItem .paddedLeft {padding: 5px 0px 0px 7px;}.jimu-widget-DistanceAndDirection .disabledLabel {color: #c0c0c0 !important;}.jimu-widget-DistanceAndDirection .jimu-simple-table .head-section {background-color: rgba(255, 255, 255, 0.1); border: 1px solid #eef2f5;}.jimu-widget-DistanceAndDirection .jimu-simple-table .simple-table-title {color: #000;}.DartTheme .jimu-widget-DistanceAndDirection .dijitSelectDisabled,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled .dijitInputContainer,.DartTheme .jimu-widget-DistanceAndDirection .dijitTextBoxDisabled {background-color: #4c4c4c;}.DartTheme .jimu-widget-DistanceAndDirection .jimu-state-active {background-color: #3c2d2d !important;}.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitleOpen,.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitleFixedOpen {background-color: #272727;}.DartTheme .jimu-widget-DistanceAndDirection .dijitTitlePaneTitle {background-color: #272727; background-image: linear-gradient(rgb(103, 103, 103) 0%, rgba(255, 255, 255, 0) 100%);}.DartTheme .jimu-widget-DistanceAndDirection .controlGroup .warning {font-weight: normal;}.DartTheme .jimu-widget-DistanceAndDirection .jimu-tab3 .tab-item-td.jimu-state-active {font-weight: normal;}.DartTheme .jimu-widget-DistanceAndDirection .disabledLabel {color: #c0c0c0 !important;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipContainer {background-color: #4c4c4c; background-image: -webkit-linear-gradient(bottom, rgb(76, 76, 76) 0px, #4c4c4c 10px); border: 1px solid #ffffff; color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .jimu-widget-subtitle {color: #ffffff;}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitTooltipConnector {background-image: url("./images/tooltip.png");}.claro .dartThemeClaroDijitTooltipContainerOverride .dijitDialogPaneContent {background-color: #222; border: 0px solid #9a9a9a; color: #fff;}.btnContainer {text-align: right; margin-top: 6px;}.jimu-rtl .btnContainer {text-align: left;}.settingsContainer {margin-top: 6px;}.controlContainer {margin-top: 6px;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn {background: url("./images/draw_white.png"); background-repeat: no-repeat; background-color: transparent; width: 12px; height: 16px;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn:hover {background: url("./images/draw_white_hover.png"); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .drawPointBtn-active {background: url("./images/draw_white_hover.png"); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .settingBtn {background: url(./images/settings_white.png); background-repeat: no-repeat; background-color: transparent;}.DartTheme .jimu-widget-DistanceAndDirection .settingBtn:hover {background: url("./images/settings_white_hover.png");}.DartTheme .jimu-widget-DistanceAndDirection .disabledLabel {color: #7b7b7b !important;}.DartTheme .jimu-simple-table .simple-table-row .editable-div,.jimu-simple-table .simple-table-row .normal-text-div {color: #ffffff !important;}.DartTheme .jimu-simple-table .simple-table-row .editable-input {color: #000000 !important; background-color: rgba(255, 255, 255, 0.1);}.jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 1px solid #ccc !important; border-right: 0px solid #fff !important; border-left: 0px solid #fff !important; border-top: 0px solid #fff !important; background-color: transparent !important; font-size: 12px;}.formatInput {width: 200px; height: 40px; opacity: 0.99; background: #ffffff; border: 1px solid #999999; color: #000000; padding: 0 4px 0 4px;}.selectFormat {width: 160px; height: 40px !important; opacity: 0.99; background: #ffffff !important; border: 1px solid #999999 !important; color: #000000; padding: 0 4px 0 4px; margin: 0px 2px 3px 2px;}.selectFormat .dijitSelectLabel {text-overflow: ellipsis; overflow: hidden; width: 100px; text-align: left; padding-top: 8px;}.formatText {font-size: 12px; letter-spacing: 0.39px; line-height: 19px; color: #000000; padding: 0 3px 0 3px;}.jimu-widget-DistanceAndDirection .drawPointBtn:focus {outline: 2px solid #24b5cc !important;}.esriCTDropdownObj:focus {outline: 2px solid #24b5cc !important;}.esriCTCheckboxObj:focus {outline: 2px solid #24b5cc !important;}.esriCTButtonObj:focus {outline: 2px solid #24b5cc !important;}.esriCTInputObj:focus {outline: 2px solid #24b5cc !important;}.jimu-widget-DistanceAndDirection .settingBtn:focus {outline: 2px solid #24b5cc !important;}',
"*now":function(q){q(['dojo/i18n!*preload*widgets/DistanceAndDirection/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/array dojo/aspect dojo/query dojo/topic dojo/dom-attr dijit/_WidgetsInTemplateMixin dijit/registry jimu/BaseWidget jimu/dijit/TabContainer3 jimu/utils ./views/TabLine ./views/TabCircle ./views/TabEllipse ./views/TabRange dojo/_base/lang".split(" "),function(q,b,p,g,a,e,c,n,v,m,h,k,d,r,y,l){return q([v,c],{baseClass:"jimu-widget-DistanceAndDirection",postCreate:function(){q.safeMixin(this.nls,window.jimuNls);this.config.feedback||(this.config.feedback={});this.config.feedback.lineSymbol.showTab&&
(this.lineTab=new k({map:this.map,appConfig:this.appConfig,lineSymbol:this.config.feedback.lineSymbol||{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25},pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,
yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.lineTabNode));this.config.feedback.circleSymbol.showTab&&(this.circleTab=new d({map:this.map,appConfig:this.appConfig,circleSymbol:this.config.feedback.circleSymbol||{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},pointSymbol:this.config.feedback.pointSymbol||{color:[255,
255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.circleTabNode));this.config.feedback.ellipseSymbol.showTab&&(this.ellipseTab=new r({map:this.map,
appConfig:this.appConfig,ellipseSymbol:this.config.feedback.ellipseSymbol||{type:"esriSFS",style:"esriSFSNull",color:[255,0,0,125],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,0,255],verticalAlignment:"middle",
horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:12,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},this.ellipseTabNode));this.config.feedback.rangeRingSymbol.showTab&&(this.rangeTab=new y({map:this.map,appConfig:this.appConfig,pointSymbol:this.config.feedback.pointSymbol||{color:[255,255,255,64],size:12,type:"esriSMS",style:"esriSMSCircle",outline:{color:[0,0,0,255],width:1,type:"esriSLS",style:"esriSLSSolid"}},circleSymbol:{type:"esriSFS",
style:"esriSFSNull",color:[255,0,0,0],outline:{color:[255,50,50,255],width:1.25,type:"esriSLS",style:"esriSLSSolid"}},lineSymbol:this.config.feedback.rangeRingSymbol||{type:"esriSLS",style:"esriSLSSolid",color:[255,50,50,255],width:1.25},labelSymbol:this.config.feedback.labelSymbol||{type:"esriTS",color:[0,0,255,255],verticalAlignment:"middle",horizontalAlignment:"center",xoffset:0,yoffset:0,kerning:!0,font:{family:"arial",size:6,style:"normal",weight:"normal",decoration:"none"}},nls:this.nls,domNodeObj:this.domNode},
this.RangeTabContainer));var b=[];this.config.feedback.lineSymbol.showTab&&b.push({title:this.nls.tabLineTitle,content:this.lineTab});this.config.feedback.circleSymbol.showTab&&b.push({title:this.nls.tabCircleTitle,content:this.circleTab});this.config.feedback.ellipseSymbol.showTab&&b.push({title:this.nls.tabEllipseTitle,content:this.ellipseTab});this.config.feedback.rangeRingSymbol.showTab&&b.push({title:this.nls.tabRingsTitle,content:this.rangeTab});this.tab=new m({tabs:b},this.DDTabContainer);
b=n.byId("DDTabContainer");p.after(b,"selectTab",l.hitch(this,function(){a.publish("TAB_SWITCHED");this._setAccessibility()}));this.setTabTitle(b.domNode)},startup:function(){this._setTheme();setTimeout(l.hitch(this,function(){this.getParent().domNode.scrollTop=0;this._setAccessibility()}),100)},setTabTitle:function(a){a=g(".tab-item-div",a);b.forEach(a,function(a){e.set(a,"title",a.innerHTML)})},onClose:function(){a.publish("DD-WIDGET-CLOSED")},_removeStyleFile:function(a,b){var c=null,c="js"===
b?"src":"css"===b?"href":"none";b=document.getElementsByTagName("js"===b?"script":"css"===b?"link":"none");for(var d=b.length;0<=d;d--)b[d]&&null!==b[d].getAttribute(c)&&-1!==b[d].getAttribute(c).indexOf(a)&&b[d].parentNode.removeChild(b[d])},_setTheme:function(){"DartTheme"===this.appConfig.theme.name?h.loadStyleLink("dartOverrideCSS",this.folderUrl+"css/dartTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dartTheme.css","css");"DashboardTheme"===this.appConfig.theme.name&&"default"===
this.appConfig.theme.styles[0]?h.loadStyleLink("darkDashboardOverrideCSS",this.folderUrl+"css/dashboardTheme.css",null):this._removeStyleFile(this.folderUrl+"css/dashboardTheme.css","css");"LaunchpadTheme"===this.appConfig.theme.name?h.loadStyleLink("launchpadOverrideCSS",this.folderUrl+"css/launchpadTheme.css",null):this._removeStyleFile(this.folderUrl+"css/launchpadTheme.css","css")},_setAccessibility:function(){this._setFocus()},_setFocus:function(){this._setFirstFocusNode();this._setLastFocusNode();
this._focusFirstNodeOfWidgetOrTab()},_setFirstFocusNode:function(){var a=this.tab.getSelectedTitle();switch(a){case this.nls.tabLineTitle:this._setSelectedTabAsFirstFocusNode(a);break;case this.nls.tabCircleTitle:this._setSelectedTabAsFirstFocusNode(a);break;case this.nls.tabEllipseTitle:this._setSelectedTabAsFirstFocusNode(a);break;case this.nls.tabRingsTitle:this._setSelectedTabAsFirstFocusNode(a)}},_setLastFocusNode:function(){switch(this.tab.getSelectedTitle()){case this.nls.tabLineTitle:this.lineTab.setLastFocusNode();
break;case this.nls.tabCircleTitle:this.circleTab.setLastFocusNode();break;case this.nls.tabEllipseTitle:this.ellipseTab.setLastFocusNode();break;case this.nls.tabRingsTitle:this.rangeTab.setLastFocusNode()}},_focusFirstNodeOfWidgetOrTab:function(){switch(this.tab.getSelectedTitle()){case this.nls.tabLineTitle:this.lineTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabCircleTitle:this.circleTab.focusFirstNodeOfSelectedTab();break;case this.nls.tabEllipseTitle:this.ellipseTab.focusFirstNodeOfSelectedTab();
break;case this.nls.tabRingsTitle:this.rangeTab.focusFirstNodeOfSelectedTab()}},_setSelectedTabAsFirstFocusNode:function(a){if(this.tab&&this.tab.controlNode){var c=g(".tab-item-td",this.tab.controlNode);b.forEach(c,l.hitch(this,function(b){b&&b.children&&b.children[0]&&b.children[0].innerHTML===a&&h.initFirstFocusNode(this.domNode,b)}))}}})});