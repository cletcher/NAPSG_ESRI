// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"url:widgets/DistanceAndDirection/templates/TabCircle.html":'\x3cdiv class\x3d"tabPanel" data-dojo-attach-point\x3d"circleContainer"\x3e\r\n  \x3cdiv class\x3d"controls"\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel\x3e${nls.circleTitle}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cselect aria-label\x3d"${nls.circleTitle}" style\x3d"width:100%;" data-dojo-type\x3d"jimu/dijit/formSelect"\r\n          data-dojo-attach-point\x3d"creationType" class\x3d"esriCTDropdownObj"\x3e\r\n          \x3coption value\x3d"Radius" selected\x3d"selected"\x3e${nls.radiusLabel}\x3c/option\x3e\r\n          \x3coption value\x3d"Diameter"\x3e${nls.diameterLabel}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"coordInputLabel"\x3e${nls.centerPointLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem"\x3e\r\n        \x3cdiv class\x3d"jimu-input coordInput" data-dojo-attach-point\x3d"startPointCoords"\r\n          placeholder\x3d"${nls.startPointPlaceHolderLabel}" role\x3d"textbox"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlItem paddedLeft"\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cspan title\x3d"${nls.formatInputLabel}" class\x3d"jimu-icon settingBtn safariOnly"\r\n              data-dojo-attach-point\x3d"coordinateFormatButton" tabindex\x3d"0" role\x3d"button"\r\n              aria-label\x3d"${nls.formatInputLabel}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d\'add-with-icon\'\x3e\r\n            \x3cdiv title\x3d"${nls.drawCircleLabel}" class\x3d"drawPointBtn" data-dojo-attach-point\x3d"addPointBtn" tabindex\x3d"0"\r\n              role\x3d"button" aria-label\x3d"${nls.drawCircleLabel}"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"controlGroup"\x3e\r\n        \x3cinput aria-label\x3d"${nls.createCircleInteractivelyLabel}" class\x3d"interactive-checkbox esriCTCheckboxObj"\r\n          type\x3d"checkbox" data-dojo-attach-point\x3d"interactiveCircle"\r\n          aria-label\x3d"${nls.createCircleInteractivelyLabel}" /\x3e\r\n        \x3clabel data-dojo-attach-point\x3d"interactiveLabel"\x3e${nls.createCircleInteractivelyLabel}\x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup"\x3e\r\n      \x3clabel data-dojo-attach-point\x3d"radiusDiameterLabel"\x3e${nls.radiusLabel}\x3c/label\x3e\r\n      \x3cdiv class\x3d"controlItem" data-dojo-attach-point\x3d"radiusInputDiv"\x3e\r\n        \x3cinput aria-label\x3d"${nls.radiusLabel}" style\x3d"width: calc(100% - 108px);"\r\n          data-dojo-type\x3d\'dijit/form/NumberTextBox\' required\x3d"true" value\x3d"1000" data-dojo-props\x3d"constraints: {min: 1}"\r\n          data-dojo-attach-point\x3d"radiusInput"\x3e\r\n        \x3c/input\x3e\r\n        \x3cselect aria-label\x3d"${nls.radiusLabel}" style\x3d"width: 100px" class\x3d"controlSpace noResize"\r\n          data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"lengthUnitDD"\x3e\r\n          \x3coption value\x3d"feet"\x3e${nls.units.feet}\x3c/option\x3e\r\n          \x3coption value\x3d"kilometers"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n          \x3coption value\x3d"miles"\x3e${nls.units.miles}\x3c/option\x3e\r\n          \x3coption value\x3d"meters" selected\x3d"selected"\x3e${nls.units.meters}\x3c/option\x3e\r\n          \x3coption value\x3d"nautical-miles"\x3e${nls.units.nauticalMiles}\x3c/option\x3e\r\n          \x3coption value\x3d"yards"\x3e${nls.units.yards}\x3c/option\x3e\r\n        \x3c/select\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"controlGroup" data-dojo-attach-point\x3d\'distCalcControlDiv\'\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d\'distCalcControl\' data-dojo-type\x3d"dijit/TitlePane" data-dojo-props\x3d"open: false"\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.timeLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.timeLabel}" style\x3d\'width: 100%;\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}" data-dojo-attach-point\x3d"timeInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.timeLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"timeUnitDD"\x3e\r\n                  \x3coption value\x3d"3600"\x3e${nls.hoursLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"60" selected\x3d"selected"\x3e${nls.minutesLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1"\x3e${nls.secondsLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"controlGroup"\x3e\r\n          \x3clabel\x3e${nls.rateLabel}\r\n            \x3clabel\x3e\r\n              \x3cdiv class\x3d"controlItem"\x3e\r\n                \x3cinput aria-label\x3d"${nls.rateLabel}" style\x3d\'width: 100%;\' data-dojo-type\x3d\'dijit/form/NumberTextBox\'\r\n                  required\x3d"true" value\x3d"1" data-dojo-props\x3d"constraints: {min: 1}"\r\n                  data-dojo-attach-point\x3d"distanceInput"\x3e\r\n                \x3c/input\x3e\r\n                \x3cselect aria-label\x3d"${nls.rateLabel}" class\x3d"controlSpace noResize"\r\n                  data-dojo-type\x3d"jimu/dijit/formSelect" data-dojo-attach-point\x3d"distanceUnitDD"\x3e\r\n                  \x3coption value\x3d"0.3048;1"\x3e${nls.feetSecondsLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"0.3048;3600"\x3e${nls.feetHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;1"\x3e${nls.kmSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1000;3600"\x3e${nls.kmHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;1" selected\x3d"selected"\x3e${nls.metersSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1;3600"\x3e${nls.metersHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;1"\x3e${nls.milesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1609.344;3600"\x3e${nls.milesHourLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;1"\x3e${nls.nauticalMilesSecondLabel}\x3c/option\x3e\r\n                  \x3coption value\x3d"1852;3600"\x3e${nls.nauticalMilesHourLabel}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n              \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"buttonContainer"\x3e\r\n      \x3cdiv class\x3d\'jimu-btn jimu-state-disabled\' data-dojo-attach-point\x3d\'okButton\' style\x3d"width: 49%;"\r\n        data-dojo-attach-event\x3d"onclick: okButtonClicked" aria-label\x3d"${nls.common.ok}" role\x3d"button"\x3e${nls.common.ok}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d\'jimu-btn\' tabindex\x3d"0" role\x3d"button" aria-label\x3d"${nls.clearGraphicsLabel}" style\x3d"width: 49%;"\r\n        data-dojo-attach-point\x3d\'clearGraphicsButton\'\x3e${nls.clearGraphicsLabel}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/kernel dojo/on dojo/topic dojo/dom-attr dojo/dom-class dojo/string dojo/mouse dojo/number dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/TooltipDialog dijit/popup jimu/dijit/Message jimu/LayerInfos/LayerInfos esri/layers/FeatureLayer esri/symbols/SimpleFillSymbol esri/symbols/SimpleMarkerSymbol esri/symbols/TextSymbol esri/graphic esri/geometry/webMercatorUtils esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Point esri/geometry/Circle esri/tasks/FeatureSet esri/layers/LabelClass ../models/CircleFeedback ../views/CoordinateInput ../views/EditOutputCoordinate dojo/text!../templates/TabCircle.html jimu/utils dijit/focus dojo/_base/event dojo/aspect dijit/form/NumberTextBox jimu/dijit/formSelect jimu/dijit/CheckBox dijit/TitlePane".split(" "),
function(p,b,u,c,m,l,k,v,w,q,e,x,y,z,A,g,r,t,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,n,f,h,R){return p([x,y,z],{templateString:Q,baseClass:"jimu-widget-TabCircle",_restrictFocusOnAddCenterPointBtn:!1,_centerPointInputKeyPressed:!1,constructor:function(a){p.safeMixin(this,a)},postCreate:function(){this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=this.useCalculatedDistance=!1;this.currentLengthUnit=this.lengthUnitDD.get("value");this._circleSym=new C(this.circleSymbol);this._ptSym=new D(this.pointSymbol);
this._labelSym=new E(this.labelSymbol);this.map.addLayer(this.getLayer());if(this._gl.loaded){var a=t.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");a.showLabels();a.enablePopup()}else this._gl.on("load",b.hitch(this,function(){var a=t.getInstanceSync().getLayerInfoById("Distance \x26 Direction - Circle Graphics");a.showLabels();a.enablePopup()}));this.coordTool=new O({appConfig:this.appConfig,nls:this.nls,"aria-label":this.nls.centerPointLabel},this.startPointCoords);
this.coordTool.inputCoordinate.formatType="DD";this.coordinateFormat=new A({content:new P({nls:this.nls}),style:"width: 400px"});R.after(this.coordinateFormat,"onClose",b.hitch(this,function(){f.focus(this.coordinateFormatButton);if(this._restrictFocusOnAddCenterPointBtn){var a=this.coordTool.getValue();if(""===a||null===a||void 0===a)this._restrictFocusOnAddCenterPointBtn=!1}}));"DartTheme"===this.appConfig.theme.name&&k.add(this.coordinateFormat.domNode,"dartThemeClaroDijitTooltipContainerOverride");
this.dt=new N({map:this.map,coordTool:this.coordTool.inputCoordinate.util,nls:this.nls});this.dt.setFillSymbol(this._circleSym);this.syncEvents();this.checkValidInputs();this.radiusInput.invalidMessage=this.nls.numericInvalidMessage;this.radiusInput.rangeMessage=this.nls.rangeErrorMessage;this.timeInput.invalidMessage=this.nls.numericInvalidMessage;this.timeInput.rangeMessage=this.nls.invalidTimeMessage;this.distanceInput.invalidMessage=this.nls.numericInvalidMessage;this.distanceInput.rangeMessage=
this.nls.invalidDistanceMessage;this.distCalcControl.set("title",this.nls.distanceCalculatorLabel)},getLayer:function(){if(!this._gl){var a=new M({labelExpressionInfo:{value:"{Label}"}});a.symbol=this._labelSym;var d={layerDefinition:{id:"circleLayer",geometryType:"esriGeometryPolygon",objectIdField:"ObjectID",fields:[{name:"ObjectID",alias:"ObjectID",type:"esriFieldTypeOID"},{name:"Label",type:"esriFieldTypeString",alias:"Label"}]},featureSet:new L};this._gl=new B(d,{id:"Distance \x26 Direction - Circle Graphics",
showLabels:!0,outFields:["*"]});this._gl.setLabelingInfo([a]);return this._gl}},syncEvents:function(){m.subscribe("TAB_SWITCHED",b.hitch(this,this.tabSwitched));m.subscribe("DD-WIDGET-CLOSED",b.hitch(this,this._closeDijit));this.distCalcControl.watch("open",b.hitch(this,this.distCalcDidExpand));this.dt.watch("length",b.hitch(this,function(a,d,b){this.circleLengthDidChange(b)}));this.dt.watch("startPoint",b.hitch(this,function(a,d,b){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",b);this.coordTool.inputCoordinate.set("inputType",
this.coordTool.inputCoordinate.formatType);this.dt.addStartGraphic(b,this._ptSym)}));this.dt.watch("endPoint",b.hitch(this,function(a,d,b){this.coordTool.inputCoordinate.set("coordinateEsriGeometry",b)}));this.coordTool.inputCoordinate.watch("outputString",b.hitch(this,function(a,d,b){this.coordTool.manualInput||(this.coordTool.set("value",b),this._restrictFocusOnAddCenterPointBtn?this._restrictFocusOnAddCenterPointBtn=!1:this._centerPointInputKeyPressed?this._centerPointInputKeyPressed=!1:f.focus(this.addPointBtn))}));
this.dt.on("draw-complete",b.hitch(this,this.feedbackDidComplete));this.own(c(this.coordTool,"keydown",b.hitch(this,this.coordToolKeyWasPressed)),this.lengthUnitDD.on("change",b.hitch(this,this.lengthUnitDDDidChange)),this.creationType.on("change",b.hitch(this,this.creationTypeDidChange)),this.distanceUnitDD.on("change",b.hitch(this,this.distanceInputDidChange)),this.timeUnitDD.on("change",b.hitch(this,this.timeInputDidChange)),c(this.coordinateFormatButton,"click",b.hitch(this,this.coordinateFormatButtonWasClicked)),
c(this.coordinateFormatButton,"keydown",b.hitch(this,function(a){if(a.keyCode===e.ENTER||a.keyCode===e.SPACE)h.stop(a),this.coordinateFormatButtonWasClicked()})),c(this.addPointBtn,"click",b.hitch(this,this.pointButtonWasClicked)),c(this.addPointBtn,"keydown",b.hitch(this,function(a){if(a.keyCode===e.ENTER||a.keyCode===e.SPACE)h.stop(a),this.pointButtonWasClicked()})),c(this.timeInput,"change",b.hitch(this,this.timeInputDidChange)),c(this.distanceInput,"change",b.hitch(this,this.distanceInputDidChange)),
c(this.distanceInput,"keyup",b.hitch(this,this.distanceInputKeyWasPressed)),c(this.clearGraphicsButton,"click",b.hitch(this,this.clearGraphics)),c(this.clearGraphicsButton,"keydown",b.hitch(this,function(a){if(a.keyCode===e.ENTER||a.keyCode===e.SPACE)h.stop(a),this.clearGraphics()})),c(this.interactiveCircle,"change",b.hitch(this,this.interactiveCheckBoxChanged)),c(this.interactiveCircle,"keydown",b.hitch(this,function(a){a.keyCode===e.ENTER&&(this.interactiveCircle.checked=this.interactiveCircle.checked?
!1:!0,this.interactiveCheckBoxChanged())})),c(this.coordinateFormat.content.applyButton,"click",b.hitch(this,function(){this._restrictFocusOnAddCenterPointBtn=!0;var a=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],d=a.defaultFormat,b=this.coordinateFormat.content.frmtSelect.get("value");a.useCustom&&(d=a.customFormat);this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",d);
this.coordTool.inputCoordinate.set("formatType",b);this.setCoordLabel(b);g.close(this.coordinateFormat);f.focus(this.coordinateFormatButton)})),c(this.coordinateFormat.content.applyButton,"keydown",b.hitch(this,function(a){if(a.keyCode===e.ENTER||a.keyCode===e.SPACE){h.stop(a);this._restrictFocusOnAddCenterPointBtn=!0;var d=this.coordinateFormat.content.formats[this.coordinateFormat.content.ct],b=d.defaultFormat,c=this.coordinateFormat.content.frmtSelect.get("value");d.useCustom&&(b=d.customFormat);
this.coordTool.inputCoordinate.set("formatPrefix",this.coordinateFormat.content.addSignChkBox.checked);this.coordTool.inputCoordinate.set("formatString",b);this.coordTool.inputCoordinate.set("formatType",c);this.setCoordLabel(c);g.close(this.coordinateFormat);f.focus(this.coordinateFormatButton)}a.keyCode===e.ESCAPE&&(h.stop(a),g.close(this.coordinateFormat),f.focus(this.coordinateFormatButton))})),c(this.coordinateFormat.content.cancelButton,"click",b.hitch(this,function(){g.close(this.coordinateFormat)})),
c(this.coordinateFormat.content.cancelButton,"keydown",b.hitch(this,function(a){if(a.keyCode===e.ENTER||a.keyCode===e.SPACE)h.stop(a),g.close(this.coordinateFormat),f.focus(this.coordinateFormatButton);a.keyCode===e.ESCAPE&&(h.stop(a),g.close(this.coordinateFormat),f.focus(this.coordinateFormatButton))})),c(this.coordinateFormat.content.frmtSelect,"keydown",b.hitch(this,function(a){a.keyCode===e.ESCAPE&&(h.stop(a),g.close(this.coordinateFormat),f.focus(this.coordinateFormatButton))})),c(this.coordinateFormat.content.frmtVal,
"keydown",b.hitch(this,function(a){a.keyCode===e.ESCAPE&&(h.stop(a),g.close(this.coordinateFormat),f.focus(this.coordinateFormatButton))})),c(this.coordinateFormat.content.addSignChkBox,"keydown",b.hitch(this,function(a){a.keyCode===e.ESCAPE&&(h.stop(a),g.close(this.coordinateFormat),f.focus(this.coordinateFormatButton));a.keyCode===e.ENTER&&(h.stop(a),this.coordinateFormat.content.addSignChkBox.checked=this.coordinateFormat.content.addSignChkBox.checked?!1:!0)})),c(this.radiusInputDiv,w.leave,b.hitch(this,
this.checkValidInputs)),c(this.okButton,"keydown",b.hitch(this,function(a){if(a.keyCode===e.ENTER||a.keyCode===e.SPACE)h.stop(a),this.okButtonClicked()})))},circleLengthDidChange:function(a){var d=q.format(a,{places:2,locale:u.locale});this.radiusInput.set("displayedValue",d);this.radiusInput.set("value",a)},interactiveCheckBoxChanged:function(){this.tabSwitched();this.interactiveCircle.checked?(this.radiusInput.set("disabled",!0),this.distCalcControl.set("open",!1),this.distCalcControl.set("open",
!1),this.distCalcControl.set("toggleable",!1)):(this.radiusInput.set("disabled",!1),this.distCalcControl.set("disabled",!1),this.distCalcControl.set("toggleable",!0));this.checkValidInputs()},coordToolKeyWasPressed:function(a){this.dt.removeStartGraphic();a.keyCode===e.ENTER&&(this._centerPointInputKeyPressed=this._restrictFocusOnAddCenterPointBtn=!0,this.coordTool.inputCoordinate.getInputType().then(b.hitch(this,function(a){"UNKNOWN"===a.inputType?(new r({message:this.nls.invalidCoordinateTypeMessage}),
this.coordTool.inputCoordinate.coordinateEsriGeometry=null):(m.publish("manual-circle-center-point-input",this.coordTool.inputCoordinate.coordinateEsriGeometry),this.setCoordLabel(a.inputType),this.coordTool.inputCoordinate.set("formatString",this.coordinateFormat.content.formats[a.inputType].defaultFormat),this.coordTool.inputCoordinate.set("formatType",a.inputType),this.dt.addStartGraphic(a.coordinateEsriGeometry,this._ptSym));this.checkValidInputs()})))},coordinateFormatButtonWasClicked:function(){this.coordinateFormat.content.set("ct",
this.coordTool.inputCoordinate.formatType);g.open({popup:this.coordinateFormat,around:this.coordinateFormatButton});f.focus(this.coordinateFormat.content.frmtSelect.focusNode)},_closeDijit:function(){this.coordinateFormat&&this.coordinateFormat.domNode.offsetParent&&g.close(this.coordinateFormat)},distCalcDidExpand:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.coordTool.inputCoordinate.isManual=!0;this.distCalcControl.get("open")?this.radiusInput.set("disabled",
!0):(this.radiusInput.set("disabled",!1),this.timeInput.set("value",1),this.distanceInput.set("value",1))},timeInputDidChange:function(){this.currentTimeInSeconds=this.timeInput.get("value")*this.timeUnitDD.get("value");this.getCalculatedDistance()},distanceInputKeyWasPressed:function(a){this.distanceInputDidChange();a.keyCode===e.ENTER&&(this.coordTool.inputCoordinate.outputString&&""!==this.coordTool.inputCoordinate.inputString?(this.removeManualGraphic(),this.setGraphic(!0),this.dt._onDoubleClickHandler()):
new r({message:this.nls.noCenterPointSetMessage}))},okButtonClicked:function(){k.contains(this.okButton,"jimu-state-disabled")||(this._restrictFocusOnAddCenterPointBtn=!0,this.removeManualGraphic(),this.setGraphic(!0))},distanceInputDidChange:function(){this.currentDistanceInMeters=this.distanceInput.get("value")*this.distanceUnitDD.value.split(";")[0]/this.distanceUnitDD.value.split(";")[1];this.getCalculatedDistance()},getCalculatedDistance:function(){if(this.currentTimeInSeconds&&0<this.currentTimeInSeconds&&
this.currentDistanceInMeters&&0<this.currentDistanceInMeters){this.calculatedRadiusInMeters=this.currentTimeInSeconds*this.currentDistanceInMeters;this.useCalculatedDistance=!0;var a=0;switch(this.currentLengthUnit){case "feet":a=3.2808399*this.calculatedRadiusInMeters;break;case "meters":a=this.calculatedRadiusInMeters;break;case "yards":a=1.0936133*this.calculatedRadiusInMeters;break;case "kilometers":a=.001*this.calculatedRadiusInMeters;break;case "miles":a=6.21371192E-4*this.calculatedRadiusInMeters;
break;case "nautical-miles":a=5.39957E-4*this.calculatedRadiusInMeters}a="Diameter"===this.creationType.get("value")?2*a:a;a=q.format(a,{places:"4"});this.radiusInput.set("value",a)}else this.calculatedRadiusInMeters=null,this.useCalculatedDistance=!0},pointButtonWasClicked:function(){k.contains(this.addPointBtn,"drawPointBtn-active")?(this.dt.deactivate(),this._setMapNavigation(!0)):(this.coordTool.manualInput=!1,m.publish("clear-points"),this._setMapNavigation(!1),this.dt.set("isDiameter","Diameter"===
this.creationType.get("value")),this.distCalcControl.get("open")?this.dt.activate("point"):this.interactiveCircle.checked?this.dt.activate("polyline"):this.dt.activate("point"));k.toggle(this.addPointBtn,"drawPointBtn-active")},lengthUnitDDDidChange:function(){this.currentLengthUnit=this.lengthUnitDD.get("value");this.dt.set("lengthUnit",this.currentLengthUnit);this.distCalcControl.get("open")&&this.distanceInputDidChange()},creationTypeDidChange:function(){var a="Diameter"===this.creationType.get("value")?
this.nls.diameterLabel:this.nls.radiusLabel;this.radiusDiameterLabel.innerHTML=n.sanitizeHTML(a);l.set(this.radiusInput,"aria-label",a);l.set(this.lengthUnitDD,"aria-label",a)},feedbackDidComplete:function(a){if(a.geometry.center){var d=a.geometry.center,b=new J(a.geometry.rings[0][0][0],a.geometry.rings[0][0][1],a.geometry.center.spatialReference);a=new H(a.geometry.center.spatialReference);a.addPath([d,b]);this.setGraphic(!1,a);f.focus(this.addPointBtn)}else k.toggle(this.addPointBtn,"drawPointBtn-active"),
this._setMapNavigation(!0),this.dt.deactivate(),this.checkValidInputs()},setCoordLabel:function(a){a=n.sanitizeHTML(v.substitute(this.nls.centerPointLabel+" (${crdType})",{crdType:a}));this.coordInputLabel.innerHTML=a;l.set(this.coordTool.textbox,"aria-label",a)},removeManualGraphic:function(){null!==this.tempGraphic&&this._gl.remove(this.tempGraphic);this.dt.removeStartGraphic()},setGraphic:function(a,d){a||k.toggle(this.addPointBtn,"drawPointBtn-active");this._setMapNavigation(!0);this.dt.deactivate();
this.dt.removeStartGraphic();a="Diameter"===this.creationType.get("value")?this.radiusInput.get("value")/2:this.radiusInput.get("value");a=this.coordTool.inputCoordinate.util.convertToMeters(a,this.lengthUnitDD.get("value"));d=this.coordTool.inputCoordinate.coordinateEsriGeometry;var b=null,b=4326===this.map.spatialReference.wkid?d:G.geographicToWebMercator(d);a=new K({center:b,radius:a,geodesic:!0,numberOfPoints:360});d=new I(this.map.spatialReference);d.addRing(a.rings[0]);a=new F(d,this._circleSym,
{Label:window.isRTL?this._getLengthAbbrevation(this.lengthUnitDD.get("value"))+" "+this.radiusInput.get("displayedValue")+" "+this.creationType.get("displayedValue"):this.creationType.get("displayedValue")+" "+this.radiusInput.get("displayedValue")+" "+this._getLengthAbbrevation(this.lengthUnitDD.get("value"))});this._gl.add(a);this._gl.refresh();this.emit("graphic_created",this.currentCircle);this.dt.set("startPoint",null)},clearGraphics:function(){this._gl&&(this._gl.clear(),this._gl.refresh(),
this.clearUI(!1));this.checkValidInputs();for(var a=0;a<this.map.graphicsLayerIds.length;a++)this.map.getLayer(this.map.graphicsLayerIds[a]).refresh()},clearUI:function(a){a||this.coordTool.clear();this.dt.set("startPoint",null);this.useCalculatedDistance=!1;this.currentCircle=null;k.remove(this.addPointBtn,"drawPointBtn-active");l.set(this.startPointCoords,"value","");this.radiusInput.set("value",1E3);this.timeInput.set("value",1);this.distanceInput.set("value",1)},setGraphicsHidden:function(){this._gl&&
this._gl.hide()},setGraphicsShown:function(){this._gl&&this._gl.show()},checkValidInputs:function(){k.add(this.okButton,"jimu-state-disabled");l.set(this.okButton,"tabindex",-1);!this.interactiveCircle.checked&&null!==this.coordTool.inputCoordinate.coordinateEsriGeometry&&this.radiusInput.isValid()&&(k.remove(this.okButton,"jimu-state-disabled"),l.set(this.okButton,"tabindex",0))},tabSwitched:function(){this.dt.deactivate();this.dt.cleanup();this.dt.disconnectOnMouseMoveHandler();this.dt.set("startPoint",
null);this._setMapNavigation(!0);this.dt.removeStartGraphic();this.addPointBtn&&k.remove(this.addPointBtn,"drawPointBtn-active");g.close(this.coordinateFormat)},_setMapNavigation:function(a){a?this.map.enableMapNavigation():(this.map.disableMapNavigation(),this.map.enableScrollWheelZoom())},_getLengthAbbrevation:function(a){var b=null;if(a)switch(a){case "feet":b=this.nls.abbrevFeetLabel;break;case "kilometers":b=this.nls.abbrevKmLabel;break;case "miles":b=this.nls.abbrevMilesLabel;break;case "meters":b=
this.nls.abbrevMetersLabel;break;case "nautical-miles":b=this.nls.abbrevNauticalMilesLabel;break;case "yards":b=this.nls.abbrevYardsLabel;break;default:b=a}return b},_getDegreeAbbreviation:function(a){var b=null;if(a)switch(a){case "degrees":b=this.nls.abbrevDegreesLabel;break;case "mils":b=this.nls.abbrevMilsLabel;break;default:b=a}return b},_getTimeAbbreviation:function(a){var b=null;if(a)switch(a){case "3600":b=this.nls.abbrevHoursLabel;break;case "60":b=this.nls.abbrevMinutesLabel;break;case "1":b=
this.nls.abbrevSecondsLabel;break;default:b=a}return b},_getRateAbbreviation:function(a){var b=null;if(a)switch(a){case "0.3048;1":b=this.nls.abbrevFeetSecondsLabel;break;case "0.3048;3600":b=this.nls.abbrevFeetHourLabel;break;case "1000;1":b=this.nls.abbrevKmSecondLabel;break;case "1000;3600":b=this.nls.abbrevKmHourLabel;break;case "1;1":b=this.nls.abbrevMetersSecondLabel;break;case "1;3600":b=this.nls.abbrevMetersHourLabel;break;case "1609.344;1":b=this.nls.abbrevMilesSecondLabel;break;case "1609.344;3600":b=
this.nls.abbrevMilesHourLabel;break;case "1852;1":b=this.nls.abbrevNauticalMilesSecondLabel;break;case "1852;3600":b=this.nls.abbrevNauticalMilesHourLabel;break;default:b=a}return b},setFirstFocusNode:function(){n.initFirstFocusNode(this.domNodeObj,this.creationType.domNode)},focusFirstNodeOfSelectedTab:function(){f.focus(this.creationType.focusNode)},setLastFocusNode:function(){n.initLastFocusNode(this.domNodeObj,this.clearGraphicsButton)}})});