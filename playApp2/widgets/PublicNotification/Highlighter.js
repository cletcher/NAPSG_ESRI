// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define("dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred esri/graphic esri/symbols/SimpleFillSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol".split(" "),function(r,t,n,p,h,q,d,k){return t([],{constructor:function(b){this._drawingChunkSize="number"===typeof b?b:100},createGraphic:function(b,c){function l(a,b){var c;a.getLayer&&(c=a.getLayer())&&(a=a.getLayer()._getSymbol(a),!a||isNaN(a.width)||isNaN(a.height)||(b=1+Math.max(a.width,a.height)));return b}var e,a,
g=null,f=10;if(b)if(b.geometry)a=b.geometry,e=a.type;else if(a=b,a.hasOwnProperty("x")&&a.hasOwnProperty("y"))e="point";else if(a.hasOwnProperty("paths"))e="polyline";else if(a.hasOwnProperty("rings"))e="polygon";else if(a.hasOwnProperty("points"))e="multipoint";else return null;else return null;switch(e){case "point":if(isNaN(a.x)||isNaN(a.y))return null;f=l(b,f);g=new h(a,new k(k.STYLE_SQUARE,f,new d(d.STYLE_SOLID,c.point.lineColor,c.point.lineWidth),c.point.fillColor));break;case "polyline":g=
new h(a,new d(d.STYLE_SOLID,c.line.lineColor,c.line.lineWidth));break;case "polygon":g=new h(a,new q(q.STYLE_SOLID,new d(d.STYLE_SOLID,c.polygon.lineColor,c.polygon.lineWidth),c.polygon.fillColor));break;case "multipoint":f=l(b,f),g=new h(a,new k(k.STYLE_SQUARE,f,new d(d.STYLE_SOLID,c.point.lineColor,c.point.lineWidth),c.point.fillColor))}return g},highlightFeatures:function(b,c,l,e,a){var g,f=new p;0<b.length?b.length<=this._drawingChunkSize?this._highlightFeatures(b,c,l,e).then(function(){f.resolve(!0)}):
(a(0),g=Math.ceil(b.length/this._drawingChunkSize),setTimeout(n.hitch(this,function(){this._highlightFeaturesContinuation(b,c,l,e,a,this._drawingChunkSize,g,0,0).then(function(){f.resolve(!0)})}),50)):f.resolve(!0);return f},_highlightFeaturesContinuation:function(b,c,l,e,a,g,f,d,h){var k,m=new p;if(h>=b.length)return m.resolve(!0),m;k=Math.min(h+g,b.length);this._highlightFeatures(b.slice(h,k),c,l,e).then(n.hitch(this,function(){++d;a(100*d/f);setTimeout(n.hitch(this,function(){this._highlightFeaturesContinuation(b,
c,l,e,a,this._drawingChunkSize,f,d,k).then(function(){m.resolve(!0)})}),10)}));return m},_highlightFeatures:function(b,c,d,e){var a=new p;r.forEach(b,function(a){c(a,d,e)},this);a.resolve(!0);return a}})});