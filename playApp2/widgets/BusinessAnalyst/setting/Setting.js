// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"esri/dijit/geoenrichment/SelectableTree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/store/util/QueryResults dojo/store/util/SimpleQueryEngine".split(" "),function(l,g,m,d,b,e){return l(d,{idProperty:"id",bindingProperty:null,autoIdentify:!0,queryEngine:e,root:null,data:null,_hash:null,_autoId:null,constructor:function(c,b){g.mixin(this,b);this.root={children:c||[]};g.mixin(this._provideBinding(this.root),{deepness:-1,selectCount:0,leafCount:0});
this._hash={};this.idProperty&&this.autoIdentify&&(this._autoId=1);this._initializeNode(this.root,0);this.data=this.root.children},_provideBinding:function(c){var b=this._getBinding(c);b||(c[this.bindingProperty]=b={});return b},_getBinding:function(c){return this.bindingProperty?c[this.bindingProperty]:c},_initializeNode:function(c,b){var a=this._provideBinding(c);a.selected=!!a.selected;c.children?(a.selectCount=0,a.leafCount=0,m.forEach(c.children,function(f){this._registerNode(f);var e=this._provideBinding(f);
e.parent=c;e.deepness=b;this._initializeNode(f,b+1);a.selectCount+=e.selectCount;a.leafCount+=e.leafCount},this),a.selectCount)?a.selectCount==a.leafCount&&(a.selected=!0):a.selected=!1:("number"!=typeof a.leafCount&&(a.leafCount=1),a.selectCount=a.selected?a.leafCount:0)},isOwned:function(c,b){return b||c!==this.root?this.get(this.getIdentity(c))===c:!0},_registerNode:function(c){this._autoId&&void 0===c[this.idProperty]&&(c[this.idProperty]=this._autoId++);this.idProperty&&(this._hash[c[this.idProperty]]=
c)},_unregisterNode:function(c){this.isOwned(c,!0)&&delete this._hash[c[this.idProperty]]},clear:function(){this.root.children.length&&(m.forEach(this.root.children,function(c){this._unbindNode(c)},this),this.data=this.root.children=[])},destroy:function(){this.clear()},_unbindNode:function(c){c.children&&m.forEach(c.children,function(a){delete this._getBinding(a).parent;this._unbindNode(a)},this);this._unregisterNode(c);var b=this._getBinding(c);b.parent&&(this._incrementCounts(b.parent,-b.selectCount,
-b.leafCount),delete b.parent);b!==c&&delete c[this.bindingProperty]},removeNodes:function(c,b){m.forEach(c&&c.slice(),function(a){if(this.isOwned(a,!0)){var c=this._getBinding(a).parent,b=m.indexOf(c.children,a);0<=b&&c.children.splice(b,1);this._unbindNode(a)}},this);b||this.emit("updated")},addNodes:function(c,b,a){if(!b)b=this.root;else if(!this.isOwned(b)||!b.children)return!1;var f=this._getBinding(b).deepness+1,e=0,k=0;m.forEach(c,function(a){if(!this.isOwned(a)){b.children.push(a);this._registerNode(a);
var c=this._provideBinding(a);c.parent=b;c.deepness=f;this._initializeNode(a,f+1);e+=c.selectCount;k+=c.leafCount}},this);this._incrementCounts(b,e,k);a||this.emit("updated");return!0},select:function(c,b){return this.changeSelect(c,!0,b)},deselect:function(c){this.changeSelect(c,!1)},changeSelect:function(c,b,a){a=a||this.root.leafCount;var f=c&&this._getBinding(c);if(f){b=!!b;var e=(b?f.leafCount:0)-f.selectCount,k=this.root.selectCount+e<=a;if(!c.children)return k&&(f.selected=b,e&&this._incrementCounts(c,
e)),k;k&&(f.selected=b);m.forEach(c.children,function(c){this.changeSelect(c,b,a)},this);return k}},_incrementCounts:function(c,b,a){c=this._getBinding(c);c.selectCount+=b;a&&(c.leafCount+=a);c.selectCount?c.selectCount==c.leafCount&&(c.selected=!0):c.selected=!1;c.parent&&this._incrementCounts(c.parent,b,a)},getSelectionState:function(c){if(!this.isOwned(c))return!1;c=this._getBinding(c);return c.selectCount&&c.selectCount!=c.leafCount?"mixed":c.selected=!!c.selectCount},getSelectedNodes:function(c){return this.getDescendingNodes(this.root,
!0,c)},getDescendingNodes:function(c,b,a){if(!this.isOwned(c))return[];var f=[];this._collectNodes(c.children,f,b,a);return f},_collectNodes:function(c,b,a,f){m.forEach(c,function(c){var k=this._getBinding(c),e=null===a||void 0===a?k.leafCount:a?k.selectCount:k.leafCount-k.selectCount;e&&(!c.children||!f&&e==k.leafCount?b.push(c):this._collectNodes(c.children,b,a,f))},this)},inspectChildren:function(c,b,a,f){f&&(b=g.hitch(f,b));c=c||this.root;(c=c.children)&&a&&(c=c.slice(),c.sort(a));return m.every(c,
function(c){var k=b(c);return null===k?!1:!1!==k&&c.children?this.inspectChildren(c,b,a):!0},this)},updateExpandedNodes:function(c,b){for(var a in this._hash)this.updateExpand(this._hash[a],!!c[a]);this._updateOddEven(null,b)},updateExpand:function(c,b,a,f){if(c){var e=!1;c.children&&(c=this._getBinding(c),c.expanded!==b&&(e=!0,c.expanded=b));b={};e&&a&&this._updateOddEven(b,f);return b}},_updateOddEven:function(c,b){var a=1;this.inspectChildren(null,function(b){!1!==b.visible&&(a=1-a);var f=this._getBinding(b);
c&&f.isOdd!==a&&(c[this.getIdentity(b)]=a);f.isOdd=a;return!(!b.children||!f.expanded)},b,this)},isOdd:function(c){return(c=this._getBinding(c))&&c.isOdd},get:function(c){return this._hash[c]},getIdentity:function(c){return this.idProperty?c[this.idProperty]:null},query:function(c,e){return b(this.queryEngine(c,e)(this.data))},getChildren:function(c,e){c=this.isOwned(c,!0)?c.children:null;return b(this.queryEngine({},e)(c||[]))},mayHaveChildren:function(c){return!!c.children}})})},"widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid":function(){define("dojo/_base/declare dojo/aspect dojo/Evented dojo/dom-class dojo/dom-construct dojo/dom-style dojo/on dojo/query dijit/Tooltip dijit/_WidgetBase ../../dijit/_TemplatedMixin dgrid/OnDemandGrid dgrid/tree esri/dijit/geoenrichment/utils/KeyboardUtil esri/dijit/geoenrichment/TriStateItem ../../dijit/utils/DgridUtil ../../dijit/utils/DomUtil ../../dijit/utils/MouseUtil ../../dijit/tooltips/TooltipUtil dojo/text!./templates/SelectableTreeGrid.html xstyle/css!./css/SelectableTreeGrid.css".split(" "),
function(l,g,m,d,b,e,c,h,a,f,n,k,v,p,q,r,t,y,B,u){var A=l(null,{_selectedRowInfos:null,_lastSelectedRowInfo:null,_outsideHandler:null,_isSelectionFrozen:!1,keepSelectionOnOutsideClick:!1,_previouslySelectedRowsByNode:null,constructor:function(){this._previouslySelectedRowsByNode=new WeakMap},buildRendering:function x(){this._selectedRowInfos={};this.inherited(x,arguments)},postCreate:function w(){this.inherited(w,arguments);d.add(this.domNode,"esriMapsAnalystXNonSelectable")},_reselectSingleNode:function(a){this.selectSingleRow(this._previouslySelectedRowsByNode.get(a),
a)},selectSingleRow:function(a,c){this.unselectAllRows();this._selectRow(a,c)},_selectRow:function(a,b){d.add(a,this.selectedRowClass);d.add(a,"row-level-"+this._getNodeLevel(b));var k=this.tree.getIdentity(b),f={row:a,node:b,nodeId:k,index:b.parent&&b.parent.children.indexOf(b)};this._lastSelectedRowInfo=this._selectedRowInfos[k]=f;this._previouslySelectedRowsByNode.set(b,a);var e=this;this._outsideHandler=this._outsideHandler||c(document.body,"click",function(){y.isMouseOver(e.domNode)||e._isSelectionFrozen||
e.keepSelectionOnOutsideClick||e.unselectAllRows()})},_unselectRow:function(a,c){delete this._selectedRowInfos[this.tree.getIdentity(c)];d.remove(a,this.selectedRowClass)},unselectAllRows:function(){for(var a in this._selectedRowInfos)d.remove(this._selectedRowInfos[a].row,this.selectedRowClass);this._selectedRowInfos={};this._lastSelectedRowInfo=null;this._outsideHandler&&this._outsideHandler.remove();this._outsideHandler=null},getSelectedRowNodes:function(){return this._getSelectedNodesRows().nodes},
selectRowNodes:function(a){var c=this;a&&a.forEach(function(a){var b=c.grid.row(a);b&&b.element&&c._selectRow(b.element,a)})},freezeRowSelection:function(){this._isSelectionFrozen=!0},unfreezeRowSelection:function(){this._isSelectionFrozen=!1},_getSelectedNodesRows:function(){var a=[],c=[],b=[],k;for(k in this._selectedRowInfos)b.push(this._selectedRowInfos[k]);b.sort(function(a,c){return a.index-c.index});b.forEach(function(b){a.push(b.node);c.push(b.row)});return{nodes:a,rows:c}},_emitSelectedRowsEvent:function(){var a=
this._getSelectedNodesRows();if(a.nodes.length)this.onRowsSelected(a.nodes,a.rows)}});return l([f,n,m,A],{templateString:u,tree:null,grid:null,gridClass:"",highlightSelected:!0,firstColumns:null,additionalColumns:null,showRootCheckbox:!0,showCheckboxColumn:!0,showHeader:!0,labelColumnField:"label",gridParams:null,keepContentUnderScroll:void 0,hideInvisibleExpandoIcons:!1,expandOnNodeClick:!1,checkLimit:0,checkLimitMessage:null,checkLimitMessageTimeout:5E3,handleMultipleCheck:!1,enableRowSelection:!1,
enableMultipleRowSelection:!1,allowSelectionFromManyParents:!1,selectedRowFilter:null,selectedRowClass:"row-selected",enableHeaderLabelToggleClick:!0,defaultExpand:null,fitParentSize:!1,renderAllRows:!1,rowPostProcessor:null,_rootCheckbox:null,_checkboxes:null,_lastCheckedNode:null,updateSelectionCountDiv:function(a,c){},getLabel:function(a,c){return a.label},postCreate:function C(){this.inherited(C,arguments);this._createGrid()},resize:function(){this.grid.resize();this._updateCheckboxState(this._rootCheckbox);
for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a]);this._emitSelectionChanged()},setWidth:function(a){this.grid&&this.grid.domNode&&e.set(this.grid.domNode,"width",a+"px")},setHeight:function(a){this.grid&&this.grid.domNode&&e.set(this.grid.domNode,"height",a+"px")},row:function(a){return this.grid.row(a)},cell:function(a){return this.grid.cell(a)},_labelColumn:null,_createGrid:function(){var a=this;this._checkboxes={};var b={label:this.getLabel(this.tree.root,!0),sortable:!1,
field:this.labelColumnField,renderCell:this._renderLabel.bind(this),renderHeaderCell:this._renderLabelHeader.bind(this,this.tree.root)},k;if(this.additionalColumns&&this.additionalColumns.length&&(k=this.additionalColumns.filter(function(b){return b.field===a.labelColumnField})[0])){for(var f in b)void 0===k[f]&&(k[f]=b[f]);b=k}b.indentWidth=b.indentWidth||16;this._labelColumn=b=this._prepareTreeColumn(b);f=[];this.firstColumns&&(f=f.concat(this.firstColumns));this.showCheckboxColumn&&f.push({label:"",
field:"checkbox",sortable:!1,renderCell:this._renderCheckboxForColumn.bind(this),renderHeaderCell:this._renderCheckboxForColumn.bind(this,this.tree.root)});k||f.push(b);this.additionalColumns&&(f=f.concat(this.additionalColumns));b=["esriMapsAnalystXSelectableTreeGrid"];this.gridClass&&b.push(this.gridClass);this.fitParentSize&&b.push("fitParentSize");b=Object.assign({class:b.join(" "),keepScrollPosition:!0,store:this.tree,columns:f},this.gridParams);this.grid=this._createGridObject(b,this.gridContainer);
this.own(this.grid);this.grid._expanded=this.defaultExpand||this.grid._expanded||{};r.oddEvenFix(this.grid);this.own(c(this.tree,"updated",this._onStoreUpdated.bind(this)));this._addKeepScrollHandlers();this._addGridHandlers();this.renderAllRows&&(this.grid.minRowsPerPage=1E4,this.grid.maxRowsPerPage=10250);this.grid.startup();B.autoTooltip(this.domNode);this.showHeader||d.add(this.domNode,"esriMapsAnalystXGridNoHeader");c(this.grid.domNode,".dgrid-expando-icon:click,.dgrid-content .dgrid-column-labelColumn:dblclick,.dgrid-content .dgrid-column-labelColumn:keydown",
function(b){(b=a.grid.row(b))&&a.onExpandChangedUser(b.data)})},_createGridObject:function(a,b){return new k(a,b)},onRowInserted:function(a,b){},_addGridHandlers:function(){function a(a,k){b.enableRowSelection&&k.parent&&(!b.selectedRowFilter||b.selectedRowFilter(k))&&(d.add(a,"esriMapsAnalystXClickable"),c(a,"click",function(c){setTimeout(function(){if(!b._isSelectionFrozen){if(c.shiftKey&&b.enableMultipleRowSelection){if(b._lastSelectedRowInfo&&b._lastSelectedRowInfo.row.parentNode&&b._lastSelectedRowInfo.node.parent===
k.parent){var f=t.getChildIndex(b._lastSelectedRowInfo.row.parentNode,b._lastSelectedRowInfo.row),e=t.getChildIndex(a.parentNode,a),d=f<=e?b._lastSelectedRowInfo.row:a,f=f<=e?a:b._lastSelectedRowInfo.row,e=d;if(d.id!==f.id){do{d=b.grid.row(e).data;b._selectRow(e,d);if(e.id===f.id)break;e=e.nextSibling}while(e)}}else b.selectSingleRow(a,k);t.stealFocus()}else p.isCtrl(c)&&b.enableMultipleRowSelection?b._lastSelectedRowInfo&&b._lastSelectedRowInfo.row.parentNode&&b._lastSelectedRowInfo.node.parent===
k.parent||b.allowSelectionFromManyParents?b._selectedRowInfos[k.id]?b._unselectRow(a,k):b._selectRow(a,k):b.selectSingleRow(a,k):b.selectSingleRow(a,k);b._emitSelectedRowsEvent()}})}))}var b=this;this.own(g.after(this.grid,"insertRow",function(c){var k=c&&b.grid._rowIdToObject[c.id];if(c){if(k&&b.hideInvisibleExpandoIcons&&(!k.children||!k.children.length)){var f=h(".dgrid-expando-icon",c)[0];f&&(f.style.width="0")}t[k&&!1===k.visible?"hide":"show"](c);a(c,k)}k&&(b._updateRowHighlighting(k,c),b.onRowInserted(c,
k));b.rowPostProcessor&&b.rowPostProcessor(c,k);return c}))},_addKeepScrollHandlers:function(){function a(a){if(!b.grid.contentNode)return a;if(b.fitParentSize){var c=t.hasScrollbars(b.grid.bodyNode);b.grid.headerNode.style[b.isLeftToRight()?"right":"left"]=c.w?"":"0px";b._lastContentWidth=b.grid.contentNode.style.width||b._lastContentWidth||"";b.grid.contentNode.style.width=c.h?b._lastContentWidth:""}else b.keepContentUnderScroll?b.grid.contentNode.style.width=b.grid.headerNode.firstChild.offsetWidth+
"px":!1===b.keepContentUnderScroll&&(b.grid.contentNode.style.width="");return a}var b=this;if(this.fitParentSize||void 0!==this.keepContentUnderScroll)g.before(this.grid,"refresh",function(){b.hideCheckLimitMessage();b._lastCheckedNode=null}),g.after(this.grid,"resize",a),g.after(this.grid,"refresh",a)},_getNodeLevel:function(a){var b=-1;for(a=a&&a.parent;a;)b++,a=a.parent;return b},_prepareTreeColumn:function(a){return this._wrapTreeColumn(v(a))},_wrapTreeColumn:function(a){return a},_onStoreUpdated:function(){this._checkboxes=
{};this._refreshGrid();this._rootCheckbox&&this._updateCheckboxState(this._rootCheckbox);this._emitSelectionChanged()},_emitSelectionChanged:function(a){var b=this.tree.root.selectCount;this.updateSelectionCountDiv(this.selectionCounter,b);this.emit("SelectionChanged",{selected:b,toggledTreeNode:a})},refresh:function(){this._refreshGrid();this.refreshCheckboxes()},_isRefreshSuspended:!1,setRefreshSuspended:function(a){this._isRefreshSuspended=a},_refreshGrid:function(){if(!this._isRefreshSuspended){var a=
this.grid.getScrollPosition();this.grid.refresh();this.grid.scrollTo(a);for(var b in this._selectedRowInfos)this.grid.row(this._selectedRowInfos[b].node).element&&this._selectRow(this.grid.row(this._selectedRowInfos[b].node).element,this._selectedRowInfos[b].node)}},getScrollPosition:function(){return this.grid&&this.grid.getScrollPosition()},setScrollPosition:function(a){return this.grid&&this.grid.scrollTo(a)},_renderCheckbox:function(a){if(!a.leafCount&&a!==this.tree.root||!this.showCheckboxColumn||
!1===a.selectable&&void 0===a.indepSelection)return document.createTextNode("");var b=new q(null,{class:"esriStyleInTable"});b.autoToggle=!1;b.node=a;this._updateCheckboxState(b,a);!1===a.enabled&&b.set("disabled",!0);a===this.tree.root?(this._rootCheckbox=b,t[this.showRootCheckbox?"show":"hide"](b.domNode)):this._checkboxes[this.tree.getIdentity(a)]=b;b.onClick=this._onCheckboxClick.bind(this,a,b);return b},_renderCheckboxForColumn:function(a){return(a=this._renderCheckbox(a))&&a.domNode},refreshCheckboxes:function(){this._rootCheckbox&&
this._updateCheckboxState(this._rootCheckbox);for(var a in this._checkboxes)this._updateCheckboxState(this._checkboxes[a])},clearLastCheckInfo:function(){this._lastCheckedNode=null},_onCheckboxClick:function(a,b,c){c.stopPropagation();this.hideCheckLimitMessage();var k=this.handleMultipleCheck&&("function"!==typeof this.handleMultipleCheck||this.handleMultipleCheck(a));k&&c.shiftKey&&this._tryToggleMultipleNodes(this._lastCheckedNode,a,b||c)?this._lastCheckedNode=a:(this._lastCheckedNode=k?a:null,
this._toggleNodeSelection(a,b||c),this.refreshCheckboxes())},_tryToggleMultipleNodes:function(a,b,c){if(!a||a===b||a.parent!==b.parent)return!1;var k=b.parent.children,f=k.indexOf(a);b=k.indexOf(b);a=f<b?1:-1;for(var e=[],d=[],f=f+a;;f+=a){var n=k[f];((void 0===n.indepSelection?n.selected:n.indepSelection)?e:d).push(n);if(f===b)break}e.forEach(function(a){this._toggleNodeSelection(a,c)},this);d.every(function(a){return this._toggleNodeSelection(a,c)},this);this.refreshCheckboxes();return!0},_toggleNodeSelection:function(a,
b){var c=void 0===a.indepSelection?!a.selected:!a.indepSelection;if(c&&this.checkLimit){var k=this.getSelectedNodes().length,f="function"===typeof this.checkLimit?this.checkLimit(this.tree,k):this.checkLimit;if(k>=f)if(void 0===a.indepSelection&&a.children&&!1!==this.tree.getSelectionState(a))c=!1;else return this.showCheckLimitMessage(b),!1}k=!0;void 0===a.indepSelection?(k=this.tree.changeSelect(a,c,f),!k&&this.showCheckLimitMessage(b)):a.indepSelection=c;this._emitSelectionChanged(a);return k},
_checkLimitHandler:null,showCheckLimitMessage:function(b){if(this.checkLimitMessage){var c=b&&(b.domNode||b.target);c&&(a.show(this.checkLimitMessage,c,["above","below"]),b=function(){c&&a.hide(c);c=null},setTimeout(b,this.checkLimitMessageTimeout),this._checkLimitHandler=b,this.onCheckLimitReached(b))}},hideCheckLimitMessage:function(){this._checkLimitHandler&&this._checkLimitHandler();this._checkLimitHandler=null},onCheckLimitReached:function(a){},_updateCheckboxState:function(a){if(a){var b=this._getNodeSelection(a.node);
a.set("checked",b);this._updateRowHighlighting(a.node,null,b)}},_getNodeSelection:function(a){return void 0!==a.indepSelection?a.indepSelection:this.tree.getSelectionState(a)},_updateRowHighlighting:function(a,b,c){this.highlightSelected&&a&&(c=void 0!==c?c:this._getNodeSelection(a),(b=b||this.grid&&this.row(a).element)&&(!0!==c||void 0===a.indepSelection&&!1===a.selectable?d.remove(b,"selected"):d.add(b,"selected")))},_renderLabel:function(a,b,c){b=this._renderLabelNode(a);this._provideLabelClickAction(b,
c,a);return b},_provideLabelClickAction:function(a,b,k){var f=this.expandOnNodeClick&&k.children?k.children.length&&(a=b,function(){this.toggleExpand(k);this.onExpandChangedUser(k)}.bind(this)):!1!==k.enabled&&this.showCheckboxColumn?this._onCheckboxClick.bind(this,k,null):null;f&&(d.add(a,"esriMapsAnalystXClickable"),c(a,"click",function(a){a.stopPropagation();f(a)}))},_renderLabelNode:function(a){return b.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)})},
_renderLabelHeader:function(a){var k=b.create("div",{class:"esriMapsAnalystXSelectableTreeLabel TrimWithEllipses",innerHTML:this.getLabel(a)||this._labelColumn&&this._labelColumn.label||""});this.enableHeaderLabelToggleClick&&this.showRootCheckbox&&(d.add(k,"esriMapsAnalystXClickable"),c(k,"click",this._onCheckboxClick.bind(this,a,null)));return k},onRowsSelected:function(a,b){},isNodeSelected:function(a){return a&&(a.selected||a.indepSelection)},getSelectedNodes:function(){var a=this.tree.getSelectedNodes(!1),
b=this._getIndepSelectedNodes();return a.concat(b)},_getIndepSelectedNodes:function(){function a(c){c&&(c.indepSelection&&b.push(c),c.children&&c.children.forEach(a))}var b=[];a(this.tree.root);return b},getSelectedState:function(){if(!this.tree)return null;var a={normalSelection:{},indepSelection:{}},b=this.tree.getSelectedNodes(!1);b&&b.forEach(function(b){a.normalSelection[b.id]=!0});(b=this._getIndepSelectedNodes())&&b.forEach(function(b){a.indepSelection[b.id]=!0});return a},setSelectedState:function(a){if(this.tree){this.tree.changeSelect(this.tree.root,
!1);if(a){for(var b in a.normalSelection){var c=this.tree.get(b);c&&this.tree.changeSelect(c,!0)}for(b in a.indepSelection)if(c=this.tree.get(b))c.indepSelection=!0}this.refreshCheckboxes()}},setNodeSelected:function(a,b,c){a&&(void 0!==a.indepSelection?a.indepSelection=b:this.tree.changeSelect(a,b),!1!==c&&this.refreshCheckboxes())},isExpanded:function(a){a="string"===typeof a?a:a[this.tree.idProperty];return this.grid._expanded&&this.grid._expanded[a]},setExpanded:function(a,b,c){a="string"==typeof a?
a:a[this.tree.idProperty];void 0!==a&&(!1!==c?(c=this.grid.row(a))&&c.element&&this.grid.expand(a,b):this.grid._expanded[a]=b)},toggleExpand:function(a){this.setExpanded(a,!this.isExpanded(a))},getExpandedState:function(){return Object.assign({},this.grid._expanded)},setExpandedState:function(a){this.grid._expanded=a||{}},onExpandChangedUser:function(a){},destroy:function(){this.unselectAllRows();this.inherited(arguments)}})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_TemplatedMixin":function(){define(["dojo/_base/declare",
"dijit/_TemplatedMixin","./_EscapeValueMixin"],function(l,g,m){return l([g,m],{})})},"widgets/BusinessAnalyst/esriAnalystX/dijit/_EscapeValueMixin":function(){define(["dojo/_base/declare"],function(l){return l(null,{_escapeValue:function(g){return g.replace(/"/g,"\x26quot;")}})})},"dgrid/tree":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/Deferred dojo/_base/lang dojo/query dojo/on dojo/aspect ./util/has-css3 ./Grid dojo/has!touch?./util/touch put-selector/put".split(" "),function(l,
g,m,d,b,e,c,h,a,f,n){function k(a,b,c,k){k=this.grid.isRTL?"right":"left";var f=".dgrid-expando-icon";b&&(f+=".ui-icon.ui-icon-triangle-1-"+(c?"se":"e"));a=n("div"+f+"[style\x3dmargin-"+k+": "+a*(this.indentWidth||9)+"px; float: "+k+"]");a.innerHTML="\x26nbsp;";return a}function v(a){var b=this,c=this.style.height;c&&(this.style.display="0px"==c?"none":"block");a&&(n(this,".dgrid-tree-resetting"),setTimeout(function(){n(b,"!dgrid-tree-resetting")}));this.style.height=""}function p(d){var p=d.renderCell||
a.defaultRenderCell,q,l;d||(d={});d.shouldExpand=d.shouldExpand||function(a,b,c){return c};c.after(d,"init",function(){var a=d.grid,p=".dgrid-content .dgrid-column-"+d.id,r=[];a.cleanEmptyObservers=!1;if(!a.store)throw Error("dgrid tree column plugin requires a store to operate.");d.renderExpando||(d.renderExpando=k);r.push(a.on(d.expandOn||".dgrid-expando-icon:click,"+p+":dblclick,"+p+":keydown",function(b){var c=a.row(b);a.store.mayHaveChildren&&!a.store.mayHaveChildren(c.data)||"keydown"==b.type&&
32!=b.keyCode||"dblclick"==b.type&&l&&1<l.count&&c.id==l.id&&-1<b.target.className.indexOf("dgrid-expando-icon")||a.expand(c);-1<b.target.className.indexOf("dgrid-expando-icon")&&(l&&l.id==a.row(b).id?l.count++:l={id:a.row(b).id,count:1})}));h("touch")&&r.push(a.on(f.selector(p,f.dbltap),function(){a.expand(this)}));a._expanded||(a._expanded={});r.push(c.after(a,"insertRow",function(a){var b=this.row(a);d.shouldExpand(b,q,this._expanded[b.id])&&this.expand(a,!0,!0);return a}));r.push(c.before(a,"removeRow",
function(c,k){if(c=c.connected)b("\x3e.dgrid-row",c).forEach(function(b){a.removeRow(b,!0)}),k||n(c,"!")}));d.collapseOnRefresh&&r.push(c.after(a,"cleanup",function(){this._expanded={}}));a._calcRowHeight=function(a){var b=a.connected;return a.offsetHeight+(b?b.offsetHeight:0)};a.expand=function(c,k,f){var p=c.element?c:a.row(c),q=h("transitionend");c=new m;var g=c.promise;c.resolve();c=p.element;c=-1<c.className.indexOf("dgrid-expando-icon")?c:b(".dgrid-expando-icon",c)[0];f=f||!1===d.enableTransitions;
if(c&&c.mayHaveChildren&&(f||k!==!!this._expanded[p.id])){var l=void 0===k?!this._expanded[p.id]:k;n(c,".ui-icon-triangle-1-"+(l?"se":"e")+"!ui-icon-triangle-1-"+(l?"e":"se"));k=p.element;var r=k.connected,w,t,z={originalQuery:this.query};if(!r){var r=z.container=k.connected=n(k,"+div.dgrid-tree-container"),y=function(b){return a.store.getChildren(p.data,b)};d.allowDuplicates&&(z.parentId=p.id);"level"in c&&(y.level=c.level);g=g.then(function(){if(a.renderQuery)return a.renderQuery(y,z);var b=n(r,
"div"),c=a.renderArray(y(z),b,"level"in y?{queryLevel:y.level}:{});m.when(c,function(){n(b,"!")});return c});q?e(r,q,v):v.call(r)}r.hidden=!l;w=r.style;!q||f?(w.display=l?"block":"none",w.height=""):(l?(w.display="block",t=r.scrollHeight,w.height="0px"):(n(r,".dgrid-tree-resetting"),w.height=r.scrollHeight+"px"),setTimeout(function(){n(r,"!dgrid-tree-resetting");w.height=l?t?t+"px":"auto":"0px"}));l?this._expanded[p.id]=!0:delete this._expanded[p.id]}return g};c.after(d,"destroy",function(){g.forEach(r,
function(a){a.remove()});delete a.expand;delete a._calcRowHeight})});d.renderCell=function(a,b,c,k){var f=d.grid,e=Number(k&&k.queryLevel)+1,h=!f.store.mayHaveChildren||f.store.mayHaveChildren(a),v=k.parentId,e=q=isNaN(e)?0:e,f=d.renderExpando(e,h,f._expanded[(v?v+"-":"")+f.store.getIdentity(a)],a);f.level=e;f.mayHaveChildren=h;(a=p.call(d,a,b,c,k))&&a.nodeType?(n(c,f),n(c,a)):c.insertBefore(f,c.firstChild)};return d}p.defaultRenderExpando=k;d.getObject("dgrid.tree",!0);return dgrid.tree=p})},"dgrid/util/has-css3":function(){define(["dojo/has"],
function(l){function g(d,b){d=d.style;var e;if(b in d)return!0;b=b.slice(0,1).toUpperCase()+b.slice(1);for(e=m.length;e--;)if(m[e]+b in d)return m[e];return!1}var m=["ms","O","Moz","Webkit"];l.add("css-transitions",function(d,b,e){return g(e,"transitionProperty")});l.add("css-transforms",function(d,b,e){return g(e,"transform")});l.add("css-transforms3d",function(d,b,e){return g(e,"perspective")});l.add("transitionend",function(){var d=l("css-transitions");return d?!0===d?"transitionend":{ms:"MSTransitionEnd",
O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[d]:!1});return l})},"esri/dijit/geoenrichment/utils/KeyboardUtil":function(){define(["dojo/on","dojo/sniff","./DomUtil"],function(l,g,m){var d={listenToKeyboardCombinationOverNode:function(a){return l(document.body,"keydown",function(b){if(!a.isCtrl||d.isCtrl(b))if(!a.isShift||b.shiftKey)if(!a.isAlt||b.altKey)String.fromCharCode(b.keyCode).toLowerCase()!==a["char"]||a.node&&!m.isNodeInLayout(a.node)||a.callback(b)})},isCtrl:function(a){return a.ctrlKey||
b.ctrlKey||b.cmdKey||g("mac")&&a.metaKey}},b={};if(g("mac")){var e=function(f,e){kC=f.keyCode;(c||h)&&(91===kC||93===kC)||a&&224===kC?b.cmdKey=e:16===kC?b.shiftKey=e:17===kC?b.ctrlKey=e:18===kC&&(b.altKey=e)},c=g("webkit"),h=g("opera"),a=g("mozilla");l(document.body,"keydown",function(a){e(a,!0)});l(document.body,"keyup",function(a){e(a,!1)})}return d})},"esri/dijit/geoenrichment/utils/DomUtil":function(){define("dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style esri/dijit/geoenrichment/Deferred dojo/domReady!".split(" "),
function(l,g,m,d,b,e,c){function h(){f||(f=d.create("div",{"class":"esriGEOffscreen"},document.body));return f}var a={isHidden:function(a){return a&&m.contains(a,"esriGEHidden")},hasVisibleChildren:function(b){if(!b||!b.children.length)return!1;for(var c=0;c<b.children.length;c++)if(!a.isHidden(b.children[c]))return!0;return!1},hide:function(b){return a.addTag(b,"esriGEHidden")},show:function(b){return a.removeTag(b,"esriGEHidden")},addTag:function(b,c){return a.applyCallback(b,function(a){a&&m.add(a,
c)})},removeTag:function(b,c){return a.applyCallback(b,function(a){a&&m.remove(a,c)})},applyCallback:function(a,b,c){c&&(b=l.hitch(c,b));Array.isArray(a)?a.forEach(b):b(a);return a},getChildIndex:function(a,b){if(!a||!a.children||!b)return-1;for(var c=0;c<a.children.length;c++)if(a.children[c]===b)return c;return-1},getChildren:function(a){if(!a||!a.children)return null;for(var b=[],c=0;c<a.children.length;c++)b.push(a.children[c]);return b},getChildNodes:function(a){if(!a||!a.childNodes)return null;
for(var b=[],c=0;c<a.childNodes.length;c++)b.push(a.childNodes[c]);return b},isChildOf:function(a,b,c){var k=!1,f=function(a){if(c&&!c(a))return!1;a.parentNode===b?k=!0:a.parentNode&&f(a.parentNode)};a&&f(a);return k},isNodeInLayout:function(b){return a.isChildOf(b,document.body,function(b){return!a.isHidden(b)&&"none"!=e.get(b,"display")&&!m.contains(b,"dijitHidden")})},isNodeVisible:function(b){return a.isChildOf(b,document.body,function(a){return!m.contains(a,"dijitHidden")&&"hidden"!=e.get(a,
"visibility")})},isNodeOnscreen:function(b){return a.isChildOf(b,document.body,function(a){return!m.contains(a,"esriGEOffscreen")})},enableContent:function(a,c,f){if(a){f=f||{};var k=a.children.length-1;if(!(0>k)){k=a.children[k];m.contains(k,"esriGEDisabledContent")||(k=null);if(c)k&&a.removeChild(k);else if(k=k||d.create("div",{"class":"esriGEDisabledContent"+(f.overlayClass?" "+f.overlayClass:"")},a),!1!==f.fitParent&&(a=b[f.marginBox?"getMarginBox":"getContentBox"](a).h))a=a.toString()+"px",e.set(k,
{height:a,marginTop:"-"+a});return k}}},enableContentAbsolute:function(b,c,f){if(b){f=f||{};var k=e.get(b,"position");"relative"!==k&&"absolute"!==k&&e.set(b,"position","relative");return a.enableContent(b,c,{overlayClass:"esriGEAbsoluteStretched "+(f.overlayClass||"")+(f.isTransparent?" esriGEDisabledContentTransparent ":""),fitParent:!1})}}},f;a.hideNodeInBackground=function(a,b){if(a){if(a._hideNodeInBackgroundUndoController)return a._hideNodeInBackgroundUndoController;var c=d.create("div",null,
a,"after"),k=d.create("div",{style:"position: absolute; left: 0px; top: 0px;"},h());d.place(a,k);b="DomUtil.hideNodeInBackground"+(b?"."+b:"");g.set(c,"_bg_memo_node",b);g.set(k,"_bg_temp_node",b);b={undo:function(){c&&(c.parentNode&&d.place(a,c,"replace"),d.destroy(c),d.destroy(k),f.children.length||(d.destroy(f),f=null),c=null,delete a._hideNodeInBackgroundUndoController)},remove:function(){this.undo()}};return a._hideNodeInBackgroundUndoController=b}};a.showNodeFromBackground=function(a){a&&a._hideNodeInBackgroundUndoController&&
a._hideNodeInBackgroundUndoController.undo()};a.noTransformPosition=function(a){function b(a){for(var b={x:0,y:0};a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop,a=a.offsetParent,b.x+=e.get(a,"borderLeftWidth"),b.y+=e.get(a,"borderTopWidth");return b}function c(a){return e.get(a,"width")+e.get(a,"paddingLeft")+e.get(a,"paddingRight")+e.get(a,"borderLeftWidth")+e.get(a,"borderRightWidth")}function f(a){return e.get(a,"height")+e.get(a,"paddingTop")+e.get(a,"paddingBottom")+e.get(a,"borderTopWidth")+
e.get(a,"borderBottomWidth")}if(a){var k;if(a instanceof SVGElement&&a.getBBox)return k=(k=a.ownerSVGElement&&a.ownerSVGElement.parentNode)&&b(k),a=a.getBBox(),{x:(a.x||0)+k.x,y:(a.y||0)+k.y,w:a.width||0,h:a.height||0};k=b(a);return{x:k.x,y:k.y,w:c(a),h:f(a)}}};a.uniteNodeBoxes=function(b,c){var f=1E6,k=1E6,e=-1E6,d=-1E6;b.forEach(function(b){b=a.noTransformPosition(b);f=Math.min(f,b.x);k=Math.min(k,b.y);e=Math.max(e,b.x+b.w);d=Math.max(d,b.y+b.h)});b={x:f,y:k,w:e-f,h:d-k};c&&(c=a.noTransformPosition(c),
b.x-=c.x,b.y-=c.y);return b};a.getNodesBox=function(c,f){var k=1E6,e=-1E6,d=1E6,n=-1E6;c.forEach(function(c){c=f&&f.ignoreTranformation?a.noTransformPosition(c):b.position(c);k=Math.min(k,c.x);d=Math.min(d,c.y);e=Math.max(e,c.x+c.w);n=Math.max(n,c.y+c.h)});return{x:k,y:d,w:e-k,h:n-d}};a.traverseChildren=function(a,b){function c(a){if(a&&a.children)for(var f=0;f<a.children.length;f++){var k=a.children[f];if(b(k))break;c(k)}}c(a)};a.scrollToListNode=function(a,b,c){var f=b.offsetTop+b.clientHeight,
k=f-(a.scrollTop+a.clientHeight);0<k&&(a.scrollTop+=k);c&&(f-=b.clientHeight-c.offsetTop,k=a.scrollTop-f,0<k&&(a.scrollTop-=k))};var n;a.getScrollbarSize=function(){if(!n){var a=d.create("div",null,document.body);a.style.width="100px";a.style.height="100px";a.style.overflow="scroll";a.style.position="absolute";a.style.top="9999px";n={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight};d.destroy(a)}return n};a.hasScrollbars=function(a){var b=e.getComputedStyle(a);return{w:"scroll"===b.overflowX||
a.offsetWidth>a.clientWidth&&"auto"===b.overflowX,h:"scroll"===b.overflowY||a.offsetHeight>a.clientHeight&&"auto"===b.overflowY}};a.getMeasureContext=function(a){a=a||{};a.style=a.style?a.style+" ":"";a.style+="display: inline-block; position: absolute; left: 0; top: 0;";return{div:d.create("div",a,document.body),measureText:function(a){this.div.innerHTML=a;a=b.getMarginBox(this.div);delete a.l;delete a.t;return a},destroy:function(){d.destroy(this.div)}}};a.getTextBox=function(b,c){c=a.getMeasureContext(c);
b=c.measureText(b);c.destroy();return b};a.stealFocus=function(){var a=new c;try{var b=d.create("input",{type:"text",style:"position: absolute; left: 0px; top: 0px;"});d.place(b,document.body);b.select();d.destroy(b)}catch(p){}setTimeout(a.resolve,0);return a.promise};a.getWindowBox=function(){for(var b=[],c=0,f=document.body.children.length;c<f;c++){var e=document.body.children[c];a.isHidden(e)||(a.hide(e),b.push(e))}c={w:document.body.clientWidth,h:document.body.clientHeight};b.forEach(function(b){a.show(b)});
return c};a.getBorder=function(a){return{t:e.toPixelValue(a,e.get(a,"borderTopWidth")),r:e.toPixelValue(a,e.get(a,"borderRightWidth")),b:e.toPixelValue(a,e.get(a,"borderBottomWidth")),l:e.toPixelValue(a,e.get(a,"borderLeftWidth"))}};return a})},"esri/dijit/geoenrichment/Deferred":function(){define(["dojo/Deferred"],function(l){return l})},"esri/dijit/geoenrichment/TriStateItem":function(){define("dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/Stateful dojo/on dojo/dom-construct dojo/dom-class ./utils/DeviceUtil".split(" "),
function(l,g,m,d,b,e,c,h){return l(d,{domNode:null,checkboxNode:null,checked:!1,disabled:!1,autoToggle:!0,_currentClass:null,_lastChecked:!1,constructor:function(a,f,d){var k=h.isMobileDevice()?"touchstart":"click";f=f||{};var n=f["class"];f["class"]=(n?n+" ":"")+"esriTriStateCheckBoxIcon";if(n=f.label){if(a instanceof HTMLLabelElement)a.innerHTML="\x26nbsp;"+n;else{var g=f.labelAttrs||{};g.innerHTML="\x26nbsp;"+n;g=e.create("label",g);a&&e.place(g,a);a=g}f=m.mixin({},f);delete f.label;delete f.labelAttrs}this.checkboxNode=
e.create("div",f,a,a instanceof HTMLLabelElement?"first":d);this._currentClass=this._composeClass();c.add(this.checkboxNode,this._currentClass);a instanceof HTMLLabelElement?(b(a,k,m.hitch(this,this._onClick)),c.add(a,"esriTriStateCheckBoxLabel")):b(this.checkboxNode,k,m.hitch(this,this._onClick));this.domNode=n?a:this.checkboxNode},postscript:function(){},_onClick:function(a){this.disabled||(this.autoToggle&&this.toggle(),a.checked=this.checked,this.onClick(g.fix(a)))},onClick:function(a){},toggle:function(){this.set("checked",
!this._lastChecked);return this.checked},_checkedSetter:function(a){a!==this.checked&&(this.checked="mixed"===a?a:this._lastChecked=!!a,this._updateClass())},_disabledSetter:function(a){this.disabled=!!a;this._updateClass()},_updateClass:function(){var a=this._composeClass();a!==this._currentClass&&(c.replace(this.checkboxNode,a,this._currentClass),this._currentClass=a)},_composeClass:function(){var a="esriTriStateCheckBox"+("mixed"==this.checked?"Mixed":this.checked?"Checked":"");return this.disabled?
a+"Disabled":a}})})},"esri/dijit/geoenrichment/utils/DeviceUtil":function(){define(["dojo/sniff"],function(l){var g={},m=function(){var b=window,e=document,c=b.navigator.platform,d=b.navigator.userAgent,a={ios:!1,android:!1,androidChrome:!1,desktop:!1,windowsPhone:!1,iphone:!1,iphoneX:!1,ipod:!1,ipad:!1,edge:!1,ie:!1,firefox:!1,macos:!1,windows:!1,cordova:!(!b.cordova&&!b.phonegap),phonegap:!(!b.cordova&&!b.phonegap)},f=b.screen.width,n=b.screen.height,k=d.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),
g=d.match(/(Android);?[\s\/]+([\d.]+)?/),p=d.match(/(iPad).*OS\s([\d_]+)/),q=d.match(/(iPod)(.*OS\s([\d_]+))?/),l=!p&&d.match(/(iPhone\sOS|iOS)\s([\d_]+)/),f=l&&(375===f&&812===n||414===f&&896===n),n=0<=d.indexOf("MSIE ")||0<=d.indexOf("Trident/"),m=0<=d.indexOf("Edge/"),y=0<=d.indexOf("Gecko/")&&0<=d.indexOf("Firefox/"),B="MacIntel"===c,c="Win32"===c;a.ie=n;a.edge=m;a.firefox=y;k&&(a.os="windows",a.osVersion=k[2],a.windowsPhone=!0);g&&!c&&(a.os="android",a.osVersion=g[2],a.android=!0,a.androidChrome=
0<=d.toLowerCase().indexOf("chrome"));if(p||l||q)a.os="ios",a.ios=!0;l&&!q&&(a.osVersion=l[2].replace(/_/g,"."),a.iphone=!0,a.iphoneX=f);p&&(a.osVersion=p[2].replace(/_/g,"."),a.ipad=!0);q&&(a.osVersion=q[3]?q[3].replace(/_/g,"."):null,a.iphone=!0);a.ios&&a.osVersion&&0<=d.indexOf("Version/")&&"10"===a.osVersion.split(".")[0]&&(a.osVersion=d.toLowerCase().split("version/")[1].split(" ")[0]);a.webView=!(!(l||p||q)||!d.match(/.*AppleWebKit(?!.*Safari)/i)&&!b.navigator.standalone)||b.matchMedia&&b.matchMedia("(display-mode: standalone)").matches;
a.standalone=a.webView;a.desktop=!(a.os||a.android||a.webView);a.desktop&&(a.macos=B,a.windows=c);a.os&&"ios"===a.os&&(d=a.osVersion.split("."),e=e.querySelector('meta[name\x3d"viewport"]'),a.minimalUi=!a.webView&&(q||l)&&(7===1*d[0]?1<=1*d[1]:7<1*d[0])&&e&&0<=e.getAttribute("content").indexOf("minimal-ui"));a.needsStatusbarOverlay=function(){return(a.webView||a.android&&a.cordova)&&b.innerWidth*b.innerHeight===b.screen.width*b.screen.height?!a.iphoneX||90!==b.orientation&&-90!==b.orientation?!0:
!1:!1};a.statusbar=a.needsStatusbarOverlay();a.pixelRatio=b.devicePixelRatio||1;return a}(),d=!m.desktop&&!m.ipad;g.device=m;g.isMobileDevice=function(){return d};g.isPCWithTouchScreen=function(){return!d&&l("touch")};g.isLandscape=function(){return 90===Math.abs(window.orientation)};g.press=d?"touchstart":"mousedown";g.release=d?"touchend":"mouseup";g.click=d?"touchend":"click";g.clickOrRelease=d?"touchend":"click, mouseup";g.move=d?"touchmove":"mousemove";return g})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DgridUtil":function(){define(["dojo/aspect",
"dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(l,g,m,d){function b(a,b,c){if(void 0===c){var f=a._rowIdToObject[b.id];f&&(c=(a=a.store)&&a.isOdd&&a.isOdd(f))}0!==c&&1!==c||g.replace(b,h[c],h[1-c])}function e(a,c,e){var f=a.store;if(f&&f.updateExpand){e=f.updateExpand(c.data,e,!0,a.getSortingFunction());for(var d in e)c=a.row(f.get(d)),c.element&&b(a,c.element,e[d])}}var c=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],h=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(a){g.add(a,
"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:a,update:function(b){b=b?1:0;g.replace(a,c[b],c[1-b])}}},oddEvenFix:function(a){a.expand&&(a.getSortingFunction=function(){var a=this.get("sort");return a&&a.length?d.getSorting(a):null},l.after(a,"insertRow",function(c){b(a,c);return c}),l.before(a,"refresh",function(){var b=a.store;b&&b.updateExpandedNodes&&b.updateExpandedNodes(a._expanded,a.getSortingFunction())}),l.around(a,"expand",function(b){return function(c,
f){var k=c.element?c:a.row(c);void 0===f&&(f=!a._expanded[k.id]);!0===f&&e(a,k,!0);var d=b.apply(this,arguments);!1===f&&e(a,k,!1);return d}}),l.around(a,"adjustRowIndices",function(b){return function(){var c=a.store;c&&c.updateExpandedNodes&&c.updateExpand&&c.isOdd||b.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(a){function b(){var b=a.headerNode.firstChild,c=a.contentNode;c&&b&&b.offsetWidth!==c.offsetWidth&&(c.style.width="",b.style.width="",b.style.width=c.offsetWidth+"px")}
l.after(a,"resize",b);l.after(a,"refresh",b);l.after(a,"expand",function(a){setTimeout(b,100);setTimeout(b,300);return a})},inlineSortArrow:function(a,b,c){b=d.arrayToObject(d.listToArray(b));l.after(a,"updateSortArrow",function(f,e){if((e=f[0]&&f[0].attribute)&&b[e]){var d=(e=a._sortNode||a._findSortArrowParent(e))&&m(".dgrid-sort-arrow",e)[0];f=f[0].descending;if(d){d.remove();g.remove(e,"dgrid-sort-down dgrid-sort-up");var k=c?m(c,e)[0]:e.lastChild.append?e.lastChild:e;k.append||(k=e);g.add(k,
f?"dgrid-sort-down":"dgrid-sort-up");k.append(d)}}},!0)}}})},"widgets/BusinessAnalyst/esriAnalystX/utils/ArrayUtil":function(){define("require exports ../../baUtil/array dojo/store/util/SimpleQueryEngine ./ObjectUtil esri/dijit/geoenrichment/utils/ArrayUtil".split(" "),function(l,g,m,d,b,e){function c(a,b){a.some(function(c,f){b.func(c,f,b,a);if(b.stop)return!0});return b}function h(a){var c=a.split(" "),f=c[1];a={};switch(c[0]){case "max":a.result=-Infinity;c=function(a,c,e){e.result=Math.max(e.result,
b.getObject(a,f))};break;case "min":a.result=Infinity;c=function(a,c,e){e.result=Math.min(e.result,b.getObject(a,f))};break;case "sum":a.result=0;c=function(a,c,e){e.result+=b.getObject(a,f)};break;case "random":a.result=void 0;c=function(a,b,c,f){c.result=f[Math.round((f.length-1)*Math.random())];c.stop=!0};break;default:throw Error("Unsupported query.");}a.func=c;return a}var a={getSorting:function(a,c){if(!a)return b.compare;if("function"===typeof a)return a;var f;f=Array.isArray(a)?a:a.sort||
[a];var e={};"string"===typeof c&&(c=[c]);Array.isArray(c)?c.forEach(function(a){e[a]=b.compareNames}):c&&(e=c);return function(a,c){for(var d=void 0,k=0;d=f[k];k++){var h=a[d.attribute],n=c[d.attribute];if(h=(e[d.attribute]||(e["*"]?e["*"].bind(null,d.attribute):b.compare))(h,n,!1,!1,a,c))return d.descending?-h:h}return 0}},sort:function(b,c,e){return b.sort(a.getSorting(c,e))},sortIndices:function(b,c,e){b=m.map(b,function(a,b){return{value:a,index:b}});var f=a.getSorting(c,e);b.sort(function(a,
b){return f(a.value,b.value)});return m.map(b,function(a){return a.index})},getQueryEngine:function(b,c){return function(e,f){f&&f.sort&&(f=Object.assign({},f),f.sort=a.getSorting(f.sort,b));return(c||d)(e,f)}},objectToArray:function(a,b){void 0===b&&(b=null);var c=[],e=b?function(c){return a[c]?a[c][b]:void 0}:function(b){return a[b]},f;for(f in a){var d=e(f);"undefined"!==typeof d&&c.push(d)}return c},arrayToObject:function(a,b){var c={},f=e.composeIdentityFunction(b);m.forEach(a,function(a){c[f(a)]=
a});return c},composeIdentityFunction:e.composeIdentityFunction,removeDuplicates:e.removeDuplicates,splitArrayToBunches:e.splitArrayToBunches,contains:function(a,b){return-1!==m.indexOfLoose(a,b)},remove:function(a,b){b=m.indexOfLoose(a,b);-1!==b&&a.splice(b,1);return-1!==b},merge:function(a,b){a=a||[];null!=b&&Array.prototype.push.apply(a,b);return a},listToArray:function(a,b){if(null==a)return[];void 0===b&&(b=",");a="string"===typeof a?a.split(b):a.slice();for(b=0;b<a.length;b++)"string"===typeof a[b]&&
(a[b]=a[b].trim());return a},reorderArray:function(a,b){var c=a.length,e=0,f=Array(c),d={},h={},g;for(g in b){var n=Math.round(g);if(0<=n&&n<c&&!d[n]){var l=Math.round(b[g]);0<=l&&l<c&&!h[l]&&(f[l]=a[n],d[n]=1,h[l]=1,e++)}}e!==c&&(f=f.filter(function(a,b){return h[b]}),a.forEach(function(a,b){!d[b]&&f.push(a)}));return f},mapIndices:function(a,b,c,e){e=null==e?null:e;if(1===a)c.call(e,0,Math.floor(b/2));else{b=(b-1)/(a-1);for(var f=0;f<a;f++)c.call(e,f,Math.floor(.5+f*b))}},moveElement:function(a,
b,c,e){var f=Array.isArray(b)?b:[b];if(-1!==f.indexOf(c))return a.slice();var d=[];a.forEach(function(a){-1===f.indexOf(a)&&(a==c?"before"===e?(f.forEach(function(a){d.push(a)}),d.push(c)):"after"===e&&(d.push(c),f.forEach(function(a){d.push(a)})):d.push(a))});return d},min:function(a,b){var c=a.length;switch(c){case 0:return null;case 1:return a[0];default:for(var e=a[0],f=b(e),d=0,h=1;h<c;h++){var g=b(a[h]);f>g&&(e=a[h],f=g,d=h)}return{key:d,value:e,comparisonValue:f}}},max:function(a,b){var c=
a.length;switch(c){case 0:return null;case 1:return a[0];default:for(var e=a[0],f=b(e),d=0,h=1;h<c;h++){var g=b(a[h]);f<g&&(e=a[h],f=g,d=h)}return{key:d,value:e,comparisonValue:f}}},query:function(a,b){if("object"===typeof b)return c(a,b);if("string"===typeof b)return b=h(b),c(a,b).result},everyEqualProperty:function(a,b){if(2>a.length)return!0;var c;return!a.some(function(a,e){if(0===e)c=a[b];else if(c!==a[b])return!0})}};return a})},"widgets/BusinessAnalyst/baUtil/array":function(){define(["require",
"exports"],function(l,g){var m=Array.prototype,d={every:function(b,e,c){return null==b?!0:"string"===typeof b?m.every.call(b.split(""),e,c):m.every.call(b,e,c)},some:function(b,e,c){return null==b?!1:"string"===typeof b?m.some.call(b.split(""),e,c):m.some.call(b,e,c)},forEach:function(b,e,c){if(null!=b)return"string"===typeof b?m.forEach.call(b.split(""),e,c):m.forEach.call(b,e,c)},map:function(b,e,c){return null==b?[]:"string"===typeof b?m.map.call(b.split(""),e,c):m.map.call(b,e,c)},filter:function(b,
e,c){return null==b?[]:"string"===typeof b?m.filter.call(b.split(""),e,c):m.filter.call(b,e,c)},indexOf:function(b,e){return null==b?-1:"string"===typeof b?m.indexOf.call(b.split(""),e):m.indexOf.call(b,e)},indexOfLoose:function(b,e){if(null==b||void 0===b.length)return-1;if("string"===typeof b)return d.indexOfLoose(b.split(""),e);for(var c=0,h=b.length;c<h;c++)if(b[c]==e)return c;return-1},lastIndexOf:function(b,e){return null==b?-1:"string"===typeof b?m.lastIndexOf.call(b.split(""),e):m.lastIndexOf.call(b,
e)},lastIndexOfLoose:function(b,e){if(null==b||void 0===b.length)return-1;if("string"===typeof b)return d.lastIndexOfLoose(b.split(""),e);for(var c=b.length-1;0<=c;c--)if(b[c]==e)return c;return-1}};return d})},"widgets/BusinessAnalyst/esriAnalystX/utils/ObjectUtil":function(){define(["../../baUtil/ObjectUtil","esri/dijit/geoenrichment/utils/ObjectUtil","esri/dijit/geoenrichment/utils/SortUtil"],function(l,g,m){var d=Object.assign({},l,g,m);d.getPrototypeOf=function(b){try{return Object.getPrototypeOf?
Object.getPrototypeOf(b):b.__proto__||b.constructor&&b.constructor.prototype}catch(e){return null}};d.isJson=function(b){return"object"===typeof b&&d.getPrototypeOf(b)===Object.prototype};d.copyJson=function(b){return void 0===b||null===b?null:JSON.parse(JSON.stringify({object:b})).object};d.convert=function(b,e,c){var h=e||function(){};e=h(b);if("undefined"!==typeof e)return e;if(Array.isArray(b)){var a=[];b.forEach(function(b){a.push(d.convert(b,h,c))},this);return a}if(!d.isJson(b))return b;e=
{};for(var f in b){var g=b[f],k=c?h(f):f;"undefined"==typeof k&&(k=f);e[k]=d.convert(g,h,c)}return e};d.getDeepCopy=function(b){return d.convert(b)};d.getRange=function(b,e,c){e="function"===typeof e?e.bind(null==c?null:c):null;var d,a,f;for(f in b)c=b[f],c=Number(null===e?c:e(c,f)),isNaN(c)||(void 0===d?d=a=c:(d=Math.min(d,c),a=Math.max(a,c)));return void 0===d?{}:{min:d,max:a}};d.removeEmptyObjects=function(b){function e(b){b&&"object"===typeof b&&Object.keys(b).forEach(function(a){var f=b[a];!f||
"object"!==typeof f||Array.isArray(f)||Object.keys(f).length?e(f):(c=!0,delete b[a])})}for(var c=!0;c;)c=!1,e(b);return b};d.removeValues=function(b,e){function c(b){b&&"object"===typeof b&&Object.keys(b).forEach(function(a){e(a,b[a])?c(b[a]):delete b[a]})}c(b);return b};d.isEqual=function(b,e){if(null===b||"object"!==typeof b||null===e||"object"!==typeof e)return b===e;if(Object.keys(b).length!=Object.keys(e).length)return!1;var c={},h;for(h in b)c[h]=!0;for(h in e)if(void 0!==c[h])delete c[h];else return!1;
for(h in b)if(!d.isEqual(b[h],e[h]))return!1;return!0};d.getObject=function(b,e){if(!e)return b;e=e.split(".");for(var c=0;c<e.length;c++)b=b&&b[e[c]];return b};d.formatNumber=function(b,e){e="number"===typeof e?{places:e}:e||{};if(null==e.places||0>e.places)e.places=d.getPlaces(b,!0),e.maxPlaces&&e.places>e.maxPlaces&&(e.places=e.maxPlaces);return g.formatNumber(b,e)};d.getPlaces=function(b,e){function c(c,e){var f=b.indexOf(c,d);if(0>f)return a;c=b.charAt(f+c.length);return!c||0>e.indexOf(c)?a:
f-d}b=+b;if(isNaN(b))return-1;b+="";var d=b.indexOf(".")+1,a=d?b.length-d:0;if(2>=a||!e)return a;e=0;if(!+b.substr(0,d-1))for(;"0"===b.charAt(d);)d++,e++,a--;for(var f=a-1;2<=f;f--){var g=Math.min(c("000000000000000".substr(0,f),"01234"),c("999999999999999".substr(0,f),"56789"));if(g!==a){a=g;break}}return a+e};return d})},"widgets/BusinessAnalyst/baUtil/ObjectUtil":function(){define(["require","exports"],function(l,g){function m(d,b){for(var e=0,c=Object.keys(b);e<c.length;e++){var h=c[e];"object"!==
typeof d[h]||null===d[h]||"object"!==typeof b[h]||null===b[h]?d[h]=b[h]:Array.isArray(d[h])?Array.isArray(b[h])?d[h].concat(b[h]):d[h]=b[h]:Array.isArray(b[h])?d[h]=b[h]:m(d[h],b[h])}}return{map:function(d,b,e){void 0!==e&&(b=b.bind(e));if("object"!==typeof d)throw Error("Object or array expected");if(Array.isArray(d)){e=[];for(var c=0,h=d.length;c<h;c++)e.push(b(d[c],c));return e}e={};c=0;for(h=Object.keys(d);c<h.length;c++){var a=h[c];Object.hasOwnProperty.call(d,a)&&(e[a]=b(d[a],a))}return e},
deepAssign:function(d){for(var b=[],e=1;e<arguments.length;e++)b[e-1]=arguments[e];for(e=0;e<b.length;e++)m(d,b[e]);return d}}})},"esri/dijit/geoenrichment/utils/ObjectUtil":function(){define(["dojo/number"],function(l){var g={};Math.log10=Math.log10||function(d){return Math.log(d)*Math.LOG10E};g.populateObject=function(d,b,e){function c(b,a){function f(d){var f=b[d],k=a[d],h=f&&"object"===typeof f;void 0!==f&&(void 0===k?a[d]=f:k&&"object"===typeof k&&h?c(f,k):e&&(h?(k=a[d]={},c(f,k)):a[d]=b[d]))}
if(b&&a&&!(Array.isArray(b)&&!Array.isArray(a)||Array.isArray(a)&&!Array.isArray(b)))if(Array.isArray(b))b.forEach(function(a,b){f(b)});else for(var d in b)f(d)}c(b,d);return d};g.filterByPattern=function(d,b){function e(b,a,c){for(var d in b){var f=b[d],h=a[d];if(Array.isArray(f)){var g=f[0];if(h&&Array.isArray(h)){var l=c[d]=[];h.forEach(function(a){if(a&&"object"===typeof a){var b=Array.isArray(a)?[]:{};e(g,a,b);l.push(b)}})}}else if("object"===typeof f){if(h&&"object"===typeof h){var m=c[d]={};
e(f,h,m)}}else void 0!==h&&(c[d]=h)}}var c={};e(b,d,c);return c};g.traverseObject=function(d,b){for(var e in d){var c=d[e];b(c);c&&"object"===typeof c&&g.traverseObject(c,b)}};g.copyOwnJsonProperties=function(d,b,e){b=b||{};for(var c in d){var h=d[c];d.hasOwnProperty(c)&&"function"!=typeof h&&(h&&"object"==typeof h&&e&&(h=e(c,h)),void 0!==h&&(b[c]=h))}return b};g.removeUndefinedProperties=function(d){d&&Object.keys(d).forEach(function(b){void 0===d[b]&&delete d[b]});return d};g.roundNumber=function(d,
b){return"number"!==typeof d?d:parseFloat(d.toFixed(void 0!==b?b:0))};g.getBestPrecision=function(d){return 0===d?0:Math.max(0,Math.round(Math.log10(3E3/Math.abs(d))))};g.getPlaces=function(d,b){function e(a,b){var e=d.indexOf(a,c);if(0>e)return h;a=d.charAt(e+a.length);return!a||0>b.indexOf(a)?h:e-c}d=+d;if(isNaN(d))return-1;d+="";var c=d.indexOf(".")+1,h=c?d.length-c:0;if(2>=h||!b)return h;b=0;if(!+d.substr(0,c-1))for(;"0"===d.charAt(c);)c++,b++,h--;for(var a=h-1;2<=a;a--){var f=Math.min(e("000000000000000".substr(0,
a),"01234"),e("999999999999999".substr(0,a),"56789"));if(f!==h){h=f;break}}return h+b};g.formatNumber=function(d,b){b="number"===typeof b?{places:b}:b||{};var e=b.places,c={};0<=e?c.places=e:e=-1;d=l.format(d,c);if(b.noSeparator){void 0===m&&(m=l.format(9999,{places:0}).replace(/9/g,""));var c=m,h;if(c)for(;0<=(h=d.indexOf(c));)d=d.substr(0,h)+d.substr(h+1)}if(b.preserveTrailingZeroes||0>=e||!d)return d;for(b=d.length;0<e&&"0"==d.charAt(b-1);)b--,--e||b--;return d.substr(0,b)};g.formatNumberAsCurrency=
function(d,b,e){return b?b.split(";")[0>d?1:0].replace("0",g.formatNumber(Math.abs(d),e)):g.formatNumber(d,e)};var m;g.parseNumber=function(d,b,e,c){if(""===d)return"undefined"!==typeof e?e:NaN;if(null==d||"string"!==typeof d&&isNaN(d))return NaN;d=String(d);if(!d.trim())return void 0!==e?e:NaN;e=l.parse(d,{strict:c});isNaN(e)&&d.trim().length&&(e=c?l.parse(d,{strict:c,locale:"en-US"}):Number(d));return isNaN(e)||void 0===b||0>b?e:l.round(e,b)};g.parsePercentOrCurrency=function(d,b,e,c,h){"string"===
typeof d&&(d=d.replace("%",""),b&&(b=b.split(";")[0].replace("0",""),d=d.replace(b,"")));return g.parseNumber(d,e,c,h)};g.compareEqual=function(d,b,e){return void 0===e?d===b:Number(Number(d).toFixed(e))===Number(Number(b).toFixed(e))};g.objectToTime=function(d){if(!d)return null;d="string"===typeof d?new Date(d):d;return d.getTime?d.getTime():Number(d)||null};g.objectToDate=function(d){return d?d.getTime?d:new Date(d):null};return g})},"esri/dijit/geoenrichment/utils/SortUtil":function(){define([],
function(){function l(b,e,c,d){b=void 0===b||null===b;return b!=(void 0===e||null===e)?(e=b?-1:1,(void 0===d?c:d)?-e:e):b?0:null}function g(b){var e=/^(.+)\s([1-9]\d*)$/.exec(b);return e?{base:e[1],number:e[2]}:/^[1-9]\d*$/.test(b)?{base:"",number:+b}:{base:b,number:0}}var m={NEWEST:"newest",OLDEST:"oldest",ALPHABETICAL:"alphabetical",UNALPHABETICAL:"unalphabetical",compareNumeric:function(b,e,c,d){d=l(b,e,c,d);if(null!==d)return d;b=Number(b);e=Number(e);d=b>e?1:b<e?-1:0;return c?-d:d},compareString:function(b,
e,c,d){d=l(b,e,c,d);if(null!==d)return d;b=String(b);e=String(e);d=b.localeCompare(e);return c?-d:d}},d=/^(.+)\s([1-9]\d*)(\D*)$/;m.compareNames=function(b,e,c,h){var a=g("string"===typeof b?b.toLowerCase():b),f=g("string"===typeof e?e.toLowerCase():e),l=null;if(a.base===f.base)l=m.compareNumeric(a.number,f.number,c,h);else{var k=d.exec(a.base);if(k){var v=d.exec(f.base);v&&k[1]===v[1]&&k[3]===v[3]&&(l=m.compareNumeric(k[2],v[2],c,h))}null===l&&(l=m.compareString(a.base,f.base,c,h))}return l||m.compareString(b,
e,c,h)};m.compare=function(b,e,c,d){var a=l(b,e,c,d);if(null!==a)return a;a=typeof b;typeof e!=a&&(a="");switch(a){case "number":case "boolean":break;case "object":b=b.valueOf();e=e.valueOf();break;default:return m.compareString(b,e,c,d)}a=b>e?1:b<e?-1:0;return c?-a:a};return m})},"esri/dijit/geoenrichment/utils/ArrayUtil":function(){define(["dojo/_base/array"],function(l){var g={},m={}.toString();g.composeIdentityFunction=function(d,b){var e="function"===typeof d?d:d?function(b){return b[d]}:function(b){return b};
return function(c){return(c=e(c))&&c.toString?c.toString():b&&void 0===c?c:String(c)}};g.removeDuplicates=function(d,b){var e=[],c={};b=g.composeIdentityFunction(b,!0);l.forEach(d,function(d,a){var f=b(d);f===m&&(void 0===d["__ArrayUtil.js_uniqueKey__"]&&(d["__ArrayUtil.js_uniqueKey__"]="__ArrayUtil.js_uniqueKey__"+a),f=d["__ArrayUtil.js_uniqueKey__"]);void 0===f||f in c||(c[f]=d,e.push(d))});return e};g.splitArrayToBunches=function(d,b){b=b||100;for(var e=[],c,h=0,a=d.length;h<a;h++)c&&c.length!==
b||(c=[],e.push(c)),c.push(d[h]);return e};return g})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/DomUtil":function(){define("dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/dom-class dojo/on ../../utils/ObjectUtil esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(l,g,m,d,b,e,c){var h=Object.assign({},c);h.select=function(a){return h.addTag(a,"selected")};h.unselect=function(a){return h.removeTag(a,"selected")};h.floatStart=function(a){return h.addTag(a,"esriMapsAnalystXFloatStart")};
h.floatEnd=function(a){return h.addTag(a,"esriMapsAnalystXFloatEnd")};h.addSpacer=function(a,b){a=l.create("div",{"class":"esriMapsAnalystXSpacer",innerHTML:"\x26nbsp;"},a);if(b)h[b](a);return a};h.getAndUpdateNumber=function(a,b){if(!a)return NaN;var c=a.get&&a.set;void 0===b&&(b=0);var d=e.parseNumber(c?a.get("value"):a.value,b);isNaN(d)||(c?a.set("value",e.formatNumber(d,b)):a.value=e.formatNumber(d,b));return d};h.getAndUpdateString=function(a){if(!a)return null;if(a.get&&a.set){var b=a.get("value").trim();
a.set("value",b)}else b=a.value.trim(),a.value=b;return b};h.getScreenScaleFactor=function(){return h.getTextBox("",{style:"width: 72pt; height: 72pt"}).w/96};h.positionAtCenter=function(a,b){if(a&&b){var c=g.position(a);b=g.position(b);c.w&&c.h&&b.w&&b.h&&m.set(a,{left:(b.w-c.w)/2+"px",top:(b.h-c.h)/2+"px"})}};h.showAroundOverlay=function(a,c){c=c||{};h.removeAroundOverlay(a);var e={w:"width",h:"height",l:"left",t:"top",r:"right",b:"bottom"},d=g.position(a);if(c.viewPortContainer){var f=g.position(c.viewPortContainer),
p=d.x,q=d.y;d.x=Math.max(d.x,f.x);d.w-=d.x-p;d.y=Math.max(d.y,f.y);d.h-=d.y-q;d.w=Math.min(d.w,f.x+f.w-d.x);d.h=Math.min(d.h,f.y+f.h-d.y)}a.__aroundOverlays=(c.placeInNode?[{l:0,t:-d.y,w:d.w,h:d.y},{l:d.w,t:-d.y,w:document.body.clientWidth-(d.x+d.w),h:document.body.clientHeight},{l:0,t:d.h,w:d.w,h:document.body.clientHeight-(d.y+d.h)},{l:-d.x,t:-d.y,w:d.x,h:document.body.clientHeight}]:[{l:d.x,t:0,w:d.w,h:d.y},{w:document.body.clientWidth-(d.x+d.w),r:0,t:0,b:0},{l:d.x,h:document.body.clientHeight-
(d.y+d.h),w:d.w,b:0},{l:0,t:0,w:d.x,b:0}]).map(function(b){var d=l.create("div",{"class":c.overlayClass||"esriMapsAnalystXNodeAroundOverlay"},c.placeInNode?a:document.body),f={position:"absolute"},k;for(k in e)void 0!==b[k]&&(f[e[k]]=Math.round(b[k])+"px");m.set(d,f);return d});d=function(){h.removeAroundOverlay(a)};c.removeOnClick&&(a.__aroundOverlaysRemoveHandle=b.once(document.body,"click",d));a.__aroundOverlaysResizeHandle=b(window,"resize",function(){h.showAroundOverlay(a,c)});var r;a.__aroundOverlaysSetIntervalHandle=
setInterval(function(){if(r){var b=g.position(a);b.x==r.x&&b.y==r.y&&b.w==r.w&&b.h==r.h||h.showAroundOverlay(a,c)}else r=g.position(a)},50);return{remove:d}};h.removeAroundOverlay=function(a){a.__aroundOverlays&&a.__aroundOverlays.forEach(function(a){l.destroy(a)});delete a.__aroundOverlays;a.__aroundOverlaysRemoveHandle&&a.__aroundOverlaysRemoveHandle.remove();delete a.__aroundOverlaysRemoveHandle;a.__aroundOverlaysResizeHandle&&a.__aroundOverlaysResizeHandle.remove();delete a.__aroundOverlaysResizeHandle;
clearInterval(a.__aroundOverlaysSetIntervalHandle);delete a.__aroundOverlaysSetIntervalHandle};h.getDocumentStyleDeclaration=function(a){function b(c){var d;try{d=c.rules||c.cssRules}catch(r){d=null}if(d)for(c=0;c<d.length;c++){var e=d[c];if(e.styleSheet){if(e=b(e.styleSheet))return e}else if(e.selectorText==a)return e.style}}for(var c=0;c<document.styleSheets.length;c++){var d=b(document.styleSheets[c]);if(d)return d}return null};h.getNodeFontFamily=function(a){return(a=m.get(a,"fontFamily")||m.getComputedStyle(a)["font-family"])?
a.replace(/'|"/g,"").split(",")[0]:a};h.getNodeFontSize=function(a){return m.toPixelValue(a,m.get(a,"fontSize"))};h.listenToNodeAdded=function(a,b,c){if(h.isNodeInLayout(a))b();else{a.__listenToNodeAddedHandle&&a.__listenToNodeAddedHandle.remove();var d=setInterval(function(){h.isNodeInLayout(a)&&(a.__listenToNodeAddedHandle&&a.__listenToNodeAddedHandle.remove(),b())},c||100);a.__listenToNodeAddedHandle={remove:function(){clearInterval(d);delete a.__listenToNodeAddedHandle}};return a.__listenToNodeAddedHandle}};
h.isNodeVisible=function(a){return h.isChildOf(a,document.body,function(a){return!d.contains(a,"dijitHidden")&&"hidden"!=m.get(a,"visibility")})};h.enableHyperlink=function(a,b){b?d.replace(a,"esriMapsAnalystXLink","esriMapsAnalystXLinkDisabled"):d.replace(a,"esriMapsAnalystXLinkDisabled","esriMapsAnalystXLink")};return h})},"widgets/BusinessAnalyst/esriAnalystX/dijit/utils/MouseUtil":function(){define(["dojo/dom-geometry","esri/dijit/geoenrichment/utils/MouseUtil"],function(l,g){var m;g.unitTesting_setCursorOverNode=
function(d){d=l.position(d);g.unitTesting_setCursorPosition(d.x+d.w/2,d.y+d.h/2)};g.unitTesting_setCursorPosition=function(d,b){g._latestEvent={clientX:d,pageX:d,clientY:b,pageY:b}};g.unitTesting_lockPosition=function(d){m=d};g.unitTesting_shiftMousePosition=function(d,b){g.unitTesting_setCursorPosition(g._latestEvent.clientX+(d||0),g._latestEvent.clientY+(b||0))};g._setLatestEvent=function(d){m||(g._latestEvent=d)};return g})},"esri/dijit/geoenrichment/utils/MouseUtil":function(){define("dojo/_base/lang dojo/on dojo/sniff dojo/touch dojo/dom-geometry ./DomUtil dojo/domReady!".split(" "),
function(l,g,m,d,b,e){var c={_latestEvent:null,_setLatestEvent:function(a){c._latestEvent=a}};m("touch")?(g(document.body,d.press,function(a){c._setLatestEvent(c.fixTouchEvent(a,!0))}),g(document.body,d.move,function(a){c._setLatestEvent(c.fixTouchEvent(a,!0))})):g(document.body,"mousemove",function(a){c._setLatestEvent(c.fixTouchEvent(a,!0))});var h;g(document.body,"mousedown",function(){h||(h=!0,g.once(document.body,"mouseup, click",function(){h=!1}))});c.getCursorPosition=function(){return c._latestEvent};
c.isMouseOver=function(a,d){var f=d&&d.event||c._latestEvent;if(!(a&&a.parentNode&&a.getBoundingClientRect&&f))return!1;if(d&&d.checkAllChildren){d=l.mixin({},d);delete d.checkAllChildren;var k=!1;e.traverseChildren(a,function(a){if(c.isMouseOver(a,d))return k=!0});return k}return c.isMouseOverBox(b.position(a),d)};c.isMouseOverBox=function(a,b){if(!a)return!1;var d=b&&b.event||c._latestEvent;b&&b.ignoreBorderTolerance&&(b=b.ignoreBorderTolerance,a=l.mixin({},a),a.x+=b,a.y+=b,a.w-=2*b,a.h-=2*b);return a.x<=
d.clientX&&a.x+a.w>=d.clientX&&a.y<=d.clientY&&a.y+a.h>=d.clientY};c.fixTouchEvent=function(a,b){a=b?l.mixin({},a):a;a.touches&&1===a.touches.length?(b=a.touches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY):a.changedTouches&&1===a.changedTouches.length&&(b=a.changedTouches[0],a.clientX=b.clientX,a.clientY=b.clientY,a.pageX=b.pageX,a.pageY=b.pageY);return a};c.isBeingDragged=function(){return h};c.addOverOutHandler=function(a){function b(){clearTimeout(e);d&&d.remove()}
var d,e,h=g(a.node,"mouseover",function(f){function k(){c.isMouseOver(a.node)&&(a.onMouseOver(f),d=g(document.body,"mousemove",function(d){c.isMouseOver(a.node)||(b(),a.onMouseOut(d))}))}b();a.delayTimeout?e=setTimeout(k,a.delayTimeout):k()});return{remove:function(){h.remove();b()}}};c.addOutHandler=function(a,b){return g(document.body,"mousemove",function(d){c.isMouseOver(a,{checkAllChildren:!0})||b(d)})};return c})},"widgets/BusinessAnalyst/esriAnalystX/dijit/tooltips/TooltipUtil":function(){define("dojo/dom-construct dojo/dom-style dojo/dom-geometry dojo/dom-class dojo/query dojo/on dojox/gfx dojo/sniff dojo/aspect dojox/uuid/generateRandomUuid dijit/Tooltip ../utils/DomUtil ../utils/MouseUtil esri/dijit/geoenrichment/utils/TooltipUtil dojo/domReady!".split(" "),
function(l,g,m,d,b,e,c,h,a,f,n,k,v,p){function q(){x&&(x.isMultilineContainer?u.hideTooltipForNode(x):(clearInterval(x.__autoTooltipInLayoutCheckHandle),delete x.__autoTooltipInLayoutCheckHandle,n.hide(x)),x=null)}function r(a,b){b=b||"";var c=l.create("div",{class:"esriMapsAnalystXValidationTooltip"+b},document.body);!b&&l.create("div",{class:"esriMapsAnalystXValidationTooltipTip"+b},c);l.create("div",{innerHTML:a,class:"esriMapsAnalystXValidationTooltipBody"+b},c);g.set(c,"position","fixed");return c}
function t(a,b){function c(){a&&(document.body.removeChild(a),k.forEach(function(a){a.remove()}),a=k=null)}b=b.textbox||b;var d=m.getMarginBox(a),f=m.position(b);"rtl"===document.dir?g.set(a,{left:f.x-d.w+"px",top:f.y+f.h/2-d.h/2+"px"}):g.set(a,{left:f.x+f.w+"px",top:f.y+f.h/2-d.h/2+"px"});var k=[e(document.body,"mousedown, keydown",c),e(b,"blur",c)];return{remove:c}}function y(a,b,c){function e(){var a=l.create("div",{class:"esriMapsAnalystXClosableTooltipTip"},h);d.add(a,"right"===c?"esriMapsAnalystXClosableTooltipTipRight":
"esriMapsAnalystXClosableTooltipTipLeft")}function k(){m=l.create("div",{class:"esriMapsAnalystXClosableTooltipBody"},h);l.create("div",{innerHTML:a,class:"esriMapsAnalystXClosableTooltipLabel"},m);n=l.create("div",{class:"esriMapsAnalystXClosableTooltipCloseButton esriMapsAnalystXCloseWindow esriMapsAnalystXCloseWindowWhite"},m)}b={class:"esriMapsAnalystXClosableTooltip "+(b||"")};b.id=f();var h=l.create("div",b,document.body),m,n;"right"!==c?(k(),e()):(e(),k());g.set(h,"position","fixed");return{tooltip:h,
body:m,closeButton:n}}function B(a,b,c,d){var f=m.getMarginBox(a.tooltip),h=m.position(b);"rtl"===document.dir&&"right"!==d||"rtl"!==document.dir&&"right"===d?g.set(a.tooltip,{left:h.x+h.w+"px",top:h.y+h.h/2-f.h/2+"px"}):g.set(a.tooltip,{left:h.x-f.w+"px",top:h.y+h.h/2-f.h/2+"px"});var l,n,w,p=function(){l&&clearTimeout(l);n&&clearInterval(n);w&&w.remove();a.tooltip.parentNode===document.body&&document.body.removeChild(a.tooltip)};n=setInterval(function(){k.isNodeInLayout(b)||p();k.isNodeVisible(b)?
k.show(a.tooltip):k.hide(a.tooltip)},300);c&&(l=setTimeout(p,c));w=e(a.closeButton,"click",function(){p()});a.tooltip._removeFunc=p;return a.tooltip}var u={},A={};u.hideTooltipForNode=p.hideTooltipForNode;u.setTooltipToNode=p.setTooltipToNode;u.createTooltip=function(a,b,c){var d={orientation:m.isBodyLtr(document)?"right":"left",offset:{x:15,y:0}};b&&(d.innerHTML=b);c&&(d=Object.assign(d,c));d.id=f();d.toMouseCursor&&(d.mouseEvent=v.getCursorPosition(),delete d.toMouseCursor);b=d.mouseEvent;delete d.mouseEvent;
c=d.htmlFragment;delete d.htmlFragment;var k=d.widget;delete d.widget;var h=d.orientation;delete d.orientation;var n=d.offset;delete d.offset;var p=d.horizontalOffset;delete d.horizontalOffset;var w=l.create("div",d,a?a.container:document.body);c?l.place(c,w):k&&k.placeAt(w);g.set(w,"position","fixed");var q=m.getMarginBox(w),z=function(a,b){var c=a.touches?event.touches[0].clientX:a.clientX;a=a.touches?event.touches[0].clientY:a.clientY;var d,e,f=n.x,k=n.y;"left"===h?0>c-q.w-f&&(d="right"):c+q.w+
f>document.body.clientWidth&&(d="left");a+q.h+k>document.body.clientHeight&&(e="above");d=d||h;g.set(w,{left:b?b+"px":c+("left"===d?-q.w-f:f)+"px",top:a+("above"===e?-q.h-k:k)+"px"});w.style.display=""};b&&z(b,p);d=[];d.push(e(a?a:document.body,a?"mouse-move, mousemove":"mousemove, touchmove",function(a){z(a,p)}));d.push(e(a?a:document.body,a?"mouse-out, mouseout":"mouseout, touchend",function(a){w.style.display="none"}));a={};a.handlers=d;a.tooltip=w;A[w.id]=a;return w};u.removeTooltip=function(a){if(a){a=
"string"===typeof a?a:a.id;var b=A[a];delete A[a];b&&(b.handlers.forEach(function(a){a.remove()}),l.destroy(b.tooltip))}};var z={};u.registerTooltipForSlider=function(b,c,d,k){var h={offsetX:0,offsetY:0,class:"esriMapsAnalystXTooltip"};c&&(h=Object.assign(h,c));h.id=f();var n=l.create("div",h,document.body);n.style.display="none";g.set(n,"position","fixed");var p=!1,q=function(c,d){if(!p){p=!0;n.style.display="";n.innerHTML=d();var f=m.getMarginBox(n),k=m.position(c);g.set(n,{left:k.x+k.w/2-f.w/2+
h.offsetX+"px",top:k.y-f.h-5+h.offsetY+"px"});var l=[];l.push(a.after(b,"onChange",function(){n.innerHTML=d();k=m.position(c);g.set(n,{left:k.x+k.w/2-f.w/2+"px",top:k.y-f.h-5+"px"})}));var q=function(){n.style.display="none";l.forEach(function(a){a.remove()});p=!1},w=!1;l.push(e(c,"mousedown, mouseDown, mouse-down",function(){w=!0;l.push(e(document,"mouseup, mouseUp, mouse-up",function(){q()}))}));l.push(e(c,"mouseout, mouseOut, mouse-out",function(){w||q()}))}};c=[];c.push(e(b.sliderHandle,"mouseover, mouseOver, mouse-over",
function(){k&&b.isSliderDisabled&&b.isSliderDisabled()||q(b.sliderHandle,function(){var a=k?b.get("value")[0]:b.get("value");return d?d(a):a})}));k&&c.push(e(b.sliderHandleMax,"mouseover, mouseOver, mouse-over",function(){b.isSliderDisabled&&b.isSliderDisabled()||q(b.sliderHandleMax,function(){return d?d(b.get("value")[1]):b.get("value")[1]})}));c.push(a.before(b,"destroy",function(){u.unregisterTooltipForSlider(b)}));b.tooltipId=n.id;var w={};w.tooltip=n;w.handlers=c;z[n.id]=w};u.unregisterTooltipForSlider=
function(a){var b=z[a.tooltipId];b&&(b.handlers.forEach(function(a){a.remove()}),l.destroy(b.tooltip));delete z[a.tooltipId];delete a.tooltipId};var x=null;u.autoTooltip=function(a,b,c){"string"===typeof b&&(b=b.split(" ").filter(function(a){return a&&!!a.trim().length}));b=b||[];b.push("TrimWithEllipses");c=c||[];c.push("esriMapsAnalystXInfoIcon");for(var d=0;d<b.length;d++)e(a,"."+b[d]+":mouseover, "+b[d]+":touchstart, ",function(a){this!==x&&this.offsetWidth<this.scrollWidth&&!this.noAutoTooltip&&
(a=getComputedStyle(this).width,a=Number(a.substr(0,a.length-2)),0>a-Math.round(a)&&this.offsetWidth==this.scrollWidth-1||(q(),x=this,a=x.autoTooltip||x.textContent||x.value,x.title&&(a+=" ("+x.title+")"),a&&n.show(a,x,["above","below"]),e.once(x,"mouseout, touchstart, touchout",function(){q()}),x.__autoTooltipInLayoutCheckHandle=setInterval(function(){k.isNodeInLayout(x)||q()},500)))});if(h("touch"))for(d=0;d<c.length;d++)e(a,"."+c[d]+":touchstart ",function(a){this!==x&&(x=this,x.title&&(n.show(x.title,
x,["above","below"]),e.once(x,"touchstart, touchout",function(){n.hide(x);x=null})))})};u.addAutoTooltipsToTabContainer=function(a){b(".tabLabel",a.domNode).forEach(function(a){d.add(a,"TrimWithEllipses")});u.autoTooltip(a)};u.setMultilineText=function(a,b,c,e){c=c||2;b=b.trim();e=e||["above","below"];d.remove(a,"TrimWithEllipses");a.style.overflow="hidden";a.innerHTML="";for(var f=b,k=!1;f;){c--;var h=l.create("div",null,a);h.style.overflow="hidden";h.style.whiteSpace="nowrap";for(var g=f;g;)if(h.textContent=
g,h.offsetWidth<h.scrollWidth-1)g=(g=g.match(/^(.*[^\s]+)\s+[^\s]+$/))&&g[1]||"";else break;!g||!c&&g!==f?(h.textContent=f,f="",h.style.textOverflow="ellipsis",k=!0):f=f.substr(g.length).trim()}k&&u.setTooltipToNode(a,function(){q();x=a;x.isMultilineContainer=!0;return b},{position:e})};u.showErrorTip=function(a,b){return t(r(b),a.domNode||a)};u.showNewStyleErrorTip=function(a,b,c){return t(r(b,"NewStyle"+(c?" esriMapsAnalystXWarningStyle":"")),a.domNode||a)};u.showAlertTooltip=function(a){a&&a.node&&
a.message&&(n.show(a.message,a.node,a.position||["above","below"]),setTimeout(function(){n.hide(a.node)},a.timeout||5E3))};u.showClosableTooltip=function(a){var b=y(a.message,a.tooltipClass,a.position);return B(b,a.component,a.timeout,a.position)};u.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};u.showClosableTooltipOnVerticalBracket=function(a){var b=a.below||a.above,d=m.position(a.above,!0),f=m.position(b,!0),h="rtl"!==document.dir?"start"===a.direction:"end"===a.direction,
n=d.x+d.w*(h?0:1),d=d.y,p=f.y+f.h,q=l.create("div",{class:"esriMapsAnalystFlexibleTooltip_tooltip esriMapsAnalystXNonSelectable"},document.body),z=l.create("div",{class:"esriMapsAnalystFlexibleTooltip_surfaceContainer"},q),f={},n={top:d-2,left:n+(h?-3:3),height:p-d+4,width:10},r;for(r in n)f[r]=n[r]+"px";g.set(q,f);var t=c.createSurface(z,n.width,n.height);t.clear();t.createPolyline([{x:h?n.width:0,y:0},{x:h?0:n.width,y:0},{x:h?0:n.width,y:n.height},{x:h?n.width:0,y:n.height}]).setStroke({color:"#6E6E6E",
width:6});a.component=q;var h=y(a.message,a.tooltipClass,a.position),v=function(){clickHandler&&clickHandler.remove();u&&clearInterval(u);t&&t.clear();l.destroy(z);l.destroy(q)},u=setInterval(function(){k.isNodeInLayout(b)||v();k.isNodeVisible(b)?g.set(q,"visibility","visible"):g.set(q,"visibility","hidden")},300);a.timeout&&setTimeout(v,a.timeout);clickHandler=e(h.closeButton,"click",v);tooltip=B(h,a.component,a.timeout,a.position);var w=tooltip._removeFunc;tooltip._removeFunc=function(){w();v()};
return tooltip};return u})},"dojox/uuid/generateRandomUuid":function(){define(["./_base"],function(){dojox.uuid.generateRandomUuid=function(){function l(){for(var b=Math.floor(Math.random()%1*Math.pow(2,32)).toString(16);8>b.length;)b="0"+b;return b}var g=l(),m=l(),m=m.substring(0,4)+"-4"+m.substring(5,8),d=l(),d="8"+d.substring(1,4)+"-"+d.substring(4,8),b=l();return(g+"-"+m+"-"+d+b).toLowerCase()};return dojox.uuid.generateRandomUuid})},"dojox/uuid/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang"],
function(l){l.getObject("uuid",!0,dojox);dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};dojox.uuid.assert=function(g,l){if(!g)throw l||(l="An assert statement failed.\nThe method dojox.uuid.assert() was called with a 'false' value.\n"),Error(l);};dojox.uuid.generateNilUuid=function(){return dojox.uuid.NIL_UUID};dojox.uuid.isValid=
function(g){g=g.toString();var m=l.isString(g)&&36==g.length&&g==g.toLowerCase();if(m){g=g.split("-");var m=5==g.length&&8==g[0].length&&4==g[1].length&&4==g[2].length&&4==g[3].length&&12==g[4].length,d;for(d in g)var b=parseInt(g[d],16),m=m&&isFinite(b)}return m};dojox.uuid.getVariant=function(g){if(!dojox.uuid._ourVariantLookupTable){var l=dojox.uuid.variant,d=[];d[0]=l.NCS;d[1]=l.NCS;d[2]=l.NCS;d[3]=l.NCS;d[4]=l.NCS;d[5]=l.NCS;d[6]=l.NCS;d[7]=l.NCS;d[8]=l.DCE;d[9]=l.DCE;d[10]=l.DCE;d[11]=l.DCE;
d[12]=l.MICROSOFT;d[13]=l.MICROSOFT;d[14]=l.UNKNOWN;d[15]=l.UNKNOWN;dojox.uuid._ourVariantLookupTable=d}g=g.toString();g=g.charAt(19);g=parseInt(g,16);dojox.uuid.assert(0<=g&&16>=g);return dojox.uuid._ourVariantLookupTable[g]};dojox.uuid.getVersion=function(g){dojox.uuid.assert(dojox.uuid.getVariant(g)==dojox.uuid.variant.DCE,"dojox.uuid.getVersion() was not passed a DCE Variant UUID.");g=g.toString();g=g.charAt(14);return parseInt(g,16)};dojox.uuid.getNode=function(g){dojox.uuid.assert(dojox.uuid.getVersion(g)==
dojox.uuid.version.TIME_BASED,"dojox.uuid.getNode() was not passed a TIME_BASED UUID.");g=g.toString();return g.split("-")[4]};dojox.uuid.getTimestamp=function(g,l){dojox.uuid.assert(dojox.uuid.getVersion(g)==dojox.uuid.version.TIME_BASED,"dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.");g=g.toString();l||(l=null);switch(l){case "string":case String:return dojox.uuid.getTimestamp(g,Date).toUTCString();case "hex":var d=g.split("-");g=d[0];l=d[1];d=d[2];d=d.slice(1);g=d+l+g;dojox.uuid.assert(15==
g.length);return g;case null:case "date":case Date:return d=g.split("-"),g=parseInt(d[0],16),l=parseInt(d[1],16),d=(parseInt(d[2],16)&4095)<<16,d=4294967296*(d+l),d+=g,new Date(d/1E4-122192928E5);default:dojox.uuid.assert(!1,"dojox.uuid.getTimestamp was not passed a valid returnType: "+l)}};return dojox.uuid})},"esri/dijit/geoenrichment/utils/TooltipUtil":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/on dojo/mouse dojo/sniff dijit/Tooltip dijit/place ./DeviceUtil ./DnDUtil ./DomUtil ./MouseUtil dojo/domReady!".split(" "),
function(l,g,m,d,b,e,c,h,a,f,n,k,v,p,q){function r(){}var t={},y=l(f._MasterTooltip,{_customClasses:null,addCustomClasses:function(a){a&&(m.add(this.domNode,a),this._customClasses=a)},show:function(a,b,c,e,k,h,l){if(!this.aroundNode||this.aroundNode!==b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{"string"===typeof a?this.containerNode.innerHTML=a:(this.containerNode.innerHTML="",d.place(a.domNode,this.containerNode));k&&this.set("textDir",k);this.containerNode.align=
e?"right":"left";var m=n.around(this.domNode,b,c&&c.length?c:f.defaultPosition,!e,g.hitch(this,"orient")),p=m.aroundNodePos;"M"==m.corner.charAt(0)&&"M"==m.aroundCorner.charAt(0)?(this.connectorNode.style.top=p.y+(p.h-this.connectorNode.offsetHeight>>1)-m.y+"px",this.connectorNode.style.left=""):"M"==m.corner.charAt(1)&&"M"==m.aroundCorner.charAt(1)?this.connectorNode.style.left=p.x+(p.w-this.connectorNode.offsetWidth>>1)-m.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");
this.domNode.style.opacity="0";this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=h||r;this.onMouseLeave=l||r}},orient:function(c,d,e,f,k){this.connectorNode.style.top="";var h=f.h;f=f.w;c.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight",
"BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[d+"-"+e];this.addCustomClasses(this._customClasses);this.domNode.style.width="auto";var g=b.position(this.domNode);if(a("ie")||a("trident"))g.w+=2;b.setMarginBox(this.domNode,{w:Math.min(Math.max(f,1),g.w)});"B"==e.charAt(0)&&"B"==d.charAt(0)?(c=b.position(c),d=this.connectorNode.offsetHeight,c.h>h?(this.connectorNode.style.top=h-(k.h+d>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(k.h/2-d/2,
0),c.h-d)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,g.w-f)}}),B={show:function(a,b,c,d){c=c&&c.map(function(a){return{after:"after-centered",before:"before-centered"}[a]||a});var e=new y;e.addCustomClasses(d);e.show(a,b,c);return e}};t.setTooltipToNode=function(a,b,d){function e(){!f&&t.showTooltipForNode(a,b,d)}d=d||{};if(a&&(t.hideTooltipForNode(a),a.__setTooltipToNodeMouseEnterHandle&&a.__setTooltipToNodeMouseEnterHandle.remove(),
b)){var f=!1;k.isMobileDevice()?a.__setTooltipToNodeMouseEnterHandle=v.addNoDragClickHandler(a,e):a.__setTooltipToNodeMouseEnterHandle=c(a,h.enter,e);return{remove:function(){b=null;t.hideTooltipForNode(a)},suspend:function(){t.hideTooltipForNode(a);f=!0},resume:function(){f=!1}}}};t.showTooltipForNode=function(a,b,d){function e(){t.hideTooltipForNode(a);var b=Array.isArray(d.classes)?d.classes.join(" "):d.classes,b=(b||"")+" esriGETooltip";d.notRestricted&&(b+=" notRestricted");a._shownTooltip=g=
B.show(f,a,d.position||["after","before"],b)}if(a){t.hideTooltipForNode(a);var f="function"==typeof b?b():b;if(f){d.textAlign&&(f="\x3cdiv class\x3d'"+("start"===d.textAlign?"esriGEStart":"end"===d.textAlign?"esriGEEnd":"")+"'\x3e"+f+"\x3c/div\x3e");m.add(a,"esriGESimpleTextTooltip");var g;e();var l=t.hideTooltipForNode.bind(t,a);k.isMobileDevice()?a.__setTooltipToNodeMouseLeaveHandle=c(document.body,"touchstart",function(b){q.isMouseOver(a,{event:b})||l()}):a.__setTooltipToNodeMouseLeaveHandle=c.once(a,
h.leave,function(){!d.stayOnHover&&l()});d.ignoreNodeRemoval||(a.__setTooltipToNodeInLayoutHandle=setInterval(function(){!p.isNodeInLayout(a)&&l()},300));k.isMobileDevice()||(a.__setTooltipToNodeMouseOverHandle=setInterval(function(){d.stayOnHover&&q.isMouseOver(g.domNode)||q.isMouseOver(a)||l()},300),a.__setTooltipToNodeClickHandle=c(a,"click",function(b){d.hideOnClick?l():!a._shownTooltip&&e()}),d.stayOnHover&&(a.__setTooltipToNodeMouseLeaveMasterHandle=c(g.domNode,h.leave,l)));return a._shownTooltip}}};
t.hideTooltipForNode=function(a){a&&(delete a.title,m.remove(a,"esriGESimpleTextTooltip"),a._shownTooltip&&a._shownTooltip.destroy(),delete a._shownTooltip,a.__setTooltipToNodeMouseLeaveHandle&&a.__setTooltipToNodeMouseLeaveHandle.remove(),clearInterval(a.__setTooltipToNodeInLayoutHandle),clearInterval(a.__setTooltipToNodeMouseOverHandle),a.__setTooltipToNodeClickHandle&&a.__setTooltipToNodeClickHandle.remove(),a.__setTooltipToNodeMouseLeaveMasterHandle&&a.__setTooltipToNodeMouseLeaveMasterHandle.remove())};
var u,A;t.autoTooltip=function(a){c(a,".TrimWithEllipses:mouseover",function(){if(this!==u&&this.offsetWidth<this.scrollWidth){var a=function(){u=null;A&&(A.tooltip.destroy(),A.mouseOutH.remove(),A.mouseMoveH.remove(),A=null)};a();u=this;A={tooltip:B.show(u.textContent,u,["above","below"]),mouseOutH:c.once(u,"mouseout, mousedown, touchstart",a),mouseMoveH:c(document.body,"mousemove",function(){q.isMouseOver(u)||a()})}}})};t.showClosableTooltip=function(a){var b=t._createClosableTooltip(a.message,
a.tooltipClass,a.position);return t._placeClosableTooltip(b,a.node,a.timeout,a.position,a.onClosed)};t.removeClosableTooltip=function(a){a&&a._removeFunc&&a._removeFunc()};t._createClosableTooltip=function(a,b,c){function e(){var a=d.create("div",{"class":"esriGEClosableTooltipTip"},k);m.add(a,"right"===c?"esriGEClosableTooltipTipRight":"esriGEClosableTooltipTipLeft")}function f(){h=d.create("div",{"class":"esriGEClosableTooltipBody"},k);d.create("div",{innerHTML:a,"class":"esriGEClosableTooltipLabel"},
h);g=d.create("div",{"class":"esriGEClosableTooltipCloseButton"},h)}var k=d.create("div",{"class":"esriGEClosableTooltip esriGENonSelectable "+(b||"")},document.body),h,g;"right"!==c?(f(),e()):(e(),f());k.style.position="fixed";return{tooltip:k,body:h,closeButton:g}};t._placeClosableTooltip=function(a,d,f,k,h){function g(){var c=b.position(d),f=c.x+";"+c.y+";"+c.w+";"+c.h;f!==n&&(n=f,f=b.getMarginBox(a.tooltip),e.set(a.tooltip,{left:(l?c.x+c.w:c.x-f.w)+"px",top:c.y+c.h/2-f.h/2+"px"}))}var l="rtl"===
document.dir&&"right"!==k||"rtl"!==document.dir&&"right"===k,n;g();var m,q,r,t,v,u=function(){m&&clearTimeout(m);q&&clearInterval(q);r&&clearInterval(r);t&&t.remove();a.tooltip.parentNode&&a.tooltip.parentNode.removeChild(a.tooltip)};q=setInterval(function(){p.isNodeInLayout(d)||(v=!1,u());p.isNodeVisible(d)&&p.isNodeOnscreen(d)?(v=!0,p.show(a.tooltip)):(v=!1,p.hide(a.tooltip))},300);r=setInterval(function(){v&&g()},0);f&&(m=setTimeout(u,f));t=c(a.closeButton,"click",function(){u();h&&h()});a.tooltip._removeFunc=
u;return a.tooltip};return t})},"esri/dijit/geoenrichment/utils/DnDUtil":function(){define(["dojo/on","dojo/sniff","./DeviceUtil","./KeyboardUtil"],function(l,g,m,d){var b={MOBILE_TOLERANCE:10,LONG_PRESS_TIMEOUT:500,addNoDragClickHandler:function(d,c,h){h=h||{};return m.isMobileDevice()?b._addMobile(d,c,h):b._addPC(d,c,h)},_addPC:function(b,c,h){var a=h.tolerance||0,e,g,k=l(b,"mousedown",function(b){g&&g.remove();var f=b.clientX,k=b.clientY,h;e=l(document.body,"mousemove",function(a){if(!a.shiftKey&&
!d.isCtrl(a)){var b=a.clientY;if(0<Math.abs(a.clientX-f)||0<Math.abs(b-k))h=!0}});g=l.once(document.body,"mouseup",function(b){e.remove();var d=b.clientX,g=b.clientY;!h&&Math.abs(d-f)<=a&&Math.abs(g-k)<=a&&c(b)})});return{remove:function(){e&&e.remove();g&&g.remove();k&&k.remove()}}},_addMobile:function(d,c,h){function a(){k&&k.remove();m&&m.remove();p&&p.remove();clearTimeout(q)}var e=h.tolerance||b.MOBILE_TOLERANCE,g,k,m,p,q;g=l(d,"touchstart",function(f){function g(a){return Math.abs(f.clientX-
a.clientX)<e&&Math.abs(f.clientY-a.clientY)<e}a();var n;if(h.detectLongPress){var r;m=l(d,"touchmove",function(a){r=a});q=setTimeout(function(){g(r||f)&&(h.ignoreReleaseIfLongPressHappened&&(n=!0),h.longPressCallback(f))},h.longPressTimeout||b.LONG_PRESS_TIMEOUT)}k=l.once(d,"touchend",function(b){!n&&g(b)&&c(b);a()});p=l.once(d,"touchcancel",a)});return{remove:function(){g&&g.remove();a()}}},addGlobalDragHanlder:function(b){function c(){e&&e.remove();a&&a.remove();f&&f.remove();n&&n.remove();k&&b.destroyDnDBox&&
b.destroyDnDBox(k)}b.tolerance=0<b.tolerance?b.tolerance:5;var e,a,f,n,k;return l(b.node,b.downEventName||m.press,function(h){c();if(!b.onMouseDown||b.onMouseDown(h)){var p=h.clientX,q=h.clientY,r=p,v=q;e=l(document.body,m.move,function(h){h.shiftKey||d.isCtrl(h)||!(Math.abs(p-h.clientX)>=b.tolerance||Math.abs(q-h.clientY)>=b.tolerance)||(e.remove(),b.dragStarted&&!b.dragStarted(h,h.clientX-r,h.clientY-v))||(r=h.clientX,v=h.clientY,k=b.createDnDBox&&b.createDnDBox(),a=l(document.body,m.move,function(a){b.dragMoved&&
b.dragMoved(a,a.clientX-r,a.clientY-v);r=a.clientX;v=a.clientY}),f=l.once(document.body,g("ie")||g("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){c();b.dragEnded&&b.dragEnded()}),n=l(document.body,"keyup",function(a){27==a.keyCode&&(c(),b.dragCanceled&&b.dragCanceled())}))});l.once(document.body,g("ie")||g("trident")?"mouseup, touchend, click":"mouseup, touchend",function(){e.remove()})}})}};return b})},"widgets/BusinessAnalyst/utils/GEUtil":function(){define(["dojo/_base/array",
"esri/request","esri/dijit/geoenrichment/utils/FileUtil","jimu/portalUtils"],function(l,g,m,d){return{getAvailableCountries:function(){return d.getPortal(portalUrl).loadSelfInfo().then(function(b){return g({url:(b&&b.helperServices&&b.helperServices.geoenrichment&&b.helperServices.geoenrichment.url?b.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Countries",content:{appID:"webappbuilder",f:"json",langCode:"en-us"},handleAs:"json"})})},
createRingOrDriveTimes:function(b){return d.getPortal(portalUrl).loadSelfInfo().then(function(d){return g({url:(d&&d.helperServices&&d.helperServices.geoenrichment&&d.helperServices.geoenrichment.url?d.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/Enrich",content:{appID:"webappbuilder",f:"json",langCode:"en-us",useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreasOptions:JSON.stringify(b.studyAreasOptions),
dataCollections:JSON.stringify(["GlobalIntersect"]),returnGeometry:!0,outSR:JSON.stringify({wkid:102100}),studyAreas:JSON.stringify([{geometry:b.geometry}]),token:esri.id.credentials[0].token},handleAs:"json"})})},createReport:function(b){var e={appID:"webappbuilder",langCode:"en-us",report:"string"===typeof b.report?b.report:JSON.stringify(b.report),format:"pdf",f:"bin",token:esri.id.credentials[0].token,useData:JSON.stringify({sourceCountry:b.sourceCountry}),studyAreas:JSON.stringify(b.studyAreas),
reportFields:JSON.stringify({locationname:b.locationName,latitude:b.lat,longitude:b.long,subtitle:"Prepared by Esri",areadesc2:b.areadesc2})};return d.getPortal(portalUrl).loadSelfInfo().then(function(c){return g({url:(c&&c.helperServices&&c.helperServices.geoenrichment&&c.helperServices.geoenrichment.url?c.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver")+"/Geoenrichment/createReport",content:e,handleAs:"blob"}).then(function(c){return m.saveAs(c,
b.reportDownloadName)}).otherwise(function(b){alert("Error: "+b)})})},hasGEPrivilege:function(){return d.getPortal(portalUrl).loadSelfInfo().then(function(b){var d=!1,c=!1;l.forEach(b&&b.user&&b.user.privileges,function(b){"premium:user:geoenrichment"==b?d=!0:"premium:user:networkanalysis"==b&&(c=!0)});return d&&c})}}})},"esri/dijit/geoenrichment/utils/FileUtil":function(){define(["esri/dijit/geoenrichment/Deferred","./DataUtil","./ImageUtil"],function(l,g,m){function d(){return new l.reject(Error("Saving not supported."))}
var b=d,e=/[\\/:*?"<>|]/g,c={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(a,b,e){return c.savingSupported()?c.saveAs(new Blob([a],{type:e||"text/plain"}),b||"text.txt"):d()},saveImageFile:function(a,b){if(c.savingSupported()){var e;"string"===typeof a?(e=m.base64DataFromDataURL(a),e=g.binaryStringToByteArray(atob(e)).buffer):a instanceof ArrayBuffer&&(e=a);return c.saveAs(e?g.arrayBuffersToBlob([e],"image/png"):a,b)}d()},saveAs:function(a,d){return b(a,c.validateName(d||
"download"))},validateName:function(a){return String(a).trim().replace(e,"")}};if(!c.savingSupported())return c;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return b=function(a,b){var c=new l;window.navigator.msSaveOrOpenBlob(a,b)?c.resolve():c.reject(Error("Failed to save or open downloaded file."));return c.promise},c;var h=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var a=function(a){var b;void 0!==window.MouseEvent?b=new MouseEvent("click",{bubbles:!0,
cancelable:!1}):(b=document.createEvent("MouseEvent"),b.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null));a.dispatchEvent(b)},b=function(b,c){var d=new l,e=h.createObjectURL(b);b=window.document.createElement("a");b.href=e;b.download=c;a(b);setTimeout(function(){h.revokeObjectURL(e);d.resolve()},1E3);return d.promise};return c}b=function(a,b){var c=new l;a=new File([a],b,{type:a.type});var d=h.createObjectURL(a);window.open(d,"_blank");setTimeout(function(){h.revokeObjectURL(d);c.resolve()},
1E3);return c.promise};return c})},"esri/dijit/geoenrichment/utils/DataUtil":function(){define(["esri/dijit/geoenrichment/Deferred","esri/dijit/geoenrichment/when"],function(l,g){function m(b){return"string"==typeof b?{source:b,getLength:function(){return this.source.length},getByte:function(b){return this.source.charCodeAt(b)&255}}:window.ArrayBuffer&&b instanceof ArrayBuffer?{source:new Uint8Array(b),getLength:function(){return this.source.byteLength},getByte:function(b){return this.source[b]}}:
b}function d(b){for(var c=b.length,a=new Uint8Array(b.length),d=0;d<c;d++)a[d]=b.charCodeAt(d);return a}function b(b,d){b=new Uint8Array(b);d=Math.min(d,b.byteLength);for(var a="",c=0;c<d;c++)a+=String.fromCharCode(b[c]);return a}var e={arrayBufferFromBlob:function(b){var c=new l,a=new FileReader;a.onloadend=function(){a.error?c.reject(a.error):c.resolve(a.result)};a.readAsArrayBuffer(b);return c.promise},arrayBuffersToBlob:function(b,d){return new Blob(b,{type:d||"application/octet-stream"})},binaryStringFromByteSource:function(b){if("string"==
typeof b)return b;b=m(b);for(var c=b.getLength(),a=c%4,c=c-a,d="",e=0,k,g,l,q;e<c;)k=b.getByte(e++),g=b.getByte(e++),l=b.getByte(e++),q=b.getByte(e++),d+=String.fromCharCode(k,g,l,q);1==a?d+=String.fromCharCode(b.getByte(e)):2==a?d+=String.fromCharCode(b.getByte(e),b.getByte(e+1)):3==a&&(d+=String.fromCharCode(b.getByte(e),b.getByte(e+1),b.getByte(e+2)));return d},base64FromByteSource:function(b){b=m(b);for(var c=b.getLength(),a=c%3,c=c-a,d,e,k,g,l="",q=0;q<c;q+=3)g=b.getByte(q)<<16|b.getByte(q+1)<<
8|b.getByte(q+2),d=g>>18&63,e=g>>12&63,k=g>>6&63,g&=63,l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[d]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[k]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g];1==a?(g=b.getByte(q),l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>2&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g<<
4&63]+"\x3d\x3d"):2==a&&(g=b.getByte(q)<<8|b.getByte(q+1),l+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>10&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g>>4&63]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[g<<2&63]+"\x3d");return l}};e.binaryStringToByteArray=d;e.base64ToByteArray=function(b){return d(atob(b))};e.getFirstBytes=function(c,d){var a;if("string"==typeof c)a=c.substr(0,d);else if(window.ArrayBuffer&&c instanceof
ArrayBuffer)a=b(c,d);else if(window.Blob&&c instanceof Blob){a=new l;var e=new FileReader;e.onloadend=function(){e.error?a.resolve(""):a.resolve(b(e.result,d))};e.readAsArrayBuffer(c.slice(0,d))}return g(a||"")};e.isBase64=function(b){return b&&0==b.length%4&&/^[ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+\/]+$/.test(b.replace(/={0,2}$/,""))};e.getContentType=function(b){var c=b.lastIndexOf(".")+1;if(!c)return null;switch(b.substr(c).toLowerCase()){case "png":return"image/png";
case "jpg":case "jpeg":return"image/jpeg";case "gif":return"image/gif";case "json":return"application/json";case "txt":return"text/plain";case "xml":return"text/xml";default:return null}};return e})},"esri/dijit/geoenrichment/when":function(){define(["dojo/when"],function(l){return l})},"esri/dijit/geoenrichment/utils/ImageUtil":function(){define(["esri/dijit/geoenrichment/Deferred","dojo/dom-construct","esri/dijit/geoenrichment/when"],function(l,g,m){var d={base64DataToDataURL:function(b,e){if(/^data:image/.test(b))return b;
e||(e=atob(b.substr(0,16)),e=d.getImageContentType(e));return"data:"+(e||"image/png")+";base64,"+b},getImageContentType:function(b){if("\u00ff\u00d8\u00ff"==b.substr(0,3)&&"JFIF"==b.substr(6,4))return"image/jpeg";if("\u0089PNG\r\n\u001a\n"==b.substr(0,8))return"image/png";if("GIF89a"==b.substr(0,6)||"GIF87a"==b.substr(0,6))return"image/gif"},base64DataFromDataURL:function(b){0==b.indexOf("data:")&&(b=b.substr(b.indexOf(",")+1));return b},getBase64DataIndex:function(b){b=0==b.indexOf("data:")?b.indexOf(";base64,"):
-1;return 0<b?b+8:0},getContentType:function(b){var e=d.getBase64DataIndex(b);return e?b.substring(5,e-8):null},checkBase64FileSize:function(b,e){return d.getBase64FileSize(b)<=e},getBase64FileSize:function(b){return.75*b.length},imageToDataURL:function(b,d){d=d||{};var c=document.createElement("canvas"),e=c.getContext("2d");c.width=d.width||b.width;c.height=d.height||b.height;var a=d.opacity;null!=a&&!isNaN(a)&&0<=a&&1>a&&(e.globalAlpha=+a,d.format="image/png");(a=d.pos)?e.drawImage(b,a.x||0,a.y||
0):e.drawImage(b,0,0,c.width,c.height);return c.toDataURL(d.format)},imageFromUrl:function(b){var d=new l,c=new Image;0!==b.indexOf("data:")&&c.setAttribute("crossOrigin","anonymous");c.onload=function(){c.width&&c.height?d.resolve(c):d.reject(Error("Error of reading an image from URL."));g.destroy(c)};c.onerror=function(b){d.reject(b);g.destroy(c)};c.src=require.toUrl(b);return d.promise},scaleImage:function(b,e){if("string"===typeof b)var c=d.base64DataToDataURL(b),g=d.getContentType(c),c=d.imageFromUrl(c);
return m(c||b).then(function(a){var b=1,c=a.width,k=a.height;if(e.factor)b=e.factor;else if(e.maxDim)b=e.maxDim/Math.max(c,k);else if(e.imageDim){var h=e.imageDim.w,l=e.imageDim.h;e.imageDim.preserveRatio?(b=Math.min(h/c,l/k),e.imageDim.reduceOnly&&1<b&&(b=1)):e.imageDim.reduceOnly?(c=Math.min(c,h),k=Math.min(k,l)):(c=h,k=l)}return d.imageToDataURL(a,{width:c*b,height:k*b,format:e.format||g,opacity:e.opacity})})}};return d})},"widgets/BusinessAnalyst/utils/ReportUtil":function(){define("dojo/Deferred dojo/promise/all dojo/when dojo/_base/array esri/request jimu/portalUtils dojo/i18n!../nls/strings".split(" "),
function(l,g,m,d,b,e,c){STANDARD_INFOGRAPHIC_TYPEKEYWORD="esriReportPlayerStandardInfographic";var h=[];h.US=["LANDSCAPESUMMARYREPORT"];return{_ownedCachedCustomReports:null,_sharedCachedCustomReports:null,_cachedCountryClassicReports:[],_cachedInfographicReports:null,_countryInitDfds:[],getAvailableClassicReports:function(a,b){var e=this,f=[],g=new l,p;b&&d.forEach(b.countryConfig,function(b){a==b.countryID&&(p=b)});p||(p={countryID:a,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,
allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],disabledInfographics:[]});var q=null,r=null,t=null;p.allowEsriReports&&(q=f.length,f.push({value:"esriReports",label:c.esriReports,children:[]}));p.allowMyReports&&(r=f.length,f.push({value:"myReports",label:c.myReports,children:[]}));p.allowSharedReports&&(t=f.length,f.push({value:"sharedReports",label:c.sharedReports,children:[]}));m(this._initReports(a),function(){p.allowEsriReports&&e._cachedCountryClassicReports[a]&&
0<e._cachedCountryClassicReports[a].length&&d.forEach(e._cachedCountryClassicReports[a],function(b){p.disabledReports.includes(b.reportID)||h[a]&&h[a].includes(b.reportID.toUpperCase())||f[q].children.push(e._formatClassicReportsForDropDown(b))});var b=["esriWebInfographicReport","esriWebSingleInfographic","esriWebBlankInfographic","esriWebHiddenInfographic","esriWebComparisonReport"];p.allowMyReports&&d.forEach(e._ownedCachedCustomReports,function(c){c.properties.countries.includes(a)&&!p.disabledReports.includes(c.id)&&
(c.typeKeywords.some(function(a){return 0<=b.indexOf(a)})||f[r].children.push(e._formatClassicReportsForDropDown(c)))});p.allowSharedReports&&d.forEach(e._sharedCachedCustomReports,function(c){c.properties.countries.includes(a)&&!p.disabledReports.includes(c.id)&&(c.typeKeywords.some(function(a){return 0<=b.indexOf(a)})||f[t].children.push(e._formatClassicReportsForDropDown(c)))});var c=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<f.length&&
f[0].children.sort(c);1<f.length&&f[1].children.sort(c);2<f.length&&f[2].children.sort(c);g.resolve(f)});return g},_formatClassicReportsForDropDown:function(a){return a.metadata?{label:a.metadata.title,value:a.reportID,reportType:a.metadata.type}:{label:a.title,value:a.id,reportType:a.properties.type,item:{itemid:a.id,url:portalUrl,token:esri.id.credentials[0].token}}},getAvailableInfographicReports:function(a,b){var e=this,f=[],g=new l,h;b&&d.forEach(b.countryConfig,function(b){a==b.countryID&&(h=
b)});h||(h={countryID:a,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],disabledInfographics:[]});var q=null,r=null,t=null;h.allowEsriInfographics&&(q=f.length,f.push({value:"esriReports",label:c.esriInfographics,children:[]}));h.allowMyInfographics&&(r=f.length,f.push({value:"myReports",label:c.myInfographics,children:[]}));h.allowSharedInfographics&&(t=f.length,f.push({value:"sharedReports",
label:c.sharedInfographics,children:[]}));m(this._initReports(a),function(){h.allowEsriInfographics&&d.forEach(e._cachedInfographicReports,function(b){b.properties.countries.includes(a)&&!h.disabledInfographics.includes(b.id)&&f[q].children.push(e._formatInfographicReportsForDropDown(b))});h.allowMyInfographics&&d.forEach(e._ownedCachedCustomReports,function(b){b.properties.countries.includes(a)&&!h.disabledInfographics.includes(b.id)&&(b.typeKeywords.includes("esriWebInfographicReport")||e._isOldPortalInfographic(b))&&
f[r].children.push(e._formatInfographicReportsForDropDown(b))});h.allowSharedInfographics&&d.forEach(e._sharedCachedCustomReports,function(b){b.properties.countries.includes(a)&&!h.disabledInfographics.includes(b.id)&&(b.typeKeywords.includes("esriWebInfographicReport")||e._isOldPortalInfographic(b))&&f[t].children.push(e._formatInfographicReportsForDropDown(b))});var b=function(a,b){a=a.label.toUpperCase();b=b.label.toUpperCase();var c=0;a>b?c=1:a<b&&(c=-1);return c};0<f.length&&f[0].children.sort(b);
1<f.length&&f[1].children.sort(b);2<f.length&&f[2].children.sort(b);g.resolve(f)});return g},_isOldPortalInfographic:function(a){return a.properties&&a.properties.isHidden&&"true"==a.properties.isHidden?!1:a.properties&&a.properties.isGraphicReport&&"true"==a.properties.isGraphicReport?!0:!1},_formatInfographicReportsForDropDown:function(a){return{label:a.title,value:a.id}},_initReports:function(a){var c=[],h=this;if(this._countryInitDfds[a])return this._countryInitDfds[a];this._countryInitDfds[a]=
new l;e.getPortal(portalUrl).loadSelfInfo().then(function(e){e=e&&e.helperServices&&e.helperServices.geoenrichment&&e.helperServices.geoenrichment.url?e.helperServices.geoenrichment.url:"https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver";h._cachedCountryClassicReports[a]||c.push(b({url:e+"/Geoenrichment/reports/"+a,content:{appID:"webappbuilder",f:"json",langCode:"en-us"}}).then(function(b){h._cachedCountryClassicReports[a]=b.reports},function(a){alert(a)}));h._cachedInfographicReports||
(h._cachedInfographicReports=[],c.push(b({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:"typekeywords:(esriReportPlayerStandardInfographic jsapiVersion3.29)"}}).then(function(a){d.forEach(a.results,function(a){h._cachedInfographicReports.push(a)})},function(a){alert(a)})));h._ownedCachedCustomReports||(h._ownedCachedCustomReports=[],c.push(b({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",
start:1,num:100,sortField:"modified",sortOrder:"desc",q:'type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) owner:'+esri.id.credentials[0].userId}}).then(function(a){d.forEach(a.results,function(a){h._ownedCachedCustomReports.push(a)})},function(a){alert(a)})));h._sharedCachedCustomReports||(h._sharedCachedCustomReports=[],c.push(b({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:shared type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+
esri.id.credentials[0].userId}}).then(function(a){d.forEach(a.results,function(a){h._sharedCachedCustomReports.push(a)})},function(a){alert(a)})),c.push(b({url:portalUrl+"/sharing/rest/search",content:{appID:"webappbuilder",f:"json",start:1,num:100,sortField:"modified",sortOrder:"desc",q:'access:org type:"Report Template" typekeywords:(esriWebReport NOT esriWebSingleInfographic) NOT owner:'+esri.id.credentials[0].userId}}).then(function(a){d.forEach(a.results,function(a){h._sharedCachedCustomReports.push(a)})},
function(a){alert(a)})));0===c.length?h._countryInitDfds[a].resolve():g(c).then(function(){h._countryInitDfds[a].resolve()})});return this._countryInitDfds[a]}}})},"widgets/BusinessAnalyst/utils/ValidationUtil":function(){define(["dojo/dom-class"],function(l){return{MIN_RINGS_VALUE:0,MAX_RINGS_VALUE:1E3,MIN_DTWT_VALUE:0,MAX_DTWT_VALUE:300,validateInvalidValues:function(g,m,d,b,e){var c=g.get("value"),h=m.get("value"),a=d.get("value"),f=!0;0<c.length&&null===this._tryParseFloat(c)?(f=!1,l.remove(b,
"hidden"),b.innerHTML=e,l.add(g.domNode,"invalidValue")):l.remove(g.domNode,"invalidValue");0<h.length&&null===this._tryParseFloat(h)?(f=!1,l.remove(b,"hidden"),b.innerHTML=e,l.add(m.domNode,"invalidValue")):l.remove(m.domNode,"invalidValue");0<a.length&&null===this._tryParseFloat(a)?(f=!1,l.remove(b,"hidden"),b.innerHTML=e,l.add(d.domNode,"invalidValue")):l.remove(d.domNode,"invalidValue");f&&l.add(b,"hidden");return f},validateMinMaxValues:function(g,m,d,b,e,c,h){var a=g.get("value"),f=m.get("value"),
n=d.get("value"),k=!0;0<a.length?(a=parseFloat(a),a<b||a>e?(k=!1,l.remove(c,"hidden"),c.innerHTML=h,l.add(g.domNode,"invalidValue")):l.remove(g.domNode,"invalidValue")):l.remove(g.domNode,"invalidValue");0<f.length?(a=parseFloat(f),a<b||a>e?(k=!1,l.remove(c,"hidden"),c.innerHTML=h,l.add(m.domNode,"invalidValue")):l.remove(m.domNode,"invalidValue")):l.remove(m.domNode,"invalidValue");0<n.length?(a=parseFloat(n),a<b||a>e?(k=!1,l.remove(c,"hidden"),c.innerHTML=h,l.add(d.domNode,"invalidValue")):l.remove(d.domNode,
"invalidValue")):l.remove(d.domNode,"invalidValue");k&&l.add(c,"hidden");return k},_tryParseFloat:function(g){var l=null;null!==g&&0<g.length&&(isNaN(g)||(l=parseFloat(g)));return l}}})},"widgets/BusinessAnalyst/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/BusinessAnalyst/esriAnalystX/widgets/SelectableTreeGrid/templates/SelectableTreeGrid.html":'\x3cdiv class\x3d"esriMapsAnalystXNonSelectable"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"gridContainer"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"selectionCounter" class\x3d"esriMapsAnalystXSelectableTreeCounter"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/Setting.html":'\x3cdiv\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"reportInfographicTabContainer" style\x3d"width: 100%; height: 520px;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"infographicsContentPane" title\x3d"${nls.infographics}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledInfographicsOption"\r\n                        data-dojo-attach-point\x3d"disabledInfographicsOption"\x3e\r\n                    \x3clabel for\x3d"disabledInfographicsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountry}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerInfographics"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv\x3e${nls.defineWhichInfographics}\x3c/div\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"infographicTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportsContentPane" title\x3d"${nls.reports}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledReportsOption"\r\n                        data-dojo-attach-point\x3d"disabledReportsOption"\x3e\r\n                    \x3clabel for\x3d"disabledReportsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cspan style\x3d"float: left; margin-top: 3px;"\x3e${nls.selectCountry}\x3c/span\x3e\r\n                \x3cdiv style\x3d"float:left; margin-left: 5px;" data-dojo-attach-point\x3d"countryDropDownContainerReports"\x3e\x3c/div\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                \x3cdiv\x3e${nls.defineWhichReports}\x3c/div\x3e\r\n                \x3cdiv style\x3d"height: 40px;" data-dojo-attach-point\x3d"reportTreeGridContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"ringsContentPane" title\x3d"${nls.rings}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.radius}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 1"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 3"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"ringsBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"ringsBufferUnits"\x3e\r\n                    \x3coption value\x3d"esriMiles" selected\x3d"selected"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"ringValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledRingsOption"\r\n                        data-dojo-attach-point\x3d"disabledRingsOption"\x3e\r\n                    \x3clabel for\x3d"disabledRingsOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"driveTimeContentPane" title\x3d"${nls.driveTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"driveTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"driveTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"driveTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"disabledDriveTimeOption"\r\n                        id\x3d"disabledDriveTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledDriveTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"walkTimeContentPane" title\x3d"${nls.walkTime}"\x3e\r\n            \x3cdiv style\x3d"margin-top: 15px; margin-left: 15px;"\x3e\r\n                \x3cspan\x3e${nls.defaultValues}\x3c/span\x3e\r\n                \x3cbr\x3e\r\n                \x3cbr\x3e\r\n                ${nls.time}\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 5"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii1"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 10"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii2"\x3e\x3c/div\x3e\r\n                \x3cdiv data-dojo-type\x3d"dijit/form/TextBox" style\x3d"width: 50px;" data-dojo-props\x3d"value: 15"\r\n                    data-dojo-attach-point\x3d"walkTimeBufferRadii3"\x3e\x3c/div\x3e\r\n                \x3cselect data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"walkTimeBufferUnits"\x3e\r\n                    \x3coption value\x3d"Minutes" selected\x3d"selected"\x3e${nls.minutes}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n                    \x3coption value\x3d"esriKilometers"\x3e${nls.km}\x3c/option\x3e\r\n                \x3c/select\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"walkTimeValidationErrorMessage" class\x3d"validationErrorMessage hidden"\x3e\x3c/div\x3e\r\n                \x3cbr /\x3e\r\n                \x3cbr /\x3e\r\n                \x3cdiv style\x3d"margin-top: 10px"\x3e\r\n                    \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" id\x3d"disabledWalkTimeOption"\r\n                        data-dojo-attach-point\x3d"disabledWalkTimeOption"\x3e\r\n                    \x3clabel for\x3d"disabledWalkTimeOption"\x3e${nls.disable}\x3c/label\x3e\r\n                \x3c/div\x3e\r\n            \x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/BusinessAnalyst/setting/css/style.css":'.widget-setting-page .esriMapsAnalystXSelectableTreeGrid.dgrid {position: absolute; top: 33px; right: 0; left: 0px; bottom: 0; height: auto; width: auto;}.jimu-widget-business-analyst-setting .tabs {font-family: "Avenir Light"; color: #000000; height: 100%;} .jimu-widget-business-analyst-setting .tabs .tab-description {margin: 10px 0;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab{background-color: #fff; border-top: 0; border-left: 0; border-right: 0; border-bottom: 1px solid #dedede; color:#898989; font-family: "Avenir Medium"; font-size: 14px;} .jimu-widget-business-analyst-setting .jimu-tab\x3e.control\x3e.tab.jimu-state-selected {border-bottom: 3px solid #24b5cc; font-family: "Avenir Heavy"; color: #000000;} .jimu-widget-business-analyst-setting .tabs .titles {font-weight: bold; font-family: "Avenir Medium"; font-size: 14px; margin: 20px 0 10px 0;} .jimu-widget-business-analyst-setting .tabs .hide{display: none;} .jimu-widget-business-analyst-setting .tabs .indent{margin-left: 20px; margin-top: 10px;} .jimu-widget-business-analyst-setting .tabs .unit-item{margin: 15px 5px 5px 5px; line-height: 18px; height: 18px; vertical-align: middle;} .jimu-widget-business-analyst-setting .tabs .clearFix {*overflow: hidden; *zoom: 1;} .jimu-widget-business-analyst-setting .tabs .clearFix:after {display: table; content: ""; width: 0; clear: both;} .jimu-widget-business-analyst-setting .tabs .view{height: 100%; overflow-y: auto;} .jimu-widget-business-analyst-setting .tabs .jimu-tab\x3e.jimu-viewstack{padding-bottom: 30px;} .jimu-widget-business-analyst-setting .validationErrorMessage {color: #FF0000; margin-top: 10px;} .jimu-widget-business-analyst-setting .validationErrorMessage.hidden {display: none;} .jimu-widget-business-analyst-setting .invalidValue {outline: 3px solid #FF0000;}',
"*now":function(l){l(['dojo/i18n!*preload*widgets/BusinessAnalyst/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/on jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin esri/dijit/geoenrichment/SelectableTree ../esriAnalystX/widgets/SelectableTreeGrid/SelectableTreeGrid ../utils/GEUtil ../utils/ReportUtil ../utils/ValidationUtil jimu/dijit/formSelect jimu/dijit/TabContainer dijit/form/CheckBox dijit/layout/ContentPane".split(" "),function(l,g,m,d,b,e,c,h,a,f,n,k,v){return g([b,e],{baseClass:"jimu-widget-business-analyst-setting",selectedCountryID:"",
postCreate:function(){this.inherited(arguments);this.tab=new v({tabs:[{title:this.nls.infographics,content:this.infographicsContentPane},{title:this.nls.reports,content:this.reportsContentPane},{title:this.nls.rings,content:this.ringsContentPane},{title:this.nls.driveTime,content:this.driveTimeContentPane},{title:this.nls.walkTime,content:this.walkTimeContentPane}],selected:this.nls.infographics});this.tab.placeAt(this.reportInfographicTabContainer);this.tab.startup()},startup:function(){this._started||
(this.inherited(arguments),this.setConfig(this.config))},setConfig:function(b){var c=this;a.getAvailableCountries().then(function(a){var b=[];l.forEach(a.countries,function(a){b.push({label:a.name,value:a.id,selected:a.id==c.config.defaultCountryID?"selected":""})});c.countryDropDownInfographics=(new k({options:b})).placeAt(c.countryDropDownContainerInfographics);c.countryDropDownInfographics.startup();c.selectedCountryID=c.countryDropDownInfographics.get("value");d(c.countryDropDownInfographics,
"change",function(){c._countryChangeInfographics()});c.countryDropDownReports=(new k({options:b})).placeAt(c.countryDropDownContainerReports);c.countryDropDownReports.startup();c.selectedCountryID=c.countryDropDownReports.get("value");d(c.countryDropDownReports,"change",function(){c._countryChangeReports()});c._loadConfigForCountry(c.selectedCountryID)});this._loadRingDTWTConfig()},getConfig:function(){if(!this._validateRingDTWT())return!1;this._setConfigForCountry(this.selectedCountryID);this._setRingDTWTConfig();
this.config.defaultCountryID=this.selectedCountryID;return this.config},_countryChangeInfographics:function(){this.countryDropDownReports.get("value")!=this.countryDropDownInfographics.get("value")&&(this.countryDropDownReports.set("value",this.countryDropDownInfographics.get("value")),this._countryChange())},_countryChangeReports:function(){this.countryDropDownInfographics.get("value")!=this.countryDropDownReports.get("value")&&(this.countryDropDownInfographics.set("value",this.countryDropDownReports.get("value")),
this._countryChange())},_countryChange:function(){this._setConfigForCountry(this.selectedCountryID);this.selectedCountryID=this.countryDropDownInfographics.get("value");this._loadConfigForCountry(this.selectedCountryID)},_setConfigForCountry:function(a){var b=null;l.forEach(this.config.countryConfig,function(c){c.countryID==a&&(b=c)});b||(b={countryID:a,allowEsriReports:!0,allowEsriInfographics:!0,allowMyReports:!0,allowMyInfographics:!0,allowSharedReports:!0,allowSharedInfographics:!0,disabledReports:[],
disabledInfographics:[]});b.allowEsriInfographics=0<this.infographicsTreeGrid.tree.data[0].leafCount?0!=this.infographicsTreeGrid.tree.data[0].selectCount:!0;b.allowMyInfographics=0<this.infographicsTreeGrid.tree.data[1].leafCount?0!=this.infographicsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedInfographics=0<this.infographicsTreeGrid.tree.data[2].leafCount?0!=this.infographicsTreeGrid.tree.data[2].selectCount:!0;var c=this.infographicsTreeGrid.tree.data[0].children.concat(this.infographicsTreeGrid.tree.data[1].children).concat(this.infographicsTreeGrid.tree.data[2].children);
b.disabledInfographics=this._getDisabledReports(c);b.allowEsriReports=0<this.reportsTreeGrid.tree.data[0].leafCount?0!=this.reportsTreeGrid.tree.data[0].selectCount:!0;b.allowMyReports=0<this.reportsTreeGrid.tree.data[1].leafCount?0!=this.reportsTreeGrid.tree.data[1].selectCount:!0;b.allowSharedReports=0<this.reportsTreeGrid.tree.data[2].leafCount?0!=this.reportsTreeGrid.tree.data[2].selectCount:!0;c=this.reportsTreeGrid.tree.data[0].children.concat(this.reportsTreeGrid.tree.data[1].children).concat(this.reportsTreeGrid.tree.data[2].children);
b.disabledReports=this._getDisabledReports(c);var d=-1;l.forEach(this.config.countryConfig,function(b,c){b.countryID==a&&(d=c)});-1!=d?this.config.countryConfig[d]=b:this.config.countryConfig.push(b)},_loadConfigForCountry:function(a){var b=this;f.getAvailableInfographicReports(a).then(function(d){l.forEach(d,function(a){l.forEach(a.children,function(a){a.selected=!0})});b.infographicsTreeGrid||(b.infographicsTreeGrid=new h({tree:new c(d),showHeader:!1},b.infographicTreeGridContainer));var e=-1;l.forEach(b.config.countryConfig,
function(b,c){b.countryID==a&&(e=c)});-1!=e&&l.forEach(b.config.countryConfig[e].disabledInfographics,function(a){l.forEach(d,function(b){l.forEach(b.children,function(b){a==b.value&&(b.selected=!1)})})});b.infographicsTreeGrid.tree.clear();b.infographicsTreeGrid.tree.addNodes(d)});f.getAvailableClassicReports(a).then(function(d){l.forEach(d,function(a){l.forEach(a.children,function(a){a.selected=!0})});b.reportsTreeGrid||(b.reportsTreeGrid=new h({tree:new c(d),showHeader:!1},b.reportTreeGridContainer));
var e=-1;l.forEach(b.config.countryConfig,function(b,c){b.countryID==a&&(e=c)});-1!=e&&l.forEach(b.config.countryConfig[e].disabledReports,function(a){l.forEach(d,function(c){l.forEach(c.children,function(c){a==b._getClassicReportId(c)&&(c.selected=!1)})})});b.reportsTreeGrid.tree.clear();b.reportsTreeGrid.tree.addNodes(d)})},_getClassicReportId:function(a){return a.value&&a.value.itemid?a.value.itemid:a.value},_getDisabledReports:function(a){var b=[];l.forEach(a,function(a){a.selected||(a.value&&
a.value.itemid?b.push(a.value.itemid):b.push(a.value))});return b},_setRingDTWTConfig:function(){this.config.ringDefaults=this._getRadii(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3);this.config.driveTimeDefaults=this._getRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3);this.config.walkTimeDefaults=this._getRadii(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3);this.config.ringUnitDefault=this.ringsBufferUnits.get("value");
this.config.driveTimeUnitDefault=this.driveTimeBufferUnits.get("value");this.config.walkTimeUnitDefault=this.walkTimeBufferUnits.get("value");this.config.ringDisabled=this.disabledRingsOption.checked;this.config.driveTimeDisabled=this.disabledDriveTimeOption.checked;this.config.walkTimeDisabled=this.disabledWalkTimeOption.checked;this.config.infographicsDisabled=this.disabledInfographicsOption.checked;this.config.reportsDisabled=this.disabledReportsOption.checked},_loadRingDTWTConfig:function(){this._setRadii(this.ringsBufferRadii1,
this.ringsBufferRadii2,this.ringsBufferRadii3,this.config.ringDefaults);this.ringsBufferUnits.set("value",this.config.ringUnitDefault);this.disabledRingsOption.setChecked(this.config.ringDisabled);this._setRadii(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,this.config.driveTimeDefaults);this.driveTimeBufferUnits.set("value",this.config.driveTimeUnitDefault);this.disabledDriveTimeOption.setChecked(this.config.driveTimeDisabled);this._setRadii(this.walkTimeBufferRadii1,
this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.config.walkTimeDefaults);this.walkTimeBufferUnits.set("value",this.config.walkTimeUnitDefault);this.disabledWalkTimeOption.setChecked(this.config.walkTimeDisabled);this.disabledInfographicsOption.setChecked(this.config.infographicsDisabled);this.disabledReportsOption.setChecked(this.config.reportsDisabled)},_getRadii:function(a,b,c){a=a.get("value");b=b.get("value");c=c.get("value");var d=[];""!=a&&d.push(a);""!=b&&d.push(b);""!=c&&d.push(c);
return d},_setRadii:function(a,b,c,d){0<d.length?a.set("value",d[0]):a.set("value","");1<d.length?b.set("value",d[1]):b.set("value","");2<d.length?c.set("value",d[2]):c.set("value","")},_validateRingDTWT:function(){var a=!0,b=!0,c=!1,b=a=n.validateInvalidValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,this.ringValidationErrorMessage,this.nls.thisEntryIsNotValid);a||(this.tab.selectTab(this.nls.rings),c=!0);a=n.validateInvalidValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,
this.driveTimeBufferRadii3,this.driveTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);b=b&&a;a||c||(this.tab.selectTab(this.nls.driveTime),c=!0);a=n.validateInvalidValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,this.walkTimeValidationErrorMessage,this.nls.thisEntryIsNotValid);b=b&&a;a||c||(this.tab.selectTab(this.nls.walkTime),c=!0);if(!b)return b;tabChange=!1;b=a=n.validateMinMaxValues(this.ringsBufferRadii1,this.ringsBufferRadii2,this.ringsBufferRadii3,
n.MIN_RINGS_VALUE,n.MAX_RINGS_VALUE,this.ringValidationErrorMessage,this.nls.invalidValueRing);a||(this.tab.selectTab(this.nls.rings),c=!0);a=n.validateMinMaxValues(this.driveTimeBufferRadii1,this.driveTimeBufferRadii2,this.driveTimeBufferRadii3,n.MIN_DTWT_VALUE,n.MAX_DTWT_VALUE,this.driveTimeValidationErrorMessage,this.nls.invalidValueDTWT);b=b&&a;a||c||(this.tab.selectTab(this.nls.driveTime),c=!0);a=n.validateMinMaxValues(this.walkTimeBufferRadii1,this.walkTimeBufferRadii2,this.walkTimeBufferRadii3,
n.MIN_DTWT_VALUE,n.MAX_DTWT_VALUE,this.walkTimeValidationErrorMessage,this.nls.invalidValueDTWT);b=b&&a;a||c||(this.tab.selectTab(this.nls.walkTime),c=!0);return b}})});