// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
define(["dojo/aspect","dojo/dom-class","dojo/query","../../utils/ArrayUtil"],function(f,g,l,k){function m(a,b,c){if(void 0===c){var d=a._rowIdToObject[b.id];d&&(c=(a=a.store)&&a.isOdd&&a.isOdd(d))}0!==c&&1!==c||g.replace(b,n[c],n[1-c])}function p(a,b,c){var d=a.store;if(d&&d.updateExpand){c=d.updateExpand(b.data,c,!0,a.getSortingFunction());for(var e in c)b=a.row(d.get(e)),b.element&&m(a,b.element,c[e])}}var q=["ui-icon-triangle-1-e","ui-icon-triangle-1-se"],n=["dgrid-row-even","dgrid-row-odd"];return{createExpando:function(a){g.add(a,
"dgrid-expando-icon ui-icon ui-icon-triangle-1-e esriMapsAnalystXClickable");return{expando:a,update:function(b){b=b?1:0;g.replace(a,q[b],q[1-b])}}},oddEvenFix:function(a){a.expand&&(a.getSortingFunction=function(){var a=this.get("sort");return a&&a.length?k.getSorting(a):null},f.after(a,"insertRow",function(b){m(a,b);return b}),f.before(a,"refresh",function(){var b=a.store;b&&b.updateExpandedNodes&&b.updateExpandedNodes(a._expanded,a.getSortingFunction())}),f.around(a,"expand",function(b){return function(c,
d){var e=c.element?c:a.row(c);void 0===d&&(d=!a._expanded[e.id]);!0===d&&p(a,e,!0);var f=b.apply(this,arguments);!1===d&&p(a,e,!1);return f}}),f.around(a,"adjustRowIndices",function(b){return function(){var c=a.store;c&&c.updateExpandedNodes&&c.updateExpand&&c.isOdd||b.apply(this,arguments)}}))},makeContentNeverGoUnderScroll:function(a){function b(){var b=a.headerNode.firstChild,d=a.contentNode;d&&b&&b.offsetWidth!==d.offsetWidth&&(d.style.width="",b.style.width="",b.style.width=d.offsetWidth+"px")}
f.after(a,"resize",b);f.after(a,"refresh",b);f.after(a,"expand",function(a){setTimeout(b,100);setTimeout(b,300);return a})},inlineSortArrow:function(a,b,c){b=k.arrayToObject(k.listToArray(b));f.after(a,"updateSortArrow",function(d,e){if((e=d[0]&&d[0].attribute)&&b[e]){var f=(e=a._sortNode||a._findSortArrowParent(e))&&l(".dgrid-sort-arrow",e)[0];d=d[0].descending;if(f){f.remove();g.remove(e,"dgrid-sort-down dgrid-sort-up");var h=c?l(c,e)[0]:e.lastChild.append?e.lastChild:e;h.append||(h=e);g.add(h,
d?"dgrid-sort-down":"dgrid-sort-up");h.append(f)}}},!0)}}});